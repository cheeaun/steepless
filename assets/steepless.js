(()=>{var pe=Object.create;var D=Object.defineProperty;var he=Object.getOwnPropertyDescriptor;var de=Object.getOwnPropertyNames;var ce=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty;var ve=e=>D(e,"__esModule",{value:!0});var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ge=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of de(t))!fe.call(e,i)&&(n||i!=="default")&&D(e,i,{get:()=>t[i],enumerable:!(o=he(t,i))||o.enumerable});return e},me=(e,t)=>ge(ve(D(e!=null?pe(ce(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var H=P((je,F)=>{"use strict";var A=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;function Se(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Ce(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}F.exports=Ce()?Object.assign:function(e,t){for(var n,o=Se(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)ye.call(n,a)&&(o[a]=n[a]);if(A){i=A(n);for(var l=0;l<i.length;l++)Me.call(n,i[l])&&(o[i[l]]=n[i[l]])}}return o}});var re=P(u=>{"use strict";var U=H(),M=60103,q=60106;u.Fragment=60107;u.StrictMode=60108;u.Profiler=60114;var W=60109,V=60110,z=60112;u.Suspense=60113;var K=60115,G=60116;typeof Symbol=="function"&&Symbol.for&&(f=Symbol.for,M=f("react.element"),q=f("react.portal"),u.Fragment=f("react.fragment"),u.StrictMode=f("react.strict_mode"),u.Profiler=f("react.profiler"),W=f("react.provider"),V=f("react.context"),z=f("react.forward_ref"),u.Suspense=f("react.suspense"),K=f("react.memo"),G=f("react.lazy"));var f,J=typeof Symbol=="function"&&Symbol.iterator;function we(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}function w(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y={};function S(e,t,n){this.props=e,this.context=t,this.refs=Y,this.updater=n||Q}S.prototype.isReactComponent={};S.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(w(85));this.updater.enqueueSetState(this,e,t,"setState")};S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function X(){}X.prototype=S.prototype;function N(e,t,n){this.props=e,this.context=t,this.refs=Y,this.updater=n||Q}var I=N.prototype=new X;I.constructor=N;U(I,S.prototype);I.isPureReactComponent=!0;var j={current:null},Z=Object.prototype.hasOwnProperty,R={key:!0,ref:!0,__self:!0,__source:!0};function ee(e,t,n){var o,i={},s=null,a=null;if(t!=null)for(o in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Z.call(t,o)&&!R.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var p=Array(l),h=0;h<l;h++)p[h]=arguments[h+2];i.children=p}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)i[o]===void 0&&(i[o]=l[o]);return{$$typeof:M,type:e,key:s,ref:a,props:i,_owner:j.current}}function ke(e,t){return{$$typeof:M,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $(e){return typeof e=="object"&&e!==null&&e.$$typeof===M}function be(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var te=/\/+/g;function B(e,t){return typeof e=="object"&&e!==null&&e.key!=null?be(""+e.key):t.toString(36)}function k(e,t,n,o,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case M:case q:a=!0}}if(a)return a=e,i=i(a),e=o===""?"."+B(a,0):o,Array.isArray(i)?(n="",e!=null&&(n=e.replace(te,"$&/")+"/"),k(i,t,n,"",function(h){return h})):i!=null&&($(i)&&(i=ke(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(te,"$&/")+"/")+e)),t.push(i)),1;if(a=0,o=o===""?".":o+":",Array.isArray(e))for(var l=0;l<e.length;l++){s=e[l];var p=o+B(s,l);a+=k(s,t,n,p,i)}else if(p=we(e),typeof p=="function")for(e=p.call(e),l=0;!(s=e.next()).done;)s=s.value,p=o+B(s,l++),a+=k(s,t,n,p,i);else if(s==="object")throw t=""+e,Error(w(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function b(e,t,n){if(e==null)return e;var o=[],i=0;return k(e,o,"","",function(s){return t.call(n,s,i++)}),o}function Ee(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var ne={current:null};function g(){var e=ne.current;if(e===null)throw Error(w(321));return e}var Oe={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:U};u.Children={map:b,forEach:function(e,t,n){b(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return b(e,function(){t++}),t},toArray:function(e){return b(e,function(t){return t})||[]},only:function(e){if(!$(e))throw Error(w(143));return e}};u.Component=S;u.PureComponent=N;u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oe;u.cloneElement=function(e,t,n){if(e==null)throw Error(w(267,e));var o=U({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=j.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(p in t)Z.call(t,p)&&!R.hasOwnProperty(p)&&(o[p]=t[p]===void 0&&l!==void 0?l[p]:t[p])}var p=arguments.length-2;if(p===1)o.children=n;else if(1<p){l=Array(p);for(var h=0;h<p;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:M,type:e.type,key:i,ref:s,props:o,_owner:a}};u.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:V,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:W,_context:e},e.Consumer=e};u.createElement=ee;u.createFactory=function(e){var t=ee.bind(null,e);return t.type=e,t};u.createRef=function(){return{current:null}};u.forwardRef=function(e){return{$$typeof:z,render:e}};u.isValidElement=$;u.lazy=function(e){return{$$typeof:G,_payload:{_status:-1,_result:e},_init:Ee}};u.memo=function(e,t){return{$$typeof:K,type:e,compare:t===void 0?null:t}};u.useCallback=function(e,t){return g().useCallback(e,t)};u.useContext=function(e,t){return g().useContext(e,t)};u.useDebugValue=function(){};u.useEffect=function(e,t){return g().useEffect(e,t)};u.useImperativeHandle=function(e,t,n){return g().useImperativeHandle(e,t,n)};u.useLayoutEffect=function(e,t){return g().useLayoutEffect(e,t)};u.useMemo=function(e,t){return g().useMemo(e,t)};u.useReducer=function(e,t,n){return g().useReducer(e,t,n)};u.useRef=function(e){return g().useRef(e)};u.useState=function(e){return g().useState(e)};u.version="17.0.2"});var oe=P((Be,ie)=>{"use strict";ie.exports=re()});var r=me(oe()),d={directionsService:new google.maps.DirectionsService,directionsRenderer:new google.maps.DirectionsRenderer,elevationService:new google.maps.ElevationService,longestDistance:0,highestElevation:0,lowestElevation:1/0,chartWidth:400,chartBarWidth:2},_e=r.default.createClass({getInitialState:function(){return{start:"",end:"",routes:null,distanceUnit:localStorage["steepless:distanceUnit"]||"km",heightUnit:localStorage["steepless:heightUnit"]||"m",travelMode:"walking"}},componentDidMount:function(){this.hashChange();var e=this;window.onhashchange=function(){e.hashChange()}},componentDidUpdate:function(){localStorage["steepless:distanceUnit"]=this.state.distanceUnit,localStorage["steepless:heightUnit"]=this.state.heightUnit},hashChange:function(){var e=location.hash.slice(1);if(!!e){var t=e.split("/"),n=decodeURIComponent(t[0]),o=decodeURIComponent(t[1]),i=decodeURIComponent(t[2]);this.setState({travelMode:n,start:o,end:i}),this.getRoutes()}},getRoutes:function(){var e=this,t=this.state;d.directionsService.route({origin:t.start,destination:t.end,travelMode:google.maps.TravelMode[this.state.travelMode.toUpperCase()],provideRouteAlternatives:!0,unitSystem:google.maps.UnitSystem.METRIC},function(n,o){if(o==google.maps.DirectionsStatus.OK){var i=n.routes,s=0;i.forEach(function(a){var l=a.legs[0].distance.value;l>s&&(s=l)}),d.longestDistance=s,e.setState({routes:i.map(function(a,l){return{route:a,selected:l==0}})}),d.directionsRenderer.setDirections(n),e.getElevations()}else e.setState({routes:[]})})},getElevations:function(){var e=this,t=this.state.routes;let n=t.map(o=>new Promise((i,s)=>{var a=o.route,l=a.overview_path,p=a.legs[0].distance.value,h=Math.round(p/d.longestDistance*(d.chartWidth/d.chartBarWidth));d.elevationService.getElevationAlongPath({path:l,samples:h},function(m,v){v==google.maps.ElevationStatus.OK?i({data:o,elevations:m}):s(v)})}));Promise.all(n).then(function(o){var i=0,s=1/0;o.forEach(function(a,l){var p=a.elevations,h=p[0].elevation,m=0,v=0;p.forEach(function(y){var c=y.elevation;c>h&&(m+=c-h),c<h&&(v+=h-c),h=c,c>i&&(i=c),c<s&&(s=c)}),a.data.stats={rise:m,drop:v},a.data.elevations=p}),d.highestElevation=i,d.lowestElevation=s,e.setState({routes:t})}).catch(function(o){console.log(o)})},handleRouteClick:function(e){this.state.routes.forEach(function(t,n){t.selected=e==n}),this.setState(this.state),d.directionsRenderer.setRouteIndex(e)},handleUnitChange:function(e){this.setState(e)},handleTravelModeChange:function(e){this.setState({travelMode:e})},render:function(){var e={distance:this.state.distanceUnit,height:this.state.heightUnit},t=this.state.travelMode;return r.default.createElement("div",null,r.default.createElement(E,null),r.default.createElement("div",{id:"sidebar"},r.default.createElement("header",null,r.default.createElement("h1",null,r.default.createElement(C,{type:"mountains",width:"24",height:"24"})," Steepless")),r.default.createElement(Pe,{start:this.state.start,end:this.state.end,units:e,travelMode:t,onUnitChange:this.handleUnitChange,onTravelModeChange:this.handleTravelModeChange}),r.default.createElement(Ue,{data:this.state.routes,travelMode:t,units:e,onRouteClick:this.handleRouteClick})))}}),C=r.default.createClass({render:function(){var e=this.props.type,t=this.props.title;return r.default.createElement("svg",{title:t,className:"icon",dangerouslySetInnerHTML:{__html:'<use xlink:href="assets/icons.svg#icon-'+e+'"></use>'},width:this.props.width,height:this.props.height})}}),E=r.default.createClass({getDefaultProps:function(){return{map:{center:new google.maps.LatLng(37.7577,-122.4376),zoom:12,disableDefaultUI:!0,mapId:"4e570dd5e962cb58"}}},statics:{pinpointMarker:new google.maps.Marker({visible:!1,clickable:!1,zIndex:1e3}),showPinpointMarker:function(e){this.pinpointMarker.setPosition(e),this.pinpointMarker.setVisible(!0)},hidePinpointMarker:function(){this.pinpointMarker.setVisible(!1)}},componentDidMount:function(){var e=this.getDOMNode(),t=new google.maps.Map(e,this.props.map);E.pinpointMarker.setMap(t),d.directionsRenderer.setMap(t)},render:function(){return r.default.createElement("div",{id:"map-canvas"})}}),De=r.default.createClass({handleBarMouseEnter:function(e){this.props.onBarMouseEnter(e)},handleBarMouseLeave:function(){this.props.onBarMouseLeave()},render:function(){var e=this,t=this.props,n={width:t.width,height:0},o="";return t.data&&(o=t.data.map(function(i,s){var a={borderBottomWidth:t.height*i.value/t.domain[1]},l=s+"-"+i.value;return r.default.createElement("div",{style:a,key:l,onMouseEnter:e.handleBarMouseEnter.bind(e,s),onMouseLeave:e.handleBarMouseLeave},r.default.createElement("span",null,i.title))}),n.height=t.height),r.default.createElement("div",{className:"chart",style:n},o)}}),Pe=r.default.createClass({updateLocationHash:function(e,t,n){e||(e=this.props.travelMode),t||(t=this.props.start),n||(n=this.props.end),!(!t||!n)&&(location.hash=e+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(n))},handleSubmit:function(){var e=this.refs.travelMode.getDOMNode().value,t=this.refs.start.getDOMNode().value.trim(),n=this.refs.end.getDOMNode().value.trim();this.updateLocationHash(e,t,n)},componentDidMount:function(){var e=this.refs.start.getDOMNode(),t=this.refs.end.getDOMNode(),n=e.value.trim(),o=t.value.trim();n&&o&&(this.props.start&&(e.value=this.props.start),this.props.end&&(t.value=this.props.end)),new google.maps.places.Autocomplete(e),new google.maps.places.Autocomplete(t)},componentWillReceiveProps:function(){this.props.travelMode&&(this.refs.travelMode.getDOMNode().value=this.props.travelMode),this.props.start&&(this.refs.start.getDOMNode().value=this.props.start),this.props.end&&(this.refs.end.getDOMNode().value=this.props.end)},handleTravelModeChange:function(){var e=this.refs.travelMode.getDOMNode().value;this.updateLocationHash(e)},handleFlip:function(e){e.preventDefault();var t=this.refs.start.getDOMNode().value.trim(),n=this.refs.end.getDOMNode().value.trim();this.updateLocationHash(null,n,t)},handleDistanceChange:function(){var e=this.refs.distanceSelect.getDOMNode().value;this.props.onUnitChange({distanceUnit:e})},handleHeightChange:function(){var e=this.refs.heightSelect.getDOMNode().value;this.props.onUnitChange({heightUnit:e})},render:function(){var e=this.props.units;return r.default.createElement("form",{id:"directions-form",onSubmit:this.handleSubmit},r.default.createElement("div",{className:"field-section"},r.default.createElement("label",null,r.default.createElement("select",{ref:"travelMode",onChange:this.handleTravelModeChange},r.default.createElement("option",{value:"walking"},"Walking"),r.default.createElement("option",{value:"bicycling"},"Bicycling"),r.default.createElement("option",{value:"driving"},"Driving"))," ","from"),r.default.createElement("input",{ref:"start",id:"directions-start",placeholder:"Start",required:!0})),r.default.createElement("a",{href:"#",id:"flip-direction",onClick:this.handleFlip,title:"Flip origin and destination",tabIndex:"-1"},r.default.createElement(C,{type:"arrow-right",width:"14",height:"14"})),r.default.createElement("div",{className:"field-section"},r.default.createElement("label",{htmlFor:"directions-end"},"To"),r.default.createElement("input",{ref:"end",id:"directions-end",placeholder:"Destination",required:!0})),r.default.createElement("div",{className:"form-footer"},r.default.createElement("div",{className:"options"},r.default.createElement(C,{type:"widget",width:"20",height:"20",title:"Settings"}),r.default.createElement("span",null,r.default.createElement("label",null,"Distance\xA0",r.default.createElement("select",{ref:"distanceSelect",value:e.distance,onChange:this.handleDistanceChange},r.default.createElement("option",{value:"km"},"km"),r.default.createElement("option",{value:"miles"},"miles"))),"\xA0",r.default.createElement("label",null,"Height\xA0",r.default.createElement("select",{ref:"heightSelect",value:e.height,onChange:this.handleHeightChange},r.default.createElement("option",{value:"m"},"m"),r.default.createElement("option",{value:"ft"},"ft"))))),r.default.createElement("button",null,"Go")))}}),Ue=r.default.createClass({handleClick:function(e){this.props.onRouteClick(e)},handlePinpoint:function(e){this.props.onSetPinpoint(e)},render:function(){var e=this,t=this.props.data;if(t&&t.length){var n=this.props.data.map(function(o,i){var s=i+""+o.route.bounds.toString();return r.default.createElement("li",{key:s,className:o.selected?"selected":"",onClick:e.handleClick.bind(e,i)},r.default.createElement(Ne,{data:o,units:e.props.units,travelMode:e.props.travelMode,onSetPinpoint:e.handlePinpoint}))});return r.default.createElement("div",{id:"routes-container"},r.default.createElement("ul",{id:"routes-list"},n))}else return t?r.default.createElement("div",{id:"routes-container"},r.default.createElement("p",null,"Oops, there are no routes found.")):r.default.createElement("div",{id:"routes-container"},r.default.createElement("p",null,"Begin by entering the Start and Destination locations above."),r.default.createElement("p",null,"Try an example:"," ",r.default.createElement("a",{href:"#walking/Chinatown, SF/Twin Peaks, SF"},"Walking from Chinatown to Twin Peaks")))}}),Ne=r.default.createClass({handleBarHover:function(e){if(e){var t=this.props.data.elevations[e];E.showPinpointMarker(t.location)}else E.hidePinpointMarker()},iconMap:{walking:"pedestrian",bicycling:"bicycle",driving:"car-side"},render:function(){var e=this.props.data,t=this.props.units,n=e.route,o=n.legs[0],O=o.distance.value,i=Math.ceil(O/d.longestDistance*d.chartWidth),s={width:i},a=e.stats,l=[0,d.highestElevation],p=this.iconMap[this.props.travelMode],h=Math.round((d.highestElevation-d.lowestElevation)/2),m=null,v=null,y=t.height;if(a){var c=a.rise,L=a.drop;m=Math.round(y=="m"?c:c*3.28084)+" "+y,v=Math.round(y=="m"?L:L*3.28084)+" "+y}var T=t.distance,x=o.distance.value,O=(T=="km"?x/1e3:x*621371e-9).toFixed(2)+" "+T,se=m?r.default.createElement("span",null,r.default.createElement(C,{type:"arrow-graph-up-right",width:"14",height:"14",title:"Rise"})," ",m):"",ae=v?r.default.createElement("span",null,r.default.createElement(C,{type:"arrow-graph-down-right",width:"14",height:"14",title:"Drop"})," ",v):"",le=e.elevations?e.elevations.map(function(ue){var _=ue.elevation;return{value:_,title:Math.round(y=="m"?_:_*3.28084)+" "+y}}):null;return r.default.createElement("a",null,r.default.createElement("div",{className:"heading"},r.default.createElement(C,{type:p,width:"24",height:"24",title:p})," ","via ",n.summary),r.default.createElement(De,{data:le,domain:l,width:i,height:h,onBarMouseEnter:this.handleBarHover,onBarMouseLeave:this.handleBarHover}),r.default.createElement("div",{className:"stats"},se,"\xA0\xA0\xA0",ae),r.default.createElement("div",{className:"metadata"},o.duration.text,"\xA0\xA0\xA0",O))}});r.default.renderComponent(r.default.createElement(_e,null),document.getElementById("app"));})();
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
//# sourceMappingURL=steepless.js.map
