(()=>{var Xw=Object.create;var nl=Object.defineProperty;var qw=Object.getOwnPropertyDescriptor;var Zw=Object.getOwnPropertyNames;var Kw=Object.getPrototypeOf,Qw=Object.prototype.hasOwnProperty;var Jw=t=>nl(t,"__esModule",{value:!0});var Pe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),eT=(t,e)=>{for(var r in e)nl(t,r,{get:e[r],enumerable:!0})},tT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zw(e))!Qw.call(t,i)&&(r||i!=="default")&&nl(t,i,{get:()=>e[i],enumerable:!(n=qw(e,i))||n.enumerable});return t},Qe=(t,e)=>tT(Jw(nl(t!=null?Xw(Kw(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Hf=Pe((DO,Hg)=>{"use strict";var Wg=Object.getOwnPropertySymbols,rT=Object.prototype.hasOwnProperty,nT=Object.prototype.propertyIsEnumerable;function iT(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function sT(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}Hg.exports=sT()?Object.assign:function(t,e){for(var r,n=iT(t),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)rT.call(r,o)&&(n[o]=r[o]);if(Wg){i=Wg(r);for(var a=0;a<i.length;a++)nT.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var a0=Pe(Z=>{"use strict";var Yf=Hf(),mi=60103,Yg=60106;Z.Fragment=60107;Z.StrictMode=60108;Z.Profiler=60114;var $g=60109,Xg=60110,qg=60112;Z.Suspense=60113;var Zg=60115,Kg=60116;typeof Symbol=="function"&&Symbol.for&&(vt=Symbol.for,mi=vt("react.element"),Yg=vt("react.portal"),Z.Fragment=vt("react.fragment"),Z.StrictMode=vt("react.strict_mode"),Z.Profiler=vt("react.profiler"),$g=vt("react.provider"),Xg=vt("react.context"),qg=vt("react.forward_ref"),Z.Suspense=vt("react.suspense"),Zg=vt("react.memo"),Kg=vt("react.lazy"));var vt,Qg=typeof Symbol=="function"&&Symbol.iterator;function oT(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}function Ws(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e0={};function gi(t,e,r){this.props=t,this.context=e,this.refs=e0,this.updater=r||Jg}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Ws(85));this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function t0(){}t0.prototype=gi.prototype;function $f(t,e,r){this.props=t,this.context=e,this.refs=e0,this.updater=r||Jg}var Xf=$f.prototype=new t0;Xf.constructor=$f;Yf(Xf,gi.prototype);Xf.isPureReactComponent=!0;var qf={current:null},r0=Object.prototype.hasOwnProperty,n0={key:!0,ref:!0,__self:!0,__source:!0};function i0(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)r0.call(e,n)&&!n0.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:mi,type:t,key:s,ref:o,props:i,_owner:qf.current}}function aT(t,e){return{$$typeof:mi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===mi}function lT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var s0=/\/+/g;function Kf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lT(""+t.key):e.toString(36)}function il(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mi:case Yg:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Kf(o,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(s0,"$&/")+"/"),il(i,e,r,"",function(c){return c})):i!=null&&(Zf(i)&&(i=aT(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(s0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Array.isArray(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Kf(s,a);o+=il(s,e,r,l,i)}else if(l=oT(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Kf(s,a++),o+=il(s,e,r,l,i);else if(s==="object")throw e=""+t,Error(Ws(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function sl(t,e,r){if(t==null)return t;var n=[],i=0;return il(t,n,"","",function(s){return e.call(r,s,i++)}),n}function cT(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var o0={current:null};function yr(){var t=o0.current;if(t===null)throw Error(Ws(321));return t}var uT={ReactCurrentDispatcher:o0,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:qf,IsSomeRendererActing:{current:!1},assign:Yf};Z.Children={map:sl,forEach:function(t,e,r){sl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return sl(t,function(){e++}),e},toArray:function(t){return sl(t,function(e){return e})||[]},only:function(t){if(!Zf(t))throw Error(Ws(143));return t}};Z.Component=gi;Z.PureComponent=$f;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uT;Z.cloneElement=function(t,e,r){if(t==null)throw Error(Ws(267,t));var n=Yf({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)r0.call(e,l)&&!n0.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:mi,type:t.type,key:i,ref:s,props:n,_owner:o}};Z.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:Xg,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:$g,_context:t},t.Consumer=t};Z.createElement=i0;Z.createFactory=function(t){var e=i0.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:qg,render:t}};Z.isValidElement=Zf;Z.lazy=function(t){return{$$typeof:Kg,_payload:{_status:-1,_result:t},_init:cT}};Z.memo=function(t,e){return{$$typeof:Zg,type:t,compare:e===void 0?null:e}};Z.useCallback=function(t,e){return yr().useCallback(t,e)};Z.useContext=function(t,e){return yr().useContext(t,e)};Z.useDebugValue=function(){};Z.useEffect=function(t,e){return yr().useEffect(t,e)};Z.useImperativeHandle=function(t,e,r){return yr().useImperativeHandle(t,e,r)};Z.useLayoutEffect=function(t,e){return yr().useLayoutEffect(t,e)};Z.useMemo=function(t,e){return yr().useMemo(t,e)};Z.useReducer=function(t,e,r){return yr().useReducer(t,e,r)};Z.useRef=function(t){return yr().useRef(t)};Z.useState=function(t){return yr().useState(t)};Z.version="17.0.2"});var Qf=Pe((BO,l0)=>{"use strict";l0.exports=a0()});var p0=Pe(K=>{"use strict";var vi,Hs,ol,Jf;typeof performance=="object"&&typeof performance.now=="function"?(c0=performance,K.unstable_now=function(){return c0.now()}):(eh=Date,u0=eh.now(),K.unstable_now=function(){return eh.now()-u0});var c0,eh,u0;typeof window=="undefined"||typeof MessageChannel!="function"?(yi=null,th=null,rh=function(){if(yi!==null)try{var t=K.unstable_now();yi(!0,t),yi=null}catch(e){throw setTimeout(rh,0),e}},vi=function(t){yi!==null?setTimeout(vi,0,t):(yi=t,setTimeout(rh,0))},Hs=function(t,e){th=setTimeout(t,e)},ol=function(){clearTimeout(th)},K.unstable_shouldYield=function(){return!1},Jf=K.unstable_forceFrameRate=function(){}):(f0=window.setTimeout,h0=window.clearTimeout,typeof console!="undefined"&&(d0=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof d0!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Ys=!1,$s=null,al=-1,nh=5,ih=0,K.unstable_shouldYield=function(){return K.unstable_now()>=ih},Jf=function(){},K.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nh=0<t?Math.floor(1e3/t):5},sh=new MessageChannel,ll=sh.port2,sh.port1.onmessage=function(){if($s!==null){var t=K.unstable_now();ih=t+nh;try{$s(!0,t)?ll.postMessage(null):(Ys=!1,$s=null)}catch(e){throw ll.postMessage(null),e}}else Ys=!1},vi=function(t){$s=t,Ys||(Ys=!0,ll.postMessage(null))},Hs=function(t,e){al=f0(function(){t(K.unstable_now())},e)},ol=function(){h0(al),al=-1});var yi,th,rh,f0,h0,d0,Ys,$s,al,nh,ih,sh,ll;function oh(t,e){var r=t.length;t.push(e);e:for(;;){var n=r-1>>>1,i=t[n];if(i!==void 0&&0<ul(i,e))t[n]=e,t[r]=i,r=n;else break e}}function Nt(t){return t=t[0],t===void 0?null:t}function cl(t){var e=t[0];if(e!==void 0){var r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length;n<i;){var s=2*(n+1)-1,o=t[s],a=s+1,l=t[a];if(o!==void 0&&0>ul(o,r))l!==void 0&&0>ul(l,o)?(t[n]=l,t[a]=r,n=a):(t[n]=o,t[s]=r,n=s);else if(l!==void 0&&0>ul(l,r))t[n]=l,t[a]=r,n=a;else break e}}return e}return null}function ul(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}var $t=[],Br=[],fT=1,yt=null,ke=3,fl=!1,On=!1,Xs=!1;function ah(t){for(var e=Nt(Br);e!==null;){if(e.callback===null)cl(Br);else if(e.startTime<=t)cl(Br),e.sortIndex=e.expirationTime,oh($t,e);else break;e=Nt(Br)}}function lh(t){if(Xs=!1,ah(t),!On)if(Nt($t)!==null)On=!0,vi(ch);else{var e=Nt(Br);e!==null&&Hs(lh,e.startTime-t)}}function ch(t,e){On=!1,Xs&&(Xs=!1,ol()),fl=!0;var r=ke;try{for(ah(e),yt=Nt($t);yt!==null&&(!(yt.expirationTime>e)||t&&!K.unstable_shouldYield());){var n=yt.callback;if(typeof n=="function"){yt.callback=null,ke=yt.priorityLevel;var i=n(yt.expirationTime<=e);e=K.unstable_now(),typeof i=="function"?yt.callback=i:yt===Nt($t)&&cl($t),ah(e)}else cl($t);yt=Nt($t)}if(yt!==null)var s=!0;else{var o=Nt(Br);o!==null&&Hs(lh,o.startTime-e),s=!1}return s}finally{yt=null,ke=r,fl=!1}}var hT=Jf;K.unstable_IdlePriority=5;K.unstable_ImmediatePriority=1;K.unstable_LowPriority=4;K.unstable_NormalPriority=3;K.unstable_Profiling=null;K.unstable_UserBlockingPriority=2;K.unstable_cancelCallback=function(t){t.callback=null};K.unstable_continueExecution=function(){On||fl||(On=!0,vi(ch))};K.unstable_getCurrentPriorityLevel=function(){return ke};K.unstable_getFirstCallbackNode=function(){return Nt($t)};K.unstable_next=function(t){switch(ke){case 1:case 2:case 3:var e=3;break;default:e=ke}var r=ke;ke=e;try{return t()}finally{ke=r}};K.unstable_pauseExecution=function(){};K.unstable_requestPaint=hT;K.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=ke;ke=t;try{return e()}finally{ke=r}};K.unstable_scheduleCallback=function(t,e,r){var n=K.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:fT++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,oh(Br,t),Nt($t)===null&&t===Nt(Br)&&(Xs?ol():Xs=!0,Hs(lh,r-n))):(t.sortIndex=i,oh($t,t),On||fl||(On=!0,vi(ch))),t};K.unstable_wrapCallback=function(t){var e=ke;return function(){var r=ke;ke=e;try{return t.apply(this,arguments)}finally{ke=r}}}});var g0=Pe((UO,m0)=>{"use strict";m0.exports=p0()});var ry=Pe(Mt=>{"use strict";var hl=Qf(),oe=Hf(),be=g0();function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!hl)throw Error(O(227));var v0=new Set,qs={};function Cn(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for(qs[t]=e,t=0;t<e.length;t++)v0.add(e[t])}var xr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),dT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y0=Object.prototype.hasOwnProperty,x0={},_0={};function pT(t){return y0.call(_0,t)?!0:y0.call(x0,t)?!1:dT.test(t)?_0[t]=!0:(x0[t]=!0,!1)}function mT(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gT(t,e,r,n){if(e===null||typeof e=="undefined"||mT(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ie[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ie[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ie[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ie[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ie[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ie[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ie[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ie[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ie[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function fh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,fh);Ie[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,fh);Ie[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,fh);Ie[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ie[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ie[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,r,n){var i=Ie.hasOwnProperty(e)?Ie[e]:null,s=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(gT(e,r,i,n)&&(r=null),n||i===null?pT(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Nn=hl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zs=60103,kn=60106,zr=60107,dh=60108,Ks=60114,ph=60109,mh=60110,dl=60112,Qs=60113,pl=60120,ml=60115,gh=60116,vh=60121,yh=60128,E0=60129,xh=60130,_h=60131;typeof Symbol=="function"&&Symbol.for&&(we=Symbol.for,Zs=we("react.element"),kn=we("react.portal"),zr=we("react.fragment"),dh=we("react.strict_mode"),Ks=we("react.profiler"),ph=we("react.provider"),mh=we("react.context"),dl=we("react.forward_ref"),Qs=we("react.suspense"),pl=we("react.suspense_list"),ml=we("react.memo"),gh=we("react.lazy"),vh=we("react.block"),we("react.scope"),yh=we("react.opaque.id"),E0=we("react.debug_trace_mode"),xh=we("react.offscreen"),_h=we("react.legacy_hidden"));var we,w0=typeof Symbol=="function"&&Symbol.iterator;function Js(t){return t===null||typeof t!="object"?null:(t=w0&&t[w0]||t["@@iterator"],typeof t=="function"?t:null)}var Eh;function eo(t){if(Eh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Eh=e&&e[1]||""}return`
`+Eh+t}var wh=!1;function gl(t,e){if(!t||wh)return"";wh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{wh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?eo(t):""}function vT(t){switch(t.tag){case 5:return eo(t.type);case 16:return eo("Lazy");case 13:return eo("Suspense");case 19:return eo("SuspenseList");case 0:case 2:case 15:return t=gl(t.type,!1),t;case 11:return t=gl(t.type.render,!1),t;case 22:return t=gl(t.type._render,!1),t;case 1:return t=gl(t.type,!0),t;default:return""}}function _i(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zr:return"Fragment";case kn:return"Portal";case Ks:return"Profiler";case dh:return"StrictMode";case Qs:return"Suspense";case pl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mh:return(t.displayName||"Context")+".Consumer";case ph:return(t._context.displayName||"Context")+".Provider";case dl:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case ml:return _i(t.type);case vh:return _i(t._render);case gh:e=t._payload,t=t._init;try{return _i(t(e))}catch(r){}}return null}function Ur(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function T0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yT(t){var e=T0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vl(t){t._valueTracker||(t._valueTracker=yT(t))}function M0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=T0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Th(t,e){var r=e.checked;return oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:t._wrapperState.initialChecked})}function S0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ur(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P0(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function Mh(t,e){P0(t,e);var r=Ur(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Sh(t,e.type,Ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Sh(t,e,r){(e!=="number"||yl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function xT(t){var e="";return hl.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function Ph(t,e){return t=oe({children:void 0},e),(e=xT(e.children))&&(t.children=e),t}function Ei(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ur(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function A0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(O(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(O(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ur(r)}}function L0(t,e){var r=Ur(e.value),n=Ur(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function I0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Ah={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function R0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?R0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xl,O0=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==Ah.svg||"innerHTML"in t)t.innerHTML=e;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function to(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ro={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_T=["Webkit","ms","Moz","O"];Object.keys(ro).forEach(function(t){_T.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ro[e]=ro[t]})});function C0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ro.hasOwnProperty(t)&&ro[t]?(""+e).trim():e+"px"}function N0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=C0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var ET=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ih(t,e){if(e){if(ET[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Rh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Oh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ch=null,wi=null,Ti=null;function k0(t){if(t=Eo(t)){if(typeof Ch!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Ul(e),Ch(t.stateNode,t.type,e))}}function D0(t){wi?Ti?Ti.push(t):Ti=[t]:wi=t}function F0(){if(wi){var t=wi,e=Ti;if(Ti=wi=null,k0(t),e)for(t=0;t<e.length;t++)k0(e[t])}}function Nh(t,e){return t(e)}function B0(t,e,r,n,i){return t(e,r,n,i)}function kh(){}var z0=Nh,Dn=!1,Dh=!1;function Fh(){(wi!==null||Ti!==null)&&(kh(),F0())}function wT(t,e,r){if(Dh)return t(e,r);Dh=!0;try{return z0(t,e,r)}finally{Dh=!1,Fh()}}function no(t,e){var r=t.stateNode;if(r===null)return null;var n=Ul(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(O(231,e,typeof r));return r}var Bh=!1;if(xr)try{Mi={},Object.defineProperty(Mi,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch(t){Bh=!1}var Mi;function TT(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var io=!1,_l=null,El=!1,zh=null,MT={onError:function(t){io=!0,_l=t}};function ST(t,e,r,n,i,s,o,a,l){io=!1,_l=null,TT.apply(MT,arguments)}function PT(t,e,r,n,i,s,o,a,l){if(ST.apply(this,arguments),io){if(io){var c=_l;io=!1,_l=null}else throw Error(O(198));El||(El=!0,zh=c)}}function Fn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function U0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V0(t){if(Fn(t)!==t)throw Error(O(188))}function bT(t){var e=t.alternate;if(!e){if(e=Fn(t),e===null)throw Error(O(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return V0(i),t;if(s===n)return V0(i),e;s=s.sibling}throw Error(O(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?t:e}function j0(t){if(t=bT(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function G0(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var W0,Uh,H0,Y0,Vh=!1,Xt=[],Vr=null,jr=null,Gr=null,so=new Map,oo=new Map,ao=[],$0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jh(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function X0(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":so.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(e.pointerId)}}function lo(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t=jh(e,r,n,i,s),e!==null&&(e=Eo(e),e!==null&&Uh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AT(t,e,r,n,i){switch(e){case"focusin":return Vr=lo(Vr,t,e,r,n,i),!0;case"dragenter":return jr=lo(jr,t,e,r,n,i),!0;case"mouseover":return Gr=lo(Gr,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return so.set(s,lo(so.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,oo.set(s,lo(oo.get(s)||null,t,e,r,n,i)),!0}return!1}function LT(t){var e=Bn(t.target);if(e!==null){var r=Fn(e);if(r!==null){if(e=r.tag,e===13){if(e=U0(r),e!==null){t.blockedOn=e,Y0(t.lanePriority,function(){be.unstable_runWithPriority(t.priority,function(){H0(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Xh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=Eo(r),e!==null&&Uh(e),t.blockedOn=r,!1;e.shift()}return!0}function q0(t,e,r){wl(t)&&r.delete(e)}function IT(){for(Vh=!1;0<Xt.length;){var t=Xt[0];if(t.blockedOn!==null){t=Eo(t.blockedOn),t!==null&&W0(t);break}for(var e=t.targetContainers;0<e.length;){var r=Xh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&Xt.shift()}Vr!==null&&wl(Vr)&&(Vr=null),jr!==null&&wl(jr)&&(jr=null),Gr!==null&&wl(Gr)&&(Gr=null),so.forEach(q0),oo.forEach(q0)}function co(t,e){t.blockedOn===e&&(t.blockedOn=null,Vh||(Vh=!0,be.unstable_scheduleCallback(be.unstable_NormalPriority,IT)))}function Z0(t){function e(i){return co(i,t)}if(0<Xt.length){co(Xt[0],t);for(var r=1;r<Xt.length;r++){var n=Xt[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Vr!==null&&co(Vr,t),jr!==null&&co(jr,t),Gr!==null&&co(Gr,t),so.forEach(e),oo.forEach(e),r=0;r<ao.length;r++)n=ao[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ao.length&&(r=ao[0],r.blockedOn===null);)LT(r),r.blockedOn===null&&ao.shift()}function Tl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Si={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Gh={},K0={};xr&&(K0=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function Ml(t){if(Gh[t])return Gh[t];if(!Si[t])return t;var e=Si[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in K0)return Gh[t]=e[r];return t}var Q0=Ml("animationend"),J0=Ml("animationiteration"),e1=Ml("animationstart"),t1=Ml("transitionend"),r1=new Map,Wh=new Map,RT=["abort","abort",Q0,"animationEnd",J0,"animationIteration",e1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",t1,"transitionEnd","waiting","waiting"];function Hh(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Wh.set(n,e),r1.set(n,i),Cn(i,[n])}}var OT=be.unstable_now;OT();var J=8;function Pi(t){if((1&t)!==0)return J=15,1;if((2&t)!==0)return J=14,2;if((4&t)!==0)return J=13,4;var e=24&t;return e!==0?(J=12,e):(t&32)!==0?(J=11,32):(e=192&t,e!==0?(J=10,e):(t&256)!==0?(J=9,256):(e=3584&t,e!==0?(J=8,e):(t&4096)!==0?(J=7,4096):(e=4186112&t,e!==0?(J=6,e):(e=62914560&t,e!==0?(J=5,e):t&67108864?(J=4,67108864):(t&134217728)!==0?(J=3,134217728):(e=805306368&t,e!==0?(J=2,e):(1073741824&t)!==0?(J=1,1073741824):(J=8,t))))))}function CT(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function NT(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(O(358,t))}}function uo(t,e){var r=t.pendingLanes;if(r===0)return J=0;var n=0,i=0,s=t.expiredLanes,o=t.suspendedLanes,a=t.pingedLanes;if(s!==0)n=s,i=J=15;else if(s=r&134217727,s!==0){var l=s&~o;l!==0?(n=Pi(l),i=J):(a&=s,a!==0&&(n=Pi(a),i=J))}else s=r&~o,s!==0?(n=Pi(s),i=J):a!==0&&(n=Pi(a),i=J);if(n===0)return 0;if(n=31-Wr(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&(e&o)===0){if(Pi(e),i<=J)return e;J=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Wr(e),i=1<<r,n|=t[r],e&=~i;return n}function n1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sl(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=bi(24&~e),t===0?Sl(10,e):t;case 10:return t=bi(192&~e),t===0?Sl(8,e):t;case 8:return t=bi(3584&~e),t===0&&(t=bi(4186112&~e),t===0&&(t=512)),t;case 2:return e=bi(805306368&~e),e===0&&(e=268435456),e}throw Error(O(358,t))}function bi(t){return t&-t}function Yh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Pl(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-Wr(e),t[e]=r}var Wr=Math.clz32?Math.clz32:FT,kT=Math.log,DT=Math.LN2;function FT(t){return t===0?32:31-(kT(t)/DT|0)|0}var BT=be.unstable_UserBlockingPriority,zT=be.unstable_runWithPriority,bl=!0;function UT(t,e,r,n){Dn||kh();var i=$h,s=Dn;Dn=!0;try{B0(i,t,e,r,n)}finally{(Dn=s)||Fh()}}function VT(t,e,r,n){zT(BT,$h.bind(null,t,e,r,n))}function $h(t,e,r,n){if(bl){var i;if((i=(e&4)===0)&&0<Xt.length&&-1<$0.indexOf(t))t=jh(null,t,e,r,n),Xt.push(t);else{var s=Xh(t,e,r,n);if(s===null)i&&X0(t,n);else{if(i){if(-1<$0.indexOf(t)){t=jh(s,t,e,r,n),Xt.push(t);return}if(AT(s,t,e,r,n))return;X0(t,n)}R1(t,e,n,null,r)}}}}function Xh(t,e,r,n){var i=Oh(n);if(i=Bn(i),i!==null){var s=Fn(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=U0(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return R1(t,e,n,i,r),null}var Hr=null,qh=null,Al=null;function i1(){if(Al)return Al;var t,e=qh,r=e.length,n,i="value"in Hr?Hr.value:Hr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Al=i.slice(t,1<n?1-n:void 0)}function Ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Il(){return!0}function s1(){return!1}function ot(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Il:s1,this.isPropagationStopped=s1,this}return oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zh=ot(Ai),fo=oe({},Ai,{view:0,detail:0}),jT=ot(fo),Kh,Qh,ho,Rl=oe({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ed,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ho&&(ho&&t.type==="mousemove"?(Kh=t.screenX-ho.screenX,Qh=t.screenY-ho.screenY):Qh=Kh=0,ho=t),Kh)},movementY:function(t){return"movementY"in t?t.movementY:Qh}}),o1=ot(Rl),GT=oe({},Rl,{dataTransfer:0}),WT=ot(GT),HT=oe({},fo,{relatedTarget:0}),Jh=ot(HT),YT=oe({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),$T=ot(YT),XT=oe({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qT=ot(XT),ZT=oe({},Ai,{data:0}),a1=ot(ZT),KT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JT[t])?!!e[t]:!1}function ed(){return eM}var tM=oe({},fo,{key:function(t){if(t.key){var e=KT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ed,charCode:function(t){return t.type==="keypress"?Ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rM=ot(tM),nM=oe({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l1=ot(nM),iM=oe({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ed}),sM=ot(iM),oM=oe({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),aM=ot(oM),lM=oe({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cM=ot(lM),uM=[9,13,27,32],td=xr&&"CompositionEvent"in window,po=null;xr&&"documentMode"in document&&(po=document.documentMode);var fM=xr&&"TextEvent"in window&&!po,c1=xr&&(!td||po&&8<po&&11>=po),u1=String.fromCharCode(32),f1=!1;function h1(t,e){switch(t){case"keyup":return uM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function hM(t,e){switch(t){case"compositionend":return d1(e);case"keypress":return e.which!==32?null:(f1=!0,u1);case"textInput":return t=e.data,t===u1&&f1?null:t;default:return null}}function dM(t,e){if(Li)return t==="compositionend"||!td&&h1(t,e)?(t=i1(),Al=qh=Hr=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return c1&&e.locale!=="ko"?null:e.data;default:return null}}var pM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pM[t.type]:e==="textarea"}function m1(t,e,r,n){D0(n),e=Dl(e,"onChange"),0<e.length&&(r=new Zh("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var mo=null,go=null;function mM(t){P1(t,0)}function Ol(t){var e=Ni(t);if(M0(e))return t}function gM(t,e){if(t==="change")return e}var g1=!1;xr&&(xr?(Nl="oninput"in document,Nl||(rd=document.createElement("div"),rd.setAttribute("oninput","return;"),Nl=typeof rd.oninput=="function"),Cl=Nl):Cl=!1,g1=Cl&&(!document.documentMode||9<document.documentMode));var Cl,Nl,rd;function v1(){mo&&(mo.detachEvent("onpropertychange",y1),go=mo=null)}function y1(t){if(t.propertyName==="value"&&Ol(go)){var e=[];if(m1(e,go,t,Oh(t)),t=mM,Dn)t(e);else{Dn=!0;try{Nh(t,e)}finally{Dn=!1,Fh()}}}}function vM(t,e,r){t==="focusin"?(v1(),mo=e,go=r,mo.attachEvent("onpropertychange",y1)):t==="focusout"&&v1()}function yM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ol(go)}function xM(t,e){if(t==="click")return Ol(e)}function _M(t,e){if(t==="input"||t==="change")return Ol(e)}function EM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xt=typeof Object.is=="function"?Object.is:EM,wM=Object.prototype.hasOwnProperty;function vo(t,e){if(xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!wM.call(e,r[n])||!xt(t[r[n]],e[r[n]]))return!1;return!0}function x1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _1(t,e){var r=x1(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=x1(r)}}function E1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function w1(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch(n){r=!1}if(r)t=e.contentWindow;else break;e=yl(t.document)}return e}function nd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var TM=xr&&"documentMode"in document&&11>=document.documentMode,Ii=null,id=null,yo=null,sd=!1;function T1(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sd||Ii==null||Ii!==yl(n)||(n=Ii,"selectionStart"in n&&nd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yo&&vo(yo,n)||(yo=n,n=Dl(id,"onSelect"),0<n.length&&(e=new Zh("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ii)))}Hh("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Hh("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Hh(RT,2);for(od="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kl=0;kl<od.length;kl++)Wh.set(od[kl],0);var od,kl;xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M1=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function S1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,PT(n,e,void 0,t),t.currentTarget=null}function P1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;S1(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;S1(i,a,c),s=l}}}if(El)throw t=zh,El=!1,zh=null,t}function re(t,e){var r=F1(e),n=t+"__bubble";r.has(n)||(I1(e,t,2,!1),r.add(n))}var b1="_reactListening"+Math.random().toString(36).slice(2);function A1(t){t[b1]||(t[b1]=!0,v0.forEach(function(e){M1.has(e)||L1(e,!1,t,null),L1(e,!0,t,null)}))}function L1(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=r;if(t==="selectionchange"&&r.nodeType!==9&&(s=r.ownerDocument),n!==null&&!e&&M1.has(t)){if(t!=="scroll")return;i|=2,s=n}var o=F1(s),a=t+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),I1(s,t,i,e),o.add(a))}function I1(t,e,r,n){var i=Wh.get(e);switch(i===void 0?2:i){case 0:i=UT;break;case 1:i=VT;break;default:i=$h}r=i.bind(null,e,r,t),i=void 0,!Bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function R1(t,e,r,n,i){var s=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bn(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}wT(function(){var c=s,u=Oh(r),h=[];e:{var f=r1.get(t);if(f!==void 0){var v=Zh,E=t;switch(t){case"keypress":if(Ll(r)===0)break e;case"keydown":case"keyup":v=rM;break;case"focusin":E="focus",v=Jh;break;case"focusout":E="blur",v=Jh;break;case"beforeblur":case"afterblur":v=Jh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=o1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=WT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=sM;break;case Q0:case J0:case e1:v=$T;break;case t1:v=aM;break;case"scroll":v=jT;break;case"wheel":v=cM;break;case"copy":case"cut":case"paste":v=qT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=l1}var _=(e&4)!==0,m=!_&&t==="scroll",d=_?f!==null?f+"Capture":null:f;_=[];for(var y=c,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,d!==null&&(w=no(y,d),w!=null&&_.push(_o(y,w,x)))),m)break;y=y.return}0<_.length&&(f=new v(f,E,null,r,u),h.push({event:f,listeners:_}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&(e&16)===0&&(E=r.relatedTarget||r.fromElement)&&(Bn(E)||E[Ci]))break e;if((v||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,v?(E=r.relatedTarget||r.toElement,v=c,E=E?Bn(E):null,E!==null&&(m=Fn(E),E!==m||E.tag!==5&&E.tag!==6)&&(E=null)):(v=null,E=c),v!==E)){if(_=o1,w="onMouseLeave",d="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=l1,w="onPointerLeave",d="onPointerEnter",y="pointer"),m=v==null?f:Ni(v),x=E==null?f:Ni(E),f=new _(w,y+"leave",v,r,u),f.target=m,f.relatedTarget=x,w=null,Bn(u)===c&&(_=new _(d,y+"enter",E,r,u),_.target=x,_.relatedTarget=m,w=_),m=w,v&&E)t:{for(_=v,d=E,y=0,x=_;x;x=Ri(x))y++;for(x=0,w=d;w;w=Ri(w))x++;for(;0<y-x;)_=Ri(_),y--;for(;0<x-y;)d=Ri(d),x--;for(;y--;){if(_===d||d!==null&&_===d.alternate)break t;_=Ri(_),d=Ri(d)}_=null}else _=null;v!==null&&O1(h,f,v,_,!1),E!==null&&m!==null&&O1(h,m,E,_,!0)}}e:{if(f=c?Ni(c):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var S=gM;else if(p1(f))if(g1)S=_M;else{S=yM;var M=vM}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=xM);if(S&&(S=S(t,c))){m1(h,S,r,u);break e}M&&M(t,f,c),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&Sh(f,"number",f.value)}switch(M=c?Ni(c):window,t){case"focusin":(p1(M)||M.contentEditable==="true")&&(Ii=M,id=c,yo=null);break;case"focusout":yo=id=Ii=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,T1(h,r,u);break;case"selectionchange":if(TM)break;case"keydown":case"keyup":T1(h,r,u)}var A;if(td)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Li?h1(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(c1&&r.locale!=="ko"&&(Li||b!=="onCompositionStart"?b==="onCompositionEnd"&&Li&&(A=i1()):(Hr=u,qh="value"in Hr?Hr.value:Hr.textContent,Li=!0)),M=Dl(c,b),0<M.length&&(b=new a1(b,t,null,r,u),h.push({event:b,listeners:M}),A?b.data=A:(A=d1(r),A!==null&&(b.data=A)))),(A=fM?hM(t,r):dM(t,r))&&(c=Dl(c,"onBeforeInput"),0<c.length&&(u=new a1("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=A))}P1(h,e)})}function _o(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Dl(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=no(t,r),s!=null&&n.unshift(_o(t,s,i)),s=no(t,e),s!=null&&n.push(_o(t,s,i))),t=t.return}return n}function Ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function O1(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=no(r,s),l!=null&&o.unshift(_o(r,l,a))):i||(l=no(r,s),l!=null&&o.push(_o(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}function Fl(){}var ad=null,ld=null;function C1(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function cd(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var N1=typeof setTimeout=="function"?setTimeout:void 0,MM=typeof clearTimeout=="function"?clearTimeout:void 0;function ud(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Oi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function k1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var fd=0;function SM(t){return{$$typeof:yh,toString:t,valueOf:t}}var Bl=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Bl,zl="__reactProps$"+Bl,Ci="__reactContainer$"+Bl,D1="__reactEvents$"+Bl;function Bn(t){var e=t[Yr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ci]||r[Yr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=k1(t);t!==null;){if(r=t[Yr])return r;t=k1(t)}return e}t=r,r=t.parentNode}return null}function Eo(t){return t=t[Yr]||t[Ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Ul(t){return t[zl]||null}function F1(t){var e=t[D1];return e===void 0&&(e=t[D1]=new Set),e}var hd=[],ki=-1;function $r(t){return{current:t}}function ne(t){0>ki||(t.current=hd[ki],hd[ki]=null,ki--)}function ce(t,e){ki++,hd[ki]=t.current,t.current=e}var Xr={},De=$r(Xr),Je=$r(!1),zn=Xr;function Di(t,e){var r=t.type.contextTypes;if(!r)return Xr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function et(t){return t=t.childContextTypes,t!=null}function Vl(){ne(Je),ne(De)}function B1(t,e,r){if(De.current!==Xr)throw Error(O(168));ce(De,e),ce(Je,r)}function z1(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(O(108,_i(e)||"Unknown",i));return oe({},r,n)}function jl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,zn=De.current,ce(De,t),ce(Je,Je.current),!0}function U1(t,e,r){var n=t.stateNode;if(!n)throw Error(O(169));r?(t=z1(t,e,zn),n.__reactInternalMemoizedMergedChildContext=t,ne(Je),ne(De),ce(De,t)):ne(Je),ce(Je,r)}var dd=null,Un=null,PM=be.unstable_runWithPriority,pd=be.unstable_scheduleCallback,md=be.unstable_cancelCallback,bM=be.unstable_shouldYield,V1=be.unstable_requestPaint,gd=be.unstable_now,AM=be.unstable_getCurrentPriorityLevel,Gl=be.unstable_ImmediatePriority,j1=be.unstable_UserBlockingPriority,G1=be.unstable_NormalPriority,W1=be.unstable_LowPriority,H1=be.unstable_IdlePriority,vd={},LM=V1!==void 0?V1:function(){},_r=null,Wl=null,yd=!1,Y1=gd(),Fe=1e4>Y1?gd:function(){return gd()-Y1};function Fi(){switch(AM()){case Gl:return 99;case j1:return 98;case G1:return 97;case W1:return 96;case H1:return 95;default:throw Error(O(332))}}function $1(t){switch(t){case 99:return Gl;case 98:return j1;case 97:return G1;case 96:return W1;case 95:return H1;default:throw Error(O(332))}}function Vn(t,e){return t=$1(t),PM(t,e)}function wo(t,e,r){return t=$1(t),pd(t,e,r)}function qt(){if(Wl!==null){var t=Wl;Wl=null,md(t)}X1()}function X1(){if(!yd&&_r!==null){yd=!0;var t=0;try{var e=_r;Vn(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),_r=null}catch(r){throw _r!==null&&(_r=_r.slice(t+1)),pd(Gl,qt),r}finally{yd=!1}}}var IM=Nn.ReactCurrentBatchConfig;function kt(t,e){if(t&&t.defaultProps){e=oe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Hl=$r(null),Yl=null,Bi=null,$l=null;function xd(){$l=Bi=Yl=null}function _d(t){var e=Hl.current;ne(Hl),t.type._context._currentValue=e}function q1(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function zi(t,e){Yl=t,$l=Bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Dt=!0),t.firstContext=null)}function _t(t,e){if($l!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&($l=t,e=1073741823),e={context:t,observedBits:e,next:null},Bi===null){if(Yl===null)throw Error(O(308));Bi=e,Yl.dependencies={lanes:0,firstContext:e,responders:null}}else Bi=Bi.next=e;return t._currentValue}var qr=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Z1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kr(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function K1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function To(t,e,r,n){var i=t.updateQueue;qr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;if(u!==null){u=u.updateQueue;var h=u.lastBaseUpdate;h!==o&&(h===null?u.firstBaseUpdate=c:h.next=c,u.lastBaseUpdate=l)}}if(s!==null){h=i.baseState,o=0,u=c=l=null;do{a=s.lane;var f=s.eventTime;if((n&a)===a){u!==null&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,E=s;switch(a=e,f=r,E.tag){case 1:if(v=E.payload,typeof v=="function"){h=v.call(f,h,a);break e}h=v;break e;case 3:v.flags=v.flags&-4097|64;case 0:if(v=E.payload,a=typeof v=="function"?v.call(f,h,a):v,a==null)break e;h=oe({},h,a);break e;case 2:qr=!0}}s.callback!==null&&(t.flags|=32,a=i.effects,a===null?i.effects=[s]:a.push(s))}else f={eventTime:f,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=a;if(s=s.next,s===null){if(a=i.shared.pending,a===null)break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,ko|=o,t.lanes=o,t.memoizedState=h}}function Q1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(O(191,i));i.call(n)}}}var J1=new hl.Component().refs;function Xl(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:oe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ql={isMounted:function(t){return(t=t._reactInternals)?Fn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=at(),i=en(t),s=Zr(n,i);s.payload=e,r!=null&&(s.callback=r),Kr(t,s),tn(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=at(),i=en(t),s=Zr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),Kr(t,s),tn(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=at(),n=en(t),i=Zr(r,n);i.tag=2,e!=null&&(i.callback=e),Kr(t,i),tn(t,n,r)}};function ev(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!vo(r,n)||!vo(i,s):!0}function tv(t,e,r){var n=!1,i=Xr,s=e.contextType;return typeof s=="object"&&s!==null?s=_t(s):(i=et(e)?zn:De.current,n=e.contextTypes,s=(n=n!=null)?Di(t,i):Xr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ql,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function rv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ql.enqueueReplaceState(e,e.state,null)}function wd(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=J1,Ed(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_t(s):(s=et(e)?zn:De.current,i.context=Di(t,s)),To(t,r,i,n),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xl(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ql.enqueueReplaceState(i,i.state,null),To(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var Zl=Array.isArray;function Mo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=n.refs;o===J1&&(o=n.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,t))}return t}function Kl(t,e){if(t.type!=="textarea")throw Error(O(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function nv(t){function e(m,d){if(t){var y=m.lastEffect;y!==null?(y.nextEffect=d,m.lastEffect=d):m.firstEffect=m.lastEffect=d,d.nextEffect=null,d.flags=8}}function r(m,d){if(!t)return null;for(;d!==null;)e(m,d),d=d.sibling;return null}function n(m,d){for(m=new Map;d!==null;)d.key!==null?m.set(d.key,d):m.set(d.index,d),d=d.sibling;return m}function i(m,d){return m=sn(m,d),m.index=0,m.sibling=null,m}function s(m,d,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<d?(m.flags=2,d):y):(m.flags=2,d)):d}function o(m){return t&&m.alternate===null&&(m.flags=2),m}function a(m,d,y,x){return d===null||d.tag!==6?(d=ip(y,m.mode,x),d.return=m,d):(d=i(d,y),d.return=m,d)}function l(m,d,y,x){return d!==null&&d.elementType===y.type?(x=i(d,y.props),x.ref=Mo(m,d,y),x.return=m,x):(x=mc(y.type,y.key,y.props,null,m.mode,x),x.ref=Mo(m,d,y),x.return=m,x)}function c(m,d,y,x){return d===null||d.tag!==4||d.stateNode.containerInfo!==y.containerInfo||d.stateNode.implementation!==y.implementation?(d=sp(y,m.mode,x),d.return=m,d):(d=i(d,y.children||[]),d.return=m,d)}function u(m,d,y,x,w){return d===null||d.tag!==7?(d=$i(y,m.mode,x,w),d.return=m,d):(d=i(d,y),d.return=m,d)}function h(m,d,y){if(typeof d=="string"||typeof d=="number")return d=ip(""+d,m.mode,y),d.return=m,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Zs:return y=mc(d.type,d.key,d.props,null,m.mode,y),y.ref=Mo(m,null,d),y.return=m,y;case kn:return d=sp(d,m.mode,y),d.return=m,d}if(Zl(d)||Js(d))return d=$i(d,m.mode,y,null),d.return=m,d;Kl(m,d)}return null}function f(m,d,y,x){var w=d!==null?d.key:null;if(typeof y=="string"||typeof y=="number")return w!==null?null:a(m,d,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zs:return y.key===w?y.type===zr?u(m,d,y.props.children,x,w):l(m,d,y,x):null;case kn:return y.key===w?c(m,d,y,x):null}if(Zl(y)||Js(y))return w!==null?null:u(m,d,y,x,null);Kl(m,y)}return null}function v(m,d,y,x,w){if(typeof x=="string"||typeof x=="number")return m=m.get(y)||null,a(d,m,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zs:return m=m.get(x.key===null?y:x.key)||null,x.type===zr?u(d,m,x.props.children,w,x.key):l(d,m,x,w);case kn:return m=m.get(x.key===null?y:x.key)||null,c(d,m,x,w)}if(Zl(x)||Js(x))return m=m.get(y)||null,u(d,m,x,w,null);Kl(d,x)}return null}function E(m,d,y,x){for(var w=null,S=null,M=d,A=d=0,b=null;M!==null&&A<y.length;A++){M.index>A?(b=M,M=null):b=M.sibling;var L=f(m,M,y[A],x);if(L===null){M===null&&(M=b);break}t&&M&&L.alternate===null&&e(m,M),d=s(L,d,A),S===null?w=L:S.sibling=L,S=L,M=b}if(A===y.length)return r(m,M),w;if(M===null){for(;A<y.length;A++)M=h(m,y[A],x),M!==null&&(d=s(M,d,A),S===null?w=M:S.sibling=M,S=M);return w}for(M=n(m,M);A<y.length;A++)b=v(M,m,A,y[A],x),b!==null&&(t&&b.alternate!==null&&M.delete(b.key===null?A:b.key),d=s(b,d,A),S===null?w=b:S.sibling=b,S=b);return t&&M.forEach(function(z){return e(m,z)}),w}function _(m,d,y,x){var w=Js(y);if(typeof w!="function")throw Error(O(150));if(y=w.call(y),y==null)throw Error(O(151));for(var S=w=null,M=d,A=d=0,b=null,L=y.next();M!==null&&!L.done;A++,L=y.next()){M.index>A?(b=M,M=null):b=M.sibling;var z=f(m,M,L.value,x);if(z===null){M===null&&(M=b);break}t&&M&&z.alternate===null&&e(m,M),d=s(z,d,A),S===null?w=z:S.sibling=z,S=z,M=b}if(L.done)return r(m,M),w;if(M===null){for(;!L.done;A++,L=y.next())L=h(m,L.value,x),L!==null&&(d=s(L,d,A),S===null?w=L:S.sibling=L,S=L);return w}for(M=n(m,M);!L.done;A++,L=y.next())L=v(M,m,A,L.value,x),L!==null&&(t&&L.alternate!==null&&M.delete(L.key===null?A:L.key),d=s(L,d,A),S===null?w=L:S.sibling=L,S=L);return t&&M.forEach(function(H){return e(m,H)}),w}return function(m,d,y,x){var w=typeof y=="object"&&y!==null&&y.type===zr&&y.key===null;w&&(y=y.props.children);var S=typeof y=="object"&&y!==null;if(S)switch(y.$$typeof){case Zs:e:{for(S=y.key,w=d;w!==null;){if(w.key===S){switch(w.tag){case 7:if(y.type===zr){r(m,w.sibling),d=i(w,y.props.children),d.return=m,m=d;break e}break;default:if(w.elementType===y.type){r(m,w.sibling),d=i(w,y.props),d.ref=Mo(m,w,y),d.return=m,m=d;break e}}r(m,w);break}else e(m,w);w=w.sibling}y.type===zr?(d=$i(y.props.children,m.mode,x,y.key),d.return=m,m=d):(x=mc(y.type,y.key,y.props,null,m.mode,x),x.ref=Mo(m,d,y),x.return=m,m=x)}return o(m);case kn:e:{for(w=y.key;d!==null;){if(d.key===w)if(d.tag===4&&d.stateNode.containerInfo===y.containerInfo&&d.stateNode.implementation===y.implementation){r(m,d.sibling),d=i(d,y.children||[]),d.return=m,m=d;break e}else{r(m,d);break}else e(m,d);d=d.sibling}d=sp(y,m.mode,x),d.return=m,m=d}return o(m)}if(typeof y=="string"||typeof y=="number")return y=""+y,d!==null&&d.tag===6?(r(m,d.sibling),d=i(d,y),d.return=m,m=d):(r(m,d),d=ip(y,m.mode,x),d.return=m,m=d),o(m);if(Zl(y))return E(m,d,y,x);if(Js(y))return _(m,d,y,x);if(S&&Kl(m,y),typeof y=="undefined"&&!w)switch(m.tag){case 1:case 22:case 0:case 11:case 15:throw Error(O(152,_i(m.type)||"Component"))}return r(m,d)}}var Ql=nv(!0),iv=nv(!1),So={},Zt=$r(So),Po=$r(So),bo=$r(So);function jn(t){if(t===So)throw Error(O(174));return t}function Td(t,e){switch(ce(bo,e),ce(Po,t),ce(Zt,So),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lh(e,t)}ne(Zt),ce(Zt,e)}function Ui(){ne(Zt),ne(Po),ne(bo)}function sv(t){jn(bo.current);var e=jn(Zt.current),r=Lh(e,t.type);e!==r&&(ce(Po,t),ce(Zt,r))}function Md(t){Po.current===t&&(ne(Zt),ne(Po))}var ue=$r(0);function Jl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Er=null,Qr=null,Kt=!1;function ov(t,e){var r=Tt(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function av(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function Sd(t){if(Kt){var e=Qr;if(e){var r=e;if(!av(t,e)){if(e=Oi(r.nextSibling),!e||!av(t,e)){t.flags=t.flags&-1025|2,Kt=!1,Er=t;return}ov(Er,r)}Er=t,Qr=Oi(e.firstChild)}else t.flags=t.flags&-1025|2,Kt=!1,Er=t}}function lv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Er=t}function ec(t){if(t!==Er)return!1;if(!Kt)return lv(t),Kt=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!cd(e,t.memoizedProps))for(e=Qr;e;)ov(t,e),e=Oi(e.nextSibling);if(lv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qr=Oi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qr=null}}else Qr=Er?Oi(t.stateNode.nextSibling):null;return!0}function Pd(){Qr=Er=null,Kt=!1}var Vi=[];function bd(){for(var t=0;t<Vi.length;t++)Vi[t]._workInProgressVersionPrimary=null;Vi.length=0}var Ao=Nn.ReactCurrentDispatcher,Et=Nn.ReactCurrentBatchConfig,Lo=0,he=null,Be=null,Re=null,tc=!1,Io=!1;function tt(){throw Error(O(321))}function Ad(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!xt(t[r],e[r]))return!1;return!0}function Ld(t,e,r,n,i,s){if(Lo=s,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ao.current=t===null||t.memoizedState===null?OM:CM,t=r(n,i),Io){s=0;do{if(Io=!1,!(25>s))throw Error(O(301));s+=1,Re=Be=null,e.updateQueue=null,Ao.current=NM,t=r(n,i)}while(Io)}if(Ao.current=sc,e=Be!==null&&Be.next!==null,Lo=0,Re=Be=he=null,tc=!1,e)throw Error(O(300));return t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?he.memoizedState=Re=t:Re=Re.next=t,Re}function Wn(){if(Be===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=Re===null?he.memoizedState:Re.next;if(e!==null)Re=e,Be=t;else{if(t===null)throw Error(O(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Re===null?he.memoizedState=Re=t:Re=Re.next=t}return Re}function Qt(t,e){return typeof e=="function"?e(t):e}function Ro(t){var e=Wn(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=Be,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var a=o=s=null,l=i;do{var c=l.lane;if((Lo&c)===c)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===t?l.eagerState:t(n,l.action);else{var u={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=u,s=n):a=a.next=u,he.lanes|=c,ko|=c}l=l.next}while(l!==null&&l!==i);a===null?s=n:a.next=o,xt(n,e.memoizedState)||(Dt=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=a,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function Oo(t){var e=Wn(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xt(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function cv(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(Lo&t)===t)&&(e._workInProgressVersionPrimary=n,Vi.push(e))),t)return r(e._source);throw Vi.push(e),Error(O(350))}function uv(t,e,r,n){var i=$e;if(i===null)throw Error(O(349));var s=e._getVersion,o=s(e._source),a=Ao.current,l=a.useState(function(){return cv(i,e,r)}),c=l[1],u=l[0];l=Re;var h=t.memoizedState,f=h.refs,v=f.getSnapshot,E=h.source;h=h.subscribe;var _=he;return t.memoizedState={refs:f,source:e,subscribe:n},a.useEffect(function(){f.getSnapshot=r,f.setSnapshot=c;var m=s(e._source);if(!xt(o,m)){m=r(e._source),xt(u,m)||(c(m),m=en(_),i.mutableReadLanes|=m&i.pendingLanes),m=i.mutableReadLanes,i.entangledLanes|=m;for(var d=i.entanglements,y=m;0<y;){var x=31-Wr(y),w=1<<x;d[x]|=m,y&=~w}}},[r,e,n]),a.useEffect(function(){return n(e._source,function(){var m=f.getSnapshot,d=f.setSnapshot;try{d(m(e._source));var y=en(_);i.mutableReadLanes|=y&i.pendingLanes}catch(x){d(function(){throw x})}})},[e,n]),xt(v,r)&&xt(E,e)&&xt(h,n)||(t={pending:null,dispatch:null,lastRenderedReducer:Qt,lastRenderedState:u},t.dispatch=c=Cd.bind(null,he,t),l.queue=t,l.baseQueue=null,u=cv(i,e,r),l.memoizedState=l.baseState=u),u}function fv(t,e,r){var n=Wn();return uv(n,t,e,r)}function Co(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Qt,lastRenderedState:t},t=t.dispatch=Cd.bind(null,he,t),[e.memoizedState,t]}function rc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=he.updateQueue,e===null?(e={lastEffect:null},he.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function hv(t){var e=Gn();return t={current:t},e.memoizedState=t}function nc(){return Wn().memoizedState}function Id(t,e,r,n){var i=Gn();he.flags|=t,i.memoizedState=rc(1|e,r,void 0,n===void 0?null:n)}function Rd(t,e,r,n){var i=Wn();n=n===void 0?null:n;var s=void 0;if(Be!==null){var o=Be.memoizedState;if(s=o.destroy,n!==null&&Ad(n,o.deps)){rc(e,r,s,n);return}}he.flags|=t,i.memoizedState=rc(1|e,r,s,n)}function dv(t,e){return Id(516,4,t,e)}function ic(t,e){return Rd(516,4,t,e)}function pv(t,e){return Rd(4,2,t,e)}function mv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gv(t,e,r){return r=r!=null?r.concat([t]):null,Rd(4,2,mv.bind(null,e,t),r)}function Od(){}function vv(t,e){var r=Wn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ad(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function yv(t,e){var r=Wn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ad(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function RM(t,e){var r=Fi();Vn(98>r?98:r,function(){t(!0)}),Vn(97<r?97:r,function(){var n=Et.transition;Et.transition=1;try{t(!1),e()}finally{Et.transition=n}})}function Cd(t,e,r){var n=at(),i=en(t),s={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=t.alternate,t===he||o!==null&&o===he)Io=tc=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.eagerReducer=o,s.eagerState=l,xt(l,a))return}catch(c){}finally{}tn(t,i,n)}}var sc={readContext:_t,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useOpaqueIdentifier:tt,unstable_isNewReconciler:!1},OM={readContext:_t,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:dv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Id(4,2,mv.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Id(4,2,t,e)},useMemo:function(t,e){var r=Gn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Gn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=Cd.bind(null,he,t),[n.memoizedState,t]},useRef:hv,useState:Co,useDebugValue:Od,useDeferredValue:function(t){var e=Co(t),r=e[0],n=e[1];return dv(function(){var i=Et.transition;Et.transition=1;try{n(t)}finally{Et.transition=i}},[t]),r},useTransition:function(){var t=Co(!1),e=t[0];return t=RM.bind(null,t[1]),hv(t),[t,e]},useMutableSource:function(t,e,r){var n=Gn();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},uv(n,t,e,r)},useOpaqueIdentifier:function(){if(Kt){var t=!1,e=SM(function(){throw t||(t=!0,r("r:"+(fd++).toString(36))),Error(O(355))}),r=Co(e)[1];return(he.mode&2)===0&&(he.flags|=516,rc(5,function(){r("r:"+(fd++).toString(36))},void 0,null)),e}return e="r:"+(fd++).toString(36),Co(e),e},unstable_isNewReconciler:!1},CM={readContext:_t,useCallback:vv,useContext:_t,useEffect:ic,useImperativeHandle:gv,useLayoutEffect:pv,useMemo:yv,useReducer:Ro,useRef:nc,useState:function(){return Ro(Qt)},useDebugValue:Od,useDeferredValue:function(t){var e=Ro(Qt),r=e[0],n=e[1];return ic(function(){var i=Et.transition;Et.transition=1;try{n(t)}finally{Et.transition=i}},[t]),r},useTransition:function(){var t=Ro(Qt)[0];return[nc().current,t]},useMutableSource:fv,useOpaqueIdentifier:function(){return Ro(Qt)[0]},unstable_isNewReconciler:!1},NM={readContext:_t,useCallback:vv,useContext:_t,useEffect:ic,useImperativeHandle:gv,useLayoutEffect:pv,useMemo:yv,useReducer:Oo,useRef:nc,useState:function(){return Oo(Qt)},useDebugValue:Od,useDeferredValue:function(t){var e=Oo(Qt),r=e[0],n=e[1];return ic(function(){var i=Et.transition;Et.transition=1;try{n(t)}finally{Et.transition=i}},[t]),r},useTransition:function(){var t=Oo(Qt)[0];return[nc().current,t]},useMutableSource:fv,useOpaqueIdentifier:function(){return Oo(Qt)[0]},unstable_isNewReconciler:!1},kM=Nn.ReactCurrentOwner,Dt=!1;function rt(t,e,r,n){e.child=t===null?iv(e,null,r,n):Ql(e,t.child,r,n)}function xv(t,e,r,n,i){r=r.render;var s=e.ref;return zi(e,i),n=Ld(t,e,r,n,s,i),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,wr(t,e,i)):(e.flags|=1,rt(t,e,n,i),e.child)}function _v(t,e,r,n,i,s){if(t===null){var o=r.type;return typeof o=="function"&&!rp(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Ev(t,e,o,n,i,s)):(t=mc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,(i&s)===0&&(i=o.memoizedProps,r=r.compare,r=r!==null?r:vo,r(i,n)&&t.ref===e.ref)?wr(t,e,s):(e.flags|=1,t=sn(o,n),t.ref=e.ref,t.return=e,e.child=t)}function Ev(t,e,r,n,i,s){if(t!==null&&vo(t.memoizedProps,n)&&t.ref===e.ref)if(Dt=!1,(s&i)!==0)(t.flags&16384)!==0&&(Dt=!0);else return e.lanes=t.lanes,wr(t,e,s);return kd(t,e,r,n,s)}function Nd(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},pc(e,r);else if((r&1073741824)!==0)e.memoizedState={baseLanes:0},pc(e,s!==null?s.baseLanes:r);else return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},pc(e,t),null;else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,pc(e,n);return rt(t,e,i,r),e.child}function wv(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function kd(t,e,r,n,i){var s=et(r)?zn:De.current;return s=Di(e,s),zi(e,i),r=Ld(t,e,r,n,s,i),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,wr(t,e,i)):(e.flags|=1,rt(t,e,r,i),e.child)}function Tv(t,e,r,n,i){if(et(r)){var s=!0;jl(e)}else s=!1;if(zi(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),tv(e,r,n),wd(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=_t(c):(c=et(r)?zn:De.current,c=Di(e,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&rv(e,o,n,c),qr=!1;var f=e.memoizedState;o.state=f,To(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Je.current||qr?(typeof u=="function"&&(Xl(e,r,u,n),l=e.memoizedState),(a=qr||ev(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{o=e.stateNode,Z1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:kt(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=_t(l):(l=et(r)?zn:De.current,l=Di(e,l));var v=r.getDerivedStateFromProps;(u=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&rv(e,o,n,l),qr=!1,f=e.memoizedState,o.state=f,To(e,n,o,i);var E=e.memoizedState;a!==h||f!==E||Je.current||qr?(typeof v=="function"&&(Xl(e,r,v,n),E=e.memoizedState),(c=qr||ev(e,r,c,n,f,E,l))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=E),o.props=n,o.state=E,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),n=!1)}return Dd(t,e,r,n,s,i)}function Dd(t,e,r,n,i,s){wv(t,e);var o=(e.flags&64)!==0;if(!n&&!o)return i&&U1(e,r,!1),wr(t,e,s);n=e.stateNode,kM.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ql(e,t.child,null,s),e.child=Ql(e,null,a,s)):rt(t,e,a,s),e.memoizedState=n.state,i&&U1(e,r,!0),e.child}function Mv(t){var e=t.stateNode;e.pendingContext?B1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&B1(t,e.context,!1),Td(t,e.containerInfo)}var oc={dehydrated:null,retryLane:0};function Sv(t,e,r){var n=e.pendingProps,i=ue.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),ce(ue,i&1),t===null?(n.fallback!==void 0&&Sd(e),t=n.children,i=n.fallback,s?(t=Pv(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=oc,t):typeof n.unstable_expectedLoadTime=="number"?(t=Pv(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=oc,e.lanes=33554432,t):(r=np({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?s?(n=Av(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=oc,n):(r=bv(t,e,n.children,r),e.memoizedState=null,r):s?(n=Av(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=oc,n):(r=bv(t,e,n.children,r),e.memoizedState=null,r)}function Pv(t,e,r,n){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=np(e,i,0,null),r=$i(r,i,n,null),s.return=t,r.return=t,s.sibling=r,t.child=s,r}function bv(t,e,r,n){var i=t.child;return t=i.sibling,r=sn(i,{mode:"visible",children:r}),(e.mode&2)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function Av(t,e,r,n,i){var s=e.mode,o=t.child;t=o.sibling;var a={mode:"hidden",children:r};return(s&2)===0&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=a,o=r.lastEffect,o!==null?(e.firstEffect=r.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):r=sn(o,a),t!==null?n=sn(t,n):(n=$i(n,s,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function Lv(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),q1(t.return,e)}function Fd(t,e,r,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i,o.lastEffect=s)}function Iv(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(rt(t,e,n.children,r),n=ue.current,(n&2)!==0)n=n&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lv(t,r);else if(t.tag===19)Lv(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ce(ue,n),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Jl(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Fd(e,!1,i,r,s,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jl(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Fd(e,!0,r,null,s,e.lastEffect);break;case"together":Fd(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function wr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ko|=e.lanes,(r&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,r=sn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=sn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var Rv,Bd,Ov,Cv;Rv=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bd=function(){};Ov=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,jn(Zt.current);var s=null;switch(r){case"input":i=Th(t,i),n=Th(t,n),s=[];break;case"option":i=Ph(t,i),n=Ph(t,n),s=[];break;case"select":i=oe({},i,{value:void 0}),n=oe({},n,{value:void 0}),s=[];break;case"textarea":i=bh(t,i),n=bh(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Fl)}Ih(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qs.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&re("scroll",t),s||a===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===yh?l.toString():(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Cv=function(t,e,r,n){r!==n&&(e.flags|=4)};function No(t,e){if(!Kt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function DM(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return et(e.type)&&Vl(),null;case 3:return Ui(),ne(Je),ne(De),bd(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ec(e)?e.flags|=4:n.hydrate||(e.flags|=256)),Bd(e),null;case 5:Md(e);var i=jn(bo.current);if(r=e.type,t!==null&&e.stateNode!=null)Ov(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(O(166));return null}if(t=jn(Zt.current),ec(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Yr]=e,n[zl]=s,r){case"dialog":re("cancel",n),re("close",n);break;case"iframe":case"object":case"embed":re("load",n);break;case"video":case"audio":for(t=0;t<xo.length;t++)re(xo[t],n);break;case"source":re("error",n);break;case"img":case"image":case"link":re("error",n),re("load",n);break;case"details":re("toggle",n);break;case"input":S0(n,s),re("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},re("invalid",n);break;case"textarea":A0(n,s),re("invalid",n)}Ih(r,s),t=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):qs.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&re("scroll",n));switch(r){case"input":vl(n),b0(n,s,!0);break;case"textarea":vl(n),I0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Fl)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===Ah.html&&(t=R0(r)),t===Ah.html?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Yr]=e,t[zl]=n,Rv(t,e,!1,!1),e.stateNode=t,o=Rh(r,n),r){case"dialog":re("cancel",t),re("close",t),i=n;break;case"iframe":case"object":case"embed":re("load",t),i=n;break;case"video":case"audio":for(i=0;i<xo.length;i++)re(xo[i],t);i=n;break;case"source":re("error",t),i=n;break;case"img":case"image":case"link":re("error",t),re("load",t),i=n;break;case"details":re("toggle",t),i=n;break;case"input":S0(t,n),i=Th(t,n),re("invalid",t);break;case"option":i=Ph(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=oe({},n,{value:void 0}),re("invalid",t);break;case"textarea":A0(t,n),i=bh(t,n),re("invalid",t);break;default:i=n}Ih(r,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?N0(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&O0(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&to(t,l):typeof l=="number"&&to(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&re("scroll",t):l!=null&&hh(t,s,l,o))}switch(r){case"input":vl(t),b0(t,n,!1);break;case"textarea":vl(t),I0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ur(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ei(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ei(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fl)}C1(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)Cv(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(O(166));r=jn(bo.current),jn(Zt.current),ec(e)?(n=e.stateNode,r=e.memoizedProps,n[Yr]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Yr]=e,e.stateNode=n)}return null;case 13:return ne(ue),n=e.memoizedState,(e.flags&64)!==0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&ec(e):r=t.memoizedState!==null,n&&!r&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(ue.current&1)!==0?Oe===0&&(Oe=3):((Oe===0||Oe===3)&&(Oe=4),$e===null||(ko&134217727)===0&&(Gi&134217727)===0||Hi($e,ze))),(n||r)&&(e.flags|=4),null);case 4:return Ui(),Bd(e),t===null&&A1(e.stateNode.containerInfo),null;case 10:return _d(e),null;case 17:return et(e.type)&&Vl(),null;case 19:if(ne(ue),n=e.memoizedState,n===null)return null;if(s=(e.flags&64)!==0,o=n.rendering,o===null)if(s)No(n,!1);else{if(Oe!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(o=Jl(t),o!==null){for(e.flags|=64,No(n,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ce(ue,ue.current&1|2),e.child}t=t.sibling}n.tail!==null&&Fe()>qd&&(e.flags|=64,s=!0,No(n,!1),e.lanes=33554432)}else{if(!s)if(t=Jl(o),t!==null){if(e.flags|=64,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),No(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!Kt)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Fe()-n.renderingStartTime>qd&&r!==1073741824&&(e.flags|=64,s=!0,No(n,!1),e.lanes=33554432);n.isBackwards?(o.sibling=e.child,e.child=o):(r=n.last,r!==null?r.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=Fe(),r.sibling=null,e=ue.current,ce(ue,s?e&1|2:e&1),r):null;case 23:case 24:return tp(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(O(156,e.tag))}function FM(t){switch(t.tag){case 1:et(t.type)&&Vl();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(Ui(),ne(Je),ne(De),bd(),e=t.flags,(e&64)!==0)throw Error(O(285));return t.flags=e&-4097|64,t;case 5:return Md(t),null;case 13:return ne(ue),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return ne(ue),null;case 4:return Ui(),null;case 10:return _d(t),null;case 23:case 24:return tp(),null;default:return null}}function zd(t,e){try{var r="",n=e;do r+=vT(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function Ud(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var BM=typeof WeakMap=="function"?WeakMap:Map;function Nv(t,e,r){r=Zr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){cc||(cc=!0,Zd=n),Ud(t,e)},r}function kv(t,e,r){r=Zr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return Ud(t,e),n(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Jt===null?Jt=new Set([this]):Jt.add(this),Ud(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}var zM=typeof WeakSet=="function"?WeakSet:Set;function Dv(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){nn(t,r)}else e.current=null}function UM(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:kt(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&ud(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(O(163))}function VM(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(Kv(r,t),qM(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:kt(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&Q1(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}Q1(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&C1(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&Z0(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(O(163))}function Fv(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=C0("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Bv(t,e){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(dd,e)}catch(s){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)Kv(e,r);else{n=e;try{i()}catch(s){nn(n,s)}}r=r.next}while(r!==t)}break;case 1:if(Dv(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){nn(e,s)}break;case 5:Dv(e);break;case 4:jv(t,e)}}function zv(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Uv(t){return t.tag===5||t.tag===3||t.tag===4}function Vv(t){e:{for(var e=t.return;e!==null;){if(Uv(e))break e;e=e.return}throw Error(O(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(O(161))}r.flags&16&&(to(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||Uv(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?Vd(t,r,e):jd(t,r,e)}function Vd(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Fl));else if(n!==4&&(t=t.child,t!==null))for(Vd(t,e,r),t=t.sibling;t!==null;)Vd(t,e,r),t=t.sibling}function jd(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(jd(t,e,r),t=t.sibling;t!==null;)jd(t,e,r),t=t.sibling}function jv(t,e){for(var r=e,n=!1,i,s;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(O(160));switch(i=n.stateNode,n.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var o=t,a=r,l=a;;)if(Bv(o,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(o=i,a=r.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,s=!0,r.child.return=r,r=r.child;continue}}else if(Bv(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Gd(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(r[zl]=n,t==="input"&&n.type==="radio"&&n.name!=null&&P0(r,n),Rh(t,i),e=Rh(t,n),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];o==="style"?N0(r,a):o==="dangerouslySetInnerHTML"?O0(r,a):o==="children"?to(r,a):hh(r,o,a,e)}switch(t){case"input":Mh(r,n);break;case"textarea":L0(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,s=n.value,s!=null?Ei(r,!!n.multiple,s,!1):t!==!!n.multiple&&(n.defaultValue!=null?Ei(r,!!n.multiple,n.defaultValue,!0):Ei(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(O(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,Z0(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Xd=Fe(),Fv(e.child,!0)),Gv(e);return;case 19:Gv(e);return;case 17:return;case 23:case 24:Fv(e,e.memoizedState!==null);return}throw Error(O(163))}function Gv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new zM),e.forEach(function(n){var i=QM.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function jM(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var GM=Math.ceil,ac=Nn.ReactCurrentDispatcher,Wd=Nn.ReactCurrentOwner,V=0,$e=null,Te=null,ze=0,Hn=0,Hd=$r(0),Oe=0,lc=null,ji=0,ko=0,Gi=0,Yd=0,$d=null,Xd=0,qd=1/0;function Wi(){qd=Fe()+500}var B=null,cc=!1,Zd=null,Jt=null,Jr=!1,Do=null,Fo=90,Kd=[],Qd=[],Tr=null,Bo=0,Jd=null,uc=-1,Mr=0,fc=0,zo=null,hc=!1;function at(){return(V&48)!==0?Fe():uc!==-1?uc:uc=Fe()}function en(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return Fi()===99?1:2;if(Mr===0&&(Mr=ji),IM.transition!==0){fc!==0&&(fc=$d!==null?$d.pendingLanes:0),t=Mr;var e=4186112&~fc;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Fi(),(V&4)!==0&&t===98?t=Sl(12,Mr):(t=CT(t),t=Sl(t,Mr)),t}function tn(t,e,r){if(50<Bo)throw Bo=0,Jd=null,Error(O(185));if(t=dc(t,e),t===null)return null;Pl(t,e,r),t===$e&&(Gi|=e,Oe===4&&Hi(t,ze));var n=Fi();e===1?(V&8)!==0&&(V&48)===0?ep(t):(wt(t,r),V===0&&(Wi(),qt())):((V&4)===0||n!==98&&n!==99||(Tr===null?Tr=new Set([t]):Tr.add(t)),wt(t,r)),$d=t}function dc(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function wt(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Wr(o),l=1<<a,c=s[a];if(c===-1){if((l&n)===0||(l&i)!==0){c=e,Pi(l);var u=J;s[a]=10<=u?c+250:6<=u?c+5e3:-1}}else c<=e&&(t.expiredLanes|=l);o&=~l}if(n=uo(t,t===$e?ze:0),e=J,n===0)r!==null&&(r!==vd&&md(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==vd&&md(r)}e===15?(r=ep.bind(null,t),_r===null?(_r=[r],Wl=pd(Gl,X1)):_r.push(r),r=vd):e===14?r=wo(99,ep.bind(null,t)):(r=NT(e),r=wo(r,Wv.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function Wv(t){if(uc=-1,fc=Mr=0,(V&48)!==0)throw Error(O(327));var e=t.callbackNode;if(rn()&&t.callbackNode!==e)return null;var r=uo(t,t===$e?ze:0);if(r===0)return null;var n=r,i=V;V|=16;var s=Xv();($e!==t||ze!==n)&&(Wi(),Yi(t,n));do try{YM();break}catch(a){$v(t,a)}while(1);if(xd(),ac.current=s,V=i,Te!==null?n=0:($e=null,ze=0,n=Oe),(ji&Gi)!==0)Yi(t,0);else if(n!==0){if(n===2&&(V|=64,t.hydrate&&(t.hydrate=!1,ud(t.containerInfo)),r=n1(t),r!==0&&(n=Uo(t,r))),n===1)throw e=lc,Yi(t,0),Hi(t,r),wt(t,Fe()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(O(345));case 2:Yn(t);break;case 3:if(Hi(t,r),(r&62914560)===r&&(n=Xd+500-Fe(),10<n)){if(uo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){at(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=N1(Yn.bind(null,t),n);break}Yn(t);break;case 4:if(Hi(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var o=31-Wr(r);s=1<<o,o=n[o],o>i&&(i=o),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GM(r/1960))-r,10<r){t.timeoutHandle=N1(Yn.bind(null,t),r);break}Yn(t);break;case 5:Yn(t);break;default:throw Error(O(329))}}return wt(t,Fe()),t.callbackNode===e?Wv.bind(null,t):null}function Hi(t,e){for(e&=~Yd,e&=~Gi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Wr(e),n=1<<r;t[r]=-1,e&=~n}}function ep(t){if((V&48)!==0)throw Error(O(327));if(rn(),t===$e&&(t.expiredLanes&ze)!==0){var e=ze,r=Uo(t,e);(ji&Gi)!==0&&(e=uo(t,e),r=Uo(t,e))}else e=uo(t,0),r=Uo(t,e);if(t.tag!==0&&r===2&&(V|=64,t.hydrate&&(t.hydrate=!1,ud(t.containerInfo)),e=n1(t),e!==0&&(r=Uo(t,e))),r===1)throw r=lc,Yi(t,0),Hi(t,e),wt(t,Fe()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yn(t),wt(t,Fe()),null}function WM(){if(Tr!==null){var t=Tr;Tr=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,wt(e,Fe())})}qt()}function Hv(t,e){var r=V;V|=1;try{return t(e)}finally{V=r,V===0&&(Wi(),qt())}}function Yv(t,e){var r=V;V&=-2,V|=8;try{return t(e)}finally{V=r,V===0&&(Wi(),qt())}}function pc(t,e){ce(Hd,Hn),Hn|=e,ji|=e}function tp(){Hn=Hd.current,ne(Hd)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,MM(r)),Te!==null)for(r=Te.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Vl();break;case 3:Ui(),ne(Je),ne(De),bd();break;case 5:Md(n);break;case 4:Ui();break;case 13:ne(ue);break;case 19:ne(ue);break;case 10:_d(n);break;case 23:case 24:tp()}r=r.return}$e=t,Te=sn(t.current,null),ze=Hn=ji=e,Oe=0,lc=null,Yd=Gi=ko=0}function $v(t,e){do{var r=Te;try{if(xd(),Ao.current=sc,tc){for(var n=he.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}tc=!1}if(Lo=0,Re=Be=he=null,Io=!1,Wd.current=null,r===null||r.return===null){Oe=1,lc=e,Te=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=ze,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l;if((a.mode&2)===0){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=(ue.current&1)!==0,f=o;do{var v;if(v=f.tag===13){var E=f.memoizedState;if(E!==null)v=E.dehydrated!==null;else{var _=f.memoizedProps;v=_.fallback===void 0?!1:_.unstable_avoidThisFallback!==!0?!0:!h}}if(v){var m=f.updateQueue;if(m===null){var d=new Set;d.add(c),f.updateQueue=d}else m.add(c);if((f.mode&2)===0){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var y=Zr(-1,1);y.tag=2,Kr(a,y)}a.lanes|=1;break e}l=void 0,a=e;var x=s.pingCache;if(x===null?(x=s.pingCache=new BM,l=new Set,x.set(c,l)):(l=x.get(c),l===void 0&&(l=new Set,x.set(c,l))),!l.has(a)){l.add(a);var w=KM.bind(null,s,c,a);c.then(w,w)}f.flags|=4096,f.lanes=e;break e}f=f.return}while(f!==null);l=Error((_i(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Oe!==5&&(Oe=2),l=zd(l,a),f=o;do{switch(f.tag){case 3:s=l,f.flags|=4096,e&=-e,f.lanes|=e;var S=Nv(f,s,e);K1(f,S);break e;case 1:s=l;var M=f.type,A=f.stateNode;if((f.flags&64)===0&&(typeof M.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Jt===null||!Jt.has(A)))){f.flags|=4096,e&=-e,f.lanes|=e;var b=kv(f,s,e);K1(f,b);break e}}f=f.return}while(f!==null)}Zv(r)}catch(L){e=L,Te===r&&r!==null&&(Te=r=r.return);continue}break}while(1)}function Xv(){var t=ac.current;return ac.current=sc,t===null?sc:t}function Uo(t,e){var r=V;V|=16;var n=Xv();$e===t&&ze===e||Yi(t,e);do try{HM();break}catch(i){$v(t,i)}while(1);if(xd(),V=r,ac.current=n,Te!==null)throw Error(O(261));return $e=null,ze=0,Oe}function HM(){for(;Te!==null;)qv(Te)}function YM(){for(;Te!==null&&!bM();)qv(Te)}function qv(t){var e=Jv(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,e===null?Zv(t):Te=e,Wd.current=null}function Zv(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&2048)===0){if(r=DM(r,e,Hn),r!==null){Te=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||(Hn&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(r=FM(e),r!==null){r.flags&=2047,Te=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Oe===0&&(Oe=5)}function Yn(t){var e=Fi();return Vn(99,$M.bind(null,t,e)),null}function $M(t,e){do rn();while(Do!==null);if((V&48)!==0)throw Error(O(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(O(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,a=t.expirationTimes;0<s;){var l=31-Wr(s),c=1<<l;i[l]=0,o[l]=-1,a[l]=-1,s&=~c}if(Tr!==null&&(n&24)===0&&Tr.has(t)&&Tr.delete(t),t===$e&&(Te=$e=null,ze=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=V,V|=32,Wd.current=null,ad=bl,o=w1(),nd(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(c=a.getSelection&&a.getSelection())&&c.rangeCount!==0){a=c.anchorNode,s=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{a.nodeType,l.nodeType}catch(L){a=null;break e}var u=0,h=-1,f=-1,v=0,E=0,_=o,m=null;t:for(;;){for(var d;_!==a||s!==0&&_.nodeType!==3||(h=u+s),_!==l||c!==0&&_.nodeType!==3||(f=u+c),_.nodeType===3&&(u+=_.nodeValue.length),(d=_.firstChild)!==null;)m=_,_=d;for(;;){if(_===o)break t;if(m===a&&++v===s&&(h=u),m===l&&++E===c&&(f=u),(d=_.nextSibling)!==null)break;_=m,m=_.parentNode}_=d}a=h===-1||f===-1?null:{start:h,end:f}}else a=null;a=a||{start:0,end:0}}else a=null;ld={focusedElem:o,selectionRange:a},bl=!1,zo=null,hc=!1,B=n;do try{XM()}catch(L){if(B===null)throw Error(O(330));nn(B,L),B=B.nextEffect}while(B!==null);zo=null,B=n;do try{for(o=t;B!==null;){var y=B.flags;if(y&16&&to(B.stateNode,""),y&128){var x=B.alternate;if(x!==null){var w=x.ref;w!==null&&(typeof w=="function"?w(null):w.current=null)}}switch(y&1038){case 2:Vv(B),B.flags&=-3;break;case 6:Vv(B),B.flags&=-3,Gd(B.alternate,B);break;case 1024:B.flags&=-1025;break;case 1028:B.flags&=-1025,Gd(B.alternate,B);break;case 4:Gd(B.alternate,B);break;case 8:a=B,jv(o,a);var S=a.alternate;zv(a),S!==null&&zv(S)}B=B.nextEffect}}catch(L){if(B===null)throw Error(O(330));nn(B,L),B=B.nextEffect}while(B!==null);if(w=ld,x=w1(),y=w.focusedElem,o=w.selectionRange,x!==y&&y&&y.ownerDocument&&E1(y.ownerDocument.documentElement,y)){for(o!==null&&nd(y)&&(x=o.start,w=o.end,w===void 0&&(w=x),"selectionStart"in y?(y.selectionStart=x,y.selectionEnd=Math.min(w,y.value.length)):(w=(x=y.ownerDocument||document)&&x.defaultView||window,w.getSelection&&(w=w.getSelection(),a=y.textContent.length,S=Math.min(o.start,a),o=o.end===void 0?S:Math.min(o.end,a),!w.extend&&S>o&&(a=o,o=S,S=a),a=_1(y,S),s=_1(y,o),a&&s&&(w.rangeCount!==1||w.anchorNode!==a.node||w.anchorOffset!==a.offset||w.focusNode!==s.node||w.focusOffset!==s.offset)&&(x=x.createRange(),x.setStart(a.node,a.offset),w.removeAllRanges(),S>o?(w.addRange(x),w.extend(s.node,s.offset)):(x.setEnd(s.node,s.offset),w.addRange(x)))))),x=[],w=y;w=w.parentNode;)w.nodeType===1&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<x.length;y++)w=x[y],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}bl=!!ad,ld=ad=null,t.current=r,B=n;do try{for(y=t;B!==null;){var M=B.flags;if(M&36&&VM(y,B.alternate,B),M&128){x=void 0;var A=B.ref;if(A!==null){var b=B.stateNode;switch(B.tag){case 5:x=b;break;default:x=b}typeof A=="function"?A(x):A.current=x}}B=B.nextEffect}}catch(L){if(B===null)throw Error(O(330));nn(B,L),B=B.nextEffect}while(B!==null);B=null,LM(),V=i}else t.current=r;if(Jr)Jr=!1,Do=t,Fo=e;else for(B=n;B!==null;)e=B.nextEffect,B.nextEffect=null,B.flags&8&&(M=B,M.sibling=null,M.stateNode=null),B=e;if(n=t.pendingLanes,n===0&&(Jt=null),n===1?t===Jd?Bo++:(Bo=0,Jd=t):Bo=0,r=r.stateNode,Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(dd,r,void 0,(r.current.flags&64)===64)}catch(L){}if(wt(t,Fe()),cc)throw cc=!1,t=Zd,Zd=null,t;return(V&8)!==0||qt(),null}function XM(){for(;B!==null;){var t=B.alternate;hc||zo===null||((B.flags&8)!==0?G0(B,zo)&&(hc=!0):B.tag===13&&jM(t,B)&&G0(B,zo)&&(hc=!0));var e=B.flags;(e&256)!==0&&UM(t,B),(e&512)===0||Jr||(Jr=!0,wo(97,function(){return rn(),null})),B=B.nextEffect}}function rn(){if(Fo!==90){var t=97<Fo?97:Fo;return Fo=90,Vn(t,ZM)}return!1}function qM(t,e){Kd.push(e,t),Jr||(Jr=!0,wo(97,function(){return rn(),null}))}function Kv(t,e){Qd.push(e,t),Jr||(Jr=!0,wo(97,function(){return rn(),null}))}function ZM(){if(Do===null)return!1;var t=Do;if(Do=null,(V&48)!==0)throw Error(O(331));var e=V;V|=32;var r=Qd;Qd=[];for(var n=0;n<r.length;n+=2){var i=r[n],s=r[n+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(l){if(s===null)throw Error(O(330));nn(s,l)}}for(r=Kd,Kd=[],n=0;n<r.length;n+=2){i=r[n],s=r[n+1];try{var a=i.create;i.destroy=a()}catch(l){if(s===null)throw Error(O(330));nn(s,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return V=e,qt(),!0}function Qv(t,e,r){e=zd(r,e),e=Nv(t,e,1),Kr(t,e),e=at(),t=dc(t,1),t!==null&&(Pl(t,1,e),wt(t,e))}function nn(t,e){if(t.tag===3)Qv(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){Qv(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jt===null||!Jt.has(n))){t=zd(e,t);var i=kv(r,t,1);if(Kr(r,i),i=at(),r=dc(r,1),r!==null)Pl(r,1,i),wt(r,i);else if(typeof n.componentDidCatch=="function"&&(Jt===null||!Jt.has(n)))try{n.componentDidCatch(e,t)}catch(s){}break}}r=r.return}}function KM(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=at(),t.pingedLanes|=t.suspendedLanes&r,$e===t&&(ze&r)===r&&(Oe===4||Oe===3&&(ze&62914560)===ze&&500>Fe()-Xd?Yi(t,0):Yd|=r),wt(t,e)}function QM(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=Fi()===99?1:2:(Mr===0&&(Mr=ji),e=bi(62914560&~Mr),e===0&&(e=4194304))),r=at(),t=dc(t,e),t!==null&&(Pl(t,e,r),wt(t,r))}var Jv;Jv=function(t,e,r){var n=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)Dt=!0;else if((r&n)!==0)Dt=(t.flags&16384)!==0;else{switch(Dt=!1,e.tag){case 3:Mv(e),Pd();break;case 5:sv(e);break;case 1:et(e.type)&&jl(e);break;case 4:Td(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;ce(Hl,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return(r&e.child.childLanes)!==0?Sv(t,e,r):(ce(ue,ue.current&1),e=wr(t,e,r),e!==null?e.sibling:null);ce(ue,ue.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&64)!==0){if(n)return Iv(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(ue,ue.current),n)break;return null;case 23:case 24:return e.lanes=0,Nd(t,e,r)}return wr(t,e,r)}else Dt=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=Di(e,De.current),zi(e,r),i=Ld(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(n)){var s=!0;jl(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ed(e);var o=n.getDerivedStateFromProps;typeof o=="function"&&Xl(e,n,o,t),i.updater=ql,e.stateNode=i,i._reactInternals=e,wd(e,n,t,r),e=Dd(null,e,n,!0,s,r)}else e.tag=0,rt(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=e3(i),t=kt(i,t),s){case 0:e=kd(null,e,i,t,r);break e;case 1:e=Tv(null,e,i,t,r);break e;case 11:e=xv(null,e,i,t,r);break e;case 14:e=_v(null,e,i,kt(i.type,t),n,r);break e}throw Error(O(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),kd(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),Tv(t,e,n,i,r);case 3:if(Mv(e),n=e.updateQueue,t===null||n===null)throw Error(O(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,Z1(t,e),To(e,n,null,r),n=e.memoizedState.element,n===i)Pd(),e=wr(t,e,r);else{if(i=e.stateNode,(s=i.hydrate)&&(Qr=Oi(e.stateNode.containerInfo.firstChild),Er=e,s=Kt=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],Vi.push(s);for(r=iv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else rt(t,e,n,r),Pd();e=e.child}return e;case 5:return sv(e),t===null&&Sd(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cd(n,i)?o=null:s!==null&&cd(n,s)&&(e.flags|=16),wv(t,e),rt(t,e,o,r),e.child;case 6:return t===null&&Sd(e),null;case 13:return Sv(t,e,r);case 4:return Td(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ql(e,null,n,r):rt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),xv(t,e,n,i,r);case 7:return rt(t,e,e.pendingProps,r),e.child;case 8:return rt(t,e,e.pendingProps.children,r),e.child;case 12:return rt(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var a=e.type._context;if(ce(Hl,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=xt(a,s)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===i.children&&!Je.current){e=wr(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n&&(c.observedBits&s)!==0){a.tag===1&&(c=Zr(-1,r&-r),c.tag=2,Kr(a,c)),a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),q1(a.return,r),l.lanes|=r;break}c=c.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}rt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,n=s.children,zi(e,r),i=_t(i,s.unstable_observedBits),n=n(i),e.flags|=1,rt(t,e,n,r),e.child;case 14:return i=e.type,s=kt(i,e.pendingProps),s=kt(i.type,s),_v(t,e,i,s,n,r);case 15:return Ev(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,et(n)?(t=!0,jl(e)):t=!1,zi(e,r),tv(e,n,i),wd(e,n,i,r),Dd(null,e,n,!0,t,r);case 19:return Iv(t,e,r);case 23:return Nd(t,e,r);case 24:return Nd(t,e,r)}throw Error(O(156,e.tag))};function JM(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(t,e,r,n){return new JM(t,e,r,n)}function rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e3(t){if(typeof t=="function")return rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dl)return 11;if(t===ml)return 14}return 2}function sn(t,e){var r=t.alternate;return r===null?(r=Tt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function mc(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zr:return $i(r.children,i,s,e);case E0:o=8,i|=16;break;case dh:o=8,i|=1;break;case Ks:return t=Tt(12,r,e,i|8),t.elementType=Ks,t.type=Ks,t.lanes=s,t;case Qs:return t=Tt(13,r,e,i),t.type=Qs,t.elementType=Qs,t.lanes=s,t;case pl:return t=Tt(19,r,e,i),t.elementType=pl,t.lanes=s,t;case xh:return np(r,i,s,e);case _h:return t=Tt(24,r,e,i),t.elementType=_h,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ph:o=10;break e;case mh:o=9;break e;case dl:o=11;break e;case ml:o=14;break e;case gh:o=16,n=null;break e;case vh:o=22;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Tt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function $i(t,e,r,n){return t=Tt(7,t,n,e),t.lanes=r,t}function np(t,e,r,n){return t=Tt(23,t,n,e),t.elementType=xh,t.lanes=r,t}function ip(t,e,r){return t=Tt(6,t,null,e),t.lanes=r,t}function sp(t,e,r){return e=Tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function t3(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Yh(0),this.expirationTimes=Yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.mutableSourceEagerHydrationData=null}function r3(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function gc(t,e,r,n){var i=e.current,s=at(),o=en(i);e:if(r){r=r._reactInternals;t:{if(Fn(r)!==r||r.tag!==1)throw Error(O(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(et(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(O(171))}if(r.tag===1){var l=r.type;if(et(l)){r=z1(r,l,a);break e}}r=a}else r=Xr;return e.context===null?e.context=r:e.pendingContext=r,e=Zr(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),Kr(i,e),tn(i,o,s),o}function op(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ey(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ap(t,e){ey(t,e),(t=t.alternate)&&ey(t,e)}function n3(){return null}function lp(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new t3(t,e,r!=null&&r.hydrate===!0),e=Tt(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,Ed(e),t[Ci]=r.current,A1(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}lp.prototype.render=function(t){gc(t,this._internalRoot,null,null)};lp.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;gc(null,t,null,function(){e[Ci]=null})};function Vo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i3(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new lp(t,0,e?{hydrate:!0}:void 0)}function vc(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var a=i;i=function(){var c=op(o);a.call(c)}}gc(e,o,t,i)}else{if(s=r._reactRootContainer=i3(r,n),o=s._internalRoot,typeof i=="function"){var l=i;i=function(){var c=op(o);l.call(c)}}Yv(function(){gc(e,o,t,i)})}return op(o)}W0=function(t){if(t.tag===13){var e=at();tn(t,4,e),ap(t,4)}};Uh=function(t){if(t.tag===13){var e=at();tn(t,67108864,e),ap(t,67108864)}};H0=function(t){if(t.tag===13){var e=at(),r=en(t);tn(t,r,e),ap(t,r)}};Y0=function(t,e){return e()};Ch=function(t,e,r){switch(e){case"input":if(Mh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Ul(n);if(!i)throw Error(O(90));M0(n),Mh(n,i)}}}break;case"textarea":L0(t,r);break;case"select":e=r.value,e!=null&&Ei(t,!!r.multiple,e,!1)}};Nh=Hv;B0=function(t,e,r,n,i){var s=V;V|=4;try{return Vn(98,t.bind(null,e,r,n,i))}finally{V=s,V===0&&(Wi(),qt())}};kh=function(){(V&49)===0&&(WM(),rn())};z0=function(t,e){var r=V;V|=2;try{return t(e)}finally{V=r,V===0&&(Wi(),qt())}};function ty(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vo(e))throw Error(O(200));return r3(t,e,null,r)}var s3={Events:[Eo,Ni,Ul,D0,F0,rn,{current:!1}]},jo={findFiberByHostInstance:Bn,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},o3={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j0(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||n3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Go=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Go.isDisabled&&Go.supportsFiber))try{dd=Go.inject(o3),Un=Go}catch(t){}var Go;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s3;Mt.createPortal=ty;Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):Error(O(268,Object.keys(t)));return t=j0(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t,e){var r=V;if((r&48)!==0)return t(e);V|=1;try{if(t)return Vn(99,t.bind(null,e))}finally{V=r,qt()}};Mt.hydrate=function(t,e,r){if(!Vo(e))throw Error(O(200));return vc(null,t,e,!0,r)};Mt.render=function(t,e,r){if(!Vo(e))throw Error(O(200));return vc(null,t,e,!1,r)};Mt.unmountComponentAtNode=function(t){if(!Vo(t))throw Error(O(40));return t._reactRootContainer?(Yv(function(){vc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ci]=null})}),!0):!1};Mt.unstable_batchedUpdates=Hv;Mt.unstable_createPortal=function(t,e){return ty(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Mt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Vo(r))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return vc(t,e,r,!1,n)};Mt.version="17.0.2"});var sy=Pe((jO,iy)=>{"use strict";function ny(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ny)}catch(t){console.error(t)}}ny(),iy.exports=ry()});var $n=Pe((GO,Wo)=>{function a3(t){return t&&t.__esModule?t:{default:t}}Wo.exports=a3,Wo.exports.__esModule=!0,Wo.exports.default=Wo.exports});var Ho=Pe((WO,Sr)=>{function cp(t){return Sr.exports=cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr.exports.__esModule=!0,Sr.exports.default=Sr.exports,cp(t)}Sr.exports=cp,Sr.exports.__esModule=!0,Sr.exports.default=Sr.exports});var yc=Pe(fp=>{"use strict";var l3=$n();Object.defineProperty(fp,"__esModule",{value:!0});fp.default=c3;var up=l3(Ho());function c3(t){if(typeof window!="undefined"&&(0,up.default)(window.process)==="object"&&window.process.type==="renderer"||typeof process!="undefined"&&(0,up.default)(process.versions)==="object"&&Boolean(process.versions.electron))return!0;var e=(typeof navigator=="undefined"?"undefined":(0,up.default)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=t||e;return!!(r&&r.indexOf("Electron")>=0)}});var _c=Pe(xc=>{"use strict";var oy=$n();Object.defineProperty(xc,"__esModule",{value:!0});xc.default=ay;xc.isBrowserMainThread=h3;var u3=oy(Ho()),f3=oy(yc());function ay(){var t=(typeof process=="undefined"?"undefined":(0,u3.default)(process))==="object"&&String(process)==="[object process]"&&!process.browser;return!t||(0,f3.default)()}function h3(){return ay()&&typeof document!="undefined"}});var hp=Pe(nt=>{"use strict";var d3=$n();Object.defineProperty(nt,"__esModule",{value:!0});nt.window=nt.self=nt.process=nt.global=nt.document=nt.console=void 0;var p3=d3(Ho()),on={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document,process:(typeof process=="undefined"?"undefined":(0,p3.default)(process))==="object"&&process},m3=globalThis;nt.global=m3;var g3=on.self||on.window||on.global;nt.self=g3;var v3=on.window||on.self||on.global;nt.window=v3;var y3=on.document||{};nt.document=y3;var x3=on.process||{};nt.process=x3;var _3=console;nt.console=_3});var ly=Pe(St=>{"use strict";var E3=$n();Object.defineProperty(St,"__esModule",{value:!0});St.VERSION=void 0;Object.defineProperty(St,"console",{enumerable:!0,get:function(){return Xi.console}});Object.defineProperty(St,"document",{enumerable:!0,get:function(){return Xi.document}});Object.defineProperty(St,"global",{enumerable:!0,get:function(){return Xi.global}});St.isBrowser=void 0;Object.defineProperty(St,"process",{enumerable:!0,get:function(){return Xi.process}});Object.defineProperty(St,"self",{enumerable:!0,get:function(){return Xi.self}});Object.defineProperty(St,"window",{enumerable:!0,get:function(){return Xi.window}});var w3=E3(_c()),Xi=hp(),T3=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source";St.VERSION=T3;var M3=(0,w3.default)();St.isBrowser=M3});var uy=Pe(wc=>{"use strict";var cy=$n();Object.defineProperty(wc,"__esModule",{value:!0});wc.default=A3;wc.isMobile=b3;var S3=cy(_c()),P3=cy(yc()),Ec=globalThis;function b3(){return typeof Ec.orientation!="undefined"}function A3(t){if(!t&&!(0,S3.default)())return"Node";if((0,P3.default)(t))return"Electron";var e=typeof navigator!="undefined"?navigator:{},r=t||e.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":Ec.chrome?"Chrome":Ec.safari?"Safari":Ec.mozInnerScreenX?"Firefox":"Unknown"}});var fy=Pe(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.default=L3;function L3(t,e){if(!t)throw new Error(e||"Assertion failed")}});var Zi=Pe(Xe=>{"use strict";var hy=$n(),I3=Ho();Object.defineProperty(Xe,"__esModule",{value:!0});Object.defineProperty(Xe,"VERSION",{enumerable:!0,get:function(){return R3.VERSION}});Object.defineProperty(Xe,"assert",{enumerable:!0,get:function(){return C3.default}});Object.defineProperty(Xe,"console",{enumerable:!0,get:function(){return qi.console}});Object.defineProperty(Xe,"document",{enumerable:!0,get:function(){return qi.document}});Object.defineProperty(Xe,"getBrowser",{enumerable:!0,get:function(){return py.default}});Object.defineProperty(Xe,"global",{enumerable:!0,get:function(){return qi.global}});Object.defineProperty(Xe,"isBrowser",{enumerable:!0,get:function(){return dy.default}});Object.defineProperty(Xe,"isBrowserMainThread",{enumerable:!0,get:function(){return dy.isBrowserMainThread}});Object.defineProperty(Xe,"isElectron",{enumerable:!0,get:function(){return O3.default}});Object.defineProperty(Xe,"isMobile",{enumerable:!0,get:function(){return py.isMobile}});Object.defineProperty(Xe,"process",{enumerable:!0,get:function(){return qi.process}});Object.defineProperty(Xe,"self",{enumerable:!0,get:function(){return qi.self}});Object.defineProperty(Xe,"window",{enumerable:!0,get:function(){return qi.window}});var R3=ly(),qi=hp(),dy=gy(_c()),py=gy(uy()),O3=hy(yc()),C3=hy(fy());function my(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(my=function(i){return i?r:e})(t)}function gy(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||I3(t)!=="object"&&typeof t!="function")return{default:t};var r=my(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=t[s]}return n.default=t,r&&r.set(t,n),n}});var an=Pe((FC,by)=>{by.exports=Zi()});var c2=Pe((NG,qu)=>{(function(t,e,r,n){"use strict";var i=["","webkit","Moz","MS","ms","o"],s=e.createElement("div"),o="function",a=Math.round,l=Math.abs,c=Date.now;function u(p,g,T){return setTimeout(y(p,T),g)}function h(p,g,T){return Array.isArray(p)?(f(p,T[g],T),!0):!1}function f(p,g,T){var P;if(!!p)if(p.forEach)p.forEach(g,T);else if(p.length!==n)for(P=0;P<p.length;)g.call(T,p[P],P,p),P++;else for(P in p)p.hasOwnProperty(P)&&g.call(T,p[P],P,p)}function v(p,g,T){var P="DEPRECATED METHOD: "+g+`
`+T+` AT 
`;return function(){var R=new Error("get-stack-trace"),D=R&&R.stack?R.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Y=t.console&&(t.console.warn||t.console.log);return Y&&Y.call(t.console,P,D),p.apply(this,arguments)}}var E;typeof Object.assign!="function"?E=function(g){if(g===n||g===null)throw new TypeError("Cannot convert undefined or null to object");for(var T=Object(g),P=1;P<arguments.length;P++){var R=arguments[P];if(R!==n&&R!==null)for(var D in R)R.hasOwnProperty(D)&&(T[D]=R[D])}return T}:E=Object.assign;var _=v(function(g,T,P){for(var R=Object.keys(T),D=0;D<R.length;)(!P||P&&g[R[D]]===n)&&(g[R[D]]=T[R[D]]),D++;return g},"extend","Use `assign`."),m=v(function(g,T){return _(g,T,!0)},"merge","Use `assign`.");function d(p,g,T){var P=g.prototype,R;R=p.prototype=Object.create(P),R.constructor=p,R._super=P,T&&E(R,T)}function y(p,g){return function(){return p.apply(g,arguments)}}function x(p,g){return typeof p==o?p.apply(g&&g[0]||n,g):p}function w(p,g){return p===n?g:p}function S(p,g,T){f(L(g),function(P){p.addEventListener(P,T,!1)})}function M(p,g,T){f(L(g),function(P){p.removeEventListener(P,T,!1)})}function A(p,g){for(;p;){if(p==g)return!0;p=p.parentNode}return!1}function b(p,g){return p.indexOf(g)>-1}function L(p){return p.trim().split(/\s+/g)}function z(p,g,T){if(p.indexOf&&!T)return p.indexOf(g);for(var P=0;P<p.length;){if(T&&p[P][T]==g||!T&&p[P]===g)return P;P++}return-1}function H(p){return Array.prototype.slice.call(p,0)}function W(p,g,T){for(var P=[],R=[],D=0;D<p.length;){var Y=g?p[D][g]:p[D];z(R,Y)<0&&P.push(p[D]),R[D]=Y,D++}return T&&(g?P=P.sort(function(Le,He){return Le[g]>He[g]}):P=P.sort()),P}function X(p,g){for(var T,P,R=g[0].toUpperCase()+g.slice(1),D=0;D<i.length;){if(T=i[D],P=T?T+R:g,P in p)return P;D++}return n}var k=1;function Ze(){return k++}function pr(p){var g=p.ownerDocument||p;return g.defaultView||g.parentWindow||t}var Ya=/mobile|tablet|ip(ad|hone|od)|android/i,Mg="ontouchstart"in t,gw=X(t,"PointerEvent")!==n,vw=Mg&&Ya.test(navigator.userAgent),Ds="touch",yw="pen",Nf="mouse",xw="kinect",_w=25,We=1,Ln=2,ye=4,Ke=8,$a=1,Fs=2,Bs=4,zs=8,Us=16,Wt=Fs|Bs,In=zs|Us,Sg=Wt|In,Pg=["x","y"],Xa=["clientX","clientY"];function mt(p,g){var T=this;this.manager=p,this.callback=g,this.element=p.element,this.target=p.options.inputTarget,this.domHandler=function(P){x(p.options.enable,[p])&&T.handler(P)},this.init()}mt.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(pr(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(pr(this.element),this.evWin,this.domHandler)}};function Ew(p){var g,T=p.options.inputClass;return T?g=T:gw?g=Df:vw?g=Ka:Mg?g=Ff:g=Za,new g(p,ww)}function ww(p,g,T){var P=T.pointers.length,R=T.changedPointers.length,D=g&We&&P-R===0,Y=g&(ye|Ke)&&P-R===0;T.isFirst=!!D,T.isFinal=!!Y,D&&(p.session={}),T.eventType=g,Tw(p,T),p.emit("hammer.input",T),p.recognize(T),p.session.prevInput=T}function Tw(p,g){var T=p.session,P=g.pointers,R=P.length;T.firstInput||(T.firstInput=bg(g)),R>1&&!T.firstMultiple?T.firstMultiple=bg(g):R===1&&(T.firstMultiple=!1);var D=T.firstInput,Y=T.firstMultiple,Se=Y?Y.center:D.center,Le=g.center=Ag(P);g.timeStamp=c(),g.deltaTime=g.timeStamp-D.timeStamp,g.angle=kf(Se,Le),g.distance=qa(Se,Le),Mw(T,g),g.offsetDirection=Ig(g.deltaX,g.deltaY);var He=Lg(g.deltaTime,g.deltaX,g.deltaY);g.overallVelocityX=He.x,g.overallVelocityY=He.y,g.overallVelocity=l(He.x)>l(He.y)?He.x:He.y,g.scale=Y?bw(Y.pointers,P):1,g.rotation=Y?Pw(Y.pointers,P):0,g.maxPointers=T.prevInput?g.pointers.length>T.prevInput.maxPointers?g.pointers.length:T.prevInput.maxPointers:g.pointers.length,Sw(T,g);var Yt=p.element;A(g.srcEvent.target,Yt)&&(Yt=g.srcEvent.target),g.target=Yt}function Mw(p,g){var T=g.center,P=p.offsetDelta||{},R=p.prevDelta||{},D=p.prevInput||{};(g.eventType===We||D.eventType===ye)&&(R=p.prevDelta={x:D.deltaX||0,y:D.deltaY||0},P=p.offsetDelta={x:T.x,y:T.y}),g.deltaX=R.x+(T.x-P.x),g.deltaY=R.y+(T.y-P.y)}function Sw(p,g){var T=p.lastInterval||g,P=g.timeStamp-T.timeStamp,R,D,Y,Se;if(g.eventType!=Ke&&(P>_w||T.velocity===n)){var Le=g.deltaX-T.deltaX,He=g.deltaY-T.deltaY,Yt=Lg(P,Le,He);D=Yt.x,Y=Yt.y,R=l(Yt.x)>l(Yt.y)?Yt.x:Yt.y,Se=Ig(Le,He),p.lastInterval=g}else R=T.velocity,D=T.velocityX,Y=T.velocityY,Se=T.direction;g.velocity=R,g.velocityX=D,g.velocityY=Y,g.direction=Se}function bg(p){for(var g=[],T=0;T<p.pointers.length;)g[T]={clientX:a(p.pointers[T].clientX),clientY:a(p.pointers[T].clientY)},T++;return{timeStamp:c(),pointers:g,center:Ag(g),deltaX:p.deltaX,deltaY:p.deltaY}}function Ag(p){var g=p.length;if(g===1)return{x:a(p[0].clientX),y:a(p[0].clientY)};for(var T=0,P=0,R=0;R<g;)T+=p[R].clientX,P+=p[R].clientY,R++;return{x:a(T/g),y:a(P/g)}}function Lg(p,g,T){return{x:g/p||0,y:T/p||0}}function Ig(p,g){return p===g?$a:l(p)>=l(g)?p<0?Fs:Bs:g<0?zs:Us}function qa(p,g,T){T||(T=Pg);var P=g[T[0]]-p[T[0]],R=g[T[1]]-p[T[1]];return Math.sqrt(P*P+R*R)}function kf(p,g,T){T||(T=Pg);var P=g[T[0]]-p[T[0]],R=g[T[1]]-p[T[1]];return Math.atan2(R,P)*180/Math.PI}function Pw(p,g){return kf(g[1],g[0],Xa)+kf(p[1],p[0],Xa)}function bw(p,g){return qa(g[0],g[1],Xa)/qa(p[0],p[1],Xa)}var Aw={mousedown:We,mousemove:Ln,mouseup:ye},Lw="mousedown",Iw="mousemove mouseup";function Za(){this.evEl=Lw,this.evWin=Iw,this.pressed=!1,mt.apply(this,arguments)}d(Za,mt,{handler:function(g){var T=Aw[g.type];T&We&&g.button===0&&(this.pressed=!0),T&Ln&&g.which!==1&&(T=ye),!!this.pressed&&(T&ye&&(this.pressed=!1),this.callback(this.manager,T,{pointers:[g],changedPointers:[g],pointerType:Nf,srcEvent:g}))}});var Rw={pointerdown:We,pointermove:Ln,pointerup:ye,pointercancel:Ke,pointerout:Ke},Ow={2:Ds,3:yw,4:Nf,5:xw},Rg="pointerdown",Og="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Rg="MSPointerDown",Og="MSPointerMove MSPointerUp MSPointerCancel");function Df(){this.evEl=Rg,this.evWin=Og,mt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}d(Df,mt,{handler:function(g){var T=this.store,P=!1,R=g.type.toLowerCase().replace("ms",""),D=Rw[R],Y=Ow[g.pointerType]||g.pointerType,Se=Y==Ds,Le=z(T,g.pointerId,"pointerId");D&We&&(g.button===0||Se)?Le<0&&(T.push(g),Le=T.length-1):D&(ye|Ke)&&(P=!0),!(Le<0)&&(T[Le]=g,this.callback(this.manager,D,{pointers:T,changedPointers:[g],pointerType:Y,srcEvent:g}),P&&T.splice(Le,1))}});var Cw={touchstart:We,touchmove:Ln,touchend:ye,touchcancel:Ke},Nw="touchstart",kw="touchstart touchmove touchend touchcancel";function Cg(){this.evTarget=Nw,this.evWin=kw,this.started=!1,mt.apply(this,arguments)}d(Cg,mt,{handler:function(g){var T=Cw[g.type];if(T===We&&(this.started=!0),!!this.started){var P=Dw.call(this,g,T);T&(ye|Ke)&&P[0].length-P[1].length===0&&(this.started=!1),this.callback(this.manager,T,{pointers:P[0],changedPointers:P[1],pointerType:Ds,srcEvent:g})}}});function Dw(p,g){var T=H(p.touches),P=H(p.changedTouches);return g&(ye|Ke)&&(T=W(T.concat(P),"identifier",!0)),[T,P]}var Fw={touchstart:We,touchmove:Ln,touchend:ye,touchcancel:Ke},Bw="touchstart touchmove touchend touchcancel";function Ka(){this.evTarget=Bw,this.targetIds={},mt.apply(this,arguments)}d(Ka,mt,{handler:function(g){var T=Fw[g.type],P=zw.call(this,g,T);!P||this.callback(this.manager,T,{pointers:P[0],changedPointers:P[1],pointerType:Ds,srcEvent:g})}});function zw(p,g){var T=H(p.touches),P=this.targetIds;if(g&(We|Ln)&&T.length===1)return P[T[0].identifier]=!0,[T,T];var R,D,Y=H(p.changedTouches),Se=[],Le=this.target;if(D=T.filter(function(He){return A(He.target,Le)}),g===We)for(R=0;R<D.length;)P[D[R].identifier]=!0,R++;for(R=0;R<Y.length;)P[Y[R].identifier]&&Se.push(Y[R]),g&(ye|Ke)&&delete P[Y[R].identifier],R++;if(!!Se.length)return[W(D.concat(Se),"identifier",!0),Se]}var Uw=2500,Ng=25;function Ff(){mt.apply(this,arguments);var p=y(this.handler,this);this.touch=new Ka(this.manager,p),this.mouse=new Za(this.manager,p),this.primaryTouch=null,this.lastTouches=[]}d(Ff,mt,{handler:function(g,T,P){var R=P.pointerType==Ds,D=P.pointerType==Nf;if(!(D&&P.sourceCapabilities&&P.sourceCapabilities.firesTouchEvents)){if(R)Vw.call(this,T,P);else if(D&&jw.call(this,P))return;this.callback(g,T,P)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Vw(p,g){p&We?(this.primaryTouch=g.changedPointers[0].identifier,kg.call(this,g)):p&(ye|Ke)&&kg.call(this,g)}function kg(p){var g=p.changedPointers[0];if(g.identifier===this.primaryTouch){var T={x:g.clientX,y:g.clientY};this.lastTouches.push(T);var P=this.lastTouches,R=function(){var D=P.indexOf(T);D>-1&&P.splice(D,1)};setTimeout(R,Uw)}}function jw(p){for(var g=p.srcEvent.clientX,T=p.srcEvent.clientY,P=0;P<this.lastTouches.length;P++){var R=this.lastTouches[P],D=Math.abs(g-R.x),Y=Math.abs(T-R.y);if(D<=Ng&&Y<=Ng)return!0}return!1}var Dg=X(s.style,"touchAction"),Fg=Dg!==n,Bg="compute",zg="auto",Bf="manipulation",Rn="none",Vs="pan-x",js="pan-y",Qa=Ww();function zf(p,g){this.manager=p,this.set(g)}zf.prototype={set:function(p){p==Bg&&(p=this.compute()),Fg&&this.manager.element.style&&Qa[p]&&(this.manager.element.style[Dg]=p),this.actions=p.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var p=[];return f(this.manager.recognizers,function(g){x(g.options.enable,[g])&&(p=p.concat(g.getTouchAction()))}),Gw(p.join(" "))},preventDefaults:function(p){var g=p.srcEvent,T=p.offsetDirection;if(this.manager.session.prevented){g.preventDefault();return}var P=this.actions,R=b(P,Rn)&&!Qa[Rn],D=b(P,js)&&!Qa[js],Y=b(P,Vs)&&!Qa[Vs];if(R){var Se=p.pointers.length===1,Le=p.distance<2,He=p.deltaTime<250;if(Se&&Le&&He)return}if(!(Y&&D)&&(R||D&&T&Wt||Y&&T&In))return this.preventSrc(g)},preventSrc:function(p){this.manager.session.prevented=!0,p.preventDefault()}};function Gw(p){if(b(p,Rn))return Rn;var g=b(p,Vs),T=b(p,js);return g&&T?Rn:g||T?g?Vs:js:b(p,Bf)?Bf:zg}function Ww(){if(!Fg)return!1;var p={},g=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(T){p[T]=g?t.CSS.supports("touch-action",T):!0}),p}var Ja=1,gt=2,pi=4,Fr=8,mr=Fr,Gs=16,Ht=32;function gr(p){this.options=E({},this.defaults,p||{}),this.id=Ze(),this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=Ja,this.simultaneous={},this.requireFail=[]}gr.prototype={defaults:{},set:function(p){return E(this.options,p),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(p){if(h(p,"recognizeWith",this))return this;var g=this.simultaneous;return p=el(p,this),g[p.id]||(g[p.id]=p,p.recognizeWith(this)),this},dropRecognizeWith:function(p){return h(p,"dropRecognizeWith",this)?this:(p=el(p,this),delete this.simultaneous[p.id],this)},requireFailure:function(p){if(h(p,"requireFailure",this))return this;var g=this.requireFail;return p=el(p,this),z(g,p)===-1&&(g.push(p),p.requireFailure(this)),this},dropRequireFailure:function(p){if(h(p,"dropRequireFailure",this))return this;p=el(p,this);var g=z(this.requireFail,p);return g>-1&&this.requireFail.splice(g,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(p){return!!this.simultaneous[p.id]},emit:function(p){var g=this,T=this.state;function P(R){g.manager.emit(R,p)}T<Fr&&P(g.options.event+Ug(T)),P(g.options.event),p.additionalEvent&&P(p.additionalEvent),T>=Fr&&P(g.options.event+Ug(T))},tryEmit:function(p){if(this.canEmit())return this.emit(p);this.state=Ht},canEmit:function(){for(var p=0;p<this.requireFail.length;){if(!(this.requireFail[p].state&(Ht|Ja)))return!1;p++}return!0},recognize:function(p){var g=E({},p);if(!x(this.options.enable,[this,g])){this.reset(),this.state=Ht;return}this.state&(mr|Gs|Ht)&&(this.state=Ja),this.state=this.process(g),this.state&(gt|pi|Fr|Gs)&&this.tryEmit(g)},process:function(p){},getTouchAction:function(){},reset:function(){}};function Ug(p){return p&Gs?"cancel":p&Fr?"end":p&pi?"move":p&gt?"start":""}function Vg(p){return p==Us?"down":p==zs?"up":p==Fs?"left":p==Bs?"right":""}function el(p,g){var T=g.manager;return T?T.get(p):p}function Ct(){gr.apply(this,arguments)}d(Ct,gr,{defaults:{pointers:1},attrTest:function(p){var g=this.options.pointers;return g===0||p.pointers.length===g},process:function(p){var g=this.state,T=p.eventType,P=g&(gt|pi),R=this.attrTest(p);return P&&(T&Ke||!R)?g|Gs:P||R?T&ye?g|Fr:g&gt?g|pi:gt:Ht}});function tl(){Ct.apply(this,arguments),this.pX=null,this.pY=null}d(tl,Ct,{defaults:{event:"pan",threshold:10,pointers:1,direction:Sg},getTouchAction:function(){var p=this.options.direction,g=[];return p&Wt&&g.push(js),p&In&&g.push(Vs),g},directionTest:function(p){var g=this.options,T=!0,P=p.distance,R=p.direction,D=p.deltaX,Y=p.deltaY;return R&g.direction||(g.direction&Wt?(R=D===0?$a:D<0?Fs:Bs,T=D!=this.pX,P=Math.abs(p.deltaX)):(R=Y===0?$a:Y<0?zs:Us,T=Y!=this.pY,P=Math.abs(p.deltaY))),p.direction=R,T&&P>g.threshold&&R&g.direction},attrTest:function(p){return Ct.prototype.attrTest.call(this,p)&&(this.state&gt||!(this.state&gt)&&this.directionTest(p))},emit:function(p){this.pX=p.deltaX,this.pY=p.deltaY;var g=Vg(p.direction);g&&(p.additionalEvent=this.options.event+g),this._super.emit.call(this,p)}});function Uf(){Ct.apply(this,arguments)}d(Uf,Ct,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rn]},attrTest:function(p){return this._super.attrTest.call(this,p)&&(Math.abs(p.scale-1)>this.options.threshold||this.state&gt)},emit:function(p){if(p.scale!==1){var g=p.scale<1?"in":"out";p.additionalEvent=this.options.event+g}this._super.emit.call(this,p)}});function Vf(){gr.apply(this,arguments),this._timer=null,this._input=null}d(Vf,gr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[zg]},process:function(p){var g=this.options,T=p.pointers.length===g.pointers,P=p.distance<g.threshold,R=p.deltaTime>g.time;if(this._input=p,!P||!T||p.eventType&(ye|Ke)&&!R)this.reset();else if(p.eventType&We)this.reset(),this._timer=u(function(){this.state=mr,this.tryEmit()},g.time,this);else if(p.eventType&ye)return mr;return Ht},reset:function(){clearTimeout(this._timer)},emit:function(p){this.state===mr&&(p&&p.eventType&ye?this.manager.emit(this.options.event+"up",p):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function jf(){Ct.apply(this,arguments)}d(jf,Ct,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rn]},attrTest:function(p){return this._super.attrTest.call(this,p)&&(Math.abs(p.rotation)>this.options.threshold||this.state&gt)}});function Gf(){Ct.apply(this,arguments)}d(Gf,Ct,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Wt|In,pointers:1},getTouchAction:function(){return tl.prototype.getTouchAction.call(this)},attrTest:function(p){var g=this.options.direction,T;return g&(Wt|In)?T=p.overallVelocity:g&Wt?T=p.overallVelocityX:g&In&&(T=p.overallVelocityY),this._super.attrTest.call(this,p)&&g&p.offsetDirection&&p.distance>this.options.threshold&&p.maxPointers==this.options.pointers&&l(T)>this.options.velocity&&p.eventType&ye},emit:function(p){var g=Vg(p.offsetDirection);g&&this.manager.emit(this.options.event+g,p),this.manager.emit(this.options.event,p)}});function rl(){gr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}d(rl,gr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Bf]},process:function(p){var g=this.options,T=p.pointers.length===g.pointers,P=p.distance<g.threshold,R=p.deltaTime<g.time;if(this.reset(),p.eventType&We&&this.count===0)return this.failTimeout();if(P&&R&&T){if(p.eventType!=ye)return this.failTimeout();var D=this.pTime?p.timeStamp-this.pTime<g.interval:!0,Y=!this.pCenter||qa(this.pCenter,p.center)<g.posThreshold;this.pTime=p.timeStamp,this.pCenter=p.center,!Y||!D?this.count=1:this.count+=1,this._input=p;var Se=this.count%g.taps;if(Se===0)return this.hasRequireFailures()?(this._timer=u(function(){this.state=mr,this.tryEmit()},g.interval,this),gt):mr}return Ht},failTimeout:function(){return this._timer=u(function(){this.state=Ht},this.options.interval,this),Ht},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==mr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function vr(p,g){return g=g||{},g.recognizers=w(g.recognizers,vr.defaults.preset),new Wf(p,g)}vr.VERSION="2.0.7",vr.defaults={domEvents:!1,touchAction:Bg,enable:!0,inputTarget:null,inputClass:null,preset:[[jf,{enable:!1}],[Uf,{enable:!1},["rotate"]],[Gf,{direction:Wt}],[tl,{direction:Wt},["swipe"]],[rl],[rl,{event:"doubletap",taps:2},["tap"]],[Vf]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Hw=1,jg=2;function Wf(p,g){this.options=E({},vr.defaults,g||{}),this.options.inputTarget=this.options.inputTarget||p,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=p,this.input=Ew(this),this.touchAction=new zf(this,this.options.touchAction),Gg(this,!0),f(this.options.recognizers,function(T){var P=this.add(new T[0](T[1]));T[2]&&P.recognizeWith(T[2]),T[3]&&P.requireFailure(T[3])},this)}Wf.prototype={set:function(p){return E(this.options,p),p.touchAction&&this.touchAction.update(),p.inputTarget&&(this.input.destroy(),this.input.target=p.inputTarget,this.input.init()),this},stop:function(p){this.session.stopped=p?jg:Hw},recognize:function(p){var g=this.session;if(!g.stopped){this.touchAction.preventDefaults(p);var T,P=this.recognizers,R=g.curRecognizer;(!R||R&&R.state&mr)&&(R=g.curRecognizer=null);for(var D=0;D<P.length;)T=P[D],g.stopped!==jg&&(!R||T==R||T.canRecognizeWith(R))?T.recognize(p):T.reset(),!R&&T.state&(gt|pi|Fr)&&(R=g.curRecognizer=T),D++}},get:function(p){if(p instanceof gr)return p;for(var g=this.recognizers,T=0;T<g.length;T++)if(g[T].options.event==p)return g[T];return null},add:function(p){if(h(p,"add",this))return this;var g=this.get(p.options.event);return g&&this.remove(g),this.recognizers.push(p),p.manager=this,this.touchAction.update(),p},remove:function(p){if(h(p,"remove",this))return this;if(p=this.get(p),p){var g=this.recognizers,T=z(g,p);T!==-1&&(g.splice(T,1),this.touchAction.update())}return this},on:function(p,g){if(p!==n&&g!==n){var T=this.handlers;return f(L(p),function(P){T[P]=T[P]||[],T[P].push(g)}),this}},off:function(p,g){if(p!==n){var T=this.handlers;return f(L(p),function(P){g?T[P]&&T[P].splice(z(T[P],g),1):delete T[P]}),this}},emit:function(p,g){this.options.domEvents&&Yw(p,g);var T=this.handlers[p]&&this.handlers[p].slice();if(!(!T||!T.length)){g.type=p,g.preventDefault=function(){g.srcEvent.preventDefault()};for(var P=0;P<T.length;)T[P](g),P++}},destroy:function(){this.element&&Gg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Gg(p,g){var T=p.element;if(!!T.style){var P;f(p.options.cssProps,function(R,D){P=X(T.style,D),g?(p.oldCssProps[P]=T.style[P],T.style[P]=R):T.style[P]=p.oldCssProps[P]||""}),g||(p.oldCssProps={})}}function Yw(p,g){var T=e.createEvent("Event");T.initEvent(p,!0,!0),T.gesture=g,g.target.dispatchEvent(T)}E(vr,{INPUT_START:We,INPUT_MOVE:Ln,INPUT_END:ye,INPUT_CANCEL:Ke,STATE_POSSIBLE:Ja,STATE_BEGAN:gt,STATE_CHANGED:pi,STATE_ENDED:Fr,STATE_RECOGNIZED:mr,STATE_CANCELLED:Gs,STATE_FAILED:Ht,DIRECTION_NONE:$a,DIRECTION_LEFT:Fs,DIRECTION_RIGHT:Bs,DIRECTION_UP:zs,DIRECTION_DOWN:Us,DIRECTION_HORIZONTAL:Wt,DIRECTION_VERTICAL:In,DIRECTION_ALL:Sg,Manager:Wf,Input:mt,TouchAction:zf,TouchInput:Ka,MouseInput:Za,PointerEventInput:Df,TouchMouseInput:Ff,SingleTouchInput:Cg,Recognizer:gr,AttrRecognizer:Ct,Tap:rl,Pan:tl,Swipe:Gf,Pinch:Uf,Rotate:jf,Press:Vf,on:S,off:M,each:f,merge:m,extend:_,assign:E,inherit:d,bindFn:y,prefixed:X});var $w=typeof t!="undefined"?t:typeof self!="undefined"?self:{};$w.Hammer=vr,typeof define=="function"&&define.amd?define(function(){return vr}):typeof qu!="undefined"&&qu.exports?qu.exports=vr:t[r]=vr})(window,document,"Hammer")});var C=Qe(Qf()),mw=Qe(sy());var Pc=Qe(Zi());function F(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qi=Qe(Zi());function N3(t){try{let e=window[t],r="__storage_test__";return e.setItem(r,r),e.removeItem(r),e}catch(e){return null}}var Tc=class{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";F(this,"storage",void 0),F(this,"id",void 0),F(this,"config",{}),this.storage=N3(n),this.id=e,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){let r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let e={};if(this.storage){let r=this.storage.getItem(this.id);e=r?JSON.parse(r):{}}return Object.assign(this.config,e),this}};function vy(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function yy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(" ".repeat(r)).concat(t)}function Mc(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(r=Math.min(r,n/t.width));let s=t.width*r,o=t.height*r,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}var xy=Qe(Zi()),Sc;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Sc||(Sc={}));function _y(t){return typeof t=="string"?Sc[t.toUpperCase()]||Sc.WHITE:t}function Ey(t,e,r){return!xy.isBrowser&&typeof t=="string"&&(e&&(e=_y(e),t="[".concat(e,"m").concat(t,"[39m")),r&&(e=_y(r),t="[".concat(r+10,"m").concat(t,"[49m"))),t}function wy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r);for(let i of n)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function Ki(t,e){if(!t)throw new Error(e||"Assertion failed")}var lt=Qe(Zi());function Xn(){let t;if(lt.isBrowser&&"performance"in lt.window){var e,r;t=lt.window===null||lt.window===void 0||(e=lt.window.performance)===null||e===void 0||(r=e.now)===null||r===void 0?void 0:r.call(e)}else if("hrtime"in lt.process){var n;let i=lt.process===null||lt.process===void 0||(n=lt.process.hrtime)===null||n===void 0?void 0:n.call(lt.process);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}var Ji={debug:Qi.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},k3={enabled:!0,level:0};function Pt(){}var Ty={},My={once:!0},ct=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};F(this,"id",void 0),F(this,"VERSION",Qi.VERSION),F(this,"_startTs",Xn()),F(this,"_deltaTs",Xn()),F(this,"_storage",void 0),F(this,"userData",{}),F(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new Tc("__probe-".concat(this.id,"__"),k3),this.userData={},this.timeStamp("".concat(this.id," started")),wy(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Xn()-this._startTs).toPrecision(10))}getDelta(){return Number((Xn()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,r){this._storage.updateConfiguration({[e]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,r){Ki(e,r)}warn(e){return this._getLogFunction(0,e,Ji.warn,arguments,My)}error(e){return this._getLogFunction(0,e,Ji.error,arguments)}deprecated(e,r){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(e,r){return this.error("`".concat(e,"` has been removed. Use `").concat(r,"` instead"))}probe(e,r){return this._getLogFunction(e,r,Ji.log,arguments,{time:!0,once:!0})}log(e,r){return this._getLogFunction(e,r,Ji.debug,arguments)}info(e,r){return this._getLogFunction(e,r,console.info,arguments)}once(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return this._getLogFunction(e,r,Ji.debug||Ji.info,arguments,My)}table(e,r,n){return r?this._getLogFunction(e,r,console.table||Pt,n&&[n],{tag:z3(r)}):Pt}image(e){let{logLevel:r,priority:n,image:i,message:s="",scale:o=1}=e;return this._shouldLog(r||n)?Qi.isBrowser?B3({image:i,message:s,scale:o}):F3({image:i,message:s,scale:o}):Pt}time(e,r){return this._getLogFunction(e,r,console.time?console.time:console.info)}timeEnd(e,r){return this._getLogFunction(e,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,r){return this._getLogFunction(e,r,console.timeStamp||Pt)}group(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=Py({logLevel:e,message:r,opts:n}),{collapsed:s}=n;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,r,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Pt)}withGroup(e,r,n){this.group(e,r)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Sy(e)}_getLogFunction(e,r,n,i,s){if(this._shouldLog(e)){s=Py({logLevel:e,message:r,args:i,opts:s}),n=n||s.method,Ki(n),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Xn();let o=s.tag||s.message;if(s.once)if(!Ty[o])Ty[o]=Xn();else return Pt;return r=D3(this.id,s.message,s),n.bind(console,r,...s.args)}return Pt}};F(ct,"VERSION",Qi.VERSION);function Sy(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ki(Number.isFinite(e)&&e>=0),e}function Py(t){let{logLevel:e,message:r}=t;t.logLevel=Sy(e);let n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==r;);switch(typeof e){case"string":case"function":r!==void 0&&n.unshift(r),t.message=e;break;case"object":Object.assign(t,e);break;default:}typeof t.message=="function"&&(t.message=t.message());let i=typeof t.message;return Ki(i==="string"||i==="object"),Object.assign(t,{args:n},t.opts)}function D3(t,e,r){if(typeof e=="string"){let n=r.time?yy(vy(r.total)):"";e=r.time?"".concat(t,": ").concat(n,"  ").concat(e):"".concat(t,": ").concat(e),e=Ey(e,r.color,r.background)}return e}function F3(t){let{image:e,message:r="",scale:n=1}=t,i=null;try{i=module.require("asciify-image")}catch(s){}return i?()=>i(e,{fit:"box",width:"".concat(Math.round(80*n),"%")}).then(s=>console.log(s)):Pt}function B3(t){let{image:e,message:r="",scale:n=1}=t;if(typeof e=="string"){let s=new Image;return s.onload=()=>{let o=Mc(s,r,n);console.log(...o)},s.src=e,Pt}let i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Mc(e,r,n)),Pt;if(i.toLowerCase()==="canvas"){let s=new Image;return s.onload=()=>console.log(...Mc(s,r,n)),s.src=e.toDataURL(),Pt}return Pt}function z3(t){for(let e in t)for(let r in t[e])return r||"untitled";return"empty"}var mC=new ct({id:"@probe.gl/log"});function Yo(){let t;if(typeof window!="undefined"&&window.performance)t=window.performance.now();else if(typeof process!="undefined"&&process.hrtime){let e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var qn=class{constructor(e,r){F(this,"name",void 0),F(this,"type",void 0),F(this,"sampleSize",1),F(this,"time",void 0),F(this,"count",void 0),F(this,"samples",void 0),F(this,"lastTiming",void 0),F(this,"lastSampleTime",void 0),F(this,"lastSampleCount",void 0),F(this,"_count",0),F(this,"_time",0),F(this,"_samples",0),F(this,"_startTime",0),F(this,"_timerPending",!1),this.name=e,this.type=r,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Yo(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Yo()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}};var er=class{constructor(e){F(this,"id",void 0),F(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(let e in this.stats)this.stats[e].reset();return this}forEach(e){for(let r in this.stats)e(this.stats[r])}getTable(){let e={};return this.forEach(r=>{e[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(e){if(!e||!e.name)return null;let{name:r,type:n}=e;return this.stats[r]||(e instanceof qn?this.stats[r]=e:this.stats[r]=new qn(r,n)),this.stats[r]}};var N=new ct({id:"luma.gl"});function de(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}var U3="Invalid WebGLRenderingContext";var V3="Requires WebGL2";function Pr(t){return typeof WebGLRenderingContext!="undefined"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function U(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function pp(t){return U(t)?t:null}function br(t){return de(Pr(t),U3),t}function ae(t){return de(U(t),V3),t}var Zn=Qe(an()),$o={};function j3(t){Zn.global.console&&Zn.global.console.error&&Zn.global.console.error(t)}function G3(t){Zn.global.console&&Zn.global.console.log&&Zn.global.console.log(t)}function W3(t,e){$o[t]=!0,e!==void 0&&j3(e)}function H3(t){let e=t.getError;t.getError=function(){let n;do n=e.apply(t),n!==0&&($o[n]=!0);while(n!==0);for(n in $o)if($o[n])return delete $o[n],parseInt(n,10);return 0}}var Xo=function t(e){let r=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){let i=new t.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};Xo.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Xo.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var Kn=function(e){let r=this;this.gl=e,H3(e);let n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){let o=r.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);let a=o.attribs[s];return a.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){let o=r.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);let a=o.attribs[s];return a.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:r.currentArrayBuffer=o;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=o;break;default:}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){let l=r.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){let h=r.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);let f=h.attribs[s];return f.buffer=r.currentArrayBuffer,f.size=o,f.type=a,f.normalized=l,f.stride=c,f.offset=u,f.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{G3("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};Kn.prototype.VERTEX_ARRAY_BINDING_OES=34229;Kn.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;let r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new Xo(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Kn.prototype.createVertexArrayOES=function(){let e=new Xo(this);return this.vertexArrayObjects.push(e),e};Kn.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Kn.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Xo&&e.hasBeenBound&&e.ext===this)};Kn.prototype.bindVertexArrayOES=function(e){let r=this.gl;if(e&&!e.isAlive){W3(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}let n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;let s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer,a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){let c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),c.enabled){let h=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(n.bindBuffer.call(r,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&n.vertexAttribPointer.call(r,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function Ay(t){if(typeof t.createVertexArray=="function")return;let e=t.getSupportedExtensions;t.getSupportedExtensions=function(){let i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};let r=t.getExtension;t.getExtension=function(i){let s=r.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Kn(this)),this.__OESVertexArrayObject))}}var Ly="OES_element_index",Iy="WEBGL_draw_buffers",Y3="EXT_disjoint_timer_query",$3="EXT_disjoint_timer_query_webgl2",X3="EXT_texture_filter_anisotropic",Ry="WEBGL_debug_renderer_info",q3=35723,Z3=4352,K3=36795,Q3=34047,J3=37445,eS=37446,ee=t=>U(t)?void 0:0,tS={[3074]:t=>U(t)?void 0:36064,[q3]:t=>U(t)?void 0:Z3,[35977]:ee,[32937]:ee,[K3]:(t,e)=>{let r=U(t)?t.getExtension($3):t.getExtension(Y3);return r&&r.GPU_DISJOINT_EXT?e(r.GPU_DISJOINT_EXT):0},[J3]:(t,e)=>{let r=t.getExtension(Ry);return e(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[eS]:(t,e)=>{let r=t.getExtension(Ry);return e(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[Q3]:(t,e)=>{let r=t.luma.extensions[X3];return r?e(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:ee,[35071]:ee,[37447]:ee,[36063]:(t,e)=>{if(!U(t)){let r=t.getExtension(Iy);return r?e(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:ee,[35374]:ee,[35377]:ee,[34852]:t=>{if(!U(t)){let e=t.getExtension(Iy);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(Ly)?2147483647:65535,[33001]:t=>t.getExtension(Ly)?16777216:65535,[33e3]:t=>16777216,[37157]:ee,[35373]:ee,[35657]:ee,[36183]:ee,[37137]:ee,[34045]:ee,[35978]:ee,[35979]:ee,[35968]:ee,[35376]:ee,[35375]:ee,[35659]:ee,[37154]:ee,[35371]:ee,[35658]:ee,[35076]:ee,[35077]:ee,[35380]:ee};function Oy(t,e,r){let n=tS[r],i=typeof n=="function"?n(t,e,r):n;return i!==void 0?i:e(r)}var rS="OES_vertex_array_object",Cy="ANGLE_instanced_arrays",nS="WEBGL_draw_buffers",iS="EXT_disjoint_timer_query",sS="EXT_texture_filter_anisotropic",oS="VertexArray requires WebGL2 or OES_vertex_array_object extension";function aS(t,e){return{webgl2:U(t),ext:t.getExtension(e)}}var mp={[rS]:{meta:{suffix:"OES"},createVertexArray:()=>{de(!1,oS)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Cy]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){de(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[nS]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{de(!1)}},[iS]:{meta:{suffix:"EXT"},createQuery:()=>{de(!1)},deleteQuery:()=>{de(!1)},beginQuery:()=>{de(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},bc={readBuffer:(t,e,r)=>{U(t)&&e(r)},getVertexAttrib:(t,e,r,n)=>{let{webgl2:i,ext:s}=aS(t,Cy),o;switch(n){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break;default:}return o!==void 0?o:e(r,n)},getProgramParameter:(t,e,r,n)=>{if(!U(t))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return e(r,n)},getInternalformatParameter:(t,e,r,n,i)=>{if(!U(t))switch(i){case 32937:return new Int32Array([0]);default:}return t.getInternalformatParameter(r,n,i)},getTexParameter(t,e,r,n){switch(n){case 34046:let{extensions:i}=t.luma,s=i[sS];n=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return e(r,n)},getParameter:Oy,hint(t,e,r,n){return e(r,n)}};function Ny(t){t.luma=t.luma||{};let{luma:e}=t;return e.polyfilled||(Ay(t),cS(t),fS(t,mp),uS(t,{target:e,target2:t}),e.polyfilled=!0),t}var lS=typeof global!="undefined"?global:window;lS.polyfillContext=Ny;function cS(t){t.luma.extensions={};let e=t.getSupportedExtensions()||[];for(let r of e)t.luma[r]=t.getExtension(r)}function uS(t,{target:e,target2:r}){Object.keys(bc).forEach(n=>{if(typeof bc[n]=="function"){let i=t[n]?t[n].bind(t):()=>{},s=bc[n].bind(null,t,i);e[n]=s,r[n]=s}})}function fS(t,e){for(let r of Object.getOwnPropertyNames(e))r!=="overrides"&&hS(t,{extension:r,target:t.luma,target2:t})}function hS(t,{extension:e,target:r,target2:n}){let i=mp[e];de(i);let{meta:s={}}=i,{suffix:o=""}=s,a=t.getExtension(e);for(let l of Object.keys(i)){let c=`${l}${o}`,u=null;l==="meta"||typeof t[l]=="function"||(a&&typeof a[c]=="function"?u=(...h)=>a[c](...h):typeof i[l]=="function"&&(u=i[l].bind(r))),u&&(r[l]=u,n[l]=u)}}var qo={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},ln=(t,e,r)=>e?t.enable(r):t.disable(r),ky=(t,e,r)=>t.hint(r,e),ut=(t,e,r)=>t.pixelStorei(r,e),dS=(t,e)=>{let r=U(t)?36009:36160;return t.bindFramebuffer(r,e)},pS=(t,e)=>t.bindFramebuffer(36008,e);function Zo(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var Dy={[3042]:ln,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:ln,[2885]:(t,e)=>t.cullFace(e),[2929]:ln,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:ln,[35723]:ky,[36006]:dS,[2886]:(t,e)=>t.frontFace(e),[33170]:ky,[2849]:(t,e)=>t.lineWidth(e),[32823]:ln,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:ln,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:ln,[3088]:(t,e)=>t.scissor(...e),[2960]:ln,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:ut,[3317]:ut,[37440]:ut,[37441]:ut,[37443]:ut,[3330]:ut,[3332]:ut,[3331]:ut,[36010]:pS,[3314]:ut,[32878]:ut,[3316]:ut,[3315]:ut,[32877]:ut,framebuffer:(t,e)=>{let r=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,r)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Zo(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Zo(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Zo(e)?e:[e,e];let[r,n]=e;t.stencilMaskSeparate(1028,r),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=Zo(e)&&e.length===3?[...e,...e]:e;let[r,n,i,s,o,a]=e;t.stencilFuncSeparate(1028,r,n,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=Zo(e)&&e.length===3?[...e,...e]:e;let[r,n,i,s,o,a]=e;t.stencilOpSeparate(1028,r,n,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function fe(t,e,r){return e[t]!==void 0?e[t]:r[t]}var Fy={blendEquation:(t,e,r)=>t.blendEquationSeparate(fe(32777,e,r),fe(34877,e,r)),blendFunc:(t,e,r)=>t.blendFuncSeparate(fe(32969,e,r),fe(32968,e,r),fe(32971,e,r),fe(32970,e,r)),polygonOffset:(t,e,r)=>t.polygonOffset(fe(32824,e,r),fe(10752,e,r)),sampleCoverage:(t,e,r)=>t.sampleCoverage(fe(32938,e,r),fe(32939,e,r)),stencilFuncFront:(t,e,r)=>t.stencilFuncSeparate(1028,fe(2962,e,r),fe(2967,e,r),fe(2963,e,r)),stencilFuncBack:(t,e,r)=>t.stencilFuncSeparate(1029,fe(34816,e,r),fe(36003,e,r),fe(36004,e,r)),stencilOpFront:(t,e,r)=>t.stencilOpSeparate(1028,fe(2964,e,r),fe(2965,e,r),fe(2966,e,r)),stencilOpBack:(t,e,r)=>t.stencilOpSeparate(1029,fe(34817,e,r),fe(34818,e,r),fe(34819,e,r))},gp={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,r)=>t({[e]:r}),hint:(t,e,r)=>t({[e]:r}),bindFramebuffer:(t,e,r)=>{switch(e){case 36160:return t({[36006]:r,[36010]:r});case 36009:return t({[36006]:r});case 36008:return t({[36010]:r});default:return null}},blendColor:(t,e,r,n,i)=>t({[32773]:new Float32Array([e,r,n,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,r)=>t({[32777]:e,[34877]:r}),blendFunc:(t,e,r)=>t({[32969]:e,[32968]:r,[32971]:e,[32970]:r}),blendFuncSeparate:(t,e,r,n,i)=>t({[32969]:e,[32968]:r,[32971]:n,[32970]:i}),clearColor:(t,e,r,n,i)=>t({[3106]:new Float32Array([e,r,n,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,r,n,i)=>t({[3107]:[e,r,n,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,r)=>t({[2928]:new Float32Array([e,r])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,r)=>t({[32824]:e,[10752]:r}),sampleCoverage:(t,e,r)=>t({[32938]:e,[32939]:r}),scissor:(t,e,r,n,i)=>t({[3088]:new Int32Array([e,r,n,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,r)=>t({[e===1028?2968:36005]:r}),stencilFunc:(t,e,r,n)=>t({[2962]:e,[2967]:r,[2963]:n,[34816]:e,[36003]:r,[36004]:n}),stencilFuncSeparate:(t,e,r,n,i)=>t({[e===1028?2962:34816]:r,[e===1028?2967:36003]:n,[e===1028?2963:36004]:i}),stencilOp:(t,e,r,n)=>t({[2964]:e,[2965]:r,[2966]:n,[34817]:e,[34818]:r,[34819]:n}),stencilOpSeparate:(t,e,r,n,i)=>t({[e===1028?2964:34817]:r,[e===1028?2965:34818]:n,[e===1028?2966:34819]:i}),viewport:(t,e,r,n,i)=>t({[2978]:[e,r,n,i]})},tr=(t,e)=>t.isEnabled(e),vp={[3042]:tr,[2884]:tr,[2929]:tr,[3024]:tr,[32823]:tr,[32926]:tr,[32928]:tr,[3089]:tr,[2960]:tr,[35977]:tr};function yp(t){for(let e in t)return!1;return!0}function By(t,e){if(t===e)return!0;let r=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(r&&n&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function zy(t,e){let r=t[e].bind(t);t[e]=function(...i){let s=i[0];return s in t.state.cache?t.state.enable?t.state.cache[s]:r(...i):r(...i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function mS(t,e,r){let n=t[e].bind(t);t[e]=function(...s){let{valueChanged:o,oldValue:a}=r(t.state._updateCache,...s);return o&&n(...s),a},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function gS(t){let e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}var Uy=class{constructor(e,{copyState:r=!1,log:n=()=>{}}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?es(e):Object.assign({},qo),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){de(this.stateStack.length>0);let e=this.stateStack[this.stateStack.length-1];Ce(this.gl,e),this.stateStack.pop()}_updateCache(e){let r=!1,n,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(let s in e){de(s!==void 0);let o=e[s],a=this.cache[s];By(o,a)||(r=!0,n=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:r,oldValue:n}}};function Ac(t,e={}){let{enable:r=!0,copyState:n}=e;if(de(n!==void 0),!t.state){let i=typeof global!="undefined"?global:window,{polyfillContext:s}=i;s&&s(t),t.state=new Uy(t,{copyState:n}),gS(t);for(let o in gp){let a=gp[o];mS(t,o,a)}zy(t,"getParameter"),zy(t,"isEnabled")}return t.state.enable=r,t}function xp(t){t.state||Ac(t,{copyState:!1}),t.state.push()}function Lc(t){de(t.state),t.state.pop()}function Ce(t,e){if(de(Pr(t),"setParameters requires a WebGL context"),yp(e))return;let r={};for(let i in e){let s=Number(i),o=Dy[i];o&&(typeof o=="string"?r[o]=!0:o(t,e[i],s))}let n=t.state&&t.state.cache;if(n)for(let i in r)Fy[i](t,e,n)}function es(t,e){if(e=e||qo,typeof e=="number"){let i=e,s=vp[i];return s?s(t,i):t.getParameter(i)}let r=Array.isArray(e)?e:Object.keys(e),n={};for(let i of r){let s=vp[i];n[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return n}function Ic(t){Ce(t,qo)}function ie(t,e,r){if(yp(e))return r(t);let{nocatch:n=!0}=e;xp(t),Ce(t,e);let i;if(n)i=r(t),Lc(t);else try{i=r(t)}finally{Lc(t)}return i}var Ko=Qe(an());function Ft(t){let{luma:e}=t;if(t.canvas&&e){let{clientWidth:r}=e.canvasSizeInfo;return r?t.drawingBufferWidth/r:1}return 1}function ts(t,e,r=!0){let n=Ft(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return vS(e,n,i,s,r)}function Vy(t){let e=typeof window=="undefined"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function vS(t,e,r,n,i){let s=jy(t[0],e,r),o=Gy(t[1],e,n,i),a=jy(t[0]+1,e,r),l=a===r-1?a:a-1;a=Gy(t[1]+1,e,n,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===n-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function jy(t,e,r){return Math.min(Math.round(t*e),r-1)}function Gy(t,e,r,n){return n?Math.max(0,r-1-Math.round(t*e)):Math.min(Math.round(t*e),r-1)}var _p=(0,Ko.isBrowser)(),yS=_p&&typeof document!="undefined",Wy={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function rs(t={}){de(_p,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},Wy,t);let{width:e,height:r}=t;function n(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=n;let i,{canvas:s}=t,o=_S({canvas:s,width:e,height:r,onError:n});return i=xS(o,t),i?(i=Qn(i,t),ES(i),i):null}function Qn(t,e={}){if(!t||t._instrumented)return t;t._version=t._version||wS(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},Wy,e);let{manageState:r,debug:n}=e;return r&&Ac(t,{copyState:!1,log:(...i)=>N.log(1,...i)()}),_p&&n&&(Ko.global.makeDebugContext?(t=Ko.global.makeDebugContext(t,e),N.level=Math.max(N.level,1)):N.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Hy(t){let e=t.getParameter(7936),r=t.getParameter(7937),n=t.getExtension("WEBGL_debug_renderer_info"),i=n&&t.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),s=n&&t.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||r,vendorMasked:e,rendererMasked:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function Ep(t,e={}){if(t.canvas){let n=Vy(e.useDevicePixels);TS(t,n,e);return}let r=t.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in e&&"height"in e&&r.resize(e.width,e.height)}function xS(t,e){let{onError:r}=e,n=null,i=l=>n=l.statusMessage||n;t.addEventListener("webglcontextcreationerror",i,!1);let{webgl1:s=!0,webgl2:o=!0}=e,a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):r(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${n||"Unknown error"}`)}function _S({canvas:t,width:e=800,height:r=600,onError:n}){let i;return typeof t=="string"?(yS&&document.readyState==="complete"||n(`createGLContext called on canvas '${t}' before page was loaded`),i=document.getElementById(t)):t?i=t:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(r)?`${r}px`:"100%",document.body.insertBefore(i,document.body.firstChild)),i}function ES(t){let e=U(t)?"WebGL2":"WebGL1",r=Hy(t),n=r?`(${r.vendor},${r.renderer})`:"",i=t.debug?" debug":"";N.info(1,`${e}${i} context ${n}`)()}function wS(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?2:1}function TS(t,e,r){let n="width"in r?r.width:t.canvas.clientWidth,i="height"in r?r.height:t.canvas.clientHeight;(!n||!i)&&(N.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};let s=t.luma.canvasSizeInfo;if(s.clientWidth!==n||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e,a=Math.floor(n*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(N.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/n,t.drawingBufferHeight/i),t.canvas.width=Math.floor(n*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:e})}}var rr=Qe(an()),Qo="8.5.10",MS="set luma.log.level=1 (or higher) to trace rendering",Yy=class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new er({id:e})),this.stats.get(e)}},bt=new Yy;if(rr.global.luma&&rr.global.luma.VERSION!==Qo)throw new Error(`luma.gl - multiple VERSIONs detected: ${rr.global.luma.VERSION} vs ${Qo}`);rr.global.luma||((0,rr.isBrowser)()&&N.log(1,`luma.gl ${Qo} - ${MS}`)(),rr.global.luma=rr.global.luma||{VERSION:Qo,version:Qo,log:N,stats:bt,globals:{modules:{},nodeIO:{}}});var PN=rr.global.luma;function wp(t){return typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function Tp(t){return typeof window!="undefined"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var Jy=Qe(an());function I(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Rc(t,e){if(typeof e!="string")return e;let r=Number(e);if(!isNaN(r))return r;e=e.replace(/^.*\./,"");let n=t[e];return I(n!==void 0,`Accessing undefined constant GL.${e}`),n}function At(t,e){e=Number(e);for(let r in t)if(t[r]===e)return`GL.${r}`;return String(e)}var Mp={};function qe(t="id"){Mp[t]=Mp[t]||1;let e=Mp[t]++;return`${t}-${e}`}function Sp(t){return I(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function nr(t){let e=!0;for(let r in t){e=!1;break}return e}function Oc(t,e,r,n){let i=`See luma.gl ${r} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(t);n.forEach(o=>{s.methodName||(s[o]=()=>{throw N.removed(`Calling removed method ${e}.${o}: `,i)(),new Error(o)})})}var ns="Resource subclass must define virtual methods",xe=class{constructor(e,r={}){br(e);let{id:n,userData:i={}}=r;this.gl=e,this.gl2=e,this.id=n||qe(this.constructor.name),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){let r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&e&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(e=this.handle){if(typeof e!="function")return this._bindHandle(e),this;let r;return this._bound?r=e():(this._bindHandle(this.handle),this._bound=!0,r=e(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(e,r={}){e=Rc(this.gl,e),I(e);let i=(this.constructor.PARAMETERS||{})[e];if(i){let s=U(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){let a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,r)}getParameters(e={}){let{parameters:r,keys:n}=e,i=this.constructor.PARAMETERS||{},s=U(this.gl),o={},a=r||Object.keys(i);for(let l of a){let c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){let h=n?At(this.gl,l):l;o[h]=this.getParameter(l,e),n&&c.type==="GLenum"&&(o[h]=At(this.gl,o[h]))}}return o}setParameter(e,r){e=Rc(this.gl,e),I(e);let i=(this.constructor.PARAMETERS||{})[e];if(i){let s=U(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=Rc(r))}return this._setParameter(e,r),this}setParameters(e){for(let r in e)this.setParameter(r,e[r]);return this}stubRemovedMethods(e,r,n){return Oc(this,e,r,n)}initialize(e){}_createHandle(){throw new Error(ns)}_deleteHandle(){throw new Error(ns)}_bindHandle(e){throw new Error(ns)}_getOptsFromHandle(){throw new Error(ns)}_getParameter(e,r){throw new Error(ns)}_setParameter(e,r){throw new Error(ns)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){let e=this.constructor.name,r=bt.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get(`${e}s Created`).incrementCount(),r.get(`${e}s Active`).incrementCount()}_removeStats(){let e=this.constructor.name;bt.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,r=this.constructor.name){let n=bt.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get(`${r} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){let r=bt.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}};var SS="Failed to deduce GL constant from typed array";function Jo(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(SS)}}function cn(t,{clamped:e=!0}={}){switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function $y({data:t,width:e,height:r,bytesPerPixel:n=4,temp:i}){let s=e*n;i=i||new Uint8Array(s);for(let o=0;o<r/2;++o){let a=o*s,l=(r-o-1)*s;i.set(t.subarray(a,a+s)),t.copyWithin(a,l,l+s),t.set(i,l)}}function Xy({data:t,width:e,height:r}){let n=Math.round(e/2),i=Math.round(r/2),s=new Uint8Array(n*i*4);for(let o=0;o<i;o++)for(let a=0;a<n;a++)for(let l=0;l<4;l++)s[(o*n+a)*4+l]=t[(o*2*e+a*2)*4+l];return{data:s,width:n,height:i}}function ea(t,e,r){let{removedProps:n={},deprecatedProps:i={},replacedProps:s={}}=r;for(let a in n)if(a in e){let c=n[a]?`${t}.${n[a]}`:"N/A";N.removed(`${t}.${a}`,c)()}for(let a in i)if(a in e){let l=i[a];N.deprecated(`${t}.${a}`,`${t}.${l}`)()}let o=null;for(let a in s)if(a in e){let l=s[a];N.deprecated(`${t}.${a}`,`${t}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}var PS={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},bS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Ae=class{static getBytesPerElement(e){return cn(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return I(e.size),cn(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new Ae(...[PS,...e])}constructor(...e){e.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ae.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ae.getBytesPerVertex(this)}_assign(e={}){return e=ea("Accessor",e,bS),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}};var qy=10,Zy={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},AS={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Zy},LS={removedProps:Zy},j=class extends xe{constructor(e,r={}){super(e,r);this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/Ae.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/Ae.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=ea("Buffer",e,AS),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=ea("Buffer",e,LS),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Ae(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});let{data:r,offset:n=0,srcOffset:i=0}=e,s=e.byteLength||e.length;I(r);let o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(ae(this.gl),this.gl.bufferSubData(this.target,n,r,i,s)):this.gl.bufferSubData(o,n,r),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(r),this}copyData({sourceBuffer:e,readOffset:r=0,writeOffset:n=0,size:i}){let{gl:s}=this;return ae(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,n,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}={}){ae(this.gl);let s=cn(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(r),a=n,l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);let u=Math.min(o,l);return i=i||u,I(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,e,n,i),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}={}){return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,r,this.handle,n,i):(I(n===0),this.gl.bindBufferBase(e,r,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:r=this.accessor&&this.accessor.index}={}){return e===35345||e===35982?this.gl.bindBufferBase(e,r,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(qy,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,r=0,n=e.byteLength+r){I(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();let i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,qy),this.bytesUsed=n,this._trackAllocatedMemory(n);let s=Jo(e);return I(s),this.setAccessor(new Ae(this.accessor,{type:s})),this}_setByteLength(e,r=this.usage){I(e>=0),this._trackDeallocatedMemory();let n=e;e===0&&(n=new Float32Array(0));let i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){let r=cn(this.accessor.type||5126,{clamped:!1}),n=e/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(e){this.accessor.type||this.setAccessor(new Ae(this.accessor,{type:Jo(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);let r=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),r}get type(){return N.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return N.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return N.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return N.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ae(this.accessor,e),this}};var Cc={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},Nc={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},kc={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function Ky(t,e){let r=Cc[e];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;let n=U(t)&&r.gl2||r.gl1;return typeof n=="string"?t.getExtension(n):n}function Qy(t,e){let r=Cc[e];switch(r&&r.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var IS=[9729,9728],ex=Jy.global.WebGLBuffer||function(){},ft=class extends xe{static isSupported(e,r={}){let{format:n,linearFiltering:i}=r,s=!0;return n&&(s=s&&Ky(e,n),s=s&&(!i||Qy(e,n))),s}constructor(e,r){let{id:n=qe("texture"),handle:i,target:s}=r;super(e,{id:n,handle:i});this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let r=e.data;if(r instanceof Promise)return r.then(y=>this.initialize(Object.assign({},e,{pixels:y,data:y}))),this;let n=typeof HTMLVideoElement!="undefined"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(e)),this;let{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;r||(r=i);let{width:h,height:f,dataFormat:v,type:E,compressed:_=!1,mipmaps:m=!0}=e,{depth:d=0}=e;return{width:h,height:f,compressed:_,dataFormat:v,type:E}=this._deduceParameters({format:s,type:E,dataFormat:v,compressed:_,data:r,width:h,height:f}),this.width=h,this.height=f,this.depth=d,this.format=s,this.type=E,this.dataFormat=v,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(N.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),m=!1,this._updateForNPOT(l)),this.mipmaps=m,this.setImageData({data:r,width:h,height:f,depth:d,format:s,type:E,dataFormat:v,border:o,mipmaps:m,parameters:c,compressed:_}),m&&this.generateMipmap(),this.setParameters(l),a&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){let{video:e,parameters:r,lastTime:n}=this._video;if(n===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:r,mipmaps:n=!1}){return r!==this.width||e!==this.height?this.initialize({width:r,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:n}):this}generateMipmap(e={}){return this._isNPOT()?(N.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ie(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");let{target:r=this.target,pixels:n=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e,{data:c=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:v=this.dataFormat,compressed:E=!1}=e;c||(c=n),{type:u,dataFormat:v,compressed:E,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:v,compressed:E,data:c,width:h,height:f});let{gl:_}=this;_.bindTexture(this.target,this.handle);let m=null;({data:c,dataType:m}=this._getDataType({data:c,compressed:E}));let d;if(ie(this.gl,l,()=>{switch(m){case"null":_.texImage2D(r,i,s,h,f,o,v,u,c);break;case"typed-array":_.texImage2D(r,i,s,h,f,o,v,u,c,a);break;case"buffer":d=ae(_),d.bindBuffer(35052,c.handle||c),d.texImage2D(r,i,s,h,f,o,v,u,a),d.bindBuffer(35052,null);break;case"browser-object":U(_)?_.texImage2D(r,i,s,h,f,o,v,u,c):_.texImage2D(r,i,s,v,u,c);break;case"compressed":for(let[y,x]of c.entries())_.compressedTexImage2D(r,y,x.format,x.width,x.height,o,x.data);break;default:I(!1,"Unknown image data type")}}),c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{let y=Nc[this.dataFormat]||4,x=kc[this.type]||1;this._trackAllocatedMemory(this.width*this.height*y*x,"Texture")}return this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:r=null,data:n=null,x:i=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:f=!1,offset:v=0,border:E=this.border,parameters:_={}}){if({type:u,dataFormat:h,compressed:f,width:o,height:a}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:f,data:n,width:o,height:a}),I(this.depth===0,"texSubImage not supported for 3D textures"),n||(n=r),n&&n.data){let m=n;n=m.data,o=m.shape[0],a=m.shape[1]}n instanceof j&&(n=n.handle),this.gl.bindTexture(this.target,this.handle),ie(this.gl,_,()=>{if(f)this.gl.compressedTexSubImage2D(e,l,i,s,o,a,c,n);else if(n===null)this.gl.texSubImage2D(e,l,i,s,o,a,h,u,null);else if(ArrayBuffer.isView(n))this.gl.texSubImage2D(e,l,i,s,o,a,h,u,n,v);else if(n instanceof ex){let m=ae(this.gl);m.bindBuffer(35052,n),m.texSubImage2D(e,l,i,s,o,a,h,u,v),m.bindBuffer(35052,null)}else U(this.gl)?ae(this.gl).texSubImage2D(e,l,i,s,o,a,h,u,n):this.gl.texSubImage2D(e,l,i,s,h,u,n)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return N.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){let{gl:r}=this;return e!==void 0&&(this.textureUnit=e,r.activeTexture(33984+e)),r.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){let{gl:r}=this;return e!==void 0&&(this.textureUnit=e,r.activeTexture(33984+e)),r.bindTexture(this.target,null),e}_getDataType({data:e,compressed:r=!1}){return r?{data:e,dataType:"compressed"}:e===null?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof j?{data:e.handle,dataType:"buffer"}:e instanceof ex?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){let{format:r,data:n}=e,{width:i,height:s,dataFormat:o,type:a,compressed:l}=e,c=Cc[r];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(n,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:r,data:n}}_deduceImageSize(e,r,n){let i;return typeof ImageData!="undefined"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement!="undefined"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},I(i,"Could not deduced texture size"),I(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),I(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);let r=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),r}}_setParameter(e,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(e,r),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,r);break;case 4096:case 4097:I(!1);break;default:this.gl.texParameteri(this.target,e,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return U(this.gl)||!this.width||!this.height?!1:!Sp(this.width)||!Sp(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,r){if(this._isNPOT())switch(e){case 10241:IS.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break;default:break}return r}};var RS="";function tx(t,e){return I(typeof t=="string"),t=RS+t,new Promise((r,n)=>{try{let i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error(`Could not load image ${t}.`)),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){n(i)}})}var le=class extends ft{static isSupported(e,r){return ft.isSupported(e,r)}constructor(e,r={}){br(e),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:tx(r.data)}));super(e,Object.assign({},r,{target:3553}));this.initialize(r),Object.seal(this)}};var Pp=[34069,34070,34071,34072,34073,34074],is=class extends ft{constructor(e,r={}){br(e);super(e,Object.assign({},r,{target:34067}));this.initialize(r),Object.seal(this)}initialize(e={}){let{mipmaps:r=!0,parameters:n={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,r&&this.generateMipmap(e),this.setParameters(n)}),this}subImage({face:e,data:r,x:n=0,y:i=0,mipmapLevel:s=0}){return this._subImage({target:e,data:r,x:n,y:i,mipmapLevel:s})}async setCubeMapImageData({width:e,height:r,pixels:n,data:i,border:s=0,format:o=6408,type:a=5121}){let{gl:l}=this,c=n||i,u=await Promise.all(Pp.map(h=>{let f=c[h];return Promise.all(Array.isArray(f)?f:[f])}));this.bind(),Pp.forEach((h,f)=>{u[f].length>1&&this.opts.mipmaps!==!1&&N.warn(`${this.id} has mipmap and multiple LODs.`)(),u[f].forEach((v,E)=>{e&&r?l.texImage2D(h,E,o,e,r,s,o,a,v):l.texImage2D(h,E,o,o,a,v)})}),this.unbind()}setImageDataForFace(e){let{face:r,width:n,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,h=s||o;return this.bind(),h instanceof Promise?h.then(f=>this.setImageDataForFace(Object.assign({},e,{face:r,data:f,pixels:f}))):this.width||this.height?u.texImage2D(r,0,l,n,i,a,l,c,h):u.texImage2D(r,0,l,l,c,h),this}};is.FACES=Pp;var ta=class extends ft{static isSupported(e){return U(e)}constructor(e,r={}){ae(e),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1});super(e,r);this.initialize(r),Object.seal(this)}setImageData({level:e=0,dataFormat:r=6408,width:n,height:i,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:u,parameters:h={}}){if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ie(this.gl,h,()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,r,n,i,s,o,a,l,u),u instanceof j&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,r,n,i,s,o,a,l,c))}),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{let f=Nc[this.dataFormat]||4,v=kc[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*f*v,"Texture")}return this.loaded=!0,this}};var Jn="EXT_color_buffer_float",bp={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:Jn,bpp:2},[33327]:{gl2:Jn,bpp:4},[34842]:{gl2:Jn,bpp:8},[33326]:{gl2:Jn,bpp:4},[33328]:{gl2:Jn,bpp:8},[34836]:{gl2:Jn,bpp:16},[35898]:{gl2:Jn,bpp:4}};function OS(t,e,r){let n=r[e];if(!n)return!1;let i=U(t)&&n.gl2||n.gl1;return typeof i=="string"?t.getExtension(i):i}var ht=class extends xe{static isSupported(e,{format:r}={format:null}){return!r||OS(e,r,bp)}static getSamplesForFormat(e,{format:r}){return e.getInternalformatParameter(36161,r,32937)}constructor(e,r={}){super(e,r);this.initialize(r),Object.seal(this)}initialize({format:e,width:r=1,height:n=1,samples:i=0}){return I(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),i!==0&&U(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,r,n):this.gl.renderbufferStorage(36161,e,r,n),this.format=e,this.width=r,this.height=n,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*bp[this.format].bpp),this}resize({width:e,height:r}){return e!==this.width||r!==this.height?this.initialize({width:e,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}};var CS=256,NS=1024,kS=16384,rx=6144,nx=6145,ix=6146,sx=34041,ox="clear: bad arguments";function un(t,{framebuffer:e=null,color:r=null,depth:n=null,stencil:i=null}={}){let s={};e&&(s.framebuffer=e);let o=0;r&&(o|=kS,r!==!0&&(s.clearColor=r)),n&&(o|=CS,n!==!0&&(s.clearDepth=n)),i&&(o|=NS,n!==!0&&(s.clearStencil=n)),I(o!==0,ox),ie(t,s,()=>{t.clear(o)})}function Ap(t,{framebuffer:e=null,buffer:r=rx,drawBuffer:n=0,value:i=[0,0,0,0]}={}){ae(t),ie(t,{framebuffer:e},()=>{switch(r){case rx:switch(i.constructor){case Int32Array:t.clearBufferiv(r,n,i);break;case Uint32Array:t.clearBufferuiv(r,n,i);break;case Float32Array:default:t.clearBufferfv(r,n,i)}break;case nx:t.clearBufferfv(nx,0,[i]);break;case ix:t.clearBufferiv(ix,0,[i]);break;case sx:let[s,o]=i;t.clearBufferfi(sx,0,s,o);break;default:I(!1,ox)}})}function ax(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return I(!1),0}}function Ar(t,e={}){let{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=e,{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e,{framebuffer:u,deleteFramebuffer:h}=DS(t);I(u);let{gl:f,handle:v,attachments:E}=u;a=a||u.width,l=l||u.height,s===36064&&v===null&&(s=1028),I(E[s]),c=c||E[s].type,o=FS(o,c,i,a,l),c=c||Jo(o);let _=f.bindFramebuffer(36160,v);return f.readPixels(r,n,a,l,i,c,o),f.bindFramebuffer(36160,_||null),h&&u.delete(),o}function Dc(t,{sourceAttachment:e=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}={}){let n=Ar(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>r;)({data:n,width:i,height:s}=Xy({data:n,width:i,height:s}));$y({data:n,width:i,height:s});let o=document.createElement("canvas");o.width=i,o.height=s;let a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(n),a.putImageData(l,0,0),o.toDataURL()}function DS(t){return t instanceof q?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:lx(t),deleteFramebuffer:!0}}function FS(t,e,r,n,i){if(t)return t;e=e||5121;let s=cn(e,{clamped:!1}),o=ax(r);return new s(n*i*o)}var Q={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function BS(t){let e=new le(t,{format:6408,type:5126,dataFormat:6408}),r=new q(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),n=r.getStatus();return e.delete(),r.delete(),n===36053}var Lp={[Q.WEBGL2]:[!1,!0],[Q.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Q.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Q.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Q.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Q.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Q.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Q.FLOAT_BLEND]:["EXT_float_blend"],[Q.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Q.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Q.TEXTURE_FLOAT]:["OES_texture_float",!0],[Q.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Q.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Q.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Q.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Q.COLOR_ATTACHMENT_RGBA32F]:[BS,"EXT_color_buffer_float"],[Q.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Q.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Q.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Q.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Q.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Q.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]};var zS=2;function ra(t,e){return ss(t,e)}function ss(t,e){return e=Array.isArray(e)?e:[e],e.every(r=>cx(t,r))}function Fc(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(let e in Lp)t.luma.caps[e]===void 0&&(t.luma.caps[e]=cx(t,e));return t.luma.caps}function cx(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=US(t,e)),t.luma.caps[e]||N.log(zS,`Feature: ${e} not supported`)(),t.luma.caps[e]}function US(t,e){let r=Lp[e];I(r,e);let n,i=U(t)&&r[1]||r[0];if(typeof i=="function")n=i(t);else if(Array.isArray(i)){n=!0;for(let s of i)n=n&&Boolean(t.getExtension(s))}else typeof i=="string"?n=Boolean(t.getExtension(i)):typeof i=="boolean"?n=i:I(!1);return n}var ux="Multiple render targets not supported",q=class extends xe{static isSupported(e,r={}){let{colorBufferFloat:n,colorBufferHalfFloat:i}=r,s=!0;return n&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new q(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){let e=ae(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){let e=ae(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,r={}){super(e,r);this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:r=1,attachments:n=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l=void 0,drawBuffers:c=void 0}){if(I(e>=0&&r>=0,"Width and height need to be integers"),this.width=e,this.height=r,n)for(let u in n){let h=n[u];(Array.isArray(h)?h[0]:h).resize({width:e,height:r})}else n=this._createDefaultAttachments(i,s,o,e,r);this.update({clearAttachments:!0,attachments:n,readBuffer:l,drawBuffers:c}),n&&a&&this.checkStatus()}delete(){for(let e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:r,drawBuffers:n,clearAttachments:i=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:i,resizeAttachments:s});let{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),n&&this._setDrawBuffers(n),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:r,height:n}=e;if(this.handle===null)return I(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&N.log(2,`Resizing framebuffer ${this.id} to ${r}x${n}`)();for(let i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(e,{clearAttachments:r=!1,resizeAttachments:n=!0}={}){let i={};r&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);let s=this.gl.bindFramebuffer(36160,this.handle);for(let o in i){I(o!==void 0,"Misspelled framebuffer binding point?");let a=Number(o),l=i[a],c=l;if(!c)this._unattach(a);else if(c instanceof ht)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){let[u,h=0,f=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});n&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){let{gl:e}=this,r=this.getStatus();if(r!==36053)throw new Error(jS(r));return this}getStatus(){let{gl:e}=this,r=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,r||null),n}clear(e={}){let{color:r,depth:n,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&un(this.gl,{color:r,depth:n,stencil:i}),s.forEach((a,l)=>{Ap(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return N.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return N.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return N.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return N.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return N.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return N.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:r=0,y:n=0,width:i,height:s}){let o=ae(this.gl),a=o.bindFramebuffer(36008,this.handle);return r===0&&n===0&&i===void 0&&s===void 0?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,r,n,i,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=At(this.gl,i)),i}getAttachmentParameters(e=36064,r,n=this.constructor.ATTACHMENT_PARAMETERS||[]){let i={};for(let s of n){let o=r?At(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,r)}return i}getParameters(e=!0){let r=Object.keys(this.attachments),n={};for(let i of r){let s=Number(i),o=e?At(this.gl,s):s;n[o]=this.getAttachmentParameters(s,e)}return n}show(){return typeof window!="undefined"&&window.open(Dc(this),"luma-debug-texture"),this}log(e=0,r=""){if(e>N.level||typeof window=="undefined")return this;r=r||`Framebuffer ${this.id}`;let n=Dc(this,{targetMaxHeight:100});return N.image({logLevel:e,message:r,image:n},r)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,r,n,i,s){let o=null;return e&&(o=o||{},o[36064]=new le(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),r&&n?(o=o||{},o[33306]=new ht(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:i,height:111}),this.ownResources.push(o[33306])):r?(o=o||{},o[36096]=new ht(this.gl,{id:`${this.id}-depth`,format:33189,width:i,height:s}),this.ownResources.push(o[36096])):n&&I(!1),o}_unattach(e){let r=this.attachments[e];!r||(r instanceof ht?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:r}){let{gl:n}=this;n.framebufferRenderbuffer(36160,e,36161,r.handle),this.attachments[e]=r}_attachTexture({attachment:e=36064,texture:r,layer:n,level:i}){let{gl:s}=this;switch(s.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:ae(s).framebufferTextureLayer(36160,e,r.target,i,n);break;case 34067:let a=VS(n);s.framebufferTexture2D(36160,e,a,r.handle,i);break;case 3553:s.framebufferTexture2D(36160,e,3553,r.handle,i);break;default:I(!1,"Illegal texture type")}s.bindTexture(r.target,null),this.attachments[e]=r}_setReadBuffer(e){let r=pp(this.gl);r?r.readBuffer(e):I(e===36064||e===1029,ux),this.readBuffer=e}_setDrawBuffers(e){let{gl:r}=this,n=ae(r);if(n)n.drawBuffers(e);else{let i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):I(e.length===1&&(e[0]===36064||e[0]===1029),ux)}this.drawBuffers=e}_getAttachmentParameterFallback(e){let r=Fc(this.gl);switch(e){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}};function VS(t){return t<34069?t+34069:t}function jS(t){return(q.STATUS||{})[t]||`Framebuffer error ${t}`}var GS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];q.ATTACHMENT_PARAMETERS=GS;function Bc(t,e){I(t instanceof le||t instanceof is||t instanceof ta);let r=t.constructor,{gl:n,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,h=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new r(n,h)}function lx(t,e){let{gl:r,width:n,height:i,id:s}=t;return new q(r,Object.assign({},e,{id:`framebuffer-for-${s}`,width:n,height:i,attachments:{[36064]:t}}))}function fn(t,e="unnamed"){let r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=t.match(r);return n?n[1]:e}var WS=35632,HS=35633;function Ip(t){switch(t){case WS:return"fragment";case HS:return"vertex";default:return"unknown type"}}function Rp(t,e,r,n){let i=t.split(/\r?\n/),s={},o={},a=n||fn(e)||"(unnamed)",l=`${Ip(r)} shader ${a}`;for(let u=0;u<i.length;u++){let h=i[u];if(h.length<=1)continue;let f=h.split(":"),v=f[0],E=parseInt(f[2],10);if(isNaN(E))throw new Error(`GLSL compilation error in ${l}: ${t}`);v!=="WARNING"?s[E]=h:o[E]=h}let c=YS(e);return{shaderName:l,errors:fx(s,c),warnings:fx(o,c)}}function fx(t,e){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(!(!t[n+3]&&!t[n+2]&&!t[n+1])&&(r+=`${i}
`,t[n+1])){let s=t[n+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();r+=hx(`^^^ ${a}: ${c}

`,l)}}return r}function YS(t,e=1,r=": "){let n=t.split(/\r?\n/),i=String(n.length+e-1).length;return n.map((s,o)=>{let a=String(o+e),l=a.length;return hx(a,i-l)+r+s})}function hx(t,e){let r="";for(let n=0;n<e;++n)r+=" ";return`${r}${t}`}function os(t){let e=100,r=t.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){let n=parseInt(r[1],10);Number.isFinite(n)&&(e=n)}return e}var $S="Shader: GLSL source code must be a JavaScript string",as=class extends xe{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return I(!1),"unknown"}}constructor(e,r){br(e),I(typeof r.source=="string",$S);let n=fn(r.source,null)||r.id||qe(`unnamed ${as.getTypeName(r.shaderType)}`);super(e,{id:n});this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize({source:e}){let r=fn(e,null);r&&(this.id=qe(r)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${as.getTypeName(this.shaderType)}:${this.id}`}getName(){return fn(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){let e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100
${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){let n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=Rp(n,this.source,this.shaderType,this.id);throw N.error(`GLSL compilation errors in ${i}
${s}`)(),N.warn(`GLSL compilation warnings in ${i}
${o}`)(),new Error(`GLSL compilation errors in ${i}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}},na=class extends as{constructor(e,r){typeof r=="string"&&(r={source:r});super(e,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},ia=class extends as{constructor(e,r){typeof r=="string"&&(r={source:r});super(e,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}};var XS={[5126]:se.bind(null,"uniform1fv",dt,1,Ue),[35664]:se.bind(null,"uniform2fv",dt,2,Ue),[35665]:se.bind(null,"uniform3fv",dt,3,Ue),[35666]:se.bind(null,"uniform4fv",dt,4,Ue),[5124]:se.bind(null,"uniform1iv",hn,1,Ue),[35667]:se.bind(null,"uniform2iv",hn,2,Ue),[35668]:se.bind(null,"uniform3iv",hn,3,Ue),[35669]:se.bind(null,"uniform4iv",hn,4,Ue),[35670]:se.bind(null,"uniform1iv",hn,1,Ue),[35671]:se.bind(null,"uniform2iv",hn,2,Ue),[35672]:se.bind(null,"uniform3iv",hn,3,Ue),[35673]:se.bind(null,"uniform4iv",hn,4,Ue),[35674]:se.bind(null,"uniformMatrix2fv",dt,4,Lr),[35675]:se.bind(null,"uniformMatrix3fv",dt,9,Lr),[35676]:se.bind(null,"uniformMatrix4fv",dt,16,Lr),[35678]:Ne,[35680]:Ne,[5125]:se.bind(null,"uniform1uiv",zc,1,Ue),[36294]:se.bind(null,"uniform2uiv",zc,2,Ue),[36295]:se.bind(null,"uniform3uiv",zc,3,Ue),[36296]:se.bind(null,"uniform4uiv",zc,4,Ue),[35685]:se.bind(null,"uniformMatrix2x3fv",dt,6,Lr),[35686]:se.bind(null,"uniformMatrix2x4fv",dt,8,Lr),[35687]:se.bind(null,"uniformMatrix3x2fv",dt,6,Lr),[35688]:se.bind(null,"uniformMatrix3x4fv",dt,12,Lr),[35689]:se.bind(null,"uniformMatrix4x2fv",dt,8,Lr),[35690]:se.bind(null,"uniformMatrix4x3fv",dt,12,Lr),[35678]:Ne,[35680]:Ne,[35679]:Ne,[35682]:Ne,[36289]:Ne,[36292]:Ne,[36293]:Ne,[36298]:Ne,[36299]:Ne,[36300]:Ne,[36303]:Ne,[36306]:Ne,[36307]:Ne,[36308]:Ne,[36311]:Ne},qS={},ZS={},KS={},dx=[0];function Op(t,e,r,n){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(dx[0]=t,t=dx);let i=t.length;if(i%e&&N.warn(`Uniform size should be multiples of ${e}`,t)(),t instanceof r)return t;let s=n[i];s||(s=new r(i),n[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function dt(t,e){return Op(t,e,Float32Array,qS)}function hn(t,e){return Op(t,e,Int32Array,ZS)}function zc(t,e){return Op(t,e,Uint32Array,KS)}function Cp(t,e,r){let n=XS[r.type];if(!n)throw new Error(`Unknown GLSL uniform type ${r.type}`);return n().bind(null,t,e)}function px(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};let e=/([^[]*)(\[[0-9]+\])?/,r=t.match(e);if(!r||r.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function mx(t,e,r){for(let n in t){let i=t[n];if((!r||Boolean(r[n]))&&!QS(i))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${n}`,i),new Error(`${e} Bad uniform ${n}`)}return!0}function QS(t){return Array.isArray(t)||ArrayBuffer.isView(t)?JS(t):isFinite(t)||t===!0||t===!1||t instanceof ft||t instanceof ht?!0:t instanceof q?Boolean(t.texture):!1}function gx(t,e,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(t[e]){let n=t[e];for(let i=0,s=r.length;i<s;++i)n[i]=r[i]}else t[e]=r.slice();else t[e]=r}function JS(t){if(t.length===0)return!1;let e=Math.min(t.length,16);for(let r=0;r<e;++r)if(!Number.isFinite(t[r]))return!1;return!0}function Ne(){let t=null;return(e,r,n)=>{let i=t!==n;return i&&(e.uniform1i(r,n),t=n),i}}function se(t,e,r,n){let i=null,s=null;return(o,a,l)=>{let c=e(l,r),u=c.length,h=!1;if(i===null)i=new Float32Array(u),s=u,h=!0;else{I(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(c[f]!==i[f]){h=!0;break}}return h&&(n(o,t,a,c),i.set(c)),h}}function Ue(t,e,r,n){t[e](r,n)}function Lr(t,e,r,n){t[e](r,!1,n)}var eP=5120,tP=5121,rP=5122,nP=5123,vx=0,Uc=1,iP=2,sP=3,Vc=4,oP=5,aP=6,Me=5126,lP=35664,cP=35665,uP=35666,sa=5124,fP=35667,hP=35668,dP=35669,oa=5125,pP=36294,mP=36295,gP=36296,vP=35670,yP=35671,xP=35672,_P=35673,EP=35674,wP=35675,TP=35676,MP=35685,SP=35686,PP=35687,bP=35688,AP=35689,LP=35690,Np={[Me]:[Me,1,"float"],[lP]:[Me,2,"vec2"],[cP]:[Me,3,"vec3"],[uP]:[Me,4,"vec4"],[sa]:[sa,1,"int"],[fP]:[sa,2,"ivec2"],[hP]:[sa,3,"ivec3"],[dP]:[sa,4,"ivec4"],[oa]:[oa,1,"uint"],[pP]:[oa,2,"uvec2"],[mP]:[oa,3,"uvec3"],[gP]:[oa,4,"uvec4"],[vP]:[Me,1,"bool"],[yP]:[Me,2,"bvec2"],[xP]:[Me,3,"bvec3"],[_P]:[Me,4,"bvec4"],[EP]:[Me,8,"mat2"],[MP]:[Me,8,"mat2x3"],[SP]:[Me,8,"mat2x4"],[wP]:[Me,12,"mat3"],[PP]:[Me,12,"mat3x2"],[bP]:[Me,12,"mat3x4"],[TP]:[Me,16,"mat4"],[AP]:[Me,16,"mat4x2"],[LP]:[Me,16,"mat4x3"]};function yx(t){switch(t){case vx:return vx;case Uc:return Uc;case sP:return Uc;case iP:return Uc;case Vc:return Vc;case oP:return Vc;case aP:return Vc;default:return I(!1),0}}function kp(t){let e=Np[t];if(!e)return null;let[r,n]=e;return{type:r,components:n}}function jc(t,e){switch(t){case eP:case tP:case rP:case nP:t=Me;break;default:}for(let r in Np){let[n,i,s]=Np[r];if(n===t&&i===e)return{glType:r,name:s}}return null}var Gc=class{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){let r=Number(e);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[e]||null}getAttributeLocation(e){let r=this.getAttributeInfo(e);return r?r.location:-1}getAttributeAccessor(e){let r=this.getAttributeInfo(e);return r?r.accessor:null}getVaryingInfo(e){let r=Number(e);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[e]||null}getVaryingIndex(e){let r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(e){let r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(e){let{gl:r}=e,n=r.getProgramParameter(e.handle,35721);for(let i=0;i<n;i++){let{name:s,type:o,size:a}=r.getActiveAttrib(e.handle,i),l=r.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){let{gl:r}=e;if(!U(r))return;let n=r.getProgramParameter(e.handle,35971);for(let i=0;i<n;i++){let{name:s,type:o,size:a}=r.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,r,n,i){let{type:s,components:o}=kp(n),a={type:s,size:i*o};this._inferProperties(e,r,a);let l={location:e,name:r,accessor:new Ae(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(e,r,n,i){let{type:s,components:o}=kp(n),a=new Ae({type:s,size:i*o}),l={location:e,name:r,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}};var xx=4,IP=35981,RP=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],dn=class extends xe{constructor(e,r={}){super(e,r);this.stubRemovedMethods("Program","v6.0",RP),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(e={}){let{hash:r,vs:n,fs:i,varyings:s,bufferMode:o=IP}=e;return this.hash=r||"",this.vs=typeof n=="string"?new na(this.gl,{id:`${e.id}-vs`,source:n}):n,this.fs=typeof i=="string"?new ia(this.gl,{id:`${e.id}-fs`,source:i}):i,I(this.vs instanceof na),I(this.fs instanceof ia),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(ae(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Gc(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:r=4,vertexCount:n,offset:i=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:f,framebuffer:v,parameters:E={},uniforms:_,samplers:m}){if((_||m)&&(N.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(_||{})),N.priority>=e){let d=v?v.id:"default",y=`mode=${At(this.gl,r)} verts=${n} instances=${c} indexType=${At(this.gl,l)} isInstanced=${u} isIndexed=${a} Framebuffer=${d}`;N.log(e,y)()}return I(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||n===0||u&&c===0?!1:(h.bindForDraw(n,c,()=>{if(v!==void 0&&(E=Object.assign({},E,{framebuffer:v})),f){let d=yx(r);f.begin(d)}this._bindTextures(),ie(this.gl,E,()=>{a&&u?this.gl2.drawElementsInstanced(r,n,l,i,c):a&&U(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(r,s,o,n,l,i):a?this.gl.drawElements(r,n,l,i):u?this.gl2.drawArraysInstanced(r,i,n,c):this.gl.drawArrays(r,i,n)}),f&&f.end()}),!0)}setUniforms(e={}){N.priority>=2&&mx(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(let r in e){let n=e[r],i=this._uniformSetters[r];if(i){let s=n,o=!1;if(s instanceof q&&(s=s.texture),s instanceof ft)if(o=this.uniforms[r]!==n,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);let a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[r]=a}else s=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(s)||o)&&gx(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let e=!0;for(let r in this._textureUniforms){let n=this._textureUniforms[r];n.update(),e=e&&n.loaded}return e}_bindTextures(){for(let e in this._textureUniforms){let r=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){let r=this.gl.getAttachedShaders(e),n={};for(let i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new na({handle:i});break;case 35632:n.fs=new ia({handle:i});break;default:}return n}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){let r=this._getName();this.id=qe(r)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){let{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),N.time(xx,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),N.timeEnd(xx,`linkProgram for ${this._getName()}`)(),e.debug||N.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){let{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){let n=this.gl.getActiveUniform(this.handle,r),{name:i}=px(n.name),s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Cp(e,s,n),n.size>1)for(let o=0;o<n.size;o++)s=e.getUniformLocation(this.handle,`${i}[${o}]`),this._uniformSetters[`${i}[${o}]`]=Cp(e,s,n)}this._textureIndexCounter=0}getActiveUniforms(e,r){return this.gl2.getActiveUniforms(this.handle,e,r)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,r){return this.gl2.getActiveUniformBlockParameter(this.handle,e,r)}uniformBlockBinding(e,r){this.gl2.uniformBlockBinding(this.handle,e,r)}};var OP=34918,CP=34919,NP=35007,kP=36795,DP=35976,FP=35887,BP=36202,pn=class extends xe{static isSupported(e,r=[]){let n=U(e),i=ss(e,Q.TIMER_QUERY),s=n||i;for(let o of r)switch(o){case"queries":s=s&&n;break;case"timers":s=s&&i;break;default:I(!1)}return s}constructor(e,r={}){super(e,r);this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(NP)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?BP:FP)}beginTransformFeedbackQuery(){return this.begin(DP)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;let e=this.gl2.getQueryParameter(this.handle,CP);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(kP)}getResult(){return this.gl2.getQueryParameter(this.handle,OP)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{let s=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return pn.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}};var mn=class extends xe{static isSupported(e){return U(e)}constructor(e,r={}){ae(e);super(e,r);this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,nr(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(let r in e)this.setBuffer(r,e[r])}),this}setBuffer(e,r){let n=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(r);return n<0?(this.unused[e]=i,N.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let r,n,i;return e instanceof j?i=e:(i=e.buffer,n=e.byteSize,r=e.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;let r=Number(e);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(let e in this.buffers){let{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(let e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,r,n=0,i){let s=r&&r.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}};var Wc=null;function zP(t){return(!Wc||Wc.byteLength<t)&&(Wc=new ArrayBuffer(t)),Wc}function _x(t,e){let r=zP(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function Ex({target:t,source:e,start:r=0,count:n=1}){let i=e.length,s=n*i,o=0;for(let a=r;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(r+o,r,r+o),o*=2):(t.copyWithin(r+o,r,r+s-o),o=s);return t}var UP="elements must be GL.ELEMENT_ARRAY_BUFFER",Ve=class extends xe{static isSupported(e,r={}){return r.constantAttributeZero?U(e)||(0,Pc.getBrowser)()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ve(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ve.MAX_ATTRIBUTES=Ve.MAX_ATTRIBUTES||e.getParameter(34921),Ve.MAX_ATTRIBUTES}static setConstant(e,r,n){switch(n.constructor){case Float32Array:Ve._setConstantFloatArray(e,r,n);break;case Int32Array:Ve._setConstantIntArray(e,r,n);break;case Uint32Array:Ve._setConstantUintArray(e,r,n);break;default:I(!1)}}constructor(e,r={}){let n=r.id||r.program&&r.program.id;super(e,Object.assign({},r,{id:n}));this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=e,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ve.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,r={}){return I(!e||e.target===34963,UP),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,r,n){if(r.target===34963)return this.setElementBuffer(r,n);let{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=n,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,r.handle),c?(I(U(h)),f.vertexAttribIPointer(e,i,s,o,a)):h.vertexAttribPointer(e,i,s,l,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e,r=!0){return!r&&e===0&&!Ve.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>r?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,r){let n=this._normalizeConstantArrayValue(r),i=n.byteLength*e,s=n.length*e,o=!this.buffer;if(this.buffer=this.buffer||new j(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){let a=_x(r.constructor,s);Ex({target:a,source:n,start:0,count:s}),this.buffer.subData(a),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,r){if(!e||!r||e.length!==r.length||e.constructor!==r.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==r[n])return!1;return!0}static _setConstantFloatArray(e,r,n){switch(n.length){case 1:e.vertexAttrib1fv(r,n);break;case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:I(!1)}}static _setConstantIntArray(e,r,n){switch(I(U(e)),n.length){case 1:e.vertexAttribI1iv(r,n);break;case 2:e.vertexAttribI2iv(r,n);break;case 3:e.vertexAttribI3iv(r,n);break;case 4:e.vertexAttribI4iv(r,n);break;default:I(!1)}}static _setConstantUintArray(e,r,n){switch(I(U(e)),n.length){case 1:e.vertexAttribI1uiv(r,n);break;case 2:e.vertexAttribI2uiv(r,n);break;case 3:e.vertexAttribI3uiv(r,n);break;case 4:e.vertexAttribI4uiv(r,n);break;default:I(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:r}){return I(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}};var VP="VertexArray: attributes must be Buffers or constants (i.e. typed array)",jP=/^(.+)__LOCATION_([0-9]+)$/,GP=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],aa=class{constructor(e,r={}){let n=r.id||r.program&&r.program.id;this.id=n,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ve(e),Oc(this,"VertexArray","v6.0",GP),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;let{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(let r in e){let n=e[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,r={}){return this.elements=e,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,r),this}setBuffer(e,r,n={}){if(r.target===34963)return this.setElementBuffer(r,n);let{location:i,accessor:s}=this._resolveLocationAndAccessor(e,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,s)),this}setConstant(e,r,n={}){let{location:i,accessor:s}=this._resolveLocationAndAccessor(e,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new j(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof j&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){let r=this.values[e];r instanceof j&&this.setBuffer(e,r)}}),this}bindForDraw(e,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,r),i=n()}),i}_resolveLocationAndAccessor(e,r,n,i){let s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=r,N.once(3,()=>`unused value ${e} in ${this.id}`)(),s;let l=this._getAttributeInfo(a||o);if(!l)return s;let c=this.accessors[o]||{},u=Ae.resolve(l.accessor,c,n,i),{size:h,type:f}=u;return I(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){let r=Number(e);if(Number.isFinite(r))return{location:r};let n=jP.exec(e),i=n?n[1]:e,s=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,r){if(r instanceof j)this.setBuffer(e,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof j){let n=r[0],i=r[1];this.setBuffer(e,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){let n=r;this.setConstant(e,n)}else if(r.buffer instanceof j){let n=r;this.setBuffer(e,n.buffer,n)}else throw new Error(VP)}_setConstantAttributes(e,r){let n=Math.max(e|0,r|0),i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,r){if(Ve.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}let n=this.vertexArrayObject.getConstantBuffer(r,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(e,r){Ve.setConstant(this.gl,e,r)}_updateDrawParams(){let e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(e,r);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,r){let n=this.values[r],i=this.accessors[r];if(!n)return;let{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,n instanceof j){let a=n;if(o){let l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{let l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,r={}){return N.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,r)}};function WP(t,e){let{maxElts:r=16,size:n=1}=e,i="[";for(let o=0;o<t.length&&o<r;++o)o>0&&(i+=`,${o%n===0?" ":""}`),i+=ei(t[o],e);let s=t.length>r?"...":"]";return`${i}${s}`}function ei(t,e={}){let r=1e-16,{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return WP(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<r)return n?"0":"0.";if(n||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);let i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Hc({header:t="Uniforms",program:e,uniforms:r,undefinedOnly:n=!1}){I(e);let i=".*_.*",s=".*Matrix",o=e._uniformSetters,a={},l=Object.keys(o).sort(),c=0;for(let f of l)!f.match(i)&&!f.match(s)&&Dp({table:a,header:t,uniforms:r,uniformName:f,undefinedOnly:n})&&c++;for(let f of l)f.match(s)&&Dp({table:a,header:t,uniforms:r,uniformName:f,undefinedOnly:n})&&c++;for(let f of l)a[f]||Dp({table:a,header:t,uniforms:r,uniformName:f,undefinedOnly:n})&&c++;let u=0,h={};if(!n)for(let f in r){let v=r[f];a[f]||(u++,h[f]={Type:`NOT USED: ${v}`,[t]:ei(v)})}return{table:a,count:c,unusedTable:h,unusedCount:u}}function Dp({table:t,header:e,uniforms:r,uniformName:n,undefinedOnly:i}){let s=r[n],o=HP(s);return!i||!o?(t[n]={[e]:o?ei(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},!0):!1}function HP(t){return t!=null}function Fp({vertexArray:t,header:e="Attributes"}){if(!t.configuration)return{};let r={};t.elements&&(r.ELEMENT_ARRAY_BUFFER=wx(t,t.elements,null,e));let n=t.values;for(let i in n){let s=t._getAttributeInfo(i);if(s){let o=`${i}: ${s.name}`,a=t.accessors[s.location];a&&(o=`${i}: ${YP(s.name,a)}`),r[o]=wx(t,n[i],a,e)}}return r}function wx(t,e,r,n){let{gl:i}=t;if(!e)return{[n]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,h;if(r&&(s=r.type,o=r.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof j){let f=e,{data:v,changed:E}=f.getDebugData();u=E?"*":"",h=v,l=f.byteLength,a=l/v.BYTES_PER_ELEMENT/o;let _;return r?_=`${r.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${At(i,s)})`:(c=!0,_=`${l} bytes`),{[n]:`${u}${ei(h,{size:o,isInteger:c})}`,"Format ":_}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[n]:`${ei(h,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function YP(t,e){let{type:r,size:n}=e,i=jc(r,n);return i?`${t} (${i.name})`:t}function Bp(t){let e={},r=`Accessors for ${t.id}`;for(let n of t.attributeInfos)if(n){let i=Tx(n);e[`in ${i}`]={[r]:JSON.stringify(n.accessor)}}for(let n of t.varyingInfos)if(n){let i=Tx(n);e[`out ${i}`]={[r]:JSON.stringify(n.accessor)}}return e}function Tx(t){let{type:e,size:r}=t.accessor,n=jc(e,r);return n?`${n.name} ${t.name}`:t.name}var Mx=Qe(an()),Sx=(0,Mx.isBrowser)()&&typeof document!="undefined",qP=0,ls=class{constructor(e={}){let{onCreateContext:r=m=>rs(m),onAddHTML:n=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:v=!0,stats:E=bt.get(`animation-loop-${qP++}`)}=e,{useDevicePixels:_=!0}=e;"useDevicePixelRatio"in e&&(N.deprecated("useDevicePixelRatio","useDevicePixels")(),_=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=E,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:v,useDevicePixels:_}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return I(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;let r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=pn.isSupported(this.gl,["timers"])?new pn(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,r=1){let n=document.getElementById(e);return n?Number(n.value):r}setViewParameters(){return N.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){let e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Sx?new Promise((e,r)=>{if(Sx&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):Tp(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):wp(e)}_renderFrame(...e){if(this.display){this.display._renderFrame(...e);return}this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){let{width:e,height:r,aspect:n}=this._getSizeAndAspect();(e!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas!="undefined"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Qn(this.props.gl,e):this.onCreateContext(e),!Pr(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Ic(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){let e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";let r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(r);let n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){let e=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight,n=1,{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:e>0&&r>0&&(n=e/r),{width:e,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Ep(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new q(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){let{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}};var ti="vs",la="fs";function pe(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var zp={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function Px(t){let e={};for(let r in t){let n=t[r],i=ZP(n);e[r]=i}return e}function ZP(t){let e=bx(t);return e==="object"?t?"type"in t?Object.assign({},t,zp[t.type]):"value"in t?(e=bx(t.value),Object.assign({type:e},t,zp[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},zp[e])}function bx(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}var KP="vs",QP="fs",ca=class{constructor({name:e,vs:r,fs:n,dependencies:i=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}){pe(typeof e=="string"),this.name=e,this.vs=r||u,this.fs=n||h,this.getModuleUniforms=o,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=JP(c),s&&(this.uniforms=Px(s))}getModuleSource(e){let r;switch(e){case KP:r=this.vs||"";break;case QP:r=this.fs||"";break;default:pe(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}
${r}// END MODULE_${this.name}

`}getUniforms(e,r){return this.getModuleUniforms?this.getModuleUniforms(e,r):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,r){this.deprecations.forEach(n=>{n.regex.test(e)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(e){return e.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp(`\\b${r.old}\\(`);break;default:r.regex=new RegExp(`${r.type} ${r.old};`)}}),e}_defaultGetUniforms(e={}){let r={},n=this.uniforms;for(let i in n){let s=n[i];i in e&&!s.private?(s.validate&&pe(s.validate(e[i],s),`${this.name}: invalid ${i}`),r[i]=e[i]):r[i]=s.value}return r}};function JP(t){let e={vs:{},fs:{}};for(let r in t){let n=t[r],i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),e[i][r]=n}return e}function Ax(t){return eb(Ix(t))}function eb(t){let e={},r={};return Lx({modules:t,level:0,moduleMap:e,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>e[n])}function Lx({modules:t,level:e,moduleMap:r,moduleDepth:n}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(let i of t)r[i.name]=i,(n[i.name]===void 0||n[i.name]<e)&&(n[i.name]=e);for(let i of t)i.dependencies&&Lx({modules:i.dependencies,level:e+1,moduleMap:r,moduleDepth:n})}function Ix(t,e){return t.map(r=>(r instanceof ca||(pe(typeof r!="string",`Shader module use by name is deprecated. Import shader module '${r}' and use it directly.`),pe(r.name,"shader module has no name"),r=new ca(r),r.dependencies=Ix(r.dependencies)),r))}function Up(t={}){let e=typeof window!="undefined"?window.navigator||{}:{},r=t.userAgent||e.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}var tb=7936,rb=7937,nb=7938,ib=35724,Vp={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},gn={};Object.keys(Vp).forEach(t=>{gn[t]=t});function sb(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function Rx(t){let e=t.getExtension("WEBGL_debug_renderer_info"),r=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||tb),n=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||rb);return{gpuVendor:ob(r,n),vendor:r,renderer:n,version:t.getParameter(nb),shadingLanguageVersion:t.getParameter(ib)}}function ob(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}var jp={};function Gp(t,e,r={}){let n=Vp[e];if(pe(n,e),!Up(r))return!0;if(e in jp)return jp[e];let i=n[0],s=r.behavior||"enable",o=`#extension GL_${i} : ${s}
void main(void) {}`,a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);let l=t.getShaderParameter(a,35713);return t.deleteShader(a),jp[e]=l,l}function ab(t,e){let r=Vp[e];pe(r,e);let n=sb(t)&&r[1]||r[0],i=typeof n=="string"?Boolean(t.getExtension(n)):n;return pe(i===!1||i===!0),i}function ua(t,e){return e=Array.isArray(e)?e:[e],e.every(r=>ab(t,r))}function Ox(t){switch(Rx(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function Cx(t,e,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return ua(t,gn.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),ua(t,gn.GLSL_DERIVATIVES)&&Gp(t,gn.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),ua(t,gn.GLSL_FRAG_DATA)&&Gp(t,gn.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),ua(t,gn.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}var Nx=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,kx=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`;var lb={[ti]:Nx,[la]:kx},fa="__LUMA_INJECT_DECLARATIONS__",Dx=/void\s+main\s*\([^)]*\)\s*\{\n?/,Fx=/}\n?[^{}]*$/,Wp=[];function Yc(t,e,r,n=!1){let i=e===ti;for(let s in r){let o=r[s];o.sort((l,c)=>l.order-c.order),Wp.length=o.length;for(let l=0,c=o.length;l<c;++l)Wp[l]=o[l].injection;let a=`${Wp.join(`
`)}
`;switch(s){case"vs:#decl":i&&(t=t.replace(fa,a));break;case"vs:#main-start":i&&(t=t.replace(Dx,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(Fx,l=>a+l));break;case"fs:#decl":i||(t=t.replace(fa,a));break;case"fs:#main-start":i||(t=t.replace(Dx,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(Fx,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(fa,""),n&&(t=t.replace(/\}\s*$/,s=>s+lb[e])),t}function cs(t){let e={};return pe(Array.isArray(t)&&t.length>1),t.forEach(r=>{for(let n in r)e[n]=e[n]?`${e[n]}
${r[n]}`:r[n]}),e}function us(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}var Bx=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],cb=[...Bx,[us("attribute"),"in $1"],[us("varying"),"out $1"]],ub=[...Bx,[us("varying"),"in $1"]],zx=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],fb=[...zx,[us("in"),"attribute $1"],[us("out"),"varying $1"]],hb=[...zx,[us("in"),"varying $1"]],Hp="gl_FragColor",Yp=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,db=/void\s+main\s*\([^)]*\)\s*\{\n?/;function $p(t,e,r){switch(e){case 300:return r?$c(t,cb):pb(t);case 100:return r?$c(t,fb):mb(t);default:throw new Error(`unknown GLSL version ${e}`)}}function $c(t,e){for(let[r,n]of e)t=t.replace(r,n);return t}function pb(t){t=$c(t,ub);let e=t.match(Yp);if(e){let r=e[1];t=t.replace(new RegExp(`\\b${Hp}\\b`,"g"),r)}else{let r="fragmentColor";t=t.replace(db,n=>`out vec4 ${r};
${n}`).replace(new RegExp(`\\b${Hp}\\b`,"g"),r)}return t}function mb(t){t=$c(t,hb);let e=t.match(Yp);if(e){let r=e[1];t=t.replace(Yp,"").replace(new RegExp(`\\b${r}\\b`,"g"),Hp)}return t}var gb=`

${fa}

`,Ux={[ti]:"vertex",[la]:"fragment"},vb=`precision highp float;

`;function Xp(t,e){let{vs:r,fs:n}=e,i=Ax(e.modules||[]);return{gl:t,vs:Vx(t,Object.assign({},e,{source:r,type:ti,modules:i})),fs:Vx(t,Object.assign({},e,{source:n,type:la,modules:i})),getUniforms:yb(i)}}function Vx(t,{id:e,source:r,type:n,modules:i,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:u}){pe(typeof r=="string","shader source must be a string");let h=n===ti,f=r.split(`
`),v=100,E="",_=r;f[0].indexOf("#version ")===0?(v=300,E=f[0],_=f.slice(1).join(`
`)):E=`#version ${v}`;let m={};i.forEach(M=>{Object.assign(m,M.getDefines())}),Object.assign(m,s);let d=c?`${E}
${_b({id:e,source:r,type:n})}
${xb({type:n})}
${Ox(t)}
${Cx(t,v,!h)}
${Eb(m)}
${h?"":vb}
`:`${E}
`,y=Tb(o),x={},w={},S={};for(let M in a){let A=typeof a[M]=="string"?{injection:a[M],order:0}:a[M],b=M.match(/^(v|f)s:(#)?([\w-]+)$/);if(b){let L=b[2],z=b[3];L?z==="decl"?w[M]=[A]:S[M]=[A]:x[M]=[A]}else S[M]=[A]}for(let M of i){u&&M.checkDeprecations(_,u),d+=M.getModuleSource(n,v);let b=M.injections[n];for(let L in b){let z=L.match(/^(v|f)s:#([\w-]+)$/);if(z){let W=z[2]==="decl"?w:S;W[L]=W[L]||[],W[L].push(b[L])}else x[L]=x[L]||[],x[L].push(b[L])}}return d+=gb,d=Yc(d,n,w),d+=wb(y[n],x),d+=_,d=Yc(d,n,S),d=$p(d,l?100:v,h),d}function yb(t){return function(r){let n={};for(let i of t){let s=i.getUniforms(r,n);Object.assign(n,s)}return n}}function xb({type:t}){return`
#define SHADER_TYPE_${Ux[t].toUpperCase()}
`}function _b({id:t,source:e,type:r}){return t&&typeof t=="string"&&e.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${t}_${Ux[r]}

`:""}function Eb(t={}){let e=0,r="";for(let n in t){e===0&&(r+=`
// APPLICATION DEFINES
`),e++;let i=t[n];(i||Number.isFinite(i))&&(r+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e===0&&(r+=`
`),r}function wb(t,e){let r="";for(let n in t){let i=t[n];if(r+=`void ${i.signature} {
`,i.header&&(r+=`  ${i.header}`),e[n]){let s=e[n];s.sort((o,a)=>o.order-a.order);for(let o of s)r+=`  ${o.injection}
`}i.footer&&(r+=`  ${i.footer}`),r+=`}
`}return r}function Tb(t){let e={vs:{},fs:{}};return t.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();let[i,s]=r.split(":"),o=r.replace(/\(.+/,"");e[i][o]=Object.assign(n,{signature:s})}),e}var Mb="void main() {gl_FragColor = vec4(0);}",jx=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,Sb=`#version 300 es
${jx}`;function Xc(t,e){e=Array.isArray(e)?e:[e];let r=t.replace(/^\s+/,"").split(/\s+/),[n,i,s]=r;if(!e.includes(n)||!i||!s)return null;let o=s.split(";")[0];return{qualifier:n,type:i,name:o}}function ha(t={}){let{version:e=100,input:r,inputType:n,output:i}=t;if(!r)return e===300?Sb:e>300?`#version ${e}
${jx}`:Mb;let s=Gx(r,n);return e>=300?`#version ${e} ${e===300?"es":""}
in ${n} ${r};
out vec4 ${i};
void main() {
  ${i} = ${s};
}`:`varying ${n} ${r};
void main() {
  gl_FragColor = ${s};
}`}function qp(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return pe(!1),null}}function Zp(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return pe(!1),null}}function Gx(t,e){switch(e){case"float":return`vec4(${t}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${t}, 0.0, 1.0)`;case"vec3":return`vec4(${t}, 1.0)`;case"vec4":return t;default:return pe(!1),null}}var Pb=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,qc={name:"fp32",vs:Pb,fs:null};function Bt(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}var qF=1/Math.PI*180,ZF=1/180*Math.PI,te={};te.EPSILON=1e-12;te.debug=!1;te.precision=4;te.printTypes=!1;te.printDegrees=!1;te.printRowMajor=!0;function bb(t){return Math.round(t/te.EPSILON)*te.EPSILON}function Kp(t,{precision:e=te.precision||4}={}){return t=bb(t),"".concat(parseFloat(t.toPrecision(e)))}function Ir(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ab(t){return t.clone?t.clone():new Array(t.length)}function Lb(t,e,r){if(Ir(t)){r=r||Ab(t);for(let n=0;n<r.length&&n<t.length;++n)r[n]=e(t[n],n,r);return r}return e(t)}function fs(t,e,r){return Lb(t,n=>Math.max(e,Math.min(r,n)))}function ri(t,e,r){return Ir(t)?t.map((n,i)=>ri(n,e[i],r)):r*e+(1-r)*t}function Rr(t,e,r){let n=te.EPSILON;r&&(te.EPSILON=r);try{if(t===e)return!0;if(Ir(t)&&Ir(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Rr(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):Number.isFinite(t)&&Number.isFinite(e)?Math.abs(t-e)<=te.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{te.EPSILON=n}}function Ib(t){function e(){var r=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}var hs=class extends Ib(Array){get ELEMENTS(){return Bt(!1),0}clone(){return new this.constructor().copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+r];return this.check()}to(e){return e===this?this:Ir(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],r=0){for(let n=0;n<this.ELEMENTS;++n)e[r+n]=this[n];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(te)}formatString(e){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+Kp(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Rr(this[r],e[r]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==e[r])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,r,n){n===void 0&&(n=r,r=e,e=this);for(let i=0;i<this.ELEMENTS;++i){let s=e[i];this[i]=s+n*(r[i]-s)}return this.check()}min(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(e[r],this[r]);return this.check()}max(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(e[r],this[r]);return this.check()}clamp(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),r[n]);return this.check()}add(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=e;return this.check()}addScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),r);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(te.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)e=e&&Number.isFinite(this[r]);return e}};function Rb(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function je(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Zc(t,e,r=""){if(te.debug&&!Rb(t,e))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return t}var Wx={};function Kc(t,e){Wx[t]||(Wx[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}var Qc=class extends hs{get ELEMENTS(){return Bt(!1),0}copy(e){return Bt(!1),this}get x(){return this[0]}set x(e){this[0]=je(e)}get y(){return this[1]}set y(e){this[1]=je(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*this[r];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let r=0;for(let n=0;n<this.ELEMENTS;++n){let i=this[n]-e[n];r+=i*i}return je(r)}dot(e){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*e[n];return je(r)}normalize(){let e=this.magnitude();if(e!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=e;return this.check()}multiply(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Bt(e>=0&&e<this.ELEMENTS,"index is out of range"),je(this[e])}setComponent(e,r){return Bt(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=r,this.check()}addVectors(e,r){return this.copy(e).add(r)}subVectors(e,r){return this.copy(e).subtract(r)}multiplyVectors(e,r){return this.copy(e).multiply(r)}addScaledVector(e,r){return this.add(new this.constructor(e).multiplyScalar(r))}};var vn=1e-6,ir=typeof Float32Array!="undefined"?Float32Array:Array;var a6=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Ob(){var t=new ir(2);return ir!=Float32Array&&(t[0]=0,t[1]=0),t}function Yx(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}var l6=function(){var t=Ob();return function(e,r,n,i,s,o){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();function $x(t,e,r){let n=e[0],i=e[1],s=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/s,t[1]=(r[1]*n+r[5]*i)/s,t}function eu(t,e,r){let n=e[0],i=e[1],s=e[2],o=r[3]*n+r[7]*i+r[11]*s||1;return t[0]=(r[0]*n+r[4]*i+r[8]*s)/o,t[1]=(r[1]*n+r[5]*i+r[9]*s)/o,t[2]=(r[2]*n+r[6]*i+r[10]*s)/o,t}function Xx(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t}function Nb(){var t=new ir(3);return ir!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function kb(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qx(t,e,r){var n=e[0],i=e[1],s=e[2],o=r[0],a=r[1],l=r[2];return t[0]=i*l-s*a,t[1]=s*o-n*l,t[2]=n*a-i*o,t}function tu(t,e,r){var n=e[0],i=e[1],s=e[2],o=r[3]*n+r[7]*i+r[11]*s+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/o,t}function Zx(t,e,r){var n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t}function Kx(t,e,r){var n=r[0],i=r[1],s=r[2],o=r[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-n*c,f=n*l-i*a,v=i*f-s*h,E=s*u-n*f,_=n*h-i*u,m=o*2;return u*=m,h*=m,f*=m,v*=2,E*=2,_*=2,t[0]=a+u+v,t[1]=l+h+E,t[2]=c+f+_,t}function Qx(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Jx(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function e_(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function t_(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(r*r+n*n+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,h=u&&kb(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}var u6=function(){var t=Nb();return function(e,r,n,i,s,o){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();var Qp=[0,0,0],n_={},me=class extends Qc{static get ZERO(){return n_.ZERO=n_.ZERO||Object.freeze(new me(0,0,0,0))}constructor(e=0,r=0,n=0){super(-0,-0,-0);arguments.length===1&&Ir(e)?this.copy(e):(te.debug&&(je(e),je(r),je(n)),this[0]=e,this[1]=r,this[2]=n)}set(e,r,n){return this[0]=e,this[1]=r,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return te.debug&&(je(e.x),je(e.y),je(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=je(e)}angle(e){return t_(this,e)}cross(e){return qx(this,this,e),this.check()}rotateX({radians:e,origin:r=Qp}){return Qx(this,this,r,e),this.check()}rotateY({radians:e,origin:r=Qp}){return Jx(this,this,r,e),this.check()}rotateZ({radians:e,origin:r=Qp}){return e_(this,this,r,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return tu(this,this,e),this.check()}transformAsVector(e){return eu(this,this,e),this.check()}transformByMatrix3(e){return Zx(this,this,e),this.check()}transformByMatrix2(e){return Xx(this,this,e),this.check()}transformByQuaternion(e){return Kx(this,this,e),this.check()}};var ru=class extends hs{get ELEMENTS(){return Bt(!1),0}get RANK(){return Bt(!1),0}toString(){let e="[";if(te.printRowMajor){e+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+r])}else{e+="column-major:";for(let r=0;r<this.ELEMENTS;++r)e+=" ".concat(this[r])}return e+="]",e}getElementIndex(e,r){return r*this.RANK+e}getElement(e,r){return this[r*this.RANK+e]}setElement(e,r,n){return this[r*this.RANK+e]=je(n),this}getColumn(e,r=new Array(this.RANK).fill(-0)){let n=e*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(e,r){let n=e*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}};function Db(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i_(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function s_(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],v=e[11],E=e[12],_=e[13],m=e[14],d=e[15],y=r*a-n*o,x=r*l-i*o,w=r*c-s*o,S=n*l-i*a,M=n*c-s*a,A=i*c-s*l,b=u*_-h*E,L=u*m-f*E,z=u*d-v*E,H=h*m-f*_,W=h*d-v*_,X=f*d-v*m,k=y*X-x*W+w*H+S*z-M*L+A*b;return k?(k=1/k,t[0]=(a*X-l*W+c*H)*k,t[1]=(i*W-n*X-s*H)*k,t[2]=(_*A-m*M+d*S)*k,t[3]=(f*M-h*A-v*S)*k,t[4]=(l*z-o*X-c*L)*k,t[5]=(r*X-i*z+s*L)*k,t[6]=(m*w-E*A-d*x)*k,t[7]=(u*A-f*w+v*x)*k,t[8]=(o*W-a*z+c*b)*k,t[9]=(n*z-r*W-s*b)*k,t[10]=(E*M-_*w+d*y)*k,t[11]=(h*w-u*M-v*y)*k,t[12]=(a*L-o*H-l*b)*k,t[13]=(r*H-n*L+i*b)*k,t[14]=(_*x-E*S-m*y)*k,t[15]=(u*S-h*x+f*y)*k,t):null}function o_(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],v=t[12],E=t[13],_=t[14],m=t[15],d=e*o-r*s,y=e*a-n*s,x=e*l-i*s,w=r*a-n*o,S=r*l-i*o,M=n*l-i*a,A=c*E-u*v,b=c*_-h*v,L=c*m-f*v,z=u*_-h*E,H=u*m-f*E,W=h*m-f*_;return d*W-y*H+x*z+w*L-S*b+M*A}function Jp(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],v=e[10],E=e[11],_=e[12],m=e[13],d=e[14],y=e[15],x=r[0],w=r[1],S=r[2],M=r[3];return t[0]=x*n+w*a+S*h+M*_,t[1]=x*i+w*l+S*f+M*m,t[2]=x*s+w*c+S*v+M*d,t[3]=x*o+w*u+S*E+M*y,x=r[4],w=r[5],S=r[6],M=r[7],t[4]=x*n+w*a+S*h+M*_,t[5]=x*i+w*l+S*f+M*m,t[6]=x*s+w*c+S*v+M*d,t[7]=x*o+w*u+S*E+M*y,x=r[8],w=r[9],S=r[10],M=r[11],t[8]=x*n+w*a+S*h+M*_,t[9]=x*i+w*l+S*f+M*m,t[10]=x*s+w*c+S*v+M*d,t[11]=x*o+w*u+S*E+M*y,x=r[12],w=r[13],S=r[14],M=r[15],t[12]=x*n+w*a+S*h+M*_,t[13]=x*i+w*l+S*f+M*m,t[14]=x*s+w*c+S*v+M*d,t[15]=x*o+w*u+S*E+M*y,t}function a_(t,e,r){var n=r[0],i=r[1],s=r[2],o,a,l,c,u,h,f,v,E,_,m,d;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],v=e[7],E=e[8],_=e[9],m=e[10],d=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=v,t[8]=E,t[9]=_,t[10]=m,t[11]=d,t[12]=o*n+u*i+E*s+e[12],t[13]=a*n+h*i+_*s+e[13],t[14]=l*n+f*i+m*s+e[14],t[15]=c*n+v*i+d*s+e[15]),t}function em(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l_(t,e,r,n){var i=n[0],s=n[1],o=n[2],a=Math.hypot(i,s,o),l,c,u,h,f,v,E,_,m,d,y,x,w,S,M,A,b,L,z,H,W,X,k,Ze;return a<vn?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(r),c=Math.cos(r),u=1-c,h=e[0],f=e[1],v=e[2],E=e[3],_=e[4],m=e[5],d=e[6],y=e[7],x=e[8],w=e[9],S=e[10],M=e[11],A=i*i*u+c,b=s*i*u+o*l,L=o*i*u-s*l,z=i*s*u-o*l,H=s*s*u+c,W=o*s*u+i*l,X=i*o*u+s*l,k=s*o*u-i*l,Ze=o*o*u+c,t[0]=h*A+_*b+x*L,t[1]=f*A+m*b+w*L,t[2]=v*A+d*b+S*L,t[3]=E*A+y*b+M*L,t[4]=h*z+_*H+x*W,t[5]=f*z+m*H+w*W,t[6]=v*z+d*H+S*W,t[7]=E*z+y*H+M*W,t[8]=h*X+_*k+x*Ze,t[9]=f*X+m*k+w*Ze,t[10]=v*X+d*k+S*Ze,t[11]=E*X+y*k+M*Ze,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function c_(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*n,t[5]=o*i+u*n,t[6]=a*i+h*n,t[7]=l*i+f*n,t[8]=c*i-s*n,t[9]=u*i-o*n,t[10]=h*i-a*n,t[11]=f*i-l*n,t}function u_(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*n,t[1]=o*i-u*n,t[2]=a*i-h*n,t[3]=l*i-f*n,t[8]=s*n+c*i,t[9]=o*n+u*i,t[10]=a*n+h*i,t[11]=l*n+f*i,t}function f_(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*n,t[1]=o*i+u*n,t[2]=a*i+h*n,t[3]=l*i+f*n,t[4]=c*i-s*n,t[5]=u*i-o*n,t[6]=h*i-a*n,t[7]=f*i-l*n,t}function h_(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=r+r,a=n+n,l=i+i,c=r*o,u=n*o,h=n*a,f=i*o,v=i*a,E=i*l,_=s*o,m=s*a,d=s*l;return t[0]=1-h-E,t[1]=u+d,t[2]=f-m,t[3]=0,t[4]=u-d,t[5]=1-c-E,t[6]=v+_,t[7]=0,t[8]=f+m,t[9]=v-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d_(t,e,r,n,i,s,o){var a=1/(r-e),l=1/(i-n),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function p_(t,e,r,n,i){var s=1/Math.tan(e/2),o;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function m_(t,e,r,n,i,s,o){var a=1/(e-r),l=1/(n-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*l,t[14]=(o+s)*c,t[15]=1,t}function g_(t,e,r,n){var i,s,o,a,l,c,u,h,f,v,E=e[0],_=e[1],m=e[2],d=n[0],y=n[1],x=n[2],w=r[0],S=r[1],M=r[2];return Math.abs(E-w)<vn&&Math.abs(_-S)<vn&&Math.abs(m-M)<vn?Db(t):(u=E-w,h=_-S,f=m-M,v=1/Math.hypot(u,h,f),u*=v,h*=v,f*=v,i=y*f-x*h,s=x*u-d*f,o=d*h-y*u,v=Math.hypot(i,s,o),v?(v=1/v,i*=v,s*=v,o*=v):(i=0,s=0,o=0),a=h*o-f*s,l=f*i-u*o,c=u*s-h*i,v=Math.hypot(a,l,c),v?(v=1/v,a*=v,l*=v,c*=v):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*E+s*_+o*m),t[13]=-(a*E+l*_+c*m),t[14]=-(u*E+h*_+f*m),t[15]=1,t)}function Bb(){var t=new ir(4);return ir!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function v_(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}var E6=function(){var t=Bb();return function(e,r,n,i,s,o){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();var y_=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Ub=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Vb=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),ds={},ge=class extends ru{static get IDENTITY(){return ds.IDENTITY=ds.IDENTITY||Object.freeze(new ge(y_)),ds.IDENTITY}static get ZERO(){return ds.ZERO=ds.ZERO||Object.freeze(new ge(Ub)),ds.ZERO}get INDICES(){return Vb}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0);arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,r,n,i,s,o,a,l,c,u,h,f,v,E,_,m){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=f,this[12]=v,this[13]=E,this[14]=_,this[15]=m,this.check()}setRowMajor(e,r,n,i,s,o,a,l,c,u,h,f,v,E,_,m){return this[0]=e,this[1]=s,this[2]=c,this[3]=v,this[4]=r,this[5]=o,this[6]=u,this[7]=E,this[8]=n,this[9]=a,this[10]=h,this[11]=_,this[12]=i,this[13]=l,this[14]=f,this[15]=m,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(y_)}fromQuaternion(e){return h_(this,e),this.check()}frustum({left:e,right:r,bottom:n,top:i,near:s,far:o}){return o===1/0?ge._computeInfinitePerspectiveOffCenter(this,e,r,n,i,s):d_(this,e,r,n,i,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,r,n,i,s,o){let a=2*o/(n-r),l=2*o/(s-i),c=(n+r)/(n-r),u=(s+i)/(s-i),h=-1,f=-1,v=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=h,e[11]=f,e[12]=0,e[13]=0,e[14]=v,e[15]=0,e}lookAt(e,r,n){return arguments.length===1&&({eye:e,center:r,up:n}=e),r=r||[0,0,0],n=n||[0,1,0],g_(this,e,r,n),this.check()}ortho({left:e,right:r,bottom:n,top:i,near:s=.1,far:o=500}){return m_(this,e,r,n,i,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:r=1,focalDistance:n=1,near:i=.1,far:s=500}){if(e>Math.PI*2)throw Error("radians");let o=e/2,a=n*Math.tan(o),l=a*r;return new ge().ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:s})}perspective({fovy:e=void 0,fov:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:s=500}={}){if(e=e||r,e>Math.PI*2)throw Error("radians");return p_(this,e,n,i,s),this.check()}determinant(){return o_(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=null){let n=this.getScale(r||[-0,-0,-0]),i=1/n[0],s=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=null){let n=this.getScale(r||[-0,-0,-0]),i=1/n[0],s=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return i_(this,this),this.check()}invert(){return s_(this,this),this.check()}multiplyLeft(e){return Jp(this,e,this),this.check()}multiplyRight(e){return Jp(this,this,e),this.check()}rotateX(e){return c_(this,this,e),this.check()}rotateY(e){return u_(this,this,e),this.check()}rotateZ(e){return f_(this,this,e),this.check()}rotateXYZ([e,r,n]){return this.rotateX(e).rotateY(r).rotateZ(n)}rotateAxis(e,r){return l_(this,this,e,r),this.check()}scale(e){return Array.isArray(e)?em(this,this,e):em(this,this,[e,e,e]),this.check()}translate(e){return a_(this,this,e),this.check()}transform(e,r){return e.length===4?(r=v_(r||[-0,-0,-0,-0],e,this),Zc(r,4),r):this.transformAsPoint(e,r)}transformAsPoint(e,r){let{length:n}=e;switch(n){case 2:r=Yx(r||[-0,-0],e,this);break;case 3:r=tu(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Zc(r,e.length),r}transformAsVector(e,r){switch(e.length){case 2:r=$x(r||[-0,-0],e,this);break;case 3:r=eu(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Zc(r,e.length),r}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,r,n){return this.identity().translate([e,r,n])}transformPoint(e,r){return Kc("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,r)}transformVector(e,r){return Kc("Matrix4.transformVector","3.0"),this.transformAsPoint(e,r)}transformDirection(e,r){return Kc("Matrix4.transformDirection","3.0"),this.transformAsVector(e,r)}};var tm={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global},jb=tm.global||tm.self||tm.window;jb.mathgl={config:te};var Gb=new Uint8Array([0,255,255,255]),Wb={pickingSelectedColor:null,pickingHighlightColor:Gb,pickingActive:!1,pickingAttribute:!1};function Hb(t=Wb){let e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{let r=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=r}if(t.pickingHighlightColor){let r=Array.from(t.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),e.picking_uHighlightColor=r}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}var Yb=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,$b=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,nu={name:"picking",vs:Yb,fs:$b,getUniforms:Hb};var Xb=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,rm={name:"transform",vs:Xb,fs:null};var Lt=class{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Lt(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(r=>r.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){let r=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(e,r){r&&(e=Object.assign(r,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){let{vs:r="",fs:n="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(r),h=this._getHash(n),f=c.map(x=>this._getHash(x.name)).sort(),v=o.map(x=>this._getHash(x)),E=Object.keys(i).sort(),_=Object.keys(s).sort(),m=[],d=[];for(let x of E)m.push(this._getHash(x)),m.push(this._getHash(i[x]));for(let x of _)d.push(this._getHash(x)),d.push(this._getHash(s[x]));let y=`${u}/${h}D${m.join("/")}M${f.join("/")}I${d.join("/")}V${v.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[y]){let x=Xp(this.gl,{vs:r,fs:n,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new dn(this.gl,{hash:y,vs:x.vs,fs:x.fs,varyings:o,bufferMode:a}),this._getUniforms[y]=x.getUniforms||(w=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){let r=e.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){let r=new Array(this._defaultModules.length+e.length),n={},i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){let a=this._defaultModules[s],l=a.name;r[i++]=a,n[l]=!0}for(let s=0,o=e.length;s<o;++s){let a=e[s],l=a.name;n[l]||(r[i++]=a,n[l]=!0)}return r.length=i,r}};var qb={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function x_(t,e,r){let n={},i=e.indices;for(let s in e.attributes){let o=e.attributes[s],a=Zb(s,r);if(s==="indices")i=o;else if(o.constant)n[a]=o.value;else{let l=o.value,c={...o};delete c.value,n[a]=[new j(t,l),c],Kb(s,c)}}if(i){let s=i.value||i;I(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');let o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new j(t,{data:s,target:34963}),o]}return n}function Zb(t,e){let{attributeMap:r=qb}=e||{};return r&&r[t]||t}function Kb(t,e){let r;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break;default:}switch(r){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;default:}I(Number.isFinite(e.size),`attribute ${t} needs size`)}var ps=2,Qb=1e4,Jb="Model needs drawMode and vertexCount",__=()=>{},eA={},yn=class{constructor(e,r={}){let{id:n=qe("model")}=r;I(Pr(e)),this.id=n,this.gl=e,this.id=r.id||qe("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(e){this.props={},this.programManager=e.programManager||Lt.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;let{program:r=null,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:r,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},I(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),Jb)}setProps(e){this._setModelProps(e)}delete(){for(let e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){let{program:r,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:r,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return I(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return I(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=x_(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(nr(e))return this;let r={};for(let n in e){let i=e[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();let r=this.programManager.getUniforms(this.program);return r?r(e):{}}updateModuleSettings(e){let r=this.getModuleUniforms(e||{});return this.setUniforms(r)}clear(e){return un(this.program.gl,e),this}draw(e={}){this._checkProgram();let{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(r),this.setUniforms(i);let c;N.priority>=ps&&(c=this._logDrawCallStart(ps));let u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:v=u.indexOffset,vertexArrayInstanced:E=u.isInstanced}=this.props;E&&!this.isInstanced&&N.warn("Found instanced attributes on non-instanced model",this.id)();let{isInstanced:_,instanceCount:m}=this,{onBeforeRender:d=__,onAfterRender:y=__}=this.props;d(),this.program.setUniforms(this.uniforms);let x=this.program.draw(Object.assign(eA,e,{logPriority:c,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:_,instanceCount:m,offset:h?v:0}));return y(),N.priority>=ps&&this._logDrawCallEnd(c,l,n),x}transform(e={}){let{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=e,{parameters:s}=e;n&&this._setFeedbackBuffers(n),r&&(s=Object.assign({},s,{[35977]:r})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return N.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{let{vs:n,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}I(r instanceof dn,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new aa(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(let e in this.geometryBuffers){let r=this.geometryBuffers[e][0]||this.geometryBuffers[e];r instanceof j&&r.delete()}}_setAnimationProps(e){this.animated&&I(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(nr(e))return this;let{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new mn(r,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){let r=e>3?0:Qb;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),N.group(ps,`>>> DRAWING MODEL ${this.id}`,{collapsed:N.level<=2})(),e}_logDrawCallEnd(e,r,n,i){if(e===void 0)return;let s=Fp({vertexArray:r,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=Hc({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:c,count:u}=Hc({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});u>0&&N.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&N.log("UNUSED UNIFORMS",Object.keys(a))();let h=Bp(this.vertexArray.configuration);N.table(e,s)(),N.table(e,o)(),N.table(e+1,h)(),i&&i.log({logLevel:ps,message:`Rendered to ${i.id}`}),N.groupEnd(ps,`>>> DRAWING MODEL ${this.id}`)()}};var iu=class{constructor(e,r={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(e){for(let r of this.bindings)this._setupTransformFeedback(r,e)}updateModelProps(e={}){let{varyings:r}=this;return r.length>0&&(e=Object.assign({},e,{varyings:r})),e}getDrawOptions(e={}){let r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupBuffers(e)}getBuffer(e){let{feedbackBuffers:r}=this.bindings[this.currentIndex],n=e?r[e]:null;return n?n instanceof j?n:n.buffer:null}getData(e={}){let{varyingName:r}=e,n=this.getBuffer(r);return n?n.getData():null}delete(){for(let e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&I(U(this.gl))}_getFeedbackBuffers(e){let{sourceBuffers:r={}}=e,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(let i in this.feedbackMap){let s=this.feedbackMap[i];i in r&&(n[s]=i)}Object.assign(n,e.feedbackBuffers);for(let i in n){let s=n[i];if(typeof s=="string"){let o=r[s],{byteLength:a,usage:l,accessor:c}=o;n[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return n}_setupBuffers(e={}){let{sourceBuffers:r=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);let n=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(e,{model:r}){let{program:n}=r;e.transformFeedback=new mn(this.gl,{program:n,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){let{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(e,r){return e?(Object.assign(e.sourceBuffers,r.sourceBuffers),Object.assign(e.feedbackBuffers,r.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;let r=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(let i in this.feedbackMap){let s=this.feedbackMap[i];r[i]=e.feedbackBuffers[s],n[s]=e.sourceBuffers[i],I(n[s]instanceof j)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(e,r){let n=new j(this.gl,r);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}};var tA="transform_uSampler_",su="transform_uSize_",E_="transform_position";function w_({vs:t,sourceTextureMap:e,targetTextureVarying:r,targetTexture:n}){let s=Object.keys(e).length,o=null,a={},l=t,c={};if(s>0||r){let u=l.split(`
`),h=u.slice();if(u.forEach((f,v,E)=>{if(s>0){let _=sA(f,e);if(_){let{updatedLine:m,inject:d}=_;h[v]=m,c=cs([c,d]),Object.assign(a,_.samplerTextureMap),s--}}r&&!o&&(o=iA(f,r))}),r){I(n);let f=`${su}${r}`,v=`uniform vec2 ${f};
`,E=`     vec2 ${E_} = transform_getPos(${f});
     gl_Position = vec4(${E_}, 0, 1.);
`;c=cs([c,{"vs:#decl":v,"vs:#main-start":E}])}l=h.join(`
`)}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}function T_({sourceTextureMap:t,targetTextureVarying:e,targetTexture:r}){let n={},i,s;e&&({width:i,height:s}=r,n[`${su}${e}`]=[i,s]);for(let o in t)({width:i,height:s}=t[o]),n[`${su}${o}`]=[i,s];return n}function rA(t){return Xc(t,["attribute","in"])}function nA(t){let e=`${tA}${t}`,r=`${su}${t}`,n=`  uniform sampler2D ${e};
  uniform vec2 ${r};`;return{samplerName:e,sizeName:r,uniformDeclerations:n}}function iA(t,e){let r=Xc(t,["varying","out"]);return r&&r.name===e?r.type:null}function sA(t,e){let r={},n=rA(t);if(!n)return null;let{type:i,name:s}=n;if(s&&e[s]){let o=`// ${t} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=nA(s),u=qp(i),h=`  ${i} ${s} = transform_getInput(${a}, ${l}).${u};
`;return r[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:r}}return null}var oA={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},aA="transform_output",ou=class{constructor(e,r={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(e={}){let r=this._processVertexShader(e);return Object.assign({},e,r)}getDrawOptions(e={}){let{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},r,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters),c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(let h in this.samplerTextureMap){let f=this.samplerTextureMap[h];a[h]=n[f]}this._setSourceTextureParameters();let u=T_({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupTextures(e)}getTargetTexture(){let{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){let{framebuffer:r}=this.bindings[this.currentIndex],n=Ar(r);if(!e)return n;let i=n.constructor,s=Zp(this.targetTextureType),o=new i(n.length*s/4),a=0;for(let l=0;l<n.length;l+=4)for(let c=0;c<s;c++)o[a++]=n[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){let{_targetTextureVarying:r,_swapTexture:n}=e;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(e)}_createTargetTexture(e){let{sourceTextures:r,textureOrReference:n}=e;if(n instanceof le)return n;let i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(e={}){let{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;let r=new Float32Array(e);r.forEach((n,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new j(this.gl,{data:r,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){let{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(e,r){let{sourceBuffers:n,sourceTextures:i,targetTexture:s}=r;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,n),s){e.targetTexture=s;let{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{[36064]:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new q(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{[36064]:s}})}return e}_setSourceTextureParameters(){let e=this.currentIndex,{sourceTextures:r}=this.bindings[e];for(let n in r)r[n].setParameters(oA)}_swapTextures(e){if(!this._swapTexture)return null;let r=Object.assign({},e.sourceTextures);r[this._swapTexture]=e.targetTexture;let n=e.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(e){let r=Bc(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){let{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=w_({vs:e.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),c=cs([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;let u=e._fs||ha({version:os(i),input:this.targetTextureVarying,inputType:o,output:aA}),h=this.hasSourceTextures||this.targetTextureVarying?[rm].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:h,uniforms:s,inject:c}}};var sr=class{static isSupported(e){return U(e)}constructor(e,r={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){let{model:e,bufferTransform:r,textureTransform:n}=this;e&&e.delete(),r&&r.delete(),n&&n.delete()}run(e={}){let{clearRenderTarget:r=!0}=e,n=this._updateDrawOptions(e);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let e=!1,r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let n of r)e=e||n.swap();I(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){let r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let n of r){let i=n.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);let r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let n of r)n.update(e)}_initialize(e={}){let{gl:r}=this;this._buildResourceTransforms(r,e),e=this._updateModelProps(e),this.model=new yn(r,Object.assign({},e,{fs:e.fs||ha({version:os(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let r=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(e,r){lA(r)&&(this.bufferTransform=new iu(e,r)),cA(r)&&(this.textureTransform=new ou(e,r)),I(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let r=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of n)r=Object.assign(r,i.getDrawOptions(r));return r}};function lA(t){return!!(!nr(t.feedbackBuffers)||!nr(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function cA(t){return!!(!nr(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}var M_={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ms=class{static get DRAW_MODE(){return M_}constructor(e={}){let{id:r=qe("geometry"),drawMode:n=M_.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(let n in e){let i=e[n];i=ArrayBuffer.isView(i)?{value:i}:i,I(ArrayBuffer.isView(i.value),`${this._print(n)}: must be typed array or object with value as typed array`),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(I(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,r){if(r)return r.value.length;let n=1/0;for(let i in e){let s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(n=Math.min(n,o.length/a))}return I(Number.isFinite(n)),n}};var uA=1,fA=1,ni=class{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){let{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=uA++,a={time:0,delay:r,duration:n,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(let[r,n]of this.animations)n.channel===e&&this.detachAnimation(r)}isFinished(e){let r=this.channels.get(e);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(e){if(e===void 0)return this.time;let r=this.channels.get(e);return r===void 0?-1:r.time}setTime(e){this.time=Math.max(0,e);let r=this.channels.values();for(let i of r)this._setChannelTime(i,this.time);let n=this.animations.values();for(let i of n){let{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,r){let n=fA++;return this.animations.set(n,{animation:e,channel:r}),e.setTime(this.getTime(r)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,r){let n=r-e.delay,i=e.duration*e.repeat;n>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}};function xn(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var or={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document},pA=or.self||or.window||or.global||{},mA=or.window||or.self||or.global||{},gA=or.global||or.self||or.window||{},vA=or.document||{};var da=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser);var S_=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version),yA=S_&&parseFloat(S_[1])||0;var P_="3.1.4";function Ge(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var ar={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document},cB=ar.self||ar.window||ar.global||{},uB=ar.window||ar.self||ar.global||{},fB=ar.global||ar.self||ar.window||{},hB=ar.document||{};var dB=typeof process!="object"||String(process)!=="[object process]"||process.browser;var b_=typeof window!="undefined"&&typeof window.orientation!="undefined",A_=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version),pB=A_&&parseFloat(A_[1])||0;var au=class{constructor(e,r){F(this,"name",void 0),F(this,"workerThread",void 0),F(this,"isRunning",void 0),F(this,"result",void 0),F(this,"_resolve",void 0),F(this,"_reject",void 0),this.name=e,this.workerThread=r,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(e,r){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:r})}done(e){Ge(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ge(this.isRunning),this.isRunning=!1,this._reject(e)}};var nm=new Map;function L_(t){Ge(t.source&&!t.url||!t.source&&t.url);let e=nm.get(t.source||t.url);return e||(t.url&&(e=xA(t.url),nm.set(t.url,e)),t.source&&(e=I_(t.source),nm.set(t.source,e))),Ge(e),e}function xA(t){if(!t.startsWith("http"))return t;let e=_A(t);return I_(e)}function I_(t){let e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function _A(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function im(t,e=!0,r){let n=r||new Set;if(t){if(R_(t))n.add(t);else if(R_(t.buffer))n.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(let i in t)im(t[i],e,n)}}return r===void 0?Array.from(n):[]}function R_(t){return t?t instanceof ArrayBuffer||typeof MessagePort!="undefined"&&t instanceof MessagePort||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas:!1}var sm=()=>{},gs=class{static isSupported(){return typeof Worker!="undefined"}constructor(e){F(this,"name",void 0),F(this,"source",void 0),F(this,"url",void 0),F(this,"terminated",!1),F(this,"worker",void 0),F(this,"onMessage",void 0),F(this,"onError",void 0),F(this,"_loadableURL","");let{name:r,source:n,url:i}=e;Ge(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=sm,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=sm,this.onError=sm,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,r){r=r||im(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(r+="".concat(e.message," in ")),e.lineno&&(r+=":".concat(e.lineno,":").concat(e.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=L_({source:this.source,url:this.url});let e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},e.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},e.onmessageerror=r=>console.error(r),e}};var lu=class{constructor(e){F(this,"name","unnamed"),F(this,"source",void 0),F(this,"url",void 0),F(this,"maxConcurrency",1),F(this,"maxMobileConcurrency",1),F(this,"onDebug",()=>{}),F(this,"reuseWorkers",!0),F(this,"props",{}),F(this,"jobQueue",[]),F(this,"idleQueue",[]),F(this,"count",0),F(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,r=(i,s,o)=>i.done(o),n=(i,s)=>i.error(s)){let i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:r,onError:n,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;let e=this._getAvailableWorker();if(!e)return;let r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:e,backlog:this.jobQueue.length});let n=new au(r.name,e);e.onMessage=i=>r.onMessage(n,i.type,i.payload),e.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new gs({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return b_?this.maxMobileConcurrency:this.maxConcurrency}};var EA={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0},pt=class{static isSupported(){return gs.isSupported()}static getWorkerFarm(e={}){return pt._workerFarm=pt._workerFarm||new pt({}),pt._workerFarm.setProps(e),pt._workerFarm}constructor(e){F(this,"props",void 0),F(this,"workerPools",new Map),this.props={...EA},this.setProps(e),this.workerPools=new Map}destroy(){for(let e of this.workerPools.values())e.destroy()}setProps(e){this.props={...this.props,...e};for(let r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(e){let{name:r,source:n,url:i}=e,s=this.workerPools.get(r);return s||(s=new lu({name:r,source:n,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};F(pt,"_workerFarm",void 0);var wA="latest";function om(t,e={}){let r=e[t.id]||{},n="".concat(t.id,"-worker.js"),i=r.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(n)),!i){let s=t.version;s==="latest"&&(s=wA);let o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(n)}return Ge(i),i}function am(t,e=P_){Ge(t,"no worker provided");let r=t.version;return!(!e||!r)}function lm(t,e){return pt.isSupported()?t.worker&&(e==null?void 0:e.worker):!1}async function cm(t,e,r,n,i){let s=t.id,o=om(t,r),l=pt.getWorkerFarm(r).getWorkerPool({name:s,url:o});r=JSON.parse(JSON.stringify(r));let c=await l.startJob("process-on-worker",TA.bind(null,i));return c.postMessage("process",{input:e,options:r}),await(await c.result).result}async function TA(t,e,r,n){switch(r){case"done":e.done(n);break;case"error":e.error(new Error(n.error));break;case"process":let{id:i,input:s,options:o}=n;try{let a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){let l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function um(t){return t&&typeof t=="object"&&t.isBuffer}function O_(t){return um(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function cu(t){if(um(t))return O_(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){let e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function fm(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;let n=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}function hm(...t){let e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),r=e.reduce((s,o)=>s+o.byteLength,0),n=new Uint8Array(r),i=0;for(let s of e)n.set(s,i),i+=s.byteLength;return n.buffer}async function dm(t){let e=[];for await(let r of t)e.push(r);return hm(...e)}var MA="",C_={};function pm(t){for(let e in C_)if(t.startsWith(e)){let r=C_[e];t=t.replace(e,r)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(MA).concat(t)),t}var uu={};eT(uu,{dirname:()=>PA,filename:()=>SA,join:()=>bA});function SA(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}function PA(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function bA(...t){let e="/";return t=t.map((r,n)=>(n&&(r=r.replace(new RegExp("^".concat(e)),"")),n!==t.length-1&&(r=r.replace(new RegExp("".concat(e,"$")),"")),r)),t.join(e)}var AA=t=>typeof t=="boolean",pa=t=>typeof t=="function",vs=t=>t!==null&&typeof t=="object",mm=t=>vs(t)&&t.constructor==={}.constructor;var N_=t=>t&&typeof t[Symbol.iterator]=="function",k_=t=>t&&typeof t[Symbol.asyncIterator]=="function";var Or=t=>typeof Response!="undefined"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json;var zt=t=>typeof Blob!="undefined"&&t instanceof Blob,D_=t=>t&&typeof t=="object"&&t.isBuffer;var LA=t=>typeof ReadableStream!="undefined"&&t instanceof ReadableStream||vs(t)&&pa(t.tee)&&pa(t.cancel)&&pa(t.getReader);var IA=t=>vs(t)&&pa(t.read)&&pa(t.pipe)&&AA(t.readable),fu=t=>LA(t)||IA(t);var RA=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,OA=/^([-\w.]+\/[-\w.+]+)/;function F_(t){let e=OA.exec(t);return e?e[1]:t}function gm(t){let e=RA.exec(t);return e?e[1]:""}var CA=/\?.*/;function ii(t){if(Or(t)){let e=vm(t.url||""),r=t.headers.get("content-type")||"";return{url:e,type:F_(r)||gm(e)}}return zt(t)?{url:vm(t.name||""),type:t.type||""}:typeof t=="string"?{url:vm(t),type:gm(t)}:{url:"",type:""}}function B_(t){return Or(t)?t.headers["content-length"]||-1:zt(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function vm(t){return t.replace(CA,"")}async function hu(t){if(Or(t))return t;let e={},r=B_(t);r>=0&&(e["content-length"]=String(r));let{url:n,type:i}=ii(t);i&&(e["content-type"]=i);let s=await kA(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));let o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:n}),o}async function z_(t){if(!t.ok){let e=await NA(t);throw new Error(e)}}async function NA(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{let r=t.headers.get("Content-Type"),n=t.statusText;r.includes("application/json")&&(n+=" ".concat(await t.text())),e+=n,e=e.length>60?"".concat(e.slice(60),"..."):e}catch(r){}return e}async function kA(t){let e=5;if(typeof t=="string")return"data:,".concat(t.slice(0,e));if(t instanceof Blob){let r=t.slice(0,5);return await new Promise(n=>{let i=new FileReader;i.onload=s=>{var o;return n(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(r)})}if(t instanceof ArrayBuffer){let r=t.slice(0,e),n=DA(r);return"data:base64,".concat(n)}return null}function DA(t){let e="",r=new Uint8Array(t);for(let n=0;n<r.byteLength;n++)e+=String.fromCharCode(r[n]);return btoa(e)}async function ym(t,e){if(typeof t=="string"){t=pm(t);let r=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(r=e.fetch),await fetch(t,r)}return await hu(t)}var xm=new ct({id:"loaders.gl"}),_m=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},Em=class{constructor(){F(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}};var wm={fetch:null,mimeType:void 0,nothrow:!1,log:new Em,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},U_={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Tm(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state=t._state||{},t._state}var V_=()=>{let t=Tm();return t.globalOptions=t.globalOptions||{...wm},t.globalOptions};function j_(t,e,r,n){return r=r||[],r=Array.isArray(r)?r:[r],FA(t,r),zA(e,t,n)}function du(t,e){let r=V_(),n=t||r;return typeof n.fetch=="function"?n.fetch:vs(n.fetch)?i=>ym(i,n):e!=null&&e.fetch?e==null?void 0:e.fetch:ym}function FA(t,e){G_(t,null,wm,U_,e);for(let r of e){let n=t&&t[r.id]||{},i=r.options&&r.options[r.id]||{},s=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};G_(n,r.id,i,s,e)}}function G_(t,e,r,n,i){let s=e||"Top level",o=e?"".concat(e,"."):"";for(let a in t){let l=!e&&vs(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in r)&&!c&&!u){if(a in n)xm.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(n[a],"'"))();else if(!l){let h=BA(a,i);xm.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}}function BA(t,e){let r=t.toLowerCase(),n="";for(let i of e)for(let s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");let o=s.toLowerCase();(r.startsWith(o)||o.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return n}function zA(t,e,r){let i={...t.options||{}};return UA(i,r),i.log===null&&(i.log=new _m),W_(i,V_()),W_(i,e),i}function W_(t,e){for(let r in e)if(r in e){let n=e[r];mm(n)&&mm(t[r])?t[r]={...t[r],...e[r]}:t[r]=e[r]}}function UA(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function ma(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function ga(t){var e,r;xn(t,"null loader"),xn(ma(t),"invalid loader");let n;return Array.isArray(t)&&(n=t[1],t=t[0],t={...t,options:{...t.options,...n}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(r=t)!==null&&r!==void 0&&r.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var H_=()=>{let t=Tm();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Mm(t){let e=H_();t=Array.isArray(t)?t:[t];for(let r of t){let n=ga(r);e.find(i=>n===i)||e.unshift(n)}}function Y_(){return H_()}var VA=/\.([^.]+)$/;async function $_(t,e=[],r,n){if(!q_(t))return null;let i=X_(t,e,{...r,nothrow:!0},n);if(i)return i;if(zt(t)&&(t=await t.slice(0,10).arrayBuffer(),i=X_(t,e,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(Z_(t));return i}function X_(t,e=[],r,n){if(!q_(t))return null;if(e&&!Array.isArray(e))return ga(e);let i=[];e&&(i=i.concat(e)),r!=null&&r.ignoreRegisteredLoaders||i.push(...Y_()),GA(i);let s=jA(t,i,r,n);if(!s&&!(r!=null&&r.nothrow))throw new Error(Z_(t));return s}function jA(t,e,r,n){let{url:i,type:s}=ii(t),o=i||(n==null?void 0:n.url),a=null;return r!=null&&r.mimeType&&(a=Sm(e,r==null?void 0:r.mimeType)),a=a||WA(e,o),a=a||Sm(e,s),a=a||YA(e,t),a=a||Sm(e,r==null?void 0:r.fallbackMimeType),a}function q_(t){return!(t instanceof Response&&t.status===204)}function Z_(t){let{url:e,type:r}=ii(t),n="No valid loader found (";n+=e?"".concat(uu.filename(e),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");let i=t?qA(t):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function GA(t){for(let e of t)ga(e)}function WA(t,e){let r=e&&VA.exec(e),n=r&&r[1];return n?HA(t,n):null}function HA(t,e){e=e.toLowerCase();for(let r of t)for(let n of r.extensions)if(n.toLowerCase()===e)return r;return null}function Sm(t,e){for(let r of t)if(r.mimeTypes&&r.mimeTypes.includes(e)||e==="application/x.".concat(r.id))return r;return null}function YA(t,e){if(!e)return null;for(let r of t)if(typeof e=="string"){if($A(e,r))return r}else if(ArrayBuffer.isView(e)){if(K_(e.buffer,e.byteOffset,r))return r}else if(e instanceof ArrayBuffer&&K_(e,0,r))return r;return null}function $A(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(n=>t.startsWith(n))}function K_(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>XA(t,e,r,i))}function XA(t,e,r,n){if(n instanceof ArrayBuffer)return fm(n,t,n.byteLength);switch(typeof n){case"function":return n(t,r);case"string":let i=Pm(t,e,n.length);return n===i;default:return!1}}function qA(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Pm(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Pm(t,0,e):""}function Pm(t,e,r){if(t.byteLength<e+r)return"";let n=new DataView(t),i="";for(let s=0;s<r;s++)i+=String.fromCharCode(n.getUint8(e+s));return i}var ZA=256*1024;function*Q_(t,e){let r=(e==null?void 0:e.chunkSize)||ZA,n=0,i=new TextEncoder;for(;n<t.length;){let s=Math.min(t.length-n,r),o=t.slice(n,n+s);n+=s,yield i.encode(o)}}var KA=256*1024;function*J_(t,e={}){let{chunkSize:r=KA}=e,n=0;for(;n<t.byteLength;){let i=Math.min(t.byteLength-n,r),s=new ArrayBuffer(i),o=new Uint8Array(t,n,i);new Uint8Array(s).set(o),n+=i,yield s}}var QA=1024*1024;async function*eE(t,e){let r=(e==null?void 0:e.chunkSize)||QA,n=0;for(;n<t.size;){let i=n+r,s=await t.slice(n,i).arrayBuffer();n=i,yield s}}function bm(t,e){return da?JA(t,e):eL(t,e)}async function*JA(t,e){let r=t.getReader(),n;try{for(;;){let i=n||r.read();e!=null&&e._streamReadAhead&&(n=r.read());let{done:s,value:o}=await i;if(s)return;yield cu(o)}}catch(i){r.releaseLock()}}async function*eL(t,e){for await(let r of t)yield cu(r)}function tE(t,e){if(typeof t=="string")return Q_(t,e);if(t instanceof ArrayBuffer)return J_(t,e);if(zt(t))return eE(t,e);if(fu(t))return bm(t,e);if(Or(t))return bm(t.body,e);throw new Error("makeIterator")}var rE="Cannot convert supplied data type";function tL(t,e,r){if(e.text&&typeof t=="string")return t;if(D_(t)&&(t=t.buffer),t instanceof ArrayBuffer){let n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer,i=t.byteLength||t.length;return(t.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(t.byteOffset,t.byteOffset+i)),n}throw new Error(rE)}async function nE(t,e,r){let n=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||n)return tL(t,e,r);if(zt(t)&&(t=await hu(t)),Or(t)){let i=t;return await z_(i),e.binary?await i.arrayBuffer():await i.text()}if(fu(t)&&(t=tE(t,r)),N_(t)||k_(t))return dm(t);throw new Error(rE)}function iE(t,e,r=null){if(r)return r;let n={fetch:du(e,t),...t};return Array.isArray(n.loaders)||(n.loaders=null),n}function sE(t,e){if(!e&&t&&!Array.isArray(t))return t;let r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){let n=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function pu(t,e,r,n){Ge(!n||typeof n=="object"),e&&!Array.isArray(e)&&!ma(e)&&(n=void 0,r=e,e=void 0),t=await t,r=r||{};let{url:i}=ii(t),o=sE(e,n),a=await $_(t,o,r);return a?(r=j_(r,a,o,i),n=iE({url:i,parse:pu,loaders:o},r,n),await rL(a,t,r,n)):null}async function rL(t,e,r,n){if(am(t),e=await nE(e,t,r),t.parseTextSync&&typeof e=="string")return r.dataType="text",t.parseTextSync(e,r,n,t);if(lm(t,r))return await cm(t,e,r,n,pu);if(t.parseText&&typeof e=="string")return await t.parseText(e,r,n,t);if(t.parse)return await t.parse(e,r,n,t);throw Ge(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function ys(t,e,r,n){!Array.isArray(e)&&!ma(e)&&(n=void 0,r=e,e=void 0);let i=du(r),s=t;return typeof t=="string"&&(s=await i(t)),zt(t)&&(s=await i(t)),await pu(s,e,r)}var oE="3.1.4";var{_parseImageNode:nL}=globalThis,Am=typeof Image!="undefined",Lm=typeof ImageBitmap!="undefined",iL=Boolean(nL),Im=da?!0:iL;function aE(t){switch(t){case"auto":return Lm||Am||Im;case"imagebitmap":return Lm;case"image":return Am;case"data":return Im;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function lE(){if(Lm)return"imagebitmap";if(Am)return"image";if(Im)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function sL(t){let e=oL(t);if(!e)throw new Error("Not an image");return e}function cE(t){switch(sL(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("getImageData");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function oL(t){return typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?"imagebitmap":typeof Image!="undefined"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var aL=/^data:image\/svg\+xml/,lL=/\.svg((\?|#).*)?$/;function mu(t){return t&&(aL.test(t)||lL.test(t))}function uE(t,e){if(mu(e)){let n=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return Rm(t,e)}function Rm(t,e){if(mu(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function va(t,e,r){let n=uE(t,r),i=self.URL||self.webkitURL,s=typeof n!="string"&&i.createObjectURL(n);try{return await cL(s||n,e)}finally{s&&i.revokeObjectURL(s)}}async function cL(t,e){let r=new Image;return r.src=t,e.image&&e.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}var uL={},fE=!0;async function Om(t,e,r){let n;mu(r)?n=await va(t,e,r):n=Rm(t,r);let i=e&&e.imagebitmap;return await fL(n,i)}async function fL(t,e=null){if((hL(e)||!fE)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(r){console.warn(r),fE=!1}return await createImageBitmap(t)}function hL(t){for(let e in t||uL)return!1;return!0}var lr=!1,ya=!0;function gu(t){let e=xa(t);return dL(e)||gL(e)||pL(e)||mL(e)}function dL(t){let e=xa(t);return e.byteLength>=24&&e.getUint32(0,lr)===2303741511?{mimeType:"image/png",width:e.getUint32(16,lr),height:e.getUint32(20,lr)}:null}function pL(t){let e=xa(t);return e.byteLength>=10&&e.getUint32(0,lr)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,ya),height:e.getUint16(8,ya)}:null}function mL(t){let e=xa(t);return e.byteLength>=14&&e.getUint16(0,lr)===16973&&e.getUint32(2,ya)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,ya),height:e.getUint32(22,ya)}:null}function gL(t){let e=xa(t);if(!(e.byteLength>=3&&e.getUint16(0,lr)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:n,sofMarkers:i}=vL(),s=2;for(;s+9<e.byteLength;){let o=e.getUint16(s,lr);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,lr),width:e.getUint16(s+7,lr)};if(!n.has(o))return null;s+=2,s+=e.getUint16(s,lr)}return null}function vL(){let t=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)t.add(r);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function xa(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function Cm(t,e){let{mimeType:r}=gu(t)||{},n=globalThis._parseImageNode;return xn(n),await n(t,r)}async function Nm(t,e,r){e=e||{};let i=(e.image||{}).type||"auto",{url:s}=r||{},o=yL(i),a;switch(o){case"imagebitmap":a=await Om(t,e,s);break;case"image":a=await va(t,e,s);break;case"data":a=await Cm(t,e);break;default:xn(!1)}return i==="data"&&(a=cE(a)),a}function yL(t){switch(t){case"auto":case"data":return lE();default:return aE(t),t}}var xL=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],_L=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],EL={image:{type:"auto",decode:!0}},km={id:"image",module:"images",name:"Images",version:oE,mimeTypes:_L,extensions:xL,parse:Nm,tests:[t=>Boolean(gu(new DataView(t)))],options:EL};var xs=Qe(an());var G=new ct({id:"deck"});var Dm={};function hE(t){Dm=t}function _e(t){G.level>0&&Dm[t]&&Dm[t].call(...arguments)}function wL(t){let e=t[0],r=t[t.length-1];return e==="{"&&r==="}"||e==="["&&r==="]"}var dE={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:wL,parseTextSync:JSON.parse};var _a="8.6.5",vu=xs.global.deck&&xs.global.deck.VERSION;if(vu&&vu!==_a)throw new Error("deck.gl - multiple versions detected: ".concat(vu," vs ").concat(_a));vu||(G.log(1,"deck.gl ".concat(_a))(),xs.global.deck=Object.assign(xs.global.deck||{},{VERSION:_a,version:_a,log:G,_registerLoggers:hE}),Mm([dE,[km,{imagebitmap:{premultiplyAlpha:"none"}}]]));var pE=xs.global.deck;var TL=`
struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,ML=`
#define SMOOTH_EDGE_RADIUS 0.5

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,mE={name:"geometry",vs:TL,fs:ML};var $={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty($,"IDENTITY",{get:()=>G.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});var it={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},_s={common:0,meters:1,pixels:2},Fm={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};var SL=Object.keys($).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat($[t],";")).join(""),PL=Object.keys(it).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(it[t],";")).join(""),bL=Object.keys(_s).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(_s[t],";")).join(""),gE="".concat(SL,`
`).concat(PL,`
`).concat(bL,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
`);var Cr=typeof Float32Array!="undefined"?Float32Array:Array;var gV=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function zm(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],v=e[11],E=e[12],_=e[13],m=e[14],d=e[15],y=r*a-n*o,x=r*l-i*o,w=r*c-s*o,S=n*l-i*a,M=n*c-s*a,A=i*c-s*l,b=u*_-h*E,L=u*m-f*E,z=u*d-v*E,H=h*m-f*_,W=h*d-v*_,X=f*d-v*m,k=y*X-x*W+w*H+S*z-M*L+A*b;return k?(k=1/k,t[0]=(a*X-l*W+c*H)*k,t[1]=(i*W-n*X-s*H)*k,t[2]=(_*A-m*M+d*S)*k,t[3]=(f*M-h*A-v*S)*k,t[4]=(l*z-o*X-c*L)*k,t[5]=(r*X-i*z+s*L)*k,t[6]=(m*w-E*A-d*x)*k,t[7]=(u*A-f*w+v*x)*k,t[8]=(o*W-a*z+c*b)*k,t[9]=(n*z-r*W-s*b)*k,t[10]=(E*M-_*w+d*y)*k,t[11]=(h*w-u*M-v*y)*k,t[12]=(a*L-o*H-l*b)*k,t[13]=(r*H-n*L+i*b)*k,t[14]=(_*x-E*S-m*y)*k,t[15]=(u*S-h*x+f*y)*k,t):null}function si(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],v=e[10],E=e[11],_=e[12],m=e[13],d=e[14],y=e[15],x=r[0],w=r[1],S=r[2],M=r[3];return t[0]=x*n+w*a+S*h+M*_,t[1]=x*i+w*l+S*f+M*m,t[2]=x*s+w*c+S*v+M*d,t[3]=x*o+w*u+S*E+M*y,x=r[4],w=r[5],S=r[6],M=r[7],t[4]=x*n+w*a+S*h+M*_,t[5]=x*i+w*l+S*f+M*m,t[6]=x*s+w*c+S*v+M*d,t[7]=x*o+w*u+S*E+M*y,x=r[8],w=r[9],S=r[10],M=r[11],t[8]=x*n+w*a+S*h+M*_,t[9]=x*i+w*l+S*f+M*m,t[10]=x*s+w*c+S*v+M*d,t[11]=x*o+w*u+S*E+M*y,x=r[12],w=r[13],S=r[14],M=r[15],t[12]=x*n+w*a+S*h+M*_,t[13]=x*i+w*l+S*f+M*m,t[14]=x*s+w*c+S*v+M*d,t[15]=x*o+w*u+S*E+M*y,t}function vE(t,e,r){var n=r[0],i=r[1],s=r[2],o,a,l,c,u,h,f,v,E,_,m,d;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],v=e[7],E=e[8],_=e[9],m=e[10],d=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=v,t[8]=E,t[9]=_,t[10]=m,t[11]=d,t[12]=o*n+u*i+E*s+e[12],t[13]=a*n+h*i+_*s+e[13],t[14]=l*n+f*i+m*s+e[14],t[15]=c*n+v*i+d*s+e[15]),t}function yE(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function AL(){var t=new Cr(4);return Cr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ea(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}var vV=function(){var t=AL();return function(e,r,n,i,s,o){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function LL(t,e){if(t===e)return!0;if(Array.isArray(t)){let r=t.length;if(!e||e.length!==r)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}return!1}function _n(t){let e={},r;return n=>{for(let i in n)if(!LL(n[i],e[i])){r=t(n),e=n;break}return r}}var TE=[0,0,0,0],IL=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],RL=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],OL=[0,0,0],CL=[0,0,0],NL=_n(DL);function Um(t,e,r=CL){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,s=!0;switch(e===$.LNGLAT_OFFSETS||e===$.METER_OFFSETS?i=r:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case it.WEB_MERCATOR:(e===$.LNGLAT||e===$.CARTESIAN)&&(i=[0,0,0],s=!1);break;case it.WEB_MERCATOR_AUTO_OFFSET:e===$.LNGLAT?n=i:e===$.CARTESIAN&&(n=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case it.IDENTITY:n=t.position.map(Math.fround),n[2]=n[2]||0;break;case it.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:s}}function kL(t,e,r){let{viewMatrixUncentered:n,projectionMatrix:i}=t,{viewMatrix:s,viewProjectionMatrix:o}=t,a=TE,l=TE,c=t.cameraPosition,{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=Um(t,e,r);return f&&(l=t.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Ea([],l,o),s=n||s,o=si([],i,s),o=si([],o,IL)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}function ME({viewport:t,devicePixelRatio:e=1,modelMatrix:r=null,coordinateSystem:n=$.DEFAULT,coordinateOrigin:i,autoWrapLongitude:s=!1}={}){n===$.DEFAULT&&(n=t.isGeospatial?$.LNGLAT:$.CARTESIAN);let o=NL({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=r||RL,o}function DL({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:n}){let{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=kL(t,r,n),u=t.getDistanceScales(),h=[t.width*e,t.height*e],f=Ea([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,v={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:OL,project_uScale:t.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(c){let E=t.getDistanceScales(c);switch(r){case $.METER_OFFSETS:v.project_uCommonUnitsPerWorldUnit=E.unitsPerMeter,v.project_uCommonUnitsPerWorldUnit2=E.unitsPerMeter2;break;case $.LNGLAT:case $.LNGLAT_OFFSETS:t._pseudoMeters||(v.project_uCommonUnitsPerMeter=E.unitsPerMeter),v.project_uCommonUnitsPerWorldUnit=E.unitsPerDegree,v.project_uCommonUnitsPerWorldUnit2=E.unitsPerDegree2;break;case $.CARTESIAN:v.project_uCommonUnitsPerWorldUnit=[1,1,E.unitsPerMeter[2]],v.project_uCommonUnitsPerWorldUnit2=[0,0,E.unitsPerMeter2[2]];break;default:break}}return v}var FL={};function BL(t=FL){return t.viewport?ME(t):{}}var oi={name:"project",dependencies:[qc,mE],vs:gE,getUniforms:BL};var zL=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    mat3 rotation = project_get_orientation_matrix(projectedPosition);
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,yu={name:"project32",dependencies:[oi],vs:zL};var Ee=1e-6,cr=typeof Float32Array!="undefined"?Float32Array:Array;var RV=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function UL(){var t=new cr(4);return cr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function PE(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function bE(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}var OV=function(){var t=UL();return function(e,r,n,i,s,o){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function Es(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function En(t,e){let r=bE([],e,t);return PE(r,r,1/r[3]),r}function Vm(t,e){let r=t%e;return r<0?e+r:r}function jL(t){return Math.log(t)*Math.LOG2E}var ws=Math.log2||jL;function AE(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],v=e[11],E=e[12],_=e[13],m=e[14],d=e[15],y=r*a-n*o,x=r*l-i*o,w=r*c-s*o,S=n*l-i*a,M=n*c-s*a,A=i*c-s*l,b=u*_-h*E,L=u*m-f*E,z=u*d-v*E,H=h*m-f*_,W=h*d-v*_,X=f*d-v*m,k=y*X-x*W+w*H+S*z-M*L+A*b;return k?(k=1/k,t[0]=(a*X-l*W+c*H)*k,t[1]=(i*W-n*X-s*H)*k,t[2]=(_*A-m*M+d*S)*k,t[3]=(f*M-h*A-v*S)*k,t[4]=(l*z-o*X-c*L)*k,t[5]=(r*X-i*z+s*L)*k,t[6]=(m*w-E*A-d*x)*k,t[7]=(u*A-f*w+v*x)*k,t[8]=(o*W-a*z+c*b)*k,t[9]=(n*z-r*W-s*b)*k,t[10]=(E*M-_*w+d*y)*k,t[11]=(h*w-u*M-v*y)*k,t[12]=(a*L-o*H-l*b)*k,t[13]=(r*H-n*L+i*b)*k,t[14]=(_*x-E*S-m*y)*k,t[15]=(u*S-h*x+f*y)*k,t):null}function _u(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],v=e[10],E=e[11],_=e[12],m=e[13],d=e[14],y=e[15],x=r[0],w=r[1],S=r[2],M=r[3];return t[0]=x*n+w*a+S*h+M*_,t[1]=x*i+w*l+S*f+M*m,t[2]=x*s+w*c+S*v+M*d,t[3]=x*o+w*u+S*E+M*y,x=r[4],w=r[5],S=r[6],M=r[7],t[4]=x*n+w*a+S*h+M*_,t[5]=x*i+w*l+S*f+M*m,t[6]=x*s+w*c+S*v+M*d,t[7]=x*o+w*u+S*E+M*y,x=r[8],w=r[9],S=r[10],M=r[11],t[8]=x*n+w*a+S*h+M*_,t[9]=x*i+w*l+S*f+M*m,t[10]=x*s+w*c+S*v+M*d,t[11]=x*o+w*u+S*E+M*y,x=r[12],w=r[13],S=r[14],M=r[15],t[12]=x*n+w*a+S*h+M*_,t[13]=x*i+w*l+S*f+M*m,t[14]=x*s+w*c+S*v+M*d,t[15]=x*o+w*u+S*E+M*y,t}function wa(t,e,r){var n=r[0],i=r[1],s=r[2],o,a,l,c,u,h,f,v,E,_,m,d;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],v=e[7],E=e[8],_=e[9],m=e[10],d=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=v,t[8]=E,t[9]=_,t[10]=m,t[11]=d,t[12]=o*n+u*i+E*s+e[12],t[13]=a*n+h*i+_*s+e[13],t[14]=l*n+f*i+m*s+e[14],t[15]=c*n+v*i+d*s+e[15]),t}function Eu(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function LE(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*n,t[5]=o*i+u*n,t[6]=a*i+h*n,t[7]=l*i+f*n,t[8]=c*i-s*n,t[9]=u*i-o*n,t[10]=h*i-a*n,t[11]=f*i-l*n,t}function IE(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*n,t[1]=o*i+u*n,t[2]=a*i+h*n,t[3]=l*i+f*n,t[4]=c*i-s*n,t[5]=u*i-o*n,t[6]=h*i-a*n,t[7]=f*i-l*n,t}function RE(t,e,r,n,i){var s=1/Math.tan(e/2),o;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function jm(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],v=t[11],E=t[12],_=t[13],m=t[14],d=t[15],y=e[0],x=e[1],w=e[2],S=e[3],M=e[4],A=e[5],b=e[6],L=e[7],z=e[8],H=e[9],W=e[10],X=e[11],k=e[12],Ze=e[13],pr=e[14],Ya=e[15];return Math.abs(r-y)<=Ee*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-x)<=Ee*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(i-w)<=Ee*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-S)<=Ee*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(o-M)<=Ee*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-A)<=Ee*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-b)<=Ee*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-L)<=Ee*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(u-z)<=Ee*Math.max(1,Math.abs(u),Math.abs(z))&&Math.abs(h-H)<=Ee*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(f-W)<=Ee*Math.max(1,Math.abs(f),Math.abs(W))&&Math.abs(v-X)<=Ee*Math.max(1,Math.abs(v),Math.abs(X))&&Math.abs(E-k)<=Ee*Math.max(1,Math.abs(E),Math.abs(k))&&Math.abs(_-Ze)<=Ee*Math.max(1,Math.abs(_),Math.abs(Ze))&&Math.abs(m-pr)<=Ee*Math.max(1,Math.abs(m),Math.abs(pr))&&Math.abs(d-Ya)<=Ee*Math.max(1,Math.abs(d),Math.abs(Ya))}function GL(){var t=new cr(2);return cr!=Float32Array&&(t[0]=0,t[1]=0),t}function Gm(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function CE(t,e){return t[0]=-e[0],t[1]=-e[1],t}function wu(t,e,r,n){var i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t}var NV=function(){var t=GL();return function(e,r,n,i,s,o){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();function WL(){var t=new cr(3);return cr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function NE(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function HL(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function kE(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}var DE=HL;var kV=function(){var t=WL();return function(e,r,n,i,s,o){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();function It(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var Ut=Math.PI,BE=Ut/4,Vt=Ut/180,Hm=180/Ut,Ta=512,Ym=4003e4,$m=1.5;function Tu(t){return Math.pow(2,t)}function Xm(t){return ws(t)}function ur([t,e]){It(Number.isFinite(t)),It(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude");let r=t*Vt,n=e*Vt,i=Ta*(r+Ut)/(2*Ut),s=Ta*(Ut+Math.log(Math.tan(BE+n*.5)))/(2*Ut);return[i,s]}function st([t,e]){let r=t/Ta*(2*Ut)-Ut,n=2*(Math.atan(Math.exp(e/Ta*(2*Ut)-Ut))-BE);return[r*Hm,n*Hm]}function qm({latitude:t}){It(Number.isFinite(t));let e=Math.cos(t*Vt);return Xm(Ym*e)-9}function ai({latitude:t,longitude:e,highPrecision:r=!1}){It(Number.isFinite(t)&&Number.isFinite(e));let n={},i=Ta,s=Math.cos(t*Vt),o=i/360,a=o/s,l=i/Ym/s;if(n.unitsPerMeter=[l,l,l],n.metersPerUnit=[1/l,1/l,1/l],n.unitsPerDegree=[o,a,l],n.degreesPerUnit=[1/o,1/a,1/l],r){let c=Vt*Math.tan(t*Vt)/s,u=o*c/2,h=i/Ym*c,f=h/a*l;n.unitsPerDegree2=[0,u,h],n.unitsPerMeter2=[f,0,f]}return n}function Ma(t,e){let[r,n,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=ai({longitude:r,latitude:n,highPrecision:!0}),u=ur(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);let h=st(u),f=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],f]:h}function Sa({height:t,pitch:e,bearing:r,altitude:n,scale:i,center:s=null}){let o=Es();return wa(o,o,[0,0,-n]),LE(o,o,-e*Vt),IE(o,o,r*Vt),i/=t,Eu(o,o,[i,i,i]),s&&wa(o,o,kE([],s)),o}function Mu({width:t,height:e,fovy:r=Nr($m),altitude:n,pitch:i=0,nearZMultiplier:s=1,farZMultiplier:o=1}){n!==void 0&&(r=Nr(n));let a=.5*r*Vt,l=Ts(r),c=i*Vt,u=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01)),h=Math.sin(c)*u+l;return{fov:2*a,aspect:t/e,focalDistance:l,near:s,far:h*o}}function Zm({width:t,height:e,pitch:r,altitude:n,fovy:i,nearZMultiplier:s,farZMultiplier:o}){let{fov:a,aspect:l,near:c,far:u}=Mu({width:t,height:e,altitude:n,fovy:i,pitch:r,nearZMultiplier:s,farZMultiplier:o});return RE([],a,l,c,u)}function Nr(t){return 2*Math.atan(.5/t)*Hm}function Ts(t){return .5/Math.tan(.5*t*Vt)}function li(t,e){let[r,n,i=0]=t;return It(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),En(e,[r,n,i,1])}function fr(t,e,r=0){let[n,i,s]=t;if(It(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return En(e,[n,i,s,1]);let o=En(e,[n,i,0,1]),a=En(e,[n,i,1,1]),l=o[2],c=a[2],u=l===c?0:((r||0)-l)/(c-l);return wu([],o,a,u)}function Ms({width:t,height:e,bounds:r,minExtent:n=0,maxZoom:i=24,padding:s=0,offset:o=[0,0]}){let[[a,l],[c,u]]=r;if(Number.isFinite(s)){let A=s;s={top:A,bottom:A,left:A,right:A}}else It(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));let h=new kr({width:t,height:e,longitude:0,latitude:0,zoom:0}),f=h.project([a,u]),v=h.project([c,l]),E=[Math.max(Math.abs(v[0]-f[0]),n),Math.max(Math.abs(v[1]-f[1]),n)],_=[t-s.left-s.right-Math.abs(o[0])*2,e-s.top-s.bottom-Math.abs(o[1])*2];It(_[0]>0&&_[1]>0);let m=_[0]/E[0],d=_[1]/E[1],y=(s.right-s.left)/2/m,x=(s.bottom-s.top)/2/d,w=[(v[0]+f[0])/2+y,(v[1]+f[1])/2+x],S=h.unproject(w),M=Math.min(i,h.zoom+ws(Math.abs(Math.min(m,d))));return It(Number.isFinite(M)),{longitude:S[0],latitude:S[1],zoom:M}}var zE=Math.PI/180;function Ss(t,e=0){let{width:r,height:n,unproject:i}=t,s={targetZ:e},o=i([0,n],s),a=i([r,n],s),l,c,u=t.fovy?.5*t.fovy*zE:Math.atan(.5/t.altitude),h=(90-t.pitch)*zE;return u>h-.01?(l=UE(t,0,e),c=UE(t,r,e)):(l=i([0,0],s),c=i([r,0],s)),[o,a,c,l]}function UE(t,e,r){let{pixelUnprojectionMatrix:n}=t,i=En(n,[e,0,1,1]),s=En(n,[e,t.height,1,1]),a=(r*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=wu([],i,s,a),c=st(l);return c[2]=r,c}var kr=class{constructor({width:e,height:r,latitude:n=0,longitude:i=0,zoom:s=0,pitch:o=0,bearing:a=0,altitude:l=null,fovy:c=null,position:u=null,nearZMultiplier:h=.02,farZMultiplier:f=1.01}={width:1,height:1}){e=e||1,r=r||1,c===null&&l===null?(l=$m,c=Nr(l)):c===null?c=Nr(l):l===null&&(l=Ts(c));let v=Tu(s);l=Math.max(.75,l);let E=ai({longitude:i,latitude:n}),_=ur([i,n]);_[2]=0,u&&NE(_,_,DE([],u,E.unitsPerMeter)),this.projectionMatrix=Zm({width:e,height:r,pitch:o,fovy:c,nearZMultiplier:h,farZMultiplier:f}),this.viewMatrix=Sa({height:r,scale:v,center:_,pitch:o,bearing:a,altitude:l}),this.width=e,this.height=r,this.scale=v,this.latitude=n,this.longitude=i,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=l,this.fovy=c,this.center=_,this.meterOffset=u||[0,0,0],this.distanceScales=E,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){let{width:e,height:r,projectionMatrix:n,viewMatrix:i}=this,s=Es();_u(s,s,n),_u(s,s,i),this.viewProjectionMatrix=s;let o=Es();Eu(o,o,[e/2,-r/2,1]),wa(o,o,[1,-1,0]),_u(o,o,s);let a=AE(Es(),o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}equals(e){return e instanceof kr?e.width===this.width&&e.height===this.height&&jm(e.projectionMatrix,this.projectionMatrix)&&jm(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:r=!0}={}){let n=this.projectPosition(e),i=li(n,this.pixelProjectionMatrix),[s,o]=i,a=r?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:r=!0,targetZ:n=void 0}={}){let[i,s,o]=e,a=r?s:this.height-s,l=n&&n*this.distanceScales.unitsPerMeter[2],c=fr([i,a,o],this.pixelUnprojectionMatrix,l),[u,h,f]=this.unprojectPosition(c);return Number.isFinite(o)?[u,h,f]:Number.isFinite(n)?[u,h,n]:[u,h]}projectPosition(e){let[r,n]=ur(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(e){let[r,n]=st(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(e){return ur(e)}unprojectFlat(e){return st(e)}getMapCenterByLngLatPosition({lngLat:e,pos:r}){let n=fr(r,this.pixelUnprojectionMatrix),i=ur(e),s=Gm([],i,CE([],n)),o=Gm([],this.center,s);return st(o)}getLocationAtPoint({lngLat:e,pos:r}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:r})}fitBounds(e,r={}){let{width:n,height:i}=this,{longitude:s,latitude:o,zoom:a}=Ms(Object.assign({width:n,height:i,bounds:e},r));return new kr({width:n,height:i,longitude:s,latitude:o,zoom:a})}getBounds(e){let r=this.getBoundingRegion(e),n=Math.min(...r.map(a=>a[0])),i=Math.max(...r.map(a=>a[0])),s=Math.min(...r.map(a=>a[1])),o=Math.max(...r.map(a=>a[1]));return[[n,s],[i,o]]}getBoundingRegion(e={}){return Ss(this,e.z||0)}};var VE=512;function Su({width:t,height:e,longitude:r,latitude:n,zoom:i,pitch:s=0,bearing:o=0}){(r<-180||r>180)&&(r=Vm(r+180,360)-180),(o<-180||o>180)&&(o=Vm(o+180,360)-180);let a=ws(e/VE);if(i<=a)i=a,n=0;else{let l=e/2/Math.pow(2,i),c=st([0,l])[1];if(n<c)n=c;else{let u=st([0,VE-l])[1];n>u&&(n=u)}}return{width:t,height:e,longitude:r,latitude:n,zoom:i,pitch:s,bearing:o}}var YL=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,$L=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,XL=_n(JL),qL=_n(eI),ZL=[0,0,0,1],KL=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function QL(t,e){let[r,n,i]=t,s=fr([r,n,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function JL({viewport:t,center:e}){return new ge(t.viewProjectionMatrix).invert().transform(e)}function eI({viewport:t,shadowMatrices:e}){let r=[],n=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>QL(o,n));for(let o of e){let a=o.clone().translate(new me(t.center).negate()),l=s.map(u=>a.transform(u)),c=new ge().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});r.push(c.multiplyRight(o))}return r}function tI(t={},e={}){let r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||ZL,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},n=XL({viewport:t.viewport,center:e.project_uCenter}),i=[],s=qL({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let o=0;o<t.shadowMatrices.length;o++){let a=s[o],l=a.clone().translate(new me(t.viewport.center).negate());e.project_uCoordinateSystem===$.LNGLAT&&e.project_uProjectionMode===it.WEB_MERCATOR?(s[o]=l,i[o]=n):(s[o]=a.clone().multiplyRight(KL),i[o]=l.transform(n))}for(let o=0;o<s.length;o++)r["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],r["shadow_uProjectCenters[".concat(o,"]")]=i[o],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(o)]=t.shadowMaps[o]:r["shadow_uShadowMap".concat(o)]=t.dummyShadowMap;return r}var Pa={name:"shadow",dependencies:[oi],vs:YL,fs:$L,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>{if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){let{shadowEnabled:r=!0}=t;return r&&t.shadowMatrices&&t.shadowMatrices.length>0?tI(t,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}};var Pu={inject:{"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  // for picking depth values
  picking_setPickingAttribute(geometry.position.z);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...nu};var rI=[oi],nI=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function jE(t){let e=Lt.getDefaultProgramManager(t);for(let r of rI)e.addDefaultModule(r);for(let r of nI)e.addShaderHook(r);return e}var iI=[255,255,255],sI=1,oI=0,Km=class{constructor(e={}){let{color:r=iI}=e,{intensity:n=sI}=e;this.id=e.id||"ambient-".concat(oI++),this.color=r,this.intensity=n,this.type="ambient"}};var aI=[255,255,255],lI=1,cI=[0,0,-1],uI=0,bu=class{constructor(e={}){let{color:r=aI}=e,{intensity:n=lI}=e,{direction:i=cI}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(uI++),this.color=r,this.intensity=n,this.type="directional",this.direction=new me(i).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}};var Ps=class{constructor(e={}){let{id:r="effect"}=e;this.id=r,this.props={...e}}preRender(){}getModuleParameters(){}cleanup(){}};var Au=class{constructor(e,r={}){let{id:n="pass"}=r;this.id=n,this.gl=e,this.props={...r}}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}};var wn=class extends Au{render(e){let r=this.gl;return Ce(r,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){let{viewports:r,views:n,onViewportActive:i,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";let o=this.gl;s&&hI(o);let a=[];for(let l of r){let c=l.viewport||l,u=n&&n[c.id];i(c);let h=this._getDrawLayerParams(c,e);e.view=u;let f=c.subViewports||[c];for(let v of f){e.viewport=v;let E=this._drawLayersInViewport(o,e,h);a.push(E)}}return a}_getDrawLayerParams(e,{layers:r,pass:n,layerFilter:i,effects:s,moduleParameters:o}){let a=[],l=GE(),c={viewport:e,isPicking:n.startsWith("picking"),renderPass:n},u={};for(let h=0;h<r.length;h++){let f=r[h],v=this._shouldDrawLayer(f,c,i,u),E=l(f,v),_={shouldDrawLayer:v,layerRenderIndex:E};v&&(_.moduleParameters=this._getModuleParameters(f,s,n,o),_.layerParameters=this.getLayerParameters(f,h,e)),a[h]=_}return a}_drawLayersInViewport(e,{layers:r,pass:n,viewport:i,view:s},o){let a=fI(e,{viewport:i});if(s&&s.props.clear){let c=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;ie(e,{scissorTest:!0,scissor:a},()=>un(e,c))}let l={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Ce(e,{viewport:a});for(let c=0;c<r.length;c++){let u=r[c],{shouldDrawLayer:h,layerRenderIndex:f,moduleParameters:v,layerParameters:E}=o[c];if(h&&u.props.pickable&&l.pickableCount++,u.isComposite)l.compositeCount++;else if(h){l.visibleCount++,v.viewport=i;try{u.drawLayer({moduleParameters:v,uniforms:{layerIndex:f},parameters:E})}catch(_){u.raiseError(_,"drawing ".concat(u," to ").concat(n))}}}return l}shouldDrawLayer(e){return!0}getModuleParameters(e,r){return null}getLayerParameters(e,r){return e.props.parameters}_shouldDrawLayer(e,r,n,i){if(!(this.shouldDrawLayer(e)&&e.props.visible))return!1;r.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(r))return!1;r.layer=o,o=o.parent}if(n){let a=r.layer.id;if(a in i||(i[a]=n(r)),!i[a])return!1}return e.activateViewport(r.viewport),!0}_getModuleParameters(e,r,n,i){let s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Ft(this.gl)});if(r)for(let o of r)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,r),i)}};function GE(t=0,e={}){let r={},n=(i,s)=>{let o=i.props._offset,a=i.id,l=i.parent&&i.parent.id,c;if(l&&!(l in e)&&n(i.parent,!1),l in r){let u=r[l]=r[l]||GE(e[l],e);c=u(i,s),r[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),r[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return n}function fI(t,{viewport:e}){let r=t.canvas?t.canvas.clientHeight||t.canvas.height:100,n=e,i=Ft(t);return[n.x*i,(r-n.y-n.height)*i,n.width*i,n.height*i]}function hI(t){let e=t.drawingBufferWidth,r=t.drawingBufferHeight;Ce(t,{viewport:[0,0,e,r]}),t.clear(16384|256)}var Lu=class extends wn{constructor(e,r){super(e,r);this.shadowMap=new le(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new ht(e,{format:33189,width:1,height:1}),this.fbo=new q(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){let r=this.fbo;ie(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{let n=e.viewports[0],i=Ft(this.gl),s=n.width*i,o=n.height*i;(s!==r.width||o!==r.height)&&r.resize({width:s,height:o}),super.render({...e,target:r,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}};var dI={color:[255,255,255],intensity:1},WE=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],pI=[0,0,0,200/255],ba=class extends Ps{constructor(e){super(e);this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=pI,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(let r in e){let n=e[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break;default:}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(e,{layers:r,layerFilter:n,viewports:i,onViewportActive:s,views:o}){if(!!this.shadow){this.shadowMatrices=this._createLightMatrix(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Lt.getDefaultProgramManager(e),Pa&&this.programManager.addDefaultModule(Pa)),this.dummyShadowMap||(this.dummyShadowMap=new le(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:r,layerFilter:n,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){let r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:e})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:e}))},r}cleanup(){for(let e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Pa),this.programManager=null)}_createLightMatrix(){let e=[];for(let r of this.directionalLights){let n=new ge().lookAt({eye:new me(r.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let r=0;r<this.directionalLights.length;r++){let n=new Lu(e);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){let{ambientLight:e,pointLights:r,directionalLights:n}=this;!e&&r.length===0&&n.length===0&&(this.ambientLight=new Km(dI),this.directionalLights.push(new bu(WE[0]),new bu(WE[1])))}};var HE=class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,r,{size:n=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){let c=i||e&&e.constructor||Float32Array,u=r*n+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let h;l&&(h=l*n+s);let f=this._allocate(c,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,r,n,i){let s=Math.max(Math.ceil(r*this.props.overAlloc),1);s>i&&(s=i);let o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){let c=new e(o.splice(l,1)[0],0,s);return n&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;let r=this._pool,{buffer:n}=e,{byteLength:i}=n,s=r.findIndex(o=>o.byteLength>=i);s<0?r.push(n):(s>0||r.length<this.props.poolSize)&&r.splice(s,0,n),r.length>this.props.poolSize&&r.shift()}},jt=new HE;function bs(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function YE(t){return[t[12],t[13],t[14]]}function $E(t){let e={};return e.left=As(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),e.right=As(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),e.bottom=As(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),e.top=As(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),e.near=As(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),e.far=As(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14]),e}var XE=new me;function As(t,e,r,n){XE.set(t,e,r);let i=XE.len();return{distance:n/i,normal:new me(-t/i,-e/i,-r/i)}}function mI(t){return t-Math.fround(t)}var Aa;function Iu(t,{size:e=1,startIndex:r=0,endIndex:n}){Number.isFinite(n)||(n=t.length);let i=(n-r)/e;Aa=jt.allocate(Aa,i,{type:Float32Array,size:e*2});let s=r,o=0;for(;s<n;){for(let a=0;a<e;a++){let l=t[s++];Aa[o+a]=l,Aa[o+a+e]=mI(l)}o+=e*2}return Aa.subarray(0,i*e*2)}var gI=Math.PI/180,vI=bs(),Qm=[0,0,0],yI=0,xI={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},Rt=class{constructor(e={}){let{id:r=null,x:n=0,y:i=0,width:s=1,height:o=1}=e;this.id=r||this.constructor.displayName||"viewport",this.x=n,this.y=i,this.width=s||1,this.height=o||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?it.WEB_MERCATOR:it.WEB_MERCATOR_AUTO_OFFSET:it.IDENTITY}equals(e){return e instanceof Rt?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Rr(e.projectionMatrix,this.projectionMatrix)&&Rr(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:r=!0}={}){let n=this.projectPosition(e),i=li(n,this.pixelProjectionMatrix),[s,o]=i,a=r?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:r=!0,targetZ:n}={}){let[i,s,o]=e,a=r?s:this.height-s,l=n&&n*this.distanceScales.unitsPerMeter[2],c=fr([i,a,o],this.pixelUnprojectionMatrix,l),[u,h,f]=this.unprojectPosition(c);return Number.isFinite(o)?[u,h,f]:Number.isFinite(n)?[u,h,n]:[u,h]}projectPosition(e){let[r,n]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(e){let[r,n]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(e){return this.isGeospatial?ur(e):e}unprojectFlat(e){return this.isGeospatial?st(e):e}getBounds(e={}){let r={targetZ:e.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),s=this.unproject([0,this.height],r),o=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],s[0],o[0]),Math.min(n[1],i[1],s[1],o[1]),Math.max(n[0],i[0],s[0],o[0]),Math.max(n[1],i[1],s[1],o[1])]}getDistanceScales(e=null){return e?ai({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:r,width:n=1,height:i=1}){return e<this.x+this.width&&this.x<e+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,$E(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,r){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:e,fovyRadians:r,aspect:n,focalDistance:i,near:s,far:o}){return e?new ge().orthographic({fovy:r,aspect:n,focalDistance:i,near:s,far:o}):new ge().perspective({fovy:r,aspect:n,near:s,far:o})}_initViewMatrix(e){let{viewMatrix:r=vI,longitude:n=null,latitude:i=null,zoom:s=null,position:o=null,modelMatrix:a=null,focalDistance:l=1,distanceScales:c=null}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this.zoom=s,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?qm({latitude:i})+Math.log2(l):yI);let u=Math.pow(2,this.zoom);this.scale=u,this.distanceScales=this.isGeospatial?ai({latitude:i,longitude:n}):c||xI,this.focalDistance=l,this.distanceScales.metersPerUnit=new me(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new me(this.distanceScales.unitsPerMeter),this.position=Qm,this.meterOffset=Qm,o&&(this.position=o,this.modelMatrix=a,this.meterOffset=a?a.transformVector(o):o),this.isGeospatial?(this.longitude=n,this.latitude=i,this.center=this._getCenterInWorld({longitude:n,latitude:i})):this.center=o?this.projectPosition(o):[0,0,0],this.viewMatrixUncentered=r,this.viewMatrix=new ge().multiplyRight(this.viewMatrixUncentered).translate(new me(this.center||Qm).negate())}_getCenterInWorld({longitude:e,latitude:r}){let{meterOffset:n,distanceScales:i}=this,s=new me(this.projectPosition([e,r,0]));if(n){let o=new me(n).scale(i.unitsPerMeter);s.add(o)}return s}_initProjectionMatrix(e){let{projectionMatrix:r=null,orthographic:n=!1,fovyRadians:i,fovy:s=75,near:o=.1,far:a=1e3,focalDistance:l=1}=e;this.projectionMatrix=r||this._createProjectionMatrix({orthographic:n,fovyRadians:i||s*gI,aspect:this.width/this.height,focalDistance:l,near:o,far:a})}_initPixelMatrices(){let e=bs();si(e,e,this.projectionMatrix),si(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=zm([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=YE(this.viewMatrixInverse);let r=bs(),n=bs();yE(r,r,[this.width/2,-this.height/2,1]),vE(r,r,[1,-1,0]),si(n,r,this.viewProjectionMatrix),this.pixelProjectionMatrix=n,this.viewportMatrix=r,this.pixelUnprojectionMatrix=zm(bs(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||G.warn("Pixel project matrix not invertible")()}};Rt.displayName="Viewport";function _I(){var t=new Cr(2);return Cr!=Float32Array&&(t[0]=0,t[1]=0),t}function Jm(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function qE(t,e){return t[0]=-e[0],t[1]=-e[1],t}var n8=function(){var t=_I();return function(e,r,n,i,s,o){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();var wI=512,TI=4003e4,MI=Math.PI/180;function ZE(t){let e=Math.cos(t*MI);return wI/TI/e}var hr=class extends Rt{constructor(e={}){let{latitude:r=0,longitude:n=0,zoom:i=11,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:c=!1,projectionMatrix:u,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:v=!1}=e,{width:E,height:_,altitude:m=1.5}=e,d=Math.pow(2,i);E=E||1,_=_||1;let y,x=null;u?(m=u[5]/2,y=Nr(m)):(e.fovy?(y=e.fovy,m=Ts(y)):y=Nr(m),x=Mu({width:E,height:_,pitch:s,fovy:y,nearZMultiplier:a,farZMultiplier:l}));let w=Sa({height:_,pitch:s,bearing:o,scale:d,altitude:m});f&&(w=new ge().translate([512*f,0,0]).multiplyLeft(w));super({...e,width:E,height:_,viewMatrix:w,longitude:n,latitude:r,zoom:i,...x,fovy:y,focalDistance:m});this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=m,this.fovy=y,this.orthographic=c,this._subViewports=h?[]:null,this._pseudoMeters=v,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){let e=this.getBounds(),r=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let i=r;i<=n;i++){let s=i?new hr({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);let[r,n]=this.projectFlat(e),i=(e[2]||0)*ZE(e[1]);return[r,n,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);let[r,n]=this.unprojectFlat(e),i=(e[2]||0)/ZE(n);return[r,n,i]}addMetersToLngLat(e,r){return Ma(e,r)}panByPosition(e,r){let n=fr(r,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Jm([],i,qE([],n)),o=Jm([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){let r=Ss(this,e.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(e,r={}){let{width:n,height:i}=this,{longitude:s,latitude:o,zoom:a}=Ms({width:n,height:i,bounds:e,...r});return new hr({width:n,height:i,longitude:s,latitude:o,zoom:a})}};hr.displayName="WebMercatorViewport";function SI(){var t=new Cr(3);return Cr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function PI(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}var KE=PI;var l8=function(){var t=SI();return function(e,r,n,i,s,o){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();function eg(t,e,r=!1){let n=e.projectPosition(t);if(r&&e instanceof hr){let[i,s,o=0]=t,a=e.getDistanceScales([i,s]);n[2]=o*a.unitsPerMeter[2]}return n}function AI(t){let e={...t},{coordinateSystem:r}=t,{viewport:n,coordinateOrigin:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return r===$.DEFAULT&&(r=n.isGeospatial?$.LNGLAT:$.CARTESIAN),s===void 0&&(e.fromCoordinateSystem=r),o===void 0&&(e.fromCoordinateOrigin=i),e.coordinateSystem=r,e}function tg(t,{viewport:e,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(r&&([o,a,l]=Ea([],[o,a,l,1],r)),n){case $.LNGLAT:return eg([o,a,l],e,s);case $.LNGLAT_OFFSETS:return eg([o+i[0],a+i[1],l+(i[2]||0)],e,s);case $.METER_OFFSETS:return eg(Ma(i,[o,a,l]),e,s);case $.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function QE(t,e){let{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=AI(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:u}=Um(r,n,i),h=tg(t,{viewport:r,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});if(u){let f=r.projectPosition(l||c);KE(h,h,f)}return h}var Tn={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Mn={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")};function Ru(t,e=()=>!0){return Array.isArray(t)?JE(t,e,[]):e(t)?[t]:[]}function JE(t,e,r){let n=-1;for(;++n<t.length;){let i=t[n];Array.isArray(i)?JE(i,e,r):e(i)&&r.push(i)}return r}function e2({target:t,source:e,start:r=0,count:n=1}){let i=e.length,s=n*i,o=0;for(let a=r;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(r+o,r,r+o),o*=2):(t.copyWithin(r+o,r,r+s-o),o=s);return t}var Ou=class{constructor(e,r,n){this.id=e,this.context=n,this._loadCount=0,this._subscribers=new Set,this.setData(r)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,r){if(e===this._data&&!r)return;this._data=e;let n=++this._loadCount,i=e;typeof e=="string"&&(i=ys(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(let s of this._subscribers)s.onChange(this.getData())}};var Cu=class{constructor({gl:e,protocol:r}){this.protocol=r||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:r,forceUpdate:n=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(r,n):(s=new Ou(e,r,this._context),this._resources[e]=s),s.persistent=i}remove(e){let r=this._resources[e];r&&(r.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){let r=this._consumers[e];if(r){for(let n in r){let i=r[n];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:r,consumerId:n,requestId:i="default"}){let{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));let a=s[e];if(this._track(n,i,a,r),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let e in this._resources)this._resources[e].delete()}_track(e,r,n,i){let s=this._consumers,o=s[e]=s[e]||{},a=o[r]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),n&&(o[r]=a,a.onChange=i,a.resource=n,n.subscribe(a))}_prune(){this._pruneRequest=null;for(let e of Object.keys(this._resources)){let r=this._resources[e];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[e])}}};var LI="layerManager.setLayers",II="layerManager.activateViewport",RI=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),Nu=class{constructor(e,{deck:r,stats:n,viewport:i,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Cu({gl:e,protocol:"deck://"}),this.context={...RI,layerManager:this,gl:e,deck:r,programManager:e&&jE(e),stats:n||new er({id:"deck.gl"}),viewport:i||new Rt({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new ni,resourceManager:this.resourceManager},this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(let e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(let n of this.layers){let i=n.getNeedsRedraw(e);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(r=>e.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,r){_e(LI,this,r,e),this.lastRenderedLayers=e,e=Ru(e,Boolean);for(let n of e)n.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){let e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return _e(II,this,e),e&&(this.context.viewport=e),this}_handleError(e,r,n){n.raiseError(r,"".concat(e," of ").concat(n))}_updateLayers(e,r){let n={};for(let o of e)n[o.id]?G.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;let i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let s=!1;for(let o of i)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,r,n){for(let i of e){i.context=this.context;let s=r[i.id];s===null&&G.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite&&i.getSubLayers()}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,r,n)}}_finalizeOldLayers(e){for(let r in e){let n=e[r];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Tn.INITIALIZED}catch(r){this._handleError("initialization",r,e)}}_transferLayerState(e,r){r._transferState(e),r.lifecycle=Tn.MATCHED,r!==e&&(e.lifecycle=Tn.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(r){this._handleError("update",r,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Tn.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Tn.FINALIZED}catch(r){this._handleError("finalization",r,e)}}};function Dr(t,e){if(t===e)return!0;if(!t||!e)return!1;for(let r in t){let n=t[r],i=e[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Dr(n,i)))return!1}return!0}var ku=class{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(let e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(let e in this.controllers){let r=this.controllers[e];r&&r.updateTransition()}}getViewports(e){return e?this._viewports.filter(r=>r.containsPixel(e)):this._viewports}getViews(){let e={};return this.views.forEach(r=>{e[r.id]=r}),e}getView(e){return typeof e=="string"?this.views.find(r=>r.id===e):e}getViewState(e){let r=this.getView(e),n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,r){let n=this.getViewports(),i={x:e[0],y:e[1]};for(let s=n.length-1;s>=0;--s){let o=n[s];if(o.containsPixel(i)){let a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,r)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,r){(e!==this.width||r!==this.height)&&(this.width=e,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Ru(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Dr(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):G.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,r){r.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(r)}_createController(e,r){let n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height}),...r})}_updateController(e,r,n,i){let s=e.controller;return s?(s={...r,...e.props,...s,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height},i?i.setProps(s):i=this._createController(e,s),i):null}_rebuildViewports(){let{width:e,height:r,views:n}=this,i=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=n.length;o--;){let a=n[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:r,viewState:l}),u=i[a.id];a.controller&&!u&&(s=!0),(s||!a.controller)&&u&&(u.finalize(),u=null),this.controllers[a.id]=this._updateController(a,l,c,u),this._viewports.unshift(c)}for(let o in i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,r){return e.length!==r.length?!0:e.some((n,i)=>!e[i].equals(r[i]))}};var OI=/([0-9]+\.?[0-9]*)(%|px)/;function La(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":let e=t.match(OI);if(e&&e.length>=3){let r=e[2]==="%",n=parseFloat(e[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(t))}}function Ia(t,e){return t.relative?Math.round(t.position*e):t.position}function ve(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}var Du=class{constructor(e={}){let{id:r=null,x:n=0,y:i=0,width:s="100%",height:o="100%",viewportInstance:a,type:l=Rt}=e;ve(!a||a instanceof Rt),this.viewportInstance=a,this.id=r||this.constructor.displayName||"view",this.type=l,this.props={...e,id:this.id},this._parseDimensions({x:n,y:i,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Dr(this.props,e.props)}makeViewport({width:e,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);let i=this.getDimensions({width:e,height:r});return this._getViewport(n,i)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;let r={...e};for(let n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return e}getDimensions({width:e,height:r}){return{x:Ia(this._x,e),y:Ia(this._y,r),width:Ia(this._width,e),height:Ia(this._height,r)}}_getControllerProps(e){let r=this.props.controller;return r?r===!0?e:(typeof r=="function"&&(r={type:r}),{...e,...r}):null}_getViewport(e,r){let{type:n}=this;return new n({...e,...this.props,...r})}_parseDimensions({x:e,y:r,width:n,height:i}){this._x=La(e),this._y=La(r),this._width=La(n),this._height=La(i)}};function Fu(){}var CI={onStart:Fu,onUpdate:Fu,onInterrupt:Fu,onEnd:Fu},Ot=class{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings={...CI,...e},this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(this._handle===null){let{timeline:e,settings:r}=this;this._handle=e.addChannel({delay:e.getTime(),duration:r.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};var Ra=()=>{},Oa={BREAK:1,SNAP_TO_END:2,IGNORE:3},t2={transitionEasing:t=>t,transitionInterruption:Oa.BREAK,onTransitionStart:Ra,onTransitionInterrupt:Ra,onTransitionEnd:Ra},Bu=class{constructor(e,r={}){this.ControllerState=e,this.props={...t2,...r},this.propsInTransition=null,this.transition=new Ot(r.timeline),this.onViewStateChange=r.onViewStateChange||Ra,this.onStateChange=r.onStateChange||Ra,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let r=!1,n=this.props;if(e={...t2,...e},this.props=e,this._shouldIgnoreViewportChange(n,e))return r;if(this._isTransitionEnabled(e)){let{interruption:i,endProps:s}=this.transition.settings,o={...n,...i===Oa.SNAP_TO_END?s:this.propsInTransition||n};this._triggerTransition(o,e),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(e){let{transitionDuration:r,transitionInterpolator:n}=e;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,r){return this.transition.inProgress?this.transition.settings.interruption===Oa.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(e,r):!0}_triggerTransition(e,r){let n=new this.ControllerState(e),i=new this.ControllerState(r).shortestPathFrom(n),{transitionInterpolator:s}=r,o=s.getDuration?s.getDuration(e,r):r.transitionDuration;if(o===0)return;let a=r.transitionInterpolator.initializeProps(e,i);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:r.transitionEasing,interpolator:r.transitionInterpolator,interruption:r.transitionInterruption,startProps:a.start,endProps:a.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(r)}}_onTransitionUpdate(e){let{time:r,settings:{interpolator:n,startProps:i,endProps:s,duration:o,easing:a}}=e,l=a(r/o),c=n.interpolateProps(i,s,l);this.propsInTransition=new this.ControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}};var zu=class{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});let{compare:r,extract:n,required:i}=e;this._propsToCompare=r,this._propsToExtract=n,this._requiredProps=i}arePropsEqual(e,r){for(let n of this._propsToCompare||Object.keys(r))if(!(n in e)||!(n in r)||!Rr(e[n],r[n]))return!1;return!0}initializeProps(e,r){let n;if(this._propsToExtract){let i={},s={};for(let o of this._propsToExtract)i[o]=e[o],s[o]=r[o];n={start:i,end:s}}else n={start:e,end:r};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}interpolateProps(e,r,n){return r}getDuration(e,r){return r.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(r=>{let n=e[r];ve(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}};var r2=["longitude","latitude","zoom","bearing","pitch"],NI=["longitude","latitude","zoom"],Ca=class extends zu{constructor(e={}){let r=Array.isArray(e)?e:e.transitionProps;super(r||{compare:r2,extract:r2,required:NI});this.opts=e}initializeProps(e,r){let n=super.initializeProps(e,r),{makeViewport:i,around:s}=this.opts;if(i&&s){let o=i(e),a=i(r),l=o.unproject(s);n.start.around=s,Object.assign(n.end,{around:a.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(e,r,n){let i={};for(let s of this._propsToExtract)i[s]=ri(e[s]||0,r[s]||0,n);if(r.aroundPosition){let s=this.opts.makeViewport({...r,...i});Object.assign(i,s.panByPosition(r.aroundPosition,ri(e.around,r.around,n)))}return i}};var Sn={transitionDuration:0},kI={transitionDuration:300,transitionEasing:t=>t,transitionInterruption:Oa.BREAK},DI=300,Uu=t=>1-(1-t)*(1-t),Ls={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Vu=class{constructor(e,r={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new Bu(e,{...r,onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)});let n=this.linearTransitionProps;this._transition=n&&{...kI,transitionInterpolator:new Ca({transitionProps:n})},this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(r)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(let e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){let{ControllerState:r}=this;this.controllerState=new r({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state});let n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){let{x:r,y:n}=this.controllerStateProps,{offsetCenter:i}=e;return[i.x-r,i.y-n]}isPointInBounds(e,r){let{width:n,height:i}=this.controllerStateProps;if(r&&r.handled)return!1;let s=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return s&&r&&r.stopPropagation(),s}isFunctionKeyPressed(e){let{srcEvent:r}=e;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){let r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=r}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:r}=e;r===!0&&(r=DI),this.inertia=r;let{scrollZoom:n=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=Boolean(this.onViewStateChange);this.toggleEvents(Ls.WHEEL,u&&n),this.toggleEvents(Ls.PAN,u&&(i||s)),this.toggleEvents(Ls.PINCH,u&&(a||l)),this.toggleEvents(Ls.TRIPLE_PAN,u&&l),this.toggleEvents(Ls.DOUBLE_TAP,u&&o),this.toggleEvents(Ls.KEYBOARD,u&&c),this.scrollZoom=n,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,r){this.eventManager&&e.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(e,r={},n={}){let i={...e.getViewportProps(),...r},s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(n),s){let o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||this.dragMode==="pan")&&(n=!n);let i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Sn,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;let r=this.getCenter(e),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Sn,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){let{inertia:r}=this;if(this.dragPan&&r&&e.velocity){let n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Uu},{isDragging:!1,isPanning:!0})}else{let n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;let r=this.getCenter(e),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Sn,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){let{inertia:r}=this;if(this.dragRotate&&r&&e.velocity){let n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Uu},{isDragging:!1,isRotating:!0})}else{let n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let{speed:n=.01,smooth:i=!1}=this.scrollZoom,{delta:s}=e,o=2/(1+Math.exp(-Math.abs(s*n)));s<0&&o!==0&&(o=1/o);let a=this.controllerState.zoom({pos:r,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Sn,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;let r=this.getCenter(e);r[0]-=e.deltaX;let n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Sn,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;let{inertia:r}=this;if(this.touchRotate&&r&&e.velocityY){let n=this.getCenter(e),i=[n[0],n[1]+=e.velocityY*r/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Uu},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{let n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(n,Sn,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){let{scale:n}=e,i=this.getCenter(e);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){let{rotation:n}=e;r=r.rotate({deltaAngleX:this._startPinchRotation-n})}return this.updateViewport(r,Sn,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;let{inertia:r,_lastPinchEvent:n}=this;if(this.touchZoom&&r&&n&&e.scale!==n.scale){let i=this.getCenter(e),s=this.controllerState.rotateEnd(),o=Math.log2(e.scale),a=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),l=Math.pow(2,o+a*r/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Uu},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{let i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;let r=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this,l,c={};switch(e.srcEvent.code){case"Minus":l=r?a.zoomOut(n).zoomOut(n):a.zoomOut(n),c.isZooming=!0;break;case"Equal":l=r?a.zoomIn(n).zoomIn(n):a.zoomIn(n),c.isZooming=!0;break;case"ArrowLeft":r?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":r?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":r?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":r?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){let{_transition:r}=this;return r?e?{...r,transitionInterpolator:new Ca({...e,transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport})}:r:Sn}};var ju=class{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}};var n2=5,FI=1.2,ci={pitch:0,bearing:0,altitude:1.5,minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},i2=class extends ju{constructor({makeViewport:e,width:r,height:n,latitude:i,longitude:s,zoom:o,bearing:a=ci.bearing,pitch:l=ci.pitch,altitude:c=ci.altitude,maxZoom:u=ci.maxZoom,minZoom:h=ci.minZoom,maxPitch:f=ci.maxPitch,minPitch:v=ci.minPitch,startPanLngLat:E,startZoomLngLat:_,startRotatePos:m,startBearing:d,startPitch:y,startZoom:x,normalize:w}={}){ve(Number.isFinite(s)),ve(Number.isFinite(i)),ve(Number.isFinite(o));super({width:r,height:n,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:u,minZoom:h,maxPitch:f,minPitch:v,normalize:w});this._state={startPanLngLat:E,startZoomLngLat:_,startRotatePos:m,startBearing:d,startPitch:y,startZoom:x},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:r}){let n=this._state.startPanLngLat||this._unproject(r);if(!n)return this;let s=this.makeViewport(this._viewportProps).panByPosition(n,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:r=0,deltaAngleY:n=0}){let{startRotatePos:i,startBearing:s,startPitch:o}=this._state;if(!i||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return e?a=this._calculateNewPitchAndBearing({...this._getRotationParams(e,i),startBearing:s,startPitch:o}):a={bearing:s+r,pitch:o+n},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:s}=this._state;Number.isFinite(i)||(i=this._viewportProps.zoom,s=this._unproject(r)||this._unproject(e));let o=this._calculateNewZoom({scale:n,startZoom:i}),a=this.makeViewport({...this._viewportProps,zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){let r=e.getViewportProps(),n={...this._viewportProps},{bearing:i,longitude:s}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(s-r.longitude)>180&&(n.longitude=s<0?s+360:s-360),n}_zoomFromCenter(e){let{width:r,height:n}=this._viewportProps;return this.zoom({pos:[r/2,n/2],scale:e})}_panFromCenter(e){let{width:r,height:n}=this._viewportProps;return this.pan({startPos:[r/2,n/2],pos:[r/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this._viewportProps,...this._state,...e})}_applyConstraints(e){let{maxZoom:r,minZoom:n,zoom:i}=e;e.zoom=fs(i,n,r);let{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=fs(a,o,s);let{normalize:l=!0}=e;return l&&Object.assign(e,Su(e)),e}_unproject(e){let r=this.makeViewport(this._viewportProps);return e&&r.unproject(e)}_calculateNewZoom({scale:e,startZoom:r}){let{maxZoom:n,minZoom:i}=this._viewportProps,s=r+Math.log2(e);return fs(s,i,n)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:r,startBearing:n,startPitch:i}){r=fs(r,-1,1);let{minPitch:s,maxPitch:o}=this._viewportProps,a=n+180*e,l=i;return r>0?l=i+r*(o-i):r<0&&(l=i-r*(s-i)),{pitch:l,bearing:a}}_getRotationParams(e,r){let n=e[0]-r[0],i=e[1]-r[1],s=e[1],o=r[1],{width:a,height:l}=this._viewportProps,c=n/a,u=0;return i>0?Math.abs(l-o)>n2&&(u=i/(o-l)*FI):i<0&&o>n2&&(u=1-s/o),u=Math.min(1,Math.max(-1,u)),{deltaScaleX:c,deltaScaleY:u}}},Gu=class extends Vu{constructor(e){e.dragMode=e.dragMode||"pan";super(i2,e)}setProps(e){let r=this.controllerStateProps;super.setProps(e),(!r||r.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state}))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}};var Na=class extends Du{constructor(e){super({...e,type:hr})}get controller(){return this._getControllerProps({type:Gu})}};Na.displayName="MapView";var BI=new ba,Wu=class{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Dr(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(let e of this.effects)e.cleanup();for(let e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof ba)||this._internalEffects.push(BI)}};var Hu=class extends wn{};var s2={blendFunc:[1,0,32771,0],blendEquation:32774},Is=class extends wn{render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},pass:h="picking",redrawReason:f,pickZ:v}){let E=this.gl;this.pickZ=v;let _=!v&&{byLayer:new Map,byAlpha:[]};this._colors=_;let m=ie(E,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...s2,blend:!v},()=>super.render({target:o,layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:s,pass:h,redrawReason:f}));return this._colors=null,{decodePickingColor:_&&UI.bind(null,_),stats:m}}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,r,n){let i={...e.props.parameters};return this.pickZ?i.blend=!1:(Object.assign(i,s2),i.blend=!0,i.blendColor=zI(this._colors,e,n)),i}};function zI(t,e,r){let{byLayer:n,byAlpha:i}=t,s;if(n.has(e)){let o=n.get(e);o.viewports.push(r),s=o.a}else if(s=n.size+1,s<=255){let o={a:s,layer:e,viewports:[r]};n.set(e,o),i[s]=o}else G.warn("Too many pickable layers, only picking the first 255")(),s=0;return[0,0,0,s/255]}function UI(t,e){let r=t.byAlpha[e[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(e)}}var VI="deckRenderer.renderLayers",Yu=class{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Hu(e),this.pickLayersPass=new Is(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){let r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||q.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);let n=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=r.render({...e,target:n});this._postRender(e.effects,e),this.renderCount++,_e(VI,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){let{renderBuffers:e}=this;for(let r of e)r.delete();e.length=0}_preRender(e,r){let n=null;for(let i of e)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){let{renderBuffers:e}=this;e.length===0&&e.push(new q(this.gl),new q(this.gl));for(let r of e)r.resize()}_postRender(e,r){let{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(let s of e)if(s.postRender){if(s===this.lastPostProcessEffect){i.target=r.target,s.postRender(this.gl,i);break}let o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===n[0]?n[1]:n[0]}}};var jI={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function o2({pickedColors:t,decodePickingColor:e,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:s}){if(t){let{x:o,y:a,width:l,height:c}=s,u=i*i,h=-1,f=0;for(let v=0;v<c;v++){let E=v+a-n,_=E*E;if(_>u)f+=4*l;else for(let m=0;m<l;m++){if(t[f+3]-1>=0){let y=m+o-r,x=y*y+_;x<=u&&(u=x,h=f)}f+=4}}if(h>=0){let v=t.slice(h,h+4),E=e(v);if(E){let _=Math.floor(h/4/l),m=h/4-_*l;return{...E,pickedColor:v,pickedX:o+m,pickedY:a+_}}G.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return jI}function a2({pickedColors:t,decodePickingColor:e}){let r=new Map;if(t){for(let n=0;n<t.length;n+=4)if(t[n+3]-1>=0){let s=t.slice(n,n+4),o=s.join(",");if(!r.has(o)){let a=e(s);a?r.set(o,{...a,pickedColor:s}):G.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function rg({pickInfo:t,viewports:e,pixelRatio:r,x:n,y:i,z:s}){let o=e[0];e.length>1&&(o=GI((t==null?void 0:t.pickedViewports)||e,{x:n,y:i}));let a=o&&o.unproject([n-o.x,i-o.y],{targetZ:s});return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:null,pixelRatio:r}}function l2(t){let{pickInfo:e,lastPickedInfo:r,mode:n,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(n==="hover"){let h=r.index,f=r.layerId,v=o&&o.props.id;if(v!==f||a!==h){if(v!==f){let E=i.find(_=>_.props.id===f);E&&l.unshift(E)}r.layerId=v,r.index=a,r.info=null}}let c=rg(t),u=new Map;return u.set(null,c),l.forEach(h=>{let f={...c};h===o&&(f.color=s,f.index=a,f.picked=!0),f=ng({layer:h,info:f,mode:n}),h===o&&n==="hover"&&(r.info=f),u.set(f.layer.id,f),n==="hover"&&f.layer.updateAutoHighlight(f)}),u}function ng({layer:t,info:e,mode:r}){for(;t&&e;){let n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:r,sourceLayer:n}),t=t.parent}return e}function GI(t,e){for(let r=t.length-1;r>=0;r--){let n=t[r];if(n.containsPixel(e))return n}return t[0]}var $u=class{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new Is(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:r,layers:n,viewports:i},s=this.lastPickedInfo.info){let o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?n.find(f=>f.id===o):null,c=a&&i.find(f=>f.id===a)||i[0],u=c&&c.unproject([e-c.x,r-c.y]);return{...s,...{x:e,y:r,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){let{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new q(e),q.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new q(e),this.depthFBO.attach({[36064]:new le(e,{format:U(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(this._pickable===!1)return null;let r=e.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:e,views:r,viewports:n,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u}){if(e=this._getPickable(e),!e)return{result:[],emptyInfo:rg({viewports:n,x:i,y:s})};this._resizeBuffer();let h=Ft(this.gl),f=ts(this.gl,[i,s],!0),v=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],E=Math.round(o*h),{width:_,height:m}=this.pickingFBO,d=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:E,deviceWidth:_,deviceHeight:m}),y,x=[],w=new Set;for(let S=0;S<a;S++){let M=d&&this._drawAndSample({layers:e,views:r,viewports:n,onViewportActive:u,deviceRect:d,pass:"picking:".concat(l),redrawReason:l}),A=o2({...M,deviceX:v[0],deviceY:v[1],deviceRadius:E,deviceRect:d}),b;A.pickedLayer&&c&&this.depthFBO&&(b=this._drawAndSample({layers:[A.pickedLayer],views:r,viewports:n,onViewportActive:u,deviceRect:{x:A.pickedX,y:A.pickedY,width:1,height:1},pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0}).pickedColors[0]*n[0].distanceScales.metersPerUnit[2]+n[0].position[2]),A.pickedLayer&&S+1<a&&(w.add(A.pickedLayer),A.pickedLayer.disablePickingIndex(A.pickedObjectIndex)),y=l2({pickInfo:A,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,viewports:n,x:i,y:s,z:b,pixelRatio:h});for(let L of y.values())L.layer&&x.push(L);if(!A.pickedColor)break}for(let S of w)S.restorePickingColors();return{result:x,emptyInfo:y&&y.get(null)}}_pickVisibleObjects({layers:e,views:r,viewports:n,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u}){if(e=this._getPickable(e),!e)return[];this._resizeBuffer();let h=Ft(this.gl),f=ts(this.gl,[i,s],!0),v=f.x,E=f.y+f.height,_=ts(this.gl,[i+o,s+a],!0),m=_.x+_.width,d=_.y,y={x:v,y:d,width:m-v,height:E-d},x=this._drawAndSample({layers:e,views:r,viewports:n,onViewportActive:u,deviceRect:y,pass:"picking:".concat(l),redrawReason:l}),w=a2(x),S=new Map,M=Number.isFinite(c);for(let A=0;A<w.length&&!(M&&S.size>=c);A++){let b=w[A],L={color:b.pickedColor,layer:null,index:b.pickedObjectIndex,picked:!0,x:i,y:s,width:o,height:a,pixelRatio:h};L=ng({layer:b.pickedLayer,info:L,mode:l}),S.has(L.object)||S.set(L.object,L)}return Array.from(S.values())}_drawAndSample({layers:e,views:r,viewports:n,onViewportActive:i,deviceRect:s,pass:o,redrawReason:a,pickZ:l}){let c=l?this.depthFBO:this.pickingFBO,{decodePickingColor:u}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:s,pass:o,redrawReason:a,pickZ:l}),{x:h,y:f,width:v,height:E}=s,_=new(l?Float32Array:Uint8Array)(v*E*4);return Ar(c,{sourceX:h,sourceY:f,sourceWidth:v,sourceHeight:E,target:_}),{pickedColors:_,decodePickingColor:u}}_getPickingRect({deviceX:e,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:s}){let o=Math.max(0,e-n),a=Math.max(0,r-n),l=Math.min(i,e+n+1)-o,c=Math.min(s,r+n+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}};var WI={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},Xu=class{constructor(e){let r=e.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,WI),r.appendChild(this.el)),this.isVisible=!1}setTooltip(e,r,n){let i=this.el;if(typeof e=="string")i.innerText=e;else if(e)"text"in e&&(i.innerText=e.text),"html"in e&&(i.innerHTML=e.html),"className"in e&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}remove(){this.el&&this.el.remove()}};var O2=Qe(an());var ka=Qe(c2());var u2=1,f2=2,ig=4,HI={mousedown:u2,mousemove:f2,mouseup:ig};function YI(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}function h2(t){let e=t.prototype.handler;t.prototype.handler=function(n){let i=this.store;n.button>0&&n.type==="pointerdown"&&(YI(i,s=>s.pointerId===n.pointerId)||i.push(n)),e.call(this,n)}}function d2(t){t.prototype.handler=function(r){let n=HI[r.type];n&u2&&r.button>=0&&(this.pressed=!0),n&f2&&r.which===0&&(n=ig),!!this.pressed&&(n&ig&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}h2(ka.default.PointerEventInput);d2(ka.default.MouseInput);var p2=ka.default.Manager,Gt=ka.default;var m2=Gt?[[Gt.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Gt.Rotate,{enable:!1}],[Gt.Pinch,{enable:!1}],[Gt.Swipe,{enable:!1}],[Gt.Pan,{threshold:0,enable:!1}],[Gt.Press,{enable:!1}],[Gt.Tap,{event:"doubletap",taps:2,enable:!1}],[Gt.Tap,{event:"anytap",enable:!1}],[Gt.Tap,{enable:!1}]]:null,sg={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},g2={doubletap:["tap"]},v2={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Rs={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},y2={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},og={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};var x2=typeof navigator!="undefined"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",ui=typeof window!="undefined"?window:global;var ag=!1;try{let t={get passive(){return ag=!0,!0}};ui.addEventListener("test",t,t),ui.removeEventListener("test",t,t)}catch(t){}var $I=x2.indexOf("firefox")!==-1,{WHEEL_EVENTS:XI}=Rs,_2="wheel",E2=4.000244140625,qI=40,ZI=.25,Zu=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.options=Object.assign({enable:!0},n),this.events=XI.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,ag?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===_2&&(this.options.enable=r)}handleEvent(e){if(!this.options.enable)return;let r=e.deltaY;ui.WheelEvent&&($I&&e.deltaMode===ui.WheelEvent.DOM_DELTA_PIXEL&&(r/=ui.devicePixelRatio),e.deltaMode===ui.WheelEvent.DOM_DELTA_LINE&&(r*=qI));let n={x:e.clientX,y:e.clientY};r!==0&&r%E2===0&&(r=Math.floor(r/E2)),e.shiftKey&&r&&(r=r*ZI),this._onWheel(e,-r,n)}_onWheel(e,r,n){this.callback({type:_2,center:n,delta:r,srcEvent:e,pointerType:"mouse",target:e.target})}};var{MOUSE_EVENTS:KI}=Rs,w2="pointermove",T2="pointerover",M2="pointerout",S2="pointerleave",Ku=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.pressed=!1,this.options=Object.assign({enable:!0},n),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=KI.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===w2&&(this.enableMoveEvent=r),e===T2&&(this.enableOverEvent=r),e===M2&&(this.enableOutEvent=r),e===S2&&(this.enableLeaveEvent=r)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this.callback({type:T2,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this.callback({type:M2,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this.callback({type:S2,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this.callback({type:w2,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1;break;default:}}};var{KEY_EVENTS:QI}=Rs,P2="keydown",b2="keyup",Qu=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.options=Object.assign({enable:!0},n),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=QI.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=n.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===P2&&(this.enableDownEvent=r),e===b2&&(this.enableUpEvent=r)}handleEvent(e){let r=e.target||e.srcElement;r.tagName==="INPUT"&&r.type==="text"||r.tagName==="TEXTAREA"||(this.enableDownEvent&&e.type==="keydown"&&this.callback({type:P2,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&e.type==="keyup"&&this.callback({type:b2,srcEvent:e,key:e.key,target:e.target}))}};var A2="contextmenu",Ju=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.options=Object.assign({enable:!0},n),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,r){e===A2&&(this.options.enable=r)}handleEvent(e){!this.options.enable||this.callback({type:A2,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}};var lg=1,ef=2,cg=4,JI={pointerdown:lg,pointermove:ef,pointerup:cg,mousedown:lg,mousemove:ef,mouseup:cg},eR=1,tR=2,rR=3,nR=0,iR=1,sR=2,oR=1,aR=2,lR=4;function L2(t){let e=JI[t.srcEvent.type];if(!e)return null;let{buttons:r,button:n,which:i}=t.srcEvent,s=!1,o=!1,a=!1;return e===cg||e===ef&&!Number.isFinite(r)?(s=i===eR,o=i===tR,a=i===rR):e===ef?(s=Boolean(r&oR),o=Boolean(r&lR),a=Boolean(r&aR)):e===lg&&(s=n===nR,o=n===iR,a=n===sR),{leftButton:s,middleButton:o,rightButton:a}}function I2(t,e){let{srcEvent:r}=t;if(!t.center&&!Number.isFinite(r.clientX))return null;let n=t.center||{x:r.clientX,y:r.clientY},i=e.getBoundingClientRect(),s=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1,a={x:(n.x-i.left-e.clientLeft)/s,y:(n.y-i.top-e.clientTop)/o};return{center:n,offsetCenter:a}}var R2={srcElement:"root",priority:0},tf=class{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,r,n,i=!1,s=!1){let{handlers:o,handlersByElement:a}=this;n&&(typeof n!="object"||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},R2,n):R2;let l=a.get(n.srcElement);l||(l=[],a.set(n.srcElement,l));let c={type:e,handler:r,srcElement:n.srcElement,priority:n.priority};i&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,r){let{handlers:n,handlersByElement:i}=this;for(let s=n.length-1;s>=0;s--){let o=n[s];if(o.type===e&&o.handler===r){n.splice(s,1);let a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=n.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;let r=this._normalizeEvent(e),n=e.srcEvent.target;for(;n&&n!==r.rootElement;){if(this._emit(r,n),r.handled)return;n=n.parentNode}this._emit(r,"root")}_emit(e,r){let n=this.handlersByElement.get(r);if(n){let i=!1,s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<n.length;l++){let{type:c,handler:u,once:h}=n[l];if(u(Object.assign({},e,{type:c,stopPropagation:s,stopImmediatePropagation:o})),h&&a.push(n[l]),i)break}for(let l=0;l<a.length;l++){let{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){let r=this.eventManager.element;return Object.assign({},e,L2(e),I2(e,r),{handled:!1,rootElement:r})}};var cR={events:null,recognizers:null,recognizerOptions:{},Manager:p2,touchAction:"none",tabIndex:0},Da=class{constructor(e=null,r={}){this.options=Object.assign({},cR,r),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);let{events:n}=r;n&&this.on(n)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;let{options:r}=this,n=r.Manager;this.manager=new n(e,{touchAction:r.touchAction,recognizers:r.recognizers||m2}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(sg).forEach(i=>{let s=this.manager.get(i);s&&sg[i].forEach(o=>{s.recognizeWith(o)})});for(let i in r.recognizerOptions){let s=this.manager.get(i);if(s){let o=r.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new Zu(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Ku(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Qu(e,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new Ju(e,this._onOtherEvent,{enable:!1});for(let[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,r,n){this._addEventHandler(e,r,n,!1)}once(e,r,n){this._addEventHandler(e,r,n,!0)}watch(e,r,n){this._addEventHandler(e,r,n,!1,!0)}off(e,r){this._removeEventHandler(e,r)}_toggleRecognizer(e,r){let{manager:n}=this;if(!n)return;let i=n.get(e);if(i&&i.options.enable!==r){i.set({enable:r});let s=g2[e];s&&!this.options.recognizers&&s.forEach(o=>{let a=n.get(o);r?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,r),this.moveInput.enableEventType(e,r),this.keyInput.enableEventType(e,r),this.contextmenuInput.enableEventType(e,r)}_addEventHandler(e,r,n,i,s){if(typeof e!="string"){n=r;for(let u in e)this._addEventHandler(u,e[u],n,i,s);return}let{manager:o,events:a}=this,l=og[e]||e,c=a.get(l);c||(c=new tf(this),a.set(l,c),c.recognizerName=y2[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,r,n,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,r){if(typeof e!="string"){for(let o in e)this._removeEventHandler(o,e[o]);return}let{events:n}=this,i=og[e]||e,s=n.get(i);if(!!s&&(s.remove(e,r),s.isEmpty())){let{recognizerName:o}=s,a=!1;for(let l of n.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){let{srcEvent:r}=e,n=v2[r.type];n&&this.manager.emit(n,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}};function fi(){}var uR=({isDragging:t})=>t?"grabbing":"grab";function fR(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(Ps)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,eventRecognizerOptions:t.object,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onInteractionStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool,_pickable:t.bool,_typedArrayManagerProps:t.object}}var C2={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:fi,onResize:fi,onViewStateChange:fi,onInteractionStateChange:fi,onBeforeRender:fi,onAfterRender:fi,onLoad:fi,onError:(t,e)=>G.error(t)(),_onMetrics:null,getCursor:uR,debug:!1,drawPickingColors:!1},Pn=class{constructor(e){e={...C2,...e},this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&G.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),(0,O2.getBrowser)()==="IE"&&G.warn("IE 11 support will be deprecated in v8.0")(),e.gl||typeof document!="undefined"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new er({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&jt.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&G.removed("onLayerHover","onHover")(),"onLayerClick"in e&&G.removed("onLayerClick","onClick")(),e.initialViewState&&!Dr(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);let r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);let n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return r=r||n||i||s||o,r}redraw(e){if(!this.layerManager)return;let r=e||this.needsRedraw({clearRedrawFlags:!0});!r||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){let r=this._pick("pickObject","pickObject Time",e).result;return r.length?r[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,r=!1){for(let n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:r})}_removeResources(e){for(let r of e)this.layerManager.resourceManager.remove(r)}_pick(e,r,n){let{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();let s=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,...n});return i.get(r).timeEnd(),s}_createCanvas(e){let r=e.canvas;return typeof r=="string"&&(r=document.getElementById(r),ve(r)),r||(r=document.createElement("canvas"),r.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(r)),Object.assign(r.style,e.style),r}_setCanvasSize(e){if(!this.canvas)return;let{width:r,height:n}=e;(r||r===0)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.width=r),(n||n===0)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){let{width:e,height:r}=this;this.viewManager.setProps({width:e,height:r}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){let{canvas:e}=this;if(!e)return!1;let r=e.clientWidth||e.width,n=e.clientHeight||e.height;return r!==this.width||n!==this.height?(this.width=r,this.height=n,!0):!1}_createAnimationLoop(e){let{width:r,height:n,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u,autoResizeDrawingBuffer:h}=e;return new ls({width:r,height:n,useDevicePixels:u,autoResizeDrawingBuffer:h,autoResizeViewport:!1,gl:i,onCreateContext:f=>rs({...s,...f,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Na({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){let{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){let{_pickRequest:r}=this;if(e.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(e.leftButton||e.rightButton)return;{let n=e.offsetCenter;if(!n)return;r.x=n.x,r.y=n.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=e,r.mode="hover"}_pickAndCallback(){let{_pickRequest:e}=this;if(e.event){let{result:r,emptyInfo:n}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=r.length>0;let i=n,s=!1;for(let o of r)i=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip){let o=this.props.getTooltip(i);this.tooltip.setTooltip(o,i.x,i.y)}e.event=null}}_updateCursor(){let e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,Qn(e,{enable:!0,copyState:!0})),this.tooltip=new Xu(this.canvas),Ce(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);let r=new ni;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new Da(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(let i in Fm)this.eventManager.on(i,this._onEvent);this.viewManager=new ku({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let n=this.viewManager.getViewports()[0];this.layerManager=new Nu(e,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new Wu,this.deckRenderer=new Yu(e),this.deckPicker=new $u(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,r){let{gl:n}=this.layerManager.context;Ce(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),G.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){let r=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){let r=Fm[e.type],n=e.offsetCenter;if(!r||!n)return;let i=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:i,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[r.handler]||o.props[r.handler]),l=this.props[r.handler],c=!1;a&&(c=a.call(o,s,e)),!c&&l&&l(s,e)}_onPointerDown(e){let r=e.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo}_getFrameStats(){let{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();let r=this.animationLoop.stats;e.get("GPU Time").addTime(r.get("GPU Time").lastTiming),e.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){let{metrics:e,stats:r}=this;e.fps=r.get("frameRate").getHz(),e.setPropsTime=r.get("setProps Time").time,e.updateAttributesTime=r.get("Update Attributes").time,e.framesRedrawn=r.get("Redraw Count").count,e.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,e.pickCount=r.get("Pick Count").count,e.gpuTime=r.get("GPU Time").time,e.cpuTime=r.get("CPU Time").time,e.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=r.get("CPU Time").getAverageTime();let n=bt.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}};Pn.getPropTypes=fR;Pn.defaultProps=C2;Pn.VERSION=pE.VERSION;var Os=class{constructor(e,r){this.opts=r,this.source=e}get value(){return this.source.value}getValue(){let e=this.source.getBuffer(),r=this.getAccessor();if(e)return[e,r];let{value:n}=this.source,{size:i}=r,s=n;if(n&&n.length!==i){s=new Float32Array(i);let o=r.elementOffset||0;for(let a=0;a<i;++a)s[a]=n[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}};function N2(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function rf(t){return t.stride||t.size*t.bytesPerElement}function k2(t,e){e.offset&&G.removed("shaderAttribute.offset","vertexOffset, elementOffset")();let r=rf(t),n="vertexOffset"in e?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=n*r+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:r}}function hR(t,e){let r=k2(t,e);return{high:r,low:{...r,offset:r.offset+t.size*4}}}var nf=class{constructor(e,r){this.gl=e,this.id=r.id,this.size=r.size;let n=r.logicalType||r.type,i=n===5130,{defaultValue:s}=r;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),r.defaultValue=s;let o=n;i?o=5126:!o&&r.isIndexed?o=e&&ra(e,Q.ELEMENT_INDEX_UINT32)?5125:5123:o||(o=5126),r.logicalType=n,r.type=o;let a=N2(n||o||5126);this.shaderAttributes={},this.doublePrecision=i,i&&r.fp64===!1&&(a=Float32Array),r.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=r,this.state={externalBuffer:null,bufferAccessor:r,allocatedValue:null,constant:!1},this._buffer=null,this.setData(r)}get buffer(){if(!this._buffer){let{isIndexed:e,type:r}=this.settings;this._buffer=new j(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){let e=this.getAccessor();return e.vertexOffset?e.vertexOffset*rf(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),jt.release(this.state.allocatedValue)}getShaderAttributes(e,r){if(this.doublePrecision){let n={},i=this.value instanceof Float64Array,s=hR(this.getAccessor(),r||{});return n[e]=new Os(this,s.high),n["".concat(e,"64Low")]=i?new Os(this,s.low):new Float32Array(this.size),n}if(r){let n=k2(this.getAccessor(),r);return{[e]:new Os(this,n)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){let{state:r}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof j&&(e={buffer:e});let n={...this.settings,...e};if(r.bufferAccessor=n,e.constant){let i=e.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this._normalizeConstant(i)),!(!r.constant||!this._areValuesEqual(i,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=i}else if(e.buffer){let i=e.buffer;r.externalBuffer=i,r.constant=!1,this.value=e.value;let s=e.value instanceof Float64Array;n.type=e.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(s?2:1),n.stride=rf(n)}else if(e.value){this._checkExternalBuffer(e);let i=e.value;r.externalBuffer=null,r.constant=!1,this.value=i,n.bytesPerElement=i.BYTES_PER_ELEMENT,n.stride=rf(n);let{buffer:s,byteOffset:o}=this;this.doublePrecision&&i instanceof Float64Array&&(i=Iu(i,n));let a=i.byteLength+o+n.stride*2;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:i,offset:o}),n.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){let{value:r}=this,{startOffset:n=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?Iu(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:r=!1}){let{state:n}=this,i=n.allocatedValue,s=jt.allocate(i,e+1,{size:this.size,type:this.defaultType,copy:r});this.value=s;let{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),r&&i&&o.subData({data:i instanceof Float64Array?Iu(i,this):i,offset:a})),n.allocatedValue=s,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){let{value:r}=e;if(!e.constant&&r){let n=this.defaultType,i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in e)&&G.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(e).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(e).map(r=>r/255);case 5123:return new Float32Array(e).map(r=>r/65535);default:return e}}_normalizeValue(e,r,n){let{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return r[n]=e,r;if(!e)return r[n]=i[0],r;switch(s){case 4:r[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:r[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:r[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:r[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)r[n+o]=Number.isFinite(e[o])?e[o]:i[o]}return r}_areValuesEqual(e,r){if(!e||!r)return!1;let{size:n}=this;for(let i=0;i<n;i++)if(e[i]!==r[i])return!1;return!0}};var D2=[],F2=[];function sf(t,e=0,r=1/0){let n=D2,i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?n=t:t.length>0&&(F2.length=t.length,n=F2):n=D2,(e>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(e,r),i.index=e-1),{iterable:n,objectInfo:i}}function of(t){return t&&t[Symbol.asyncIterator]}function af(t,{size:e,stride:r,offset:n,startIndices:i,nested:s}){let o=t.BYTES_PER_ELEMENT,a=r?r/o:e,l=n?n/o:0,c=Math.floor((t.length-l)/a);return(u,{index:h,target:f})=>{if(!i){let m=h*a+l;for(let d=0;d<e;d++)f[d]=t[m+d];return f}let v=i[h],E=i[h+1]||c,_;if(s){_=new Array(E-v);for(let m=v;m<E;m++){let d=m*a+l;f=new Array(e);for(let y=0;y<e;y++)f[y]=t[d+y];_[m-v]=f}}else if(a===e)_=t.subarray(v*e+l,E*e+l);else{_=new t.constructor((E-v)*e);let m=0;for(let d=v;d<E;d++){let y=d*a+l;for(let x=0;x<e;x++)_[m++]=t[y+x]}}return _}}var B2=[],Fa=[[0,1/0]];function z2(t,e){if(t===Fa||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;let r=[],n=t.length,i=0;for(let s=0;s<n;s++){let o=t[s];o[1]<e[0]?(r.push(o),i=s+1):o[0]>e[1]?r.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return r.splice(i,0,e),r}function ug({source:t,target:e,start:r=0,end:n,size:i,getData:s}){n=n||e.length;let o=t.length,a=n-r;if(o>a){e.set(t.subarray(0,a),r);return}if(e.set(t,r),!s)return;let l=o;for(;l<a;){let c=s(l,t);for(let u=0;u<i;u++)e[r+l]=c[u]||0,l++}}function U2({source:t,target:e,size:r,getData:n,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return ug({source:t,target:e,size:r,getData:n}),e;let o=0,a=0,l=n&&((u,h)=>n(u+a,h)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){let h=i[u]*r,f=s[u]*r;ug({source:t.subarray(o,h),target:e,start:a,end:f,size:r,getData:l}),o=h,a=f}return a<e.length&&ug({source:[],target:e,start:a,size:r,getData:l}),e}var pR={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function lf(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",{...pR[t.type],...e,...t}):null}function cf(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function uf(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function ff(t){t.push(t.shift())}function Ba(t,e){let{doublePrecision:r,settings:n,value:i,size:s}=t,o=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:e*s)*o}function hf({buffer:t,numInstances:e,attribute:r,fromLength:n,fromStartIndices:i,getData:s=o=>o}){let o=r.doublePrecision&&r.value instanceof Float64Array?2:1,a=r.size*o,l=r.byteOffset,c=r.startIndices,u=i&&c,h=Ba(r,e),f=r.state.constant;if(!u&&n>=h)return;let v=f?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!f){let d=s;s=(y,x)=>r._normalizeConstant(d(y,x))}let E=f?(d,y)=>s(v,y):(d,y)=>s(v.subarray(d,d+a),y),_=t.getData({length:n}),m=new Float32Array(h);U2({source:_,target:m,sourceStartIndices:i,targetStartIndices:c,size:a,getData:E}),t.byteLength<m.byteLength+l&&t.reallocate(m.byteLength+l),t.subData({data:m,offset:l})}var bn=class extends nf{constructor(e,r={}){super(e,r);let{transition:n=!1,noAlloc:i=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=r;Object.assign(this.settings,{transition:n,noAlloc:i,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Fa,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){let r=this.state.needsRedraw;return this.state.needsRedraw=r&&!e,r}getUpdateTriggers(){let{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;let{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?e[r.find(s=>e[s])]:e[r];return lf(i,n)}setNeedsUpdate(e=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),r){let{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=z2(this.state.updateRanges,[n,i])}else this.state.updateRanges=Fa}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=B2}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){let{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate({numInstances:e,copy:r.updateRanges!==Fa}),!0):!1}updateBuffer({numInstances:e,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;let{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this,l=!0;if(o){for(let[c,u]of s)o.call(i,this,{data:r,startRow:c,endRow:u,props:n,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(let[c,u]of s){let h=Number.isFinite(c)?this.getVertexOffset(c):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){let{state:r}=this;return e?(this.clearNeedsUpdate(),r.lastExternalBuffer===e||(r.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(e,r=null){let{state:n,settings:i}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;if(n.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),i.transform||r!==this.startIndices){ve(ArrayBuffer.isView(e.value),"invalid ".concat(i.accessor));let o=e.size&&e.size!==this.size;return n.binaryAccessor=af(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:r,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){let{startIndices:r}=this;return(r?r[e]:e)*this.size}getShaderAttributes(){let e=this.settings.shaderAttributes||{[this.id]:null},r={};for(let n in e)Object.assign(r,super.getShaderAttributes(n,e[n]));return r}_autoUpdater(e,{data:r,startRow:n,endRow:i,props:s,numInstances:o}){if(e.constant)return;let{settings:a,state:l,value:c,size:u,startIndices:h}=e,{accessor:f,transform:v}=a,E=l.binaryAccessor||(typeof f=="function"?f:s[f]);ve(typeof E=="function",'accessor "'.concat(f,'" is not a function'));let _=e.getVertexOffset(n),{iterable:m,objectInfo:d}=sf(r,n,i);for(let y of m){d.index++;let x=E(y,d);if(v&&(x=v.call(this,x)),h){let w=(d.index<h.length-1?h[d.index+1]:o)-h[d.index];if(x&&Array.isArray(x[0])){let S=_;for(let M of x)e._normalizeValue(M,c,S),S+=u}else x&&x.length>u?c.set(x,_):(e._normalizeValue(x,d.target,0),e2({target:c,source:d.target,start:_,count:w}));_+=w*u}else e._normalizeValue(x,c,_),_+=u}}_validateAttributeUpdaters(){let{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){let{value:e}=this,r=Math.min(4,this.size);if(e&&e.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}};var df=class{constructor({gl:e,attribute:r,timeline:n}){this.gl=e,this.type="interpolation",this.transition=new Ot(n),this.attribute=r,this.attributeInTransition=new bn(e,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=gR(e,r);let i={byteLength:0,usage:35050};this.buffers=[new j(e,i),new j(e,i)]}get inProgress(){return this.transition.inProgress}start(e,r){if(e.duration<=0){this.transition.cancel();return}let{gl:n,buffers:i,attribute:s}=this;ff(i);let o={numInstances:r,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let a of i)hf({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=Ba(s,r),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:cf(n,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){let e=this.transition.update();if(e){let{time:r,settings:{duration:n,easing:i}}=this.transition,s=i(r/n);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},mR=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function gR(t,e){let r=uf(e.size);return new sr(t,{vs:mR,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}var pf=class{constructor({gl:e,attribute:r,timeline:n}){this.gl=e,this.type="spring",this.transition=new Ot(n),this.attribute=r,this.attributeInTransition=new bn(e,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=yR(e),this.framebuffer=xR(e,this.texture),this.transform=vR(e,r,this.framebuffer);let i={byteLength:0,usage:35050};this.buffers=[new j(e,i),new j(e,i),new j(e,i)]}get inProgress(){return this.transition.inProgress}start(e,r){let{gl:n,buffers:i,attribute:s}=this,o={numInstances:r,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let a of i)hf({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=Ba(s,r),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:cf(n,s)}})}update(){let{buffers:e,transform:r,framebuffer:n,transition:i}=this;return i.update()?(r.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.settings.stiffness,damping:i.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),ff(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),Ar(n)[0]>0||i.end(),!0):!1}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}};function vR(t,e,r){let n=uf(e.size);return new sr(t,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function yR(t){return new le(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function xR(t,e){return new q(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}var _R={interpolation:df,spring:pf},mf=class{constructor(e,{id:r,timeline:n}){this.id=r,this.gl=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=sr.isSupported(e)}finalize(){for(let e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:r,numInstances:n}){this.numInstances=n||1;for(let i in e){let s=e[i],o=s.getTransitionSetting(r);!o||this._updateAttribute(i,s,o)}for(let i in this.transitions){let s=e[i];(!s||!s.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(e){let r=this.transitions[e];return r&&r.inProgress}getAttributes(){let e={};for(let r in this.transitions){let n=this.transitions[r];n.inProgress&&(e[r]=n.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(let r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);let e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,r,n){let i=this.transitions[e],s=!i||i.type!==n.type;if(s){if(!this.isSupported){G.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);let o=_R[n.type];o?this.transitions[e]=new o({attribute:r,timeline:this.timeline,gl:this.gl}):(G.error("unsupported transition type '".concat(n.type,"'"))(),s=!1)}(s||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}};var V2="attributeManager.invalidate",ER="attributeManager.updateStart",wR="attributeManager.updateEnd",TR="attribute.updateStart",MR="attribute.allocate",SR="attribute.updateEnd",gf=class{constructor(e,{id:r="attribute-manager",stats:n,timeline:i}={}){this.id=r,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new mf(e,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(let e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){let r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,r&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,r){this._add(e,r)}addInstanced(e,r){this._add(e,r,{instanced:1})}remove(e){for(let r=0;r<e.length;r++){let n=e[r];this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}}invalidate(e,r){let n=this._invalidateTrigger(e,r);_e(V2,this,e,n)}invalidateAll(e){for(let r in this.attributes)this.attributes[r].setNeedsUpdate(r,e);_e(V2,this,"all")}update({data:e,numInstances:r,startIndices:n=null,transitions:i,props:s={},buffers:o={},context:a={}}={}){let l=!1;_e(ER,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(let c in this.attributes){let u=this.attributes[c],h=u.settings.accessor;u.startIndices=n,s[c]&&G.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(o[h],e.startIndices)||!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:r,data:e,props:s,context:a})),this.needsRedraw|=u.needsRedraw()}l&&_e(wR,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){let{attributeTransitionManager:e}=this,r=e.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){let{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(let s in r){let o=r[s];o.needsRedraw(e)&&!n.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,r={}){e||(e=this.getAttributes());let n={};for(let i in e)r[i]||Object.assign(n,e[i].getShaderAttributes());return n}getAccessors(){return this.updateTriggers}_add(e,r,n={}){r&&G.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(let i in e){let s=e[i];this.attributes[i]=this._createAttribute(i,s,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,r,n){let i={...r,id:e,isIndexed:r.isIndexed||r.elements||!1,constant:r.constant||!1,size:r.elements&&1||r.size||1,value:r.value||null,divisor:r.instanced||n.instanced?1:r.divisor||0};return new bn(this.gl,i)}_mapUpdateTriggersToAttributes(){let e={};for(let r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(r)});this.updateTriggers=e}_invalidateTrigger(e,r){let{attributes:n,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{let a=n[o];a&&a.setNeedsUpdate(a.id,r)}),s}_updateAttribute(e){let{attribute:r,numInstances:n}=e;if(_e(TR,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&_e(MR,r,n),r.updateBuffer(e)&&(this.needsRedraw=!0,_e(SR,r,n))}};var vf=class extends Ot{get value(){return this._value}_onUpdate(){let{time:e,settings:{fromValue:r,toValue:n,duration:i,easing:s}}=this,o=s(e/i);this._value=ri(r,n,o)}};var j2=1e-5;function G2(t,e,r,n,i){let s=e-t,a=(r-e)*i,l=-s*n;return a+l+s+e}function PR(t,e,r,n,i){if(Array.isArray(r)){let s=[];for(let o=0;o<r.length;o++)s[o]=G2(t[o],e[o],r[o],n,i);return s}return G2(t,e,r,n,i)}function W2(t,e){if(Array.isArray(t)){let r=0;for(let n=0;n<t.length;n++){let i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}return Math.abs(t-e)}var yf=class extends Ot{get value(){return this._currValue}_onUpdate(){let{fromValue:e,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this,a=PR(s,o,r,n,i),l=W2(a,r),c=W2(a,o);l<j2&&c<j2&&(a=r,this.end()),this._prevValue=o,this._currValue=a}};var bR={interpolation:vf,spring:yf},xf=class{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,r,n,i){let{transitions:s}=this;if(s.has(e)){let l=s.get(e),{value:c=l.settings.fromValue}=l;r=c,this.remove(e)}if(i=lf(i),!i)return;let o=bR[i.type];if(!o){G.error("unsupported transition type '".concat(i.type,"'"))();return}let a=new o(this.timeline);a.start({...i,fromValue:r,toValue:n}),s.set(e,a)}remove(e){let{transitions:r}=this;r.has(e)&&(r.get(e).cancel(),r.delete(e))}update(){let e={};for(let[r,n]of this.transitions)n.update(),e[r]=n.value,n.inProgress||this.remove(r);return e}clear(){for(let e of this.transitions.keys())this.remove(e)}};var{COMPONENT:AR}=Mn;function H2(t){let e=hg(t);for(let r in e){let n=e[r],{validate:i}=n;if(i&&!i(t[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(t[r]))}}function Y2(t,e){let r=$2({newProps:t,oldProps:e,propTypes:hg(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=IR(t,e),i=!1;return n||(i=RR(t,e)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:OR(t,e),transitionsChanged:LR(t,e)}}function LR(t,e){if(!t.transitions)return null;let r={},n=hg(t);for(let i in t.transitions){let s=n[i],o=s&&s.type;(o==="number"||o==="color"||o==="array")&&fg(t[i],e[i],s)&&(r[i]=!0)}return r}function $2({newProps:t,oldProps:e,ignoreProps:r={},propTypes:n={},triggerName:i="props"}={}){if(e===t)return null;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(let s of Object.keys(t))if(!(s in r)){if(!(s in e))return"".concat(i,".").concat(s," added");let o=fg(t[s],e[s],n[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(let s of Object.keys(e))if(!(s in r)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){let o=fg(t[s],e[s],n[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return null}function fg(t,e,r){let n=r&&r.equal;return n&&!n(t,e,r)||!n&&(n=t&&e&&t.equals,n&&!n.call(t,e))?"changed deeply":!n&&e!==t?"changed shallowly":null}function IR(t,e){if(e===null)return"oldProps is null, initial diff";let r=null,{dataComparator:n,_dataDiff:i}=t;return n?n(t.data,e.data)||(r="Data comparator detected a change"):t.data!==e.data&&(r="A new data container was supplied"),r&&i&&(r=i(t.data,e.data)||r),r}function RR(t,e){if(e===null)return"oldProps is null, initial diff";if("all"in t.updateTriggers&&X2(t,e,"all"))return{all:!0};let r={},n=!1;for(let i in t.updateTriggers)i!=="all"&&X2(t,e,i)&&(r[i]=!0,n=r);return n}function OR(t,e){if(e===null)return"oldProps is null, initial diff";let r=e.extensions,{extensions:n}=t;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function X2(t,e,r){let n=t.updateTriggers[r];n=n==null?{}:n;let i=e.updateTriggers[r];return i=i==null?{}:i,$2({oldProps:i,newProps:n,triggerName:r})}function hg(t){let e=t[AR],r=e&&e.constructor;return r?r._propTypes:{}}var CR="count(): argument not an object",NR="count(): argument not a container";function q2(t){if(!DR(t))throw new Error(CR);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(kR(t))return Object.keys(t).length;throw new Error(NR)}function kR(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function DR(t){return t!==null&&typeof t=="object"}function Z2(t,e){if(!e)return t;let r={...t,...e};if("defines"in e&&(r.defines={...t.defines,...e.defines}),"modules"in e&&(r.modules=(t.modules||[]).concat(e.modules),e.modules.some(n=>n.name==="project64"))){let n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in e)if(!t.inject)r.inject=e.inject;else{let n={...t.inject};for(let i in e.inject)n[i]=(n[i]||"")+e.inject[i];r.inject=n}return r}var FR={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},dg={};function K2(t,e){let r=t.context&&t.context.gl;if(!r||!e)return null;if(e instanceof le)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let n=null;e.compressed&&(n={[10241]:e.data.length>1?9985:9729});let i=new le(r,{...e,parameters:{...FR,...n,...t.props.textureParameters}});return dg[i.id]=!0,i}function Q2(t){!t||!(t instanceof le)||dg[t.id]&&(t.delete(),delete dg[t.id])}var BR={boolean:{validate(t,e){return!0},equal(t,e,r){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Ua(t)&&(t.length===3||t.length===4)},equal(t,e,r){return pg(t,e)}},accessor:{validate(t,e){let r=_f(t);return r==="function"||r===_f(e.value)},equal(t,e,r){return typeof e=="function"?!0:pg(t,e)}},array:{validate(t,e){return e.optional&&!t||Ua(t)},equal(t,e,r){return r.compare?pg(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,r){return!r.compare||t===e}},data:{transform:(t,e,r)=>{let{dataTransform:n}=r?r.props:{};return n&&t?n(t):t}},image:{transform:(t,e,r)=>K2(r,t),release:t=>{Q2(t)}}};function pg(t,e){if(t===e)return!0;if(!Ua(t)||!Ua(e))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function J2(t){let e={},r={},n={};for(let[i,s]of Object.entries(t))if(s&&s.deprecatedFor)n[i]=Array.isArray(s.deprecatedFor)?s.deprecatedFor:[s.deprecatedFor];else{let o=zR(i,s);e[i]=o,r[i]=o.value}return{propTypes:e,defaultProps:r,deprecatedProps:n}}function zR(t,e){switch(_f(e)){case"object":return za(t,e);case"array":return za(t,{type:"array",value:e,compare:!1});case"boolean":return za(t,{type:"boolean",value:e});case"number":return za(t,{type:"number",value:e});case"function":return za(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function za(t,e){return"type"in e?{name:t,...BR[e.type],...e}:"value"in e?{name:t,type:_f(e.value),...e}:{name:t,type:"object",value:e}}function Ua(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function _f(t){return Ua(t)?"array":t===null?"null":typeof t}var{COMPONENT:mg,ASYNC_ORIGINAL:Ef,ASYNC_RESOLVED:Va,ASYNC_DEFAULTS:wf}=Mn;function ew(){let t=this,e=tw(t.constructor),r=Object.create(e);r[mg]=t,r[Ef]={},r[Va]={};for(let n=0;n<arguments.length;++n){let i=arguments[n];for(let s in i)r[s]=i[s]}return Object.freeze(r),r}function tw(t){let e=Tf(t,"_mergedDefaultProps");return e||(UR(t),t._mergedDefaultProps)}function UR(t){if(!t.prototype)return;let r=Object.getPrototypeOf(t),n=tw(r),i=Tf(t,"defaultProps")||{},s=J2(i),o=VR(s.defaultProps,n,t),a={...r._propTypes,...s.propTypes};GR(o,a);let l={...r._deprecatedProps,...s.deprecatedProps};jR(o,l),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=l}function VR(t,e,r){let n=Object.create(null);Object.assign(n,e,t);let i=HR(r);return delete t.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function jR(t,e){for(let r in e)Object.defineProperty(t,r,{enumerable:!1,set(n){let i="".concat(this.id,": ").concat(r);for(let s of e[r])rw(this,s)||(this[s]=n);G.deprecated(i,e[r].join("/"))()}})}function GR(t,e){let r={},n={};for(let i in e){let s=e[i],{name:o,value:a}=s;s.async&&(r[o]=a,n[o]=WR(o,a))}t[wf]=r,t[Ef]={},Object.defineProperties(t,n)}function WR(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||of(e)?this[Ef][t]=e:this[Va][t]=e},get(){if(this[Va]){if(t in this[Va])return this[Va][t]||this[wf][t];if(t in this[Ef]){let e=this[mg]&&this[mg].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[wf][t]}}return this[wf][t]}}}function rw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Tf(t,e){return rw(t,e)&&t[e]}function HR(t){let e=Tf(t,"layerName")||Tf(t,"componentName");return e||G.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}var{ASYNC_ORIGINAL:YR,ASYNC_RESOLVED:$R,ASYNC_DEFAULTS:XR}=Mn,qR=Object.freeze({}),Cs=class{constructor(e=null){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=qR,this.oldAsyncProps=null}finalize(){for(let e in this.asyncProps){let r=this.asyncProps[e];r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(let e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){let r=this.asyncProps[e];return r&&r.resolvedValue}isAsyncPropLoading(e){if(e){let r=this.asyncProps[e];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(let r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(e,r){this._watchPromise(e,Promise.resolve(r))}setAsyncProps(e){let r=e[$R]||{},n=e[YR]||e,i=e[XR]||{};for(let s in r){let o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),r[s]=this.getAsyncProp(s)}for(let s in n){let o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_updateAsyncProp(e,r){if(!!this._didAsyncInputValueChange(e,r)){if(typeof r=="string"){var n;let i=(n=this.layer)===null||n===void 0?void 0:n.props.fetch;i&&(r=i(r,{propName:e,layer:this.layer}))}if(r instanceof Promise){this._watchPromise(e,r);return}if(of(r)){this._resolveAsyncIterable(e,r);return}this._setPropValue(e,r)}}_didAsyncInputValueChange(e,r){let n=this.asyncProps[e];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(e,r){this.freezeAsyncOldProps();let n=this.asyncProps[e];r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}_setAsyncPropValue(e,r,n){let i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this.freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,r))}_watchPromise(e,r){let n=this.asyncProps[e];n.pendingLoadCount++;let i=n.pendingLoadCount;r.then(s=>{var o;s=this._postProcessValue(n,s),this._setAsyncPropValue(e,s,i);let a=(o=this.layer)===null||o===void 0?void 0:o.props.onDataLoad;e==="data"&&a&&a(s,{propName:e,layer:this.layer})}).catch(s=>{var o;(o=this.layer)===null||o===void 0||o.raiseError(s,"loading ".concat(e," of ").concat(this.layer))})}async _resolveAsyncIterable(e,r){var n;e!=="data"&&this._setPropValue(e,r);let i=this.asyncProps[e];i.pendingLoadCount++;let s=i.pendingLoadCount,o=[],a=0;for await(let c of r){let{dataTransform:u}=this.component?this.component.props:{};u?o=u(c,o):o=o.concat(c),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(e,o,s)}let l=(n=this.layer)===null||n===void 0?void 0:n.props.onDataLoad;l&&l(o,{propName:e,layer:this.layer})}_postProcessValue(e,r){let n=e.type;return n&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(e,r){if(!this.asyncProps[e]){let i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}};var{ASYNC_ORIGINAL:nw,ASYNC_RESOLVED:iw,ASYNC_DEFAULTS:ZR}=Mn,KR={},QR=0,Ns=class{constructor(){this.props=ew.apply(this,arguments),this.id=this.props.id,this.count=QR++,this.lifecycle=Tn.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}clone(e){let{props:r}=this,n={};for(let i in r[ZR])i in r[iw]?n[i]=r[iw][i]:i in r[nw]&&(n[i]=r[nw][i]);return new this.constructor({...r,...n,...e})}get stats(){return this.internalState.stats}_initState(){this.internalState=new Cs({})}};Ns.componentName="Component";Ns.defaultProps=KR;var Mf=class extends Cs{constructor({attributeManager:e,layer:r}){super(r);this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}};var JR="layer.changeFlag",eO="layer.initialize",tO="layer.update",rO="layer.finalize",nO="layer.matched",sw=2**24-1,iO=Object.freeze([]),sO=_n(({oldViewport:t,viewport:e})=>t.equals(e)),dr=new Uint8ClampedArray(0),oO={data:{type:"data",value:iO,async:!0},dataComparator:null,_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:r,loaders:n,loadOptions:i,signal:s})=>{let{resourceManager:o}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:ys(t,n),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>r.internalState.reloadAsyncProp(e,c),consumerId:r.id,requestId:e}):ys(t,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:$.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},hi=class extends Ns{toString(){let e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}raiseError(e,r){var n,i;if(r&&(e.message="".concat(r,": ").concat(e.message)),!((n=(i=this.props).onError)===null||n===void 0?void 0:n.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(e=!0){this.internalState&&(this.internalState.needsRedraw=e)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(e){let{viewport:r}=this.context,n=tg(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=li(n,r.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){let{viewport:r}=this.context;return r.unproject(e)}projectPosition(e){return QE(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){let{coordinateSystem:e}=this.props;return e===$.DEFAULT||e===$.LNGLAT||e===$.CARTESIAN}onHover(e,r){return this.props.onHover?this.props.onHover(e,r):!1}onClick(e,r){return this.props.onClick?this.props.onClick(e,r):!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,r=[]){return r[0]=e+1&255,r[1]=e+1>>8&255,r[2]=e+1>>8>>8&255,r}decodePickingColor(e){ve(e instanceof Uint8Array);let[r,n,i]=e;return r+n*256+i*65536-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(e){for(let r of this.props.extensions)e=Z2(e,r.getShaders.call(this,r));return e}shouldUpdateState({oldProps:e,props:r,context:n,changeFlags:i}){return i.propsOrDataChanged}updateState({oldProps:e,props:r,context:n,changeFlags:i}){let s=this.getAttributeManager();if(i.dataChanged&&s){let{dataChanged:l}=i;if(Array.isArray(l))for(let c of l)s.invalidateAll(c);else s.invalidateAll()}let o=e.highlightedObjectIndex>=0||e.pickable,a=r.highlightedObjectIndex>=0||r.pickable;if(o!==a&&s){let{pickingColors:l,instancePickingColors:c}=s.attributes,u=l||c;u&&(a&&u.constant&&(u.constant=!1,s.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(){for(let r of this.getModels())r.delete();let e=this.getAttributeManager();e&&e.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(e){for(let r of this.getModels())r.draw(e)}getPickingInfo({info:e,mode:r}){let{index:n}=e;return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}activateViewport(e){let r=this.internalState.viewport;this.internalState.viewport=e,(!r||!sO({oldViewport:r,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all",r=""){let n=this.getAttributeManager();!n||(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(let r of this.getModels())this._setModelAttributes(r,e)}_updateAttributes(e){let r=this.getAttributeManager();if(!r)return;let n=this.getNumInstances(e),i=this.getStartIndices(e);r.update({data:e.data,numInstances:n,startIndices:i,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});let s=r.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){let e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){let{uniformTransitions:e}=this.internalState;if(e.active){let r=e.update(),n=Object.create(this.props);for(let i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:r}){if(e.constant)return;let n=Math.floor(dr.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>sw&&G.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),dr=jt.allocate(dr,r,{size:3,copy:!0,maxCount:Math.max(r,sw)});let i=Math.floor(dr.length/3),s=[];for(let o=n;o<i;o++)this.encodePickingColor(o,s),dr[o*3+0]=s[0],dr[o*3+1]=s[1],dr[o*3+2]=s[2]}e.value=dr.subarray(0,r*3)}_setModelAttributes(e,r){let n=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=n.getShaderAttributes(r,i);e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){let{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n,s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){let{pickingColors:e,instancePickingColors:r}=this.getAttributeManager().attributes,n=e||r;this.internalState.usesPickingColorCache&&n.value.buffer!==dr.buffer&&(n.value=dr.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0})}getNumInstances(e){return e=e||this.props,e.numInstances!==void 0?e.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:q2(e.data)}getStartIndices(e){return e=e||this.props,e.startIndices!==void 0?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){_e(eO,this),this._initState(),this.initializeState(this.context);for(let e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){let e=this.needsUpdate();_e(tO,this,e),e&&this._updateState()}_updateState(){let e=this.props,r=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||r,this.props=n;try{let i=this._getUpdateParams(),s=this.getModels();if(this.context.gl)this.updateState(i);else try{this.updateState(i)}catch(a){}for(let a of this.props.extensions)a.updateState.call(this,i,a);let o=this.getModels()[0]!==s[0];this._updateModules(i,o),this.isComposite?this._renderLayers(i):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=r,this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){_e(rO,this),this.finalizeState(this.context);for(let e of this.props.extensions)e.finalizeState.call(this,e)}drawLayer({moduleParameters:e=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();let i=this.props;this.props=this.internalState.propsInTransition||i;let{opacity:s}=this.props;r.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);let{getPolygonOffset:o}=this.props,a=o&&o(r)||[0,0];Ce(this.context.gl,{polygonOffset:a}),ie(this.context.gl,n,()=>{let l={moduleParameters:e,uniforms:r,parameters:n,context:this.context};for(let c of this.props.extensions)c.draw.call(this,l,c);this.draw(l)})}finally{this.props=i}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(e){let{changeFlags:r}=this.internalState;for(let i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":Array.isArray(r[i])&&(r[i]=Array.isArray(e[i])?r[i].concat(e[i]):e[i],s=!0);default:r[i]||(r[i]=e[i],s=!0)}s&&_e(JR,this,i,e)}let n=r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged;r.propsOrDataChanged=n,r.somethingChanged=n||e.viewportChanged||e.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(e,r){let n=Y2(e,r);if(n.updateTriggersChanged)for(let i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(let i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,r[i],e[i],e.transitions[i]);return this.setChangeFlags(n)}validateProps(){H2(this.props)}setModuleParameters(e){for(let r of this.getModels())r.updateModuleSettings(e)}updateAutoHighlight(e){this.props.autoHighlight&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){let r={pickingSelectedColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(e)),this.setModuleParameters(r),this.setNeedsRedraw()}_updateModules({props:e,oldProps:r},n){let{autoHighlight:i,highlightedObjectIndex:s,highlightColor:o}=e;if(n||r.autoHighlight!==i||r.highlightedObjectIndex!==s||r.highlightColor!==o){let a={};i||(a.pickingSelectedColor=null),Array.isArray(o)&&(a.pickingHighlightColor=o),Number.isInteger(s)&&(a.pickingSelectedColor=s>=0?this.encodePickingColor(s):null),this.setModuleParameters(a)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;let n=this.getAttributeManager(),i=n&&n.getNeedsRedraw(e);return r=r||i,r}_getAttributeManager(){return new gf(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){ve(!this.internalState&&!this.state),ve(isFinite(this.props.coordinateSystem));let e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Mf({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(G.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new xf(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(e){_e(nO,this,this===e);let{state:r,internalState:n}=e;this!==e&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}};hi.layerName="Layer";hi.defaultProps=oO;var ja=class{constructor(e={}){let{attributes:r={}}=e;this.typedArrayManager=jt,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.opts=e,this.updateGeometry(e),Object.seal(this)}updateGeometry(e){Object.assign(this.opts,e);let{data:r,buffers:n={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=n,this.normalize=l,s&&(ve(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(n.positions=s)),this.geometryBuffer=n.positions,Array.isArray(a))for(let c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:r}){this._rebuildGeometry({startRow:e,endRow:r})}normalizeGeometry(e){return e}updateGeometryAttributes(e,r,n){throw new Error("Not implemented")}getGeometrySize(e){throw new Error("Not implemented")}getGeometryFromBuffer(e){let r=e.value||e;return ve(ArrayBuffer.isView(r)),af(r,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}_allocate(e,r){let{attributes:n,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(let a in s)if(a in i)o.release(n[a]),n[a]=null;else{let l=s[a];l.copy=r,n[a]=o.allocate(n[a],e,l)}}_forEachGeometry(e,r,n){let{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=sf(i,r,n);for(let l of o){a.index++;let c=s(l,a);e(c,a.index)}}_rebuildGeometry(e){if(!this.data||!this.getGeometry)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this,{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(r=[0],n=[0]),this.normalize||!o)this._forEachGeometry((h,f)=>{h=this.normalizeGeometry(h),c[f]=h,n[f+1]=n[f]+this.getGeometrySize(h)},a,l),i=n[n.length-1];else if(o.buffer instanceof j){let h=o.stride||this.positionSize*4;n=s.startIndices,i=n[s.length]||o.buffer.byteLength/h}else{let h=o.value||o,f=o.stride/h.BYTES_PER_ELEMENT||this.positionSize;n=s.startIndices,i=n[s.length]||h.length/f}this._allocate(i,Boolean(e)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;let u={};this._forEachGeometry((h,f)=>{h=c[f]||h,u.vertexStart=n[f],u.indexStart=r[f];let v=f<n.length-1?n[f+1]:i;u.geometrySize=v-n[f],u.geometryIndex=f,this.updateGeometryAttributes(h,u)},a,l),this.vertexCount=r[r.length-1]}};var gg=85.05113;function vg(t,e,r,n){if(r){if(r.props.userData._googleMap===t)return r;Sf(r)}let i={click:null,dblclick:null,mousemove:null,mouseout:null};r=new Pn({...n,style:null,parent:aO(e,n.style),initialViewState:{longitude:0,latitude:0,zoom:1},controller:!1,userData:{_googleMap:t,_eventListeners:i}});for(let s in i)i[s]=t.addListener(s,o=>cO(r,s,o));return r}function aO(t,e){let r=document.createElement("div");return r.style.position="absolute",Object.assign(r.style,e),t.getPanes?t.getPanes().overlayLayer.appendChild(r):t.getMap().getDiv().appendChild(r),r}function Sf(t){let{_eventListeners:e}=t.props.userData;for(let r in e)e[r].remove();t.finalize()}function ow(t,e){let{width:r,height:n}=lw(t),i=e.getProjection(),s=t.getBounds(),o=s.getNorthEast(),a=s.getSouthWest(),l=i.fromLatLngToDivPixel(o),c=i.fromLatLngToDivPixel(a),u=new google.maps.Point(0,0),h=i.fromContainerPixelToLatLng(u),f=i.fromLatLngToDivPixel(h),v=f.x,E=f.y,_=i.getWorldWidth(),m=Math.ceil(r/_);v-=Math.floor(m/2)*_;let d=n?(c.y-l.y)/n:1,y=Math.log2(d||1)+t.getZoom()-1,x=new google.maps.Point(r/2,n/2),w=i.fromContainerPixelToLatLng(x),S=w.lat(),M=w.lng();if(Math.abs(S)>gg){S=S>0?gg:-gg;let A=new google.maps.LatLng(S,M);x=i.fromLatLngToContainerPixel(A),E+=x.y-n/2}return{width:r,height:n,left:v,top:E,zoom:y,pitch:t.getTilt(),latitude:S,longitude:M}}function aw(t,e){let{width:r,height:n}=lw(t),{lat:i,lng:s,heading:o,tilt:a,zoom:l}=e.getCameraParams(),c=25,u=n?r/n:1,h=.75,f=3e14,v=new ge().perspective({fovy:c*Math.PI/180,aspect:u,near:h,far:f}),E=.5*v[5];return{width:!1,height:!1,viewState:{altitude:E,bearing:o,latitude:i,longitude:s,pitch:a,projectionMatrix:v,repeat:!0,zoom:l-1}}}function lw(t){let e=t.getDiv().firstChild;return{width:e.offsetWidth,height:e.offsetHeight}}function lO(t,e){if(t.pixel)return t.pixel;let r=e.getViewports()[0].project([t.latLng.lng(),t.latLng.lat()]);return{x:r[0],y:r[1]}}function cO(t,e,r){let n={type:e,offsetCenter:lO(r,t),srcEvent:r};switch(e){case"click":t._lastPointerDownInfo=t.pickObject({...n.offsetCenter,radius:t.props.pickingRadius}),n.tapCount=1,t._onEvent(n);break;case"dblclick":n.type="click",n.tapCount=2,t._onEvent(n);break;case"mousemove":n.type="pointermove",t._onPointerMove(n);break;case"mouseout":n.type="pointerleave",t._onPointerMove(n);break;default:return}}var cw=()=>!1,uO={depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],blendEquation:32774},Ga=class{constructor(e){this.props={},this._map=null,this.setProps(e)}setMap(e){if(e!==this._map&&(this._map&&(this._overlay.setMap(null),this._map=null),e)){this._map=e;let{UNINITIALIZED:r}=google.maps.RenderingType;e.getRenderingType()!==r?this._createOverlay(e):e.addListener("renderingtype_changed",()=>{this._createOverlay(e)})}}setProps(e){Object.assign(this.props,e),this._deck&&(e.style&&(Object.assign(this._deck.canvas.parentElement.style,e.style),e.style=null),this._deck.setProps(e))}pickObject(e){return this._deck&&this._deck.pickObject(e)}pickMultipleObjects(e){return this._deck&&this._deck.pickMultipleObjects(e)}pickObjects(e){return this._deck&&this._deck.pickObjects(e)}finalize(){this.setMap(null),this._deck&&(Sf(this._deck),this._deck=null)}_createOverlay(e){let{VECTOR:r,UNINITIALIZED:n}=google.maps.RenderingType,i=e.getRenderingType();if(i===n)return;let s=i===r&&google.maps.WebglOverlayView,o=s?google.maps.WebglOverlayView:google.maps.OverlayView,a=new o;s?(a.onAdd=()=>{},a.onContextLost=this._onContextLost.bind(this),a.onContextRestored=this._onContextRestored.bind(this),a.onDraw=this._onDrawVector.bind(this)):(a.onAdd=this._onAdd.bind(this),a.draw=this._onDrawRaster.bind(this)),a.onRemove=this._onRemove.bind(this),this._overlay=a,this._overlay.setMap(e)}_onAdd(){this._deck=vg(this._map,this._overlay,this._deck,this.props)}_onContextRestored(e){let r=()=>{this._overlay.requestRedraw()},n=vg(this._map,this._overlay,this._deck,{gl:e,_customRender:r,...this.props});this._deck=n,n.animationLoop._renderFrame=()=>{let i=e.getParameter(34964);ie(e,{},()=>{n.animationLoop.onRender()}),e.bindBuffer(34962,i)}}_onContextLost(){this._deck&&(Sf(this._deck),this._deck=null)}_onRemove(){this._deck.setProps({layerFilter:cw})}_onDrawRaster(){let e=this._deck,{width:r,height:n,left:i,top:s,zoom:o,pitch:a,latitude:l,longitude:c}=ow(this._map,this._overlay),u=a===0,h=e.canvas.parentElement.style;h.left="".concat(i,"px"),h.top="".concat(s,"px"),e.setProps({width:r,height:n,viewState:{latitude:l,longitude:c,zoom:o,repeat:!0},layerFilter:u?this.props.layerFilter:cw}),e.redraw()}_onDrawVector(e,r){if(!this._deck||!this._map)return;let n=this._deck;if(n.setProps({...aw(this._map,r)}),n.layerManager){let i=es(e,36006);n.setProps({_framebuffer:i}),n.needsRedraw({clearRedrawFlags:!0}),Ce(e,{viewport:[0,0,e.canvas.width,e.canvas.height],scissor:[0,0,e.canvas.width,e.canvas.height],stencilFunc:[519,0,255,519,0,255]}),ie(e,uO,()=>{n._drawLayers("google-vector",{clearCanvas:!1})})}}};function di(t,e){let r=e.length,n=t.length;if(n>0){let i=!0;for(let s=0;s<r;s++)if(t[n-r+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)t[n+i]=e[i];return!0}function Pf(t,e){let r=e.length;for(let n=0;n<r;n++)t[n]=e[n]}function Wa(t,e,r,n,i=[]){let s=n+e*r;for(let o=0;o<r;o++)i[o]=t[s+o];return i}function yg(t,e,r,n,i=[]){let s,o;if(r&8)s=(n[3]-t[1])/(e[1]-t[1]),o=3;else if(r&4)s=(n[1]-t[1])/(e[1]-t[1]),o=1;else if(r&2)s=(n[2]-t[0])/(e[0]-t[0]),o=2;else if(r&1)s=(n[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?n[o]:s*(e[a]-t[a])+t[a];return i}function bf(t,e){let r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function Ha(t,e={}){let{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e,l=(a-o)/r,c=[],u=[c],h=Wa(t,0,r,o),f,v,E=dO(h,i,s,[]),_=[];di(c,h);for(let m=1;m<l;m++){for(f=Wa(t,m,r,o,f),v=bf(f,E);v;){yg(h,f,v,E,_);let d=bf(_,E);d&&(yg(h,_,d,E,_),v=d),di(c,_),Pf(h,_),pO(E,i,v),n&&c.length>r&&(c=[],u.push(c),di(c,h)),v=bf(f,E)}di(c,f),Pf(h,f)}return n?u:u[0]}function dO(t,e,r,n){let i=Math.floor((t[0]-r[0])/e)*e+r[0],s=Math.floor((t[1]-r[1])/e)*e+r[1];return n[0]=i,n[1]=s,n[2]=i+e,n[3]=s+e,n}function pO(t,e,r){r&8?(t[1]+=e,t[3]+=e):r&4?(t[1]-=e,t[3]-=e):r&2?(t[0]+=e,t[2]+=e):r&1&&(t[0]-=e,t[2]-=e)}function xg(t,e={}){let{size:r=2,startIndex:n=0,endIndex:i=t.length,normalize:s=!0}=e,o=t.slice(n,i);gO(o,r,0,i-n);let a=Ha(o,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(let l of a)vO(l,r);return a}function gO(t,e,r,n){let i=t[0],s;for(let o=r;o<n;o+=e){s=t[o];let a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function vO(t,e){let r,n=t.length/e;for(let s=0;s<n&&(r=t[s*e],(r+180)%360===0);s++);let i=-Math.round(r/360)*360;if(i!==0)for(let s=0;s<n;s++)t[s*e]+=i}function fw(t,e,r,n){let i=t;if(Array.isArray(t[0])){let s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}return r?Ha(i,{size:e,gridResolution:r}):n?xg(i,{size:e}):i}var xO=1,_O=2,_g=4,Af=class extends ja{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):()=>null}normalizeGeometry(e){return this.normalize?fw(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}get(e){return this.attributes[e]}getGeometrySize(e){if(Array.isArray(e[0])){let n=0;for(let i of e)n+=this.getGeometrySize(i);return n}let r=this.getPathLength(e);return r<2?0:this.isClosed(e)?r<3?0:r+2:r}updateGeometryAttributes(e,r){if(r.geometrySize!==0)if(e&&Array.isArray(e[0]))for(let n of e){let i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(e,r),this._updatePositions(e,r)}_updateSegmentTypes(e,r){let{segmentTypes:n}=this.attributes,i=this.isClosed(e),{vertexStart:s,geometrySize:o}=r;n.fill(0,s,s+o),i?(n[s]=_g,n[s+o-2]=_g):(n[s]+=xO,n[s+o-2]+=_O),n[s+o-1]=_g}_updatePositions(e,r){let{positions:n}=this.attributes;if(!n)return;let{vertexStart:i,geometrySize:s}=r,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),n[a*3]=o[0],n[a*3+1]=o[1],n[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,r,n=[]){let{positionSize:i}=this;r*i>=e.length&&(r+=1-e.length/i);let s=r*i;return n[0]=e[s],n[1]=e[s+1],n[2]=i===3&&e[s+2]||0,n}isClosed(e){if(!this.normalize)return this.opts.loop;let{positionSize:r}=this,n=e.length-r;return e[0]===e[n]&&e[1]===e[n+1]&&(r===2||e[2]===e[n+2])}};var hw=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var dw=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var pw=[0,0,0,255],EO={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:pw},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Eg={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},An=class extends hi{getShaders(){return super.getShaders({vs:hw,fs:dw,modules:[yu,Pu]})}get wrapLongitude(){return!1}initializeState(){let e=!0;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Eg,accessor:"getPath",update:this.calculatePositions,noAlloc:e,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:e},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Eg,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Eg,defaultValue:pw},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:s})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,s)}}),this.setState({pathTesselator:new Af({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&G.removed("getDashArray","PathStyleExtension")()}updateState({oldProps:e,props:r,changeFlags:n}){super.updateState({props:r,oldProps:e,changeFlags:n});let i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){let{pathTesselator:a}=this.state,l=r.data.attributes||{};a.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var o;let{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){let r=super.getPickingInfo(e),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(s=>s.__source.index===n)),r}disablePickingIndex(e){let{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}draw({uniforms:e}){let{jointRounded:r,capRounded:n,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:_s[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){let r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new yn(e,{...this.getShaders(),id:this.props.id,geometry:new ms({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(e){let{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("positions")}calculateSegmentTypes(e){let{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("segmentTypes")}};An.layerName="PathLayer";An.defaultProps=EO;var wO=new google.maps.DirectionsService,Lf=new google.maps.DirectionsRenderer({suppressBicyclingLayer:!0,hideRouteList:!0,polylineOptions:{strokeColor:"#259b24"},markerOptions:{animation:google.maps.Animation.DROP}}),TO=new google.maps.ElevationService,MO={walking:"pedestrian",bicycling:"bicycle",driving:"car-side"},If={width:400,barWidth:2},SO={metric:"km",imperial:"miles"},wg={metric:"m",imperial:"ft"},Rf=new google.maps.Marker({visible:!1,clickable:!1,zIndex:1e3}),PO=t=>{Rf.setPosition(t),Rf.setVisible(!0)},bO=()=>{Rf.setVisible(!1)},Of=new google.maps.Marker({visible:!1,label:"A",clickable:!1,zIndex:500}),Cf=new google.maps.Marker({visible:!1,label:"B",clickable:!1,zIndex:500}),ks=({type:t,...e})=>C.default.createElement("svg",{className:"icon",...e},C.default.createElement("use",{xlinkHref:`assets/icons.svg#icon-${t}`})),Tg=t=>t*3.28084,AO=t=>t*.001,LO=t=>t*621371e-9,IO=({onInit:t=()=>{}})=>{let e=(0,C.useRef)();return(0,C.useEffect)(()=>{let r=new google.maps.Map(e.current,{center:new google.maps.LatLng(37.7577,-122.4376),zoom:12,mapId:"f7422a246595028",disableDefaultUI:!0,zoomControl:!0});t(r)},[]),C.default.createElement("div",{ref:e,id:"map-canvas"})},RO=(t,e)=>{let r=!1,n=document.createElement("button");n.className="control-3d",n.innerHTML="3D",t.appendChild(n),e.addListener("bounds_changed",()=>{let i=e.getTilt(),s=e.getHeading();i<=10&&s<=10?(r=!1,n.innerHTML="3D"):(r=!0,n.innerHTML="2D")}),n.addEventListener("click",()=>{r=!r;let i=e.getZoom();e.setTilt(r?45:0),e.setHeading(r?-45:0),e.setZoom(r?i+1:i-1)})},OO=({width:t,height:e,data:r,domain:n,onBarMouseEnter:i=()=>{},onBarMouseLeave:s=()=>{},onBarClick:o=()=>{}})=>C.default.createElement("div",{className:"chart",style:{width:t,height:r?e:0}},(r||[]).map((a,l)=>C.default.createElement("div",{key:`${l}-${a.value}`,style:{borderBottomWidth:e*a.value/n[1]},onMouseEnter:()=>{i(l)},onMouseLeave:()=>{s()},onClick:()=>{o(l)}},C.default.createElement("span",null,a.title)))),CO=({route:t,selected:e,renderingType:r,travelMode:n,longestDistance:i,unitSystem:s,overlayRef:o,onClick:a=()=>{}})=>{var A;let[l,c]=(0,C.useState)([]);(0,C.useEffect)(()=>{let b=t.overview_path,L=t.legs[0].distance.value,z=Math.round(L/i*(If.width/If.barWidth));TO.getElevationAlongPath({path:b,samples:z},(H,W)=>{W===google.maps.ElevationStatus.OK?(console.log({elevations:H}),c(H)):c([])})},[t]),(0,C.useEffect)(()=>{r===google.maps.RenderingType.VECTOR&&(!e||(Of.setPosition(t.overview_path[0]),Of.setVisible(!0),Cf.setPosition(t.overview_path[t.overview_path.length-1]),Cf.setVisible(!0)))},[t,e,r]),(0,C.useEffect)(()=>{if(r!==google.maps.RenderingType.VECTOR||!l.length||!e)return;let b=t.overview_path.map(W=>[W.lng(),W.lat()]),L=new google.maps.LatLngBounds;b.forEach(W=>L.extend({lat:W[1],lng:W[0]})),o.current._map.fitBounds(L,{top:60,right:70,bottom:30,left:20});let z=[],H=[];l.forEach(W=>{let{location:X,elevation:k}=W,Ze=X.lng(),pr=X.lat();z.push([Ze,pr,k]),H.push({path:[[Ze,pr,0],[Ze,pr,k]]})}),console.log({overlay:o.current,routePath:b,elevatedRoute:z,elevationPolls:H}),o.current.setProps({layers:[new An({id:"route",data:[{path:b}],widthUnits:"pixels",widthScale:3,capRounded:!0,jointRounded:!0,getColor:[37,155,36]}),new An({id:`elevated-route-${t.summary}`,data:[{path:z},...H],widthUnits:"pixels",widthScale:1,capRounded:!0,jointRounded:!0,getColor:[37,155,36,150],billboard:!0,updateTriggers:{data:l}})]})},[t,e,l,r]);let u=t.legs[0],h=u.distance.value,f=Math.ceil(h/i*If.width)/If.width*100,v=0,E=1/0,_=(A=l[0])==null?void 0:A.elevation,m=0,d=0;l.forEach(({elevation:b})=>{b>_&&(m+=b-_),b<_&&(d+=_-b),_=b,b>v&&(v=b),b<E&&(E=b)});let y=[0,v],x=Math.round((v-E)*.25),w=!!m&&C.default.createElement("span",null,C.default.createElement(ks,{type:"arrow-graph-up-right",width:"14",height:"14",title:"Rise"})," ",Math.round(s==="metric"?m:Tg(m))+" "+wg[s]),S=!!d&&C.default.createElement("span",null,C.default.createElement(ks,{type:"arrow-graph-down-right",width:"14",height:"14",title:"Drop"})," ",Math.round(s==="metric"?d:Tg(d))+" "+wg[s]),M=b=>{if(b){let{location:L}=l[b];PO(L)}else bO()};return C.default.createElement("div",{className:e?"selected":"",onClick:e?()=>{}:a},C.default.createElement("div",{className:"heading"},C.default.createElement(ks,{type:MO[n],width:"24",height:"24",title:n})," ","via ",t.summary),C.default.createElement(OO,{data:l.map(({elevation:b})=>({value:b,title:`${Math.round(s==="metric"?b:Tg(b))} ${wg[s]}`})),domain:y,width:`${f}%`,height:x,onBarMouseEnter:M,onBarMouseLeave:M,onBarClick:b=>{let{location:L}=l[b],z=o.current._map;z.panTo(L),z.getZoom()<17&&z.setZoom(17)}}),C.default.createElement("div",{className:"stats"},w,"\xA0\xA0\xA0",S),C.default.createElement("div",{className:"metadata"},u.duration.text,"\xA0\xA0\xA0",(s==="metric"?AO(h):LO(h)).toFixed(2)," ",SO[s]))},NO=()=>{let[t,e]=(0,C.useState)("walking"),[r,n]=(0,C.useState)(localStorage["steepless:unitSystem"]||"metric"),[i,s]=(0,C.useState)([]),[o,a]=(0,C.useState)(0),[l,c]=(0,C.useState)(null),[u,h]=(0,C.useState)(null),f=(0,C.useRef)(),v=(0,C.useRef)(),E=(0,C.useRef)();(0,C.useEffect)(()=>{let d=()=>{let y=location.hash.slice(1);if(!y)return;let[x,w,S]=y.split("/").map(decodeURIComponent);x&&e(x),w&&(f.current.value=w),S&&(v.current.value=S),c(null),w&&S&&wO.route({origin:w,destination:S,travelMode:google.maps.TravelMode[x.toUpperCase()],provideRouteAlternatives:!0,unitSystem:google.maps.UnitSystem.METRIC},(M,A)=>{if(A===google.maps.DirectionsStatus.OK){let{routes:b}=M;console.log({response:M}),s(b),a(0),Lf.setDirections(M)}else s([]),c({status:A})})};d(),window.addEventListener("hashchange",d)},[]);let _=(0,C.useCallback)(d=>{d==null||d.preventDefault();let y=f.current.value,x=v.current.value,w=`${t}/${encodeURIComponent(y)}/${encodeURIComponent(x)}`;location.hash=w},[t]),m=(0,C.useMemo)(()=>!i||!i.length?0:Math.max(...i.map(d=>d.legs[0].distance.value)),[i]);return C.default.createElement("div",null,C.default.createElement(IO,{onInit:d=>{Rf.setMap(d);let y=new google.maps.places.Autocomplete(f.current);y.bindTo("bounds",d),y.addListener("place_changed",_);let x=new google.maps.places.Autocomplete(v.current);x.bindTo("bounds",d),x.addListener("place_changed",_),d.addListener("renderingtype_changed",w=>{let S=d.getRenderingType();if(h(S),S===google.maps.RenderingType.VECTOR){Lf.setMap(null),Of.setMap(d),Cf.setMap(d);let M=document.createElement("div");RO(M,d),d.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(M),(E.current=new Ga({_pickable:!1,_typedArrayManagerProps:{overAlloc:1,poolSize:0}})).setMap(d)}else Lf.setMap(d),Of.setMap(null),Cf.setMap(null)})}}),C.default.createElement("div",{id:"sidebar"},C.default.createElement("header",null,C.default.createElement("h1",null,C.default.createElement(ks,{type:"mountains",width:"24",height:"24"})," Steepless")),C.default.createElement("form",{id:"directions-form",onSubmit:_},C.default.createElement("div",{class:"form-fields"},C.default.createElement("div",{className:"field-section"},C.default.createElement("label",null,C.default.createElement("select",{value:t,onChange:d=>{let{value:y}=d.target,x=f.current.value,w=v.current.value;x&&w?location.hash=`${y}/${x}/${w}`:e(y)}},C.default.createElement("option",{value:"walking"},"Walking"),C.default.createElement("option",{value:"bicycling"},"Cycling"),C.default.createElement("option",{value:"driving"},"Driving"))," ","from"),C.default.createElement("input",{ref:f,id:"directions-start",placeholder:"Start",required:!0})),C.default.createElement("a",{href:f.current&&v.current?`#${t}/${encodeURIComponent(v.current.value.trim())}/${encodeURIComponent(f.current.value.trim())}`:"#",id:"flip-direction",title:"Flip origin and destination",tabIndex:"-1"},C.default.createElement(ks,{type:"arrow-right",width:"14",height:"14"})),C.default.createElement("div",{className:"field-section"},C.default.createElement("label",{htmlFor:"directions-end"},"To"),C.default.createElement("input",{ref:v,id:"directions-end",placeholder:"Destination",required:!0}))),C.default.createElement("div",{className:"form-footer"},C.default.createElement("div",{className:"options"},C.default.createElement(ks,{type:"widget",width:"20",height:"20",title:"Settings"}),C.default.createElement("span",null,C.default.createElement("label",null,"Units\xA0",C.default.createElement("select",{value:r,onChange:d=>{let{value:y}=d.target;localStorage["steepless:unitSystem"]=y,n(y)}},C.default.createElement("option",{value:"metric"},"Metric (km, m)"),C.default.createElement("option",{value:"imperial"},"Imperial (miles, ft)"))))),C.default.createElement("button",null,"Go"))),C.default.createElement("div",{id:"routes-container"},(i==null?void 0:i.length)>0&&C.default.createElement("ul",{id:"routes-list"},i.map((d,y)=>C.default.createElement("li",{key:`${y}${d.summary}`},C.default.createElement(CO,{route:d,renderingType:u,travelMode:t,unitSystem:r,longestDistance:m,selected:y===o,onClick:()=>{a(y),Lf.setRouteIndex(y)},overlayRef:E})))),!!(l==null?void 0:l.status)&&C.default.createElement("p",null,l.status==="ZERO_RESULTS"?"Oops, there are no routes found.":"Oooops, something is wrong. Please try again later or change the locations."),!l&&!(i==null?void 0:i.length)&&C.default.createElement(C.default.Fragment,null,C.default.createElement("p",null,"Begin by entering the Start and Destination locations above."),C.default.createElement("p",null,"Try an example:"," ",C.default.createElement("a",{href:"#walking/Chinatown, SF/Twin Peaks, SF"},"Walking from Chinatown to Twin Peaks"))))))};mw.default.render(C.default.createElement(NO,null),document.getElementById("app"));})();
//# sourceMappingURL=steepless.js.map
