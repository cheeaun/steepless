(()=>{var bT=Object.create;var lh=Object.defineProperty;var LT=Object.getOwnPropertyDescriptor;var IT=Object.getOwnPropertyNames;var RT=Object.getPrototypeOf,OT=Object.prototype.hasOwnProperty;var Ne=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),CT=(t,e)=>{for(var r in e)lh(t,r,{get:e[r],enumerable:!0})},kT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of IT(e))!OT.call(t,i)&&i!==r&&lh(t,i,{get:()=>e[i],enumerable:!(n=LT(e,i))||n.enumerable});return t};var yt=(t,e,r)=>(r=t!=null?bT(RT(t)):{},kT(e||!t||!t.__esModule?lh(r,"default",{value:t,enumerable:!0}):r,t));var v0=Ne($=>{"use strict";var wo=Symbol.for("react.element"),NT=Symbol.for("react.portal"),DT=Symbol.for("react.fragment"),FT=Symbol.for("react.strict_mode"),zT=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),UT=Symbol.for("react.context"),VT=Symbol.for("react.forward_ref"),jT=Symbol.for("react.suspense"),GT=Symbol.for("react.memo"),WT=Symbol.for("react.lazy"),a0=Symbol.iterator;function HT(t){return t===null||typeof t!="object"?null:(t=a0&&t[a0]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f0=Object.assign,h0={};function Xi(t,e,r){this.props=t,this.context=e,this.refs=h0,this.updater=r||u0}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=Xi.prototype;function uh(t,e,r){this.props=t,this.context=e,this.refs=h0,this.updater=r||u0}var fh=uh.prototype=new d0;fh.constructor=uh;f0(fh,Xi.prototype);fh.isPureReactComponent=!0;var l0=Array.isArray,p0=Object.prototype.hasOwnProperty,hh={current:null},m0={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)p0.call(e,n)&&!m0.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:wo,type:t,key:s,ref:o,props:i,_owner:hh.current}}function YT(t,e){return{$$typeof:wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dh(t){return typeof t=="object"&&t!==null&&t.$$typeof===wo}function $T(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var c0=/\/+/g;function ch(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$T(""+t.key):e.toString(36)}function ec(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wo:case NT:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+ch(o,0):n,l0(i)?(r="",t!=null&&(r=t.replace(c0,"$&/")+"/"),ec(i,e,r,"",function(c){return c})):i!=null&&(dh(i)&&(i=YT(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(c0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",l0(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+ch(s,a);o+=ec(s,e,r,l,i)}else if(l=HT(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+ch(s,a++),o+=ec(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jl(t,e,r){if(t==null)return t;var n=[],i=0;return ec(t,n,"","",function(s){return e.call(r,s,i++)}),n}function XT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qe={current:null},tc={transition:null},qT={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:tc,ReactCurrentOwner:hh};$.Children={map:Jl,forEach:function(t,e,r){Jl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Jl(t,function(){e++}),e},toArray:function(t){return Jl(t,function(e){return e})||[]},only:function(t){if(!dh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=Xi;$.Fragment=DT;$.Profiler=zT;$.PureComponent=uh;$.StrictMode=FT;$.Suspense=jT;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qT;$.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=f0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)p0.call(e,l)&&!m0.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:wo,type:t.type,key:i,ref:s,props:n,_owner:o}};$.createContext=function(t){return t={$$typeof:UT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BT,_context:t},t.Consumer=t};$.createElement=g0;$.createFactory=function(t){var e=g0.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:VT,render:t}};$.isValidElement=dh;$.lazy=function(t){return{$$typeof:WT,_payload:{_status:-1,_result:t},_init:XT}};$.memo=function(t,e){return{$$typeof:GT,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=tc.transition;tc.transition={};try{t()}finally{tc.transition=e}};$.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};$.useCallback=function(t,e){return Qe.current.useCallback(t,e)};$.useContext=function(t){return Qe.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Qe.current.useDeferredValue(t)};$.useEffect=function(t,e){return Qe.current.useEffect(t,e)};$.useId=function(){return Qe.current.useId()};$.useImperativeHandle=function(t,e,r){return Qe.current.useImperativeHandle(t,e,r)};$.useInsertionEffect=function(t,e){return Qe.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return Qe.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return Qe.current.useMemo(t,e)};$.useReducer=function(t,e,r){return Qe.current.useReducer(t,e,r)};$.useRef=function(t){return Qe.current.useRef(t)};$.useState=function(t){return Qe.current.useState(t)};$.useSyncExternalStore=function(t,e,r){return Qe.current.useSyncExternalStore(t,e,r)};$.useTransition=function(){return Qe.current.useTransition()};$.version="18.1.0"});var ph=Ne((EC,y0)=>{"use strict";y0.exports=v0()});var b0=Ne(te=>{"use strict";function yh(t,e){var r=t.length;t.push(e);e:for(;0<r;){var n=r-1>>>1,i=t[n];if(0<rc(i,e))t[n]=e,t[r]=i,r=n;else break e}}function $t(t){return t.length===0?null:t[0]}function ic(t){if(t.length===0)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length,s=i>>>1;n<s;){var o=2*(n+1)-1,a=t[o],l=o+1,c=t[l];if(0>rc(a,r))l<i&&0>rc(c,a)?(t[n]=c,t[l]=r,n=l):(t[n]=a,t[o]=r,n=o);else if(l<i&&0>rc(c,r))t[n]=c,t[l]=r,n=l;else break e}}return e}function rc(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(x0=performance,te.unstable_now=function(){return x0.now()}):(mh=Date,_0=mh.now(),te.unstable_now=function(){return mh.now()-_0});var x0,mh,_0,_r=[],dn=[],ZT=1,Ot=null,je=3,sc=!1,ti=!1,Mo=!1,T0=typeof setTimeout=="function"?setTimeout:null,M0=typeof clearTimeout=="function"?clearTimeout:null,E0=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xh(t){for(var e=$t(dn);e!==null;){if(e.callback===null)ic(dn);else if(e.startTime<=t)ic(dn),e.sortIndex=e.expirationTime,yh(_r,e);else break;e=$t(dn)}}function _h(t){if(Mo=!1,xh(t),!ti)if($t(_r)!==null)ti=!0,wh(Eh);else{var e=$t(dn);e!==null&&Th(_h,e.startTime-t)}}function Eh(t,e){ti=!1,Mo&&(Mo=!1,M0(So),So=-1),sc=!0;var r=je;try{for(xh(e),Ot=$t(_r);Ot!==null&&(!(Ot.expirationTime>e)||t&&!A0());){var n=Ot.callback;if(typeof n=="function"){Ot.callback=null,je=Ot.priorityLevel;var i=n(Ot.expirationTime<=e);e=te.unstable_now(),typeof i=="function"?Ot.callback=i:Ot===$t(_r)&&ic(_r),xh(e)}else ic(_r);Ot=$t(_r)}if(Ot!==null)var s=!0;else{var o=$t(dn);o!==null&&Th(_h,o.startTime-e),s=!1}return s}finally{Ot=null,je=r,sc=!1}}var oc=!1,nc=null,So=-1,S0=5,P0=-1;function A0(){return!(te.unstable_now()-P0<S0)}function gh(){if(nc!==null){var t=te.unstable_now();P0=t;var e=!0;try{e=nc(!0,t)}finally{e?To():(oc=!1,nc=null)}}else oc=!1}var To;typeof E0=="function"?To=function(){E0(gh)}:typeof MessageChannel!="undefined"?(vh=new MessageChannel,w0=vh.port2,vh.port1.onmessage=gh,To=function(){w0.postMessage(null)}):To=function(){T0(gh,0)};var vh,w0;function wh(t){nc=t,oc||(oc=!0,To())}function Th(t,e){So=T0(function(){t(te.unstable_now())},e)}te.unstable_IdlePriority=5;te.unstable_ImmediatePriority=1;te.unstable_LowPriority=4;te.unstable_NormalPriority=3;te.unstable_Profiling=null;te.unstable_UserBlockingPriority=2;te.unstable_cancelCallback=function(t){t.callback=null};te.unstable_continueExecution=function(){ti||sc||(ti=!0,wh(Eh))};te.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S0=0<t?Math.floor(1e3/t):5};te.unstable_getCurrentPriorityLevel=function(){return je};te.unstable_getFirstCallbackNode=function(){return $t(_r)};te.unstable_next=function(t){switch(je){case 1:case 2:case 3:var e=3;break;default:e=je}var r=je;je=e;try{return t()}finally{je=r}};te.unstable_pauseExecution=function(){};te.unstable_requestPaint=function(){};te.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=je;je=t;try{return e()}finally{je=r}};te.unstable_scheduleCallback=function(t,e,r){var n=te.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:ZT++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,yh(dn,t),$t(_r)===null&&t===$t(dn)&&(Mo?(M0(So),So=-1):Mo=!0,Th(_h,r-n))):(t.sortIndex=i,yh(_r,t),ti||sc||(ti=!0,wh(Eh))),t};te.unstable_shouldYield=A0;te.unstable_wrapCallback=function(t){var e=je;return function(){var r=je;je=e;try{return t.apply(this,arguments)}finally{je=r}}}});var I0=Ne((TC,L0)=>{"use strict";L0.exports=b0()});var zy=Ne(Tt=>{"use strict";var U1=ph(),Et=I0();function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V1=new Set,Xo={};function di(t,e){ms(t,e),ms(t+"Capture",e)}function ms(t,e){for(Xo[t]=e,t=0;t<e.length;t++)V1.add(e[t])}var Wr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Hh=Object.prototype.hasOwnProperty,KT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R0={},O0={};function QT(t){return Hh.call(O0,t)?!0:Hh.call(R0,t)?!1:KT.test(t)?O0[t]=!0:(R0[t]=!0,!1)}function JT(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eM(t,e,r,n){if(e===null||typeof e=="undefined"||JT(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tt(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dd=/[\-:]([a-z])/g;function Fd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dd,Fd);ze[e]=new tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dd,Fd);ze[e]=new tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dd,Fd);ze[e]=new tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new tt(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function zd(t,e,r,n){var i=ze.hasOwnProperty(e)?ze[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eM(e,r,i,n)&&(r=null),n||i===null?QT(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var $r=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ac=Symbol.for("react.element"),Ki=Symbol.for("react.portal"),Qi=Symbol.for("react.fragment"),Bd=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),j1=Symbol.for("react.provider"),G1=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),$h=Symbol.for("react.suspense"),Xh=Symbol.for("react.suspense_list"),Vd=Symbol.for("react.memo"),mn=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var W1=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var C0=Symbol.iterator;function Po(t){return t===null||typeof t!="object"?null:(t=C0&&t[C0]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,Mh;function No(t){if(Mh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Mh=e&&e[1]||""}return`
`+Mh+t}var Sh=!1;function Ph(t,e){if(!t||Sh)return"";Sh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?No(t):""}function tM(t){switch(t.tag){case 5:return No(t.type);case 16:return No("Lazy");case 13:return No("Suspense");case 19:return No("SuspenseList");case 0:case 2:case 15:return t=Ph(t.type,!1),t;case 11:return t=Ph(t.type.render,!1),t;case 1:return t=Ph(t.type,!0),t;default:return""}}function qh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qi:return"Fragment";case Ki:return"Portal";case Yh:return"Profiler";case Bd:return"StrictMode";case $h:return"Suspense";case Xh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case G1:return(t.displayName||"Context")+".Consumer";case j1:return(t._context.displayName||"Context")+".Provider";case Ud:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vd:return e=t.displayName||null,e!==null?e:qh(t.type)||"Memo";case mn:e=t._payload,t=t._init;try{return qh(t(e))}catch(r){}}return null}function rM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qh(e);case 8:return e===Bd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function An(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function H1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nM(t){var e=H1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lc(t){t._valueTracker||(t._valueTracker=nM(t))}function Y1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=H1(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Dc(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Zh(t,e){var r=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:t._wrapperState.initialChecked})}function k0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=An(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $1(t,e){e=e.checked,e!=null&&zd(t,"checked",e,!1)}function Kh(t,e){$1(t,e);var r=An(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Qh(t,e.type,An(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function N0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Qh(t,e,r){(e!=="number"||Dc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Do=Array.isArray;function cs(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+An(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function D0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(O(92));if(Do(r)){if(1<r.length)throw Error(O(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:An(r)}}function X1(t,e){var r=An(e.value),n=An(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function F0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ed(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cc,Z1=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cc=cc||document.createElement("div"),cc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qo(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iM=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(t){iM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bo[e]=Bo[t]})});function K1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Bo.hasOwnProperty(t)&&Bo[t]?(""+e).trim():e+"px"}function Q1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=K1(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var sM=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function td(t,e){if(e){if(sM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function rd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nd=null;function jd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var id=null,us=null,fs=null;function z0(t){if(t=da(t)){if(typeof id!="function")throw Error(O(280));var e=t.stateNode;e&&(e=fu(e),id(t.stateNode,t.type,e))}}function J1(t){us?fs?fs.push(t):fs=[t]:us=t}function ev(){if(us){var t=us,e=fs;if(fs=us=null,z0(t),e)for(t=0;t<e.length;t++)z0(e[t])}}function tv(t,e){return t(e)}function rv(){}var Ah=!1;function nv(t,e,r){if(Ah)return t(e,r);Ah=!0;try{return tv(t,e,r)}finally{Ah=!1,(us!==null||fs!==null)&&(rv(),ev())}}function Zo(t,e){var r=t.stateNode;if(r===null)return null;var n=fu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(O(231,e,typeof r));return r}var sd=!1;if(Wr)try{qi={},Object.defineProperty(qi,"passive",{get:function(){sd=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch(t){sd=!1}var qi;function oM(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var Uo=!1,Fc=null,zc=!1,od=null,aM={onError:function(t){Uo=!0,Fc=t}};function lM(t,e,r,n,i,s,o,a,l){Uo=!1,Fc=null,oM.apply(aM,arguments)}function cM(t,e,r,n,i,s,o,a,l){if(lM.apply(this,arguments),Uo){if(Uo){var c=Fc;Uo=!1,Fc=null}else throw Error(O(198));zc||(zc=!0,od=c)}}function pi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function iv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B0(t){if(pi(t)!==t)throw Error(O(188))}function uM(t){var e=t.alternate;if(!e){if(e=pi(t),e===null)throw Error(O(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return B0(i),t;if(s===n)return B0(i),e;s=s.sibling}throw Error(O(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?t:e}function sv(t){return t=uM(t),t!==null?ov(t):null}function ov(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ov(t);if(e!==null)return e;t=t.sibling}return null}var av=Et.unstable_scheduleCallback,U0=Et.unstable_cancelCallback,fM=Et.unstable_shouldYield,hM=Et.unstable_requestPaint,ve=Et.unstable_now,dM=Et.unstable_getCurrentPriorityLevel,Gd=Et.unstable_ImmediatePriority,lv=Et.unstable_UserBlockingPriority,Bc=Et.unstable_NormalPriority,pM=Et.unstable_LowPriority,cv=Et.unstable_IdlePriority,au=null,Mr=null;function mM(t){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(au,t,void 0,(t.current.flags&128)===128)}catch(e){}}var Jt=Math.clz32?Math.clz32:yM,gM=Math.log,vM=Math.LN2;function yM(t){return t>>>=0,t===0?32:31-(gM(t)/vM|0)|0}var uc=64,fc=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Fo(a):(s&=o,s!==0&&(n=Fo(s)))}else o=r&~i,o!==0?n=Fo(o):s!==0&&(n=Fo(s));if(n===0)return 0;if(e!==0&&e!==n&&(e&i)===0&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((n&4)!==0&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Jt(e),i=1<<r,n|=t[r],e&=~i;return n}function xM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _M(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Jt(s),a=1<<o,l=i[o];l===-1?((a&r)===0||(a&n)!==0)&&(i[o]=xM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ad(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uv(){var t=uc;return uc<<=1,(uc&4194240)===0&&(uc=64),t}function bh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function fa(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=r}function EM(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Jt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Wd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Jt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Z=0;function fv(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var hv,Hd,dv,pv,mv,ld=!1,hc=[],En=null,wn=null,Tn=null,Ko=new Map,Qo=new Map,vn=[],wM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V0(t,e){switch(t){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":wn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":Ko.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(e.pointerId)}}function Ao(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=da(e),e!==null&&Hd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function TM(t,e,r,n,i){switch(e){case"focusin":return En=Ao(En,t,e,r,n,i),!0;case"dragenter":return wn=Ao(wn,t,e,r,n,i),!0;case"mouseover":return Tn=Ao(Tn,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Ko.set(s,Ao(Ko.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Qo.set(s,Ao(Qo.get(s)||null,t,e,r,n,i)),!0}return!1}function gv(t){var e=ii(t.target);if(e!==null){var r=pi(e);if(r!==null){if(e=r.tag,e===13){if(e=iv(r),e!==null){t.blockedOn=e,mv(t.priority,function(){dv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=cd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);nd=n,r.target.dispatchEvent(n),nd=null}else return e=da(r),e!==null&&Hd(e),t.blockedOn=r,!1;e.shift()}return!0}function j0(t,e,r){Ac(t)&&r.delete(e)}function MM(){ld=!1,En!==null&&Ac(En)&&(En=null),wn!==null&&Ac(wn)&&(wn=null),Tn!==null&&Ac(Tn)&&(Tn=null),Ko.forEach(j0),Qo.forEach(j0)}function bo(t,e){t.blockedOn===e&&(t.blockedOn=null,ld||(ld=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,MM)))}function Jo(t){function e(i){return bo(i,t)}if(0<hc.length){bo(hc[0],t);for(var r=1;r<hc.length;r++){var n=hc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(En!==null&&bo(En,t),wn!==null&&bo(wn,t),Tn!==null&&bo(Tn,t),Ko.forEach(e),Qo.forEach(e),r=0;r<vn.length;r++)n=vn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<vn.length&&(r=vn[0],r.blockedOn===null);)gv(r),r.blockedOn===null&&vn.shift()}var hs=$r.ReactCurrentBatchConfig,Vc=!0;function SM(t,e,r,n){var i=Z,s=hs.transition;hs.transition=null;try{Z=1,Yd(t,e,r,n)}finally{Z=i,hs.transition=s}}function PM(t,e,r,n){var i=Z,s=hs.transition;hs.transition=null;try{Z=4,Yd(t,e,r,n)}finally{Z=i,hs.transition=s}}function Yd(t,e,r,n){if(Vc){var i=cd(t,e,r,n);if(i===null)Nh(t,e,n,jc,r),V0(t,n);else if(TM(i,t,e,r,n))n.stopPropagation();else if(V0(t,n),e&4&&-1<wM.indexOf(t)){for(;i!==null;){var s=da(i);if(s!==null&&hv(s),s=cd(t,e,r,n),s===null&&Nh(t,e,n,jc,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Nh(t,e,n,null,r)}}var jc=null;function cd(t,e,r,n){if(jc=null,t=jd(n),t=ii(t),t!==null)if(e=pi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=iv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jc=t,null}function vv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dM()){case Gd:return 1;case lv:return 4;case Bc:case pM:return 16;case cv:return 536870912;default:return 16}default:return 16}}var xn=null,$d=null,bc=null;function yv(){if(bc)return bc;var t,e=$d,r=e.length,n,i="value"in xn?xn.value:xn.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return bc=i.slice(t,1<n?1-n:void 0)}function Lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dc(){return!0}function G0(){return!1}function wt(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dc:G0,this.isPropagationStopped=G0,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=dc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=dc)},persist:function(){},isPersistent:dc}),e}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xd=wt(Es),ha=de({},Es,{view:0,detail:0}),AM=wt(ha),Lh,Ih,Lo,lu=de({},ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(Lh=t.screenX-Lo.screenX,Ih=t.screenY-Lo.screenY):Ih=Lh=0,Lo=t),Lh)},movementY:function(t){return"movementY"in t?t.movementY:Ih}}),W0=wt(lu),bM=de({},lu,{dataTransfer:0}),LM=wt(bM),IM=de({},ha,{relatedTarget:0}),Rh=wt(IM),RM=de({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),OM=wt(RM),CM=de({},Es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kM=wt(CM),NM=de({},Es,{data:0}),H0=wt(NM),DM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zM[t])?!!e[t]:!1}function qd(){return BM}var UM=de({},ha,{key:function(t){if(t.key){var e=DM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qd,charCode:function(t){return t.type==="keypress"?Lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VM=wt(UM),jM=de({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y0=wt(jM),GM=de({},ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qd}),WM=wt(GM),HM=de({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),YM=wt(HM),$M=de({},lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XM=wt($M),qM=[9,13,27,32],Zd=Wr&&"CompositionEvent"in window,Vo=null;Wr&&"documentMode"in document&&(Vo=document.documentMode);var ZM=Wr&&"TextEvent"in window&&!Vo,xv=Wr&&(!Zd||Vo&&8<Vo&&11>=Vo),$0=String.fromCharCode(32),X0=!1;function _v(t,e){switch(t){case"keyup":return qM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ev(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function KM(t,e){switch(t){case"compositionend":return Ev(e);case"keypress":return e.which!==32?null:(X0=!0,$0);case"textInput":return t=e.data,t===$0&&X0?null:t;default:return null}}function QM(t,e){if(Ji)return t==="compositionend"||!Zd&&_v(t,e)?(t=yv(),bc=$d=xn=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xv&&e.locale!=="ko"?null:e.data;default:return null}}var JM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JM[t.type]:e==="textarea"}function wv(t,e,r,n){J1(n),e=Gc(e,"onChange"),0<e.length&&(r=new Xd("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var jo=null,ea=null;function e3(t){Cv(t,0)}function cu(t){var e=rs(t);if(Y1(e))return t}function t3(t,e){if(t==="change")return e}var Tv=!1;Wr&&(Wr?(mc="oninput"in document,mc||(Oh=document.createElement("div"),Oh.setAttribute("oninput","return;"),mc=typeof Oh.oninput=="function"),pc=mc):pc=!1,Tv=pc&&(!document.documentMode||9<document.documentMode));var pc,mc,Oh;function Z0(){jo&&(jo.detachEvent("onpropertychange",Mv),ea=jo=null)}function Mv(t){if(t.propertyName==="value"&&cu(ea)){var e=[];wv(e,ea,t,jd(t)),nv(e3,e)}}function r3(t,e,r){t==="focusin"?(Z0(),jo=e,ea=r,jo.attachEvent("onpropertychange",Mv)):t==="focusout"&&Z0()}function n3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(ea)}function i3(t,e){if(t==="click")return cu(e)}function s3(t,e){if(t==="input"||t==="change")return cu(e)}function o3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:o3;function ta(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Hh.call(e,i)||!er(t[i],e[i]))return!1}return!0}function K0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Q0(t,e){var r=K0(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=K0(r)}}function Sv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pv(){for(var t=window,e=Dc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch(n){r=!1}if(r)t=e.contentWindow;else break;e=Dc(t.document)}return e}function Kd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function a3(t){var e=Pv(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Sv(r.ownerDocument.documentElement,r)){if(n!==null&&Kd(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Q0(r,s);var o=Q0(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l3=Wr&&"documentMode"in document&&11>=document.documentMode,es=null,ud=null,Go=null,fd=!1;function J0(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fd||es==null||es!==Dc(n)||(n=es,"selectionStart"in n&&Kd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Go&&ta(Go,n)||(Go=n,n=Gc(ud,"onSelect"),0<n.length&&(e=new Xd("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=es)))}function gc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ts={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},Ch={},Av={};Wr&&(Av=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function uu(t){if(Ch[t])return Ch[t];if(!ts[t])return t;var e=ts[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Av)return Ch[t]=e[r];return t}var bv=uu("animationend"),Lv=uu("animationiteration"),Iv=uu("animationstart"),Rv=uu("transitionend"),Ov=new Map,e1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(t,e){Ov.set(t,e),di(e,[t])}for(vc=0;vc<e1.length;vc++)yc=e1[vc],t1=yc.toLowerCase(),r1=yc[0].toUpperCase()+yc.slice(1),In(t1,"on"+r1);var yc,t1,r1,vc;In(bv,"onAnimationEnd");In(Lv,"onAnimationIteration");In(Iv,"onAnimationStart");In("dblclick","onDoubleClick");In("focusin","onFocus");In("focusout","onBlur");In(Rv,"onTransitionEnd");ms("onMouseEnter",["mouseout","mouseover"]);ms("onMouseLeave",["mouseout","mouseover"]);ms("onPointerEnter",["pointerout","pointerover"]);ms("onPointerLeave",["pointerout","pointerover"]);di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));di("onBeforeInput",["compositionend","keypress","textInput","paste"]);di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c3=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function n1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,cM(n,e,void 0,t),t.currentTarget=null}function Cv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;n1(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;n1(i,a,c),s=l}}}if(zc)throw t=od,zc=!1,od=null,t}function se(t,e){var r=e[gd];r===void 0&&(r=e[gd]=new Set);var n=t+"__bubble";r.has(n)||(kv(e,t,2,!1),r.add(n))}function kh(t,e,r){var n=0;e&&(n|=4),kv(r,t,n,e)}var xc="_reactListening"+Math.random().toString(36).slice(2);function ra(t){if(!t[xc]){t[xc]=!0,V1.forEach(function(r){r!=="selectionchange"&&(c3.has(r)||kh(r,!1,t),kh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xc]||(e[xc]=!0,kh("selectionchange",!1,e))}}function kv(t,e,r,n){switch(vv(e)){case 1:var i=SM;break;case 4:i=PM;break;default:i=Yd}r=i.bind(null,e,r,t),i=void 0,!sd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Nh(t,e,r,n,i){var s=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ii(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}nv(function(){var c=s,u=jd(r),h=[];e:{var f=Ov.get(t);if(f!==void 0){var y=Xd,x=t;switch(t){case"keypress":if(Lc(r)===0)break e;case"keydown":case"keyup":y=VM;break;case"focusin":x="focus",y=Rh;break;case"focusout":x="blur",y=Rh;break;case"beforeblur":case"afterblur":y=Rh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=LM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=WM;break;case bv:case Lv:case Iv:y=OM;break;case Rv:y=YM;break;case"scroll":y=AM;break;case"wheel":y=XM;break;case"copy":case"cut":case"paste":y=kM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Y0}var _=(e&4)!==0,T=!_&&t==="scroll",p=_?f!==null?f+"Capture":null:f;_=[];for(var m=c,v;m!==null;){v=m;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,p!==null&&(w=Zo(m,p),w!=null&&_.push(na(m,w,v)))),T)break;m=m.return}0<_.length&&(f=new y(f,x,null,r,u),h.push({event:f,listeners:_}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&r!==nd&&(x=r.relatedTarget||r.fromElement)&&(ii(x)||x[Hr]))break e;if((y||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,y?(x=r.relatedTarget||r.toElement,y=c,x=x?ii(x):null,x!==null&&(T=pi(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(_=W0,w="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(_=Y0,w="onPointerLeave",p="onPointerEnter",m="pointer"),T=y==null?f:rs(y),v=x==null?f:rs(x),f=new _(w,m+"leave",y,r,u),f.target=T,f.relatedTarget=v,w=null,ii(u)===c&&(_=new _(p,m+"enter",x,r,u),_.target=v,_.relatedTarget=T,w=_),T=w,y&&x)t:{for(_=y,p=x,m=0,v=_;v;v=Zi(v))m++;for(v=0,w=p;w;w=Zi(w))v++;for(;0<m-v;)_=Zi(_),m--;for(;0<v-m;)p=Zi(p),v--;for(;m--;){if(_===p||p!==null&&_===p.alternate)break t;_=Zi(_),p=Zi(p)}_=null}else _=null;y!==null&&i1(h,f,y,_,!1),x!==null&&T!==null&&i1(h,T,x,_,!0)}}e:{if(f=c?rs(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var S=t3;else if(q0(f))if(Tv)S=s3;else{S=n3;var M=r3}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=i3);if(S&&(S=S(t,c))){wv(h,S,r,u);break e}M&&M(t,f,c),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&Qh(f,"number",f.value)}switch(M=c?rs(c):window,t){case"focusin":(q0(M)||M.contentEditable==="true")&&(es=M,ud=c,Go=null);break;case"focusout":Go=ud=es=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,J0(h,r,u);break;case"selectionchange":if(l3)break;case"keydown":case"keyup":J0(h,r,u)}var I;if(Zd)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ji?_v(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(xv&&r.locale!=="ko"&&(Ji||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ji&&(I=yv()):(xn=u,$d="value"in xn?xn.value:xn.textContent,Ji=!0)),M=Gc(c,b),0<M.length&&(b=new H0(b,t,null,r,u),h.push({event:b,listeners:M}),I?b.data=I:(I=Ev(r),I!==null&&(b.data=I)))),(I=ZM?KM(t,r):QM(t,r))&&(c=Gc(c,"onBeforeInput"),0<c.length&&(u=new H0("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=I))}Cv(h,e)})}function na(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Gc(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zo(t,r),s!=null&&n.unshift(na(t,s,i)),s=Zo(t,e),s!=null&&n.push(na(t,s,i))),t=t.return}return n}function Zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i1(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Zo(r,s),l!=null&&o.unshift(na(r,l,a))):i||(l=Zo(r,s),l!=null&&o.push(na(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var u3=/\r\n?/g,f3=/\u0000|\uFFFD/g;function s1(t){return(typeof t=="string"?t:""+t).replace(u3,`
`).replace(f3,"")}function _c(t,e,r){if(e=s1(e),s1(t)!==e&&r)throw Error(O(425))}function Wc(){}var hd=null,dd=null;function pd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var md=typeof setTimeout=="function"?setTimeout:void 0,h3=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,d3=typeof queueMicrotask=="function"?queueMicrotask:typeof o1!="undefined"?function(t){return o1.resolve(null).then(t).catch(p3)}:md;function p3(t){setTimeout(function(){throw t})}function Dh(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Jo(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Jo(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ws=Math.random().toString(36).slice(2),Tr="__reactFiber$"+ws,ia="__reactProps$"+ws,Hr="__reactContainer$"+ws,gd="__reactEvents$"+ws,m3="__reactListeners$"+ws,g3="__reactHandles$"+ws;function ii(t){var e=t[Tr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Hr]||r[Tr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=a1(t);t!==null;){if(r=t[Tr])return r;t=a1(t)}return e}t=r,r=t.parentNode}return null}function da(t){return t=t[Tr]||t[Hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function fu(t){return t[ia]||null}var vd=[],ns=-1;function Rn(t){return{current:t}}function oe(t){0>ns||(t.current=vd[ns],vd[ns]=null,ns--)}function re(t,e){ns++,vd[ns]=t.current,t.current=e}var bn={},Ye=Rn(bn),ct=Rn(!1),li=bn;function gs(t,e){var r=t.type.contextTypes;if(!r)return bn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ut(t){return t=t.childContextTypes,t!=null}function Hc(){oe(ct),oe(Ye)}function l1(t,e,r){if(Ye.current!==bn)throw Error(O(168));re(Ye,e),re(ct,r)}function Nv(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(O(108,rM(t)||"Unknown",i));return de({},r,n)}function Yc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bn,li=Ye.current,re(Ye,t),re(ct,ct.current),!0}function c1(t,e,r){var n=t.stateNode;if(!n)throw Error(O(169));r?(t=Nv(t,e,li),n.__reactInternalMemoizedMergedChildContext=t,oe(ct),oe(Ye),re(Ye,t)):oe(ct),re(ct,r)}var Br=null,hu=!1,Fh=!1;function Dv(t){Br===null?Br=[t]:Br.push(t)}function v3(t){hu=!0,Dv(t)}function On(){if(!Fh&&Br!==null){Fh=!0;var t=0,e=Z;try{var r=Br;for(Z=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Br=null,hu=!1}catch(i){throw Br!==null&&(Br=Br.slice(t+1)),av(Gd,On),i}finally{Z=e,Fh=!1}}return null}var y3=$r.ReactCurrentBatchConfig;function qt(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var $c=Rn(null),Xc=null,is=null,Qd=null;function Jd(){Qd=is=Xc=null}function ep(t){var e=$c.current;oe($c),t._currentValue=e}function yd(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ds(t,e){Xc=t,Qd=is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(lt=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(Qd!==t)if(t={context:t,memoizedValue:e,next:null},is===null){if(Xc===null)throw Error(O(308));is=t,Xc.dependencies={lanes:0,firstContext:t}}else is=is.next=t;return e}var Qt=null,gn=!1;function tp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mn(t,e){var r=t.updateQueue;r!==null&&(r=r.shared,Py(t)?(t=r.interleaved,t===null?(e.next=e,Qt===null?Qt=[r]:Qt.push(r)):(e.next=t.next,t.next=e),r.interleaved=e):(t=r.pending,t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e))}function Ic(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wd(t,r)}}function u1(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function qc(t,e,r,n){var i=t.updateQueue;gn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,y=a.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,_=a;switch(f=e,y=r,_.tag){case 1:if(x=_.payload,typeof x=="function"){h=x.call(y,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=_.payload,f=typeof x=="function"?x.call(y,h,f):x,f==null)break e;h=de({},h,f);break e;case 2:gn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=y,l=h):u=u.next=y,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fi|=o,t.lanes=o,t.memoizedState=h}}function f1(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(O(191,i));i.call(n)}}}var zv=new U1.Component().refs;function xd(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:de({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var du={isMounted:function(t){return(t=t._reactInternals)?pi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=et(),i=Pn(t),s=Gr(n,i);s.payload=e,r!=null&&(s.callback=r),Mn(t,s),e=Ft(t,i,n),e!==null&&Ic(e,t,i)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=et(),i=Pn(t),s=Gr(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),Mn(t,s),e=Ft(t,i,n),e!==null&&Ic(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=et(),n=Pn(t),i=Gr(r,n);i.tag=2,e!=null&&(i.callback=e),Mn(t,i),e=Ft(t,n,r),e!==null&&Ic(e,t,n)}};function h1(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!ta(r,n)||!ta(i,s):!0}function Bv(t,e,r){var n=!1,i=bn,s=e.contextType;return typeof s=="object"&&s!==null?s=zt(s):(i=ut(e)?li:Ye.current,n=e.contextTypes,s=(n=n!=null)?gs(t,i):bn),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=du,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function d1(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&du.enqueueReplaceState(e,e.state,null)}function _d(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=zv,tp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=zt(s):(s=ut(e)?li:Ye.current,i.context=gs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xd(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&du.enqueueReplaceState(i,i.state,null),qc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}var ss=[],os=0,Zc=null,Kc=0,Ct=[],kt=0,ci=null,Vr=1,jr="";function ri(t,e){ss[os++]=Kc,ss[os++]=Zc,Zc=t,Kc=e}function Uv(t,e,r){Ct[kt++]=Vr,Ct[kt++]=jr,Ct[kt++]=ci,ci=t;var n=Vr;t=jr;var i=32-Jt(n)-1;n&=~(1<<i),r+=1;var s=32-Jt(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Vr=1<<32-Jt(e)+i|r<<i|n,jr=s+t}else Vr=1<<s|r<<i|n,jr=t}function rp(t){t.return!==null&&(ri(t,1),Uv(t,1,0))}function np(t){for(;t===Zc;)Zc=ss[--os],ss[os]=null,Kc=ss[--os],ss[os]=null;for(;t===ci;)ci=Ct[--kt],Ct[kt]=null,jr=Ct[--kt],Ct[kt]=null,Vr=Ct[--kt],Ct[kt]=null}var _t=null,at=null,ce=!1,Kt=null;function Vv(t,e){var r=Nt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function p1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,at=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,at=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ci!==null?{id:Vr,overflow:jr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Nt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,_t=t,at=null,!0):!1;default:return!1}}function Ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wd(t){if(ce){var e=at;if(e){var r=e;if(!p1(t,e)){if(Ed(t))throw Error(O(418));e=Ur(r.nextSibling);var n=_t;e&&p1(t,e)?Vv(n,r):(t.flags=t.flags&-4097|2,ce=!1,_t=t)}}else{if(Ed(t))throw Error(O(418));t.flags=t.flags&-4097|2,ce=!1,_t=t}}}function m1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function Io(t){if(t!==_t)return!1;if(!ce)return m1(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pd(t.type,t.memoizedProps)),e&&(e=at)){if(Ed(t)){for(t=at;t;)t=Ur(t.nextSibling);throw Error(O(418))}for(;e;)Vv(t,e),e=Ur(e.nextSibling)}if(m1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){at=Ur(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}at=null}}else at=_t?Ur(t.stateNode.nextSibling):null;return!0}function vs(){at=_t=null,ce=!1}function ip(t){Kt===null?Kt=[t]:Kt.push(t)}function Ro(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===zv&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,t))}return t}function Ec(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g1(t){var e=t._init;return e(t._payload)}function jv(t){function e(p,m){if(t){var v=p.deletions;v===null?(p.deletions=[m],p.flags|=16):v.push(m)}}function r(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=Ln(p,m),p.index=0,p.sibling=null,p}function s(p,m,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<m?(p.flags|=2,m):v):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,v,w){return m===null||m.tag!==6?(m=Gh(v,p.mode,w),m.return=p,m):(m=i(m,v),m.return=p,m)}function l(p,m,v,w){var S=v.type;return S===Qi?u(p,m,v.props.children,w,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mn&&g1(S)===m.type)?(w=i(m,v.props),w.ref=Ro(p,m,v),w.return=p,w):(w=Nc(v.type,v.key,v.props,null,p.mode,w),w.ref=Ro(p,m,v),w.return=p,w)}function c(p,m,v,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Wh(v,p.mode,w),m.return=p,m):(m=i(m,v.children||[]),m.return=p,m)}function u(p,m,v,w,S){return m===null||m.tag!==7?(m=ai(v,p.mode,w,S),m.return=p,m):(m=i(m,v),m.return=p,m)}function h(p,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Gh(""+m,p.mode,v),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ac:return v=Nc(m.type,m.key,m.props,null,p.mode,v),v.ref=Ro(p,null,m),v.return=p,v;case Ki:return m=Wh(m,p.mode,v),m.return=p,m;case mn:var w=m._init;return h(p,w(m._payload),v)}if(Do(m)||Po(m))return m=ai(m,p.mode,v,null),m.return=p,m;Ec(p,m)}return null}function f(p,m,v,w){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(p,m,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ac:return v.key===S?l(p,m,v,w):null;case Ki:return v.key===S?c(p,m,v,w):null;case mn:return S=v._init,f(p,m,S(v._payload),w)}if(Do(v)||Po(v))return S!==null?null:u(p,m,v,w,null);Ec(p,v)}return null}function y(p,m,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(v)||null,a(m,p,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ac:return p=p.get(w.key===null?v:w.key)||null,l(m,p,w,S);case Ki:return p=p.get(w.key===null?v:w.key)||null,c(m,p,w,S);case mn:var M=w._init;return y(p,m,v,M(w._payload),S)}if(Do(w)||Po(w))return p=p.get(v)||null,u(m,p,w,S,null);Ec(m,w)}return null}function x(p,m,v,w){for(var S=null,M=null,I=m,b=m=0,D=null;I!==null&&b<v.length;b++){I.index>b?(D=I,I=null):D=I.sibling;var C=f(p,I,v[b],w);if(C===null){I===null&&(I=D);break}t&&I&&C.alternate===null&&e(p,I),m=s(C,m,b),M===null?S=C:M.sibling=C,M=C,I=D}if(b===v.length)return r(p,I),ce&&ri(p,b),S;if(I===null){for(;b<v.length;b++)I=h(p,v[b],w),I!==null&&(m=s(I,m,b),M===null?S=I:M.sibling=I,M=I);return ce&&ri(p,b),S}for(I=n(p,I);b<v.length;b++)D=y(I,p,b,v[b],w),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?b:D.key),m=s(D,m,b),M===null?S=D:M.sibling=D,M=D);return t&&I.forEach(function(j){return e(p,j)}),ce&&ri(p,b),S}function _(p,m,v,w){var S=Po(v);if(typeof S!="function")throw Error(O(150));if(v=S.call(v),v==null)throw Error(O(151));for(var M=S=null,I=m,b=m=0,D=null,C=v.next();I!==null&&!C.done;b++,C=v.next()){I.index>b?(D=I,I=null):D=I.sibling;var j=f(p,I,C.value,w);if(j===null){I===null&&(I=D);break}t&&I&&j.alternate===null&&e(p,I),m=s(j,m,b),M===null?S=j:M.sibling=j,M=j,I=D}if(C.done)return r(p,I),ce&&ri(p,b),S;if(I===null){for(;!C.done;b++,C=v.next())C=h(p,C.value,w),C!==null&&(m=s(C,m,b),M===null?S=C:M.sibling=C,M=C);return ce&&ri(p,b),S}for(I=n(p,I);!C.done;b++,C=v.next())C=y(I,p,b,C.value,w),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?b:C.key),m=s(C,m,b),M===null?S=C:M.sibling=C,M=C);return t&&I.forEach(function(W){return e(p,W)}),ce&&ri(p,b),S}function T(p,m,v,w){if(typeof v=="object"&&v!==null&&v.type===Qi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ac:e:{for(var S=v.key,M=m;M!==null;){if(M.key===S){if(S=v.type,S===Qi){if(M.tag===7){r(p,M.sibling),m=i(M,v.props.children),m.return=p,p=m;break e}}else if(M.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mn&&g1(S)===M.type){r(p,M.sibling),m=i(M,v.props),m.ref=Ro(p,M,v),m.return=p,p=m;break e}r(p,M);break}else e(p,M);M=M.sibling}v.type===Qi?(m=ai(v.props.children,p.mode,w,v.key),m.return=p,p=m):(w=Nc(v.type,v.key,v.props,null,p.mode,w),w.ref=Ro(p,m,v),w.return=p,p=w)}return o(p);case Ki:e:{for(M=v.key;m!==null;){if(m.key===M)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(p,m.sibling),m=i(m,v.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else e(p,m);m=m.sibling}m=Wh(v,p.mode,w),m.return=p,p=m}return o(p);case mn:return M=v._init,T(p,m,M(v._payload),w)}if(Do(v))return x(p,m,v,w);if(Po(v))return _(p,m,v,w);Ec(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(p,m.sibling),m=i(m,v),m.return=p,p=m):(r(p,m),m=Gh(v,p.mode,w),m.return=p,p=m),o(p)):r(p,m)}return T}var ys=jv(!0),Gv=jv(!1),pa={},Sr=Rn(pa),sa=Rn(pa),oa=Rn(pa);function si(t){if(t===pa)throw Error(O(174));return t}function sp(t,e){switch(re(oa,e),re(sa,t),re(Sr,pa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ed(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ed(e,t)}oe(Sr),re(Sr,e)}function xs(){oe(Sr),oe(sa),oe(oa)}function Wv(t){si(oa.current);var e=si(Sr.current),r=ed(e,t.type);e!==r&&(re(sa,t),re(Sr,r))}function op(t){sa.current===t&&(oe(Sr),oe(sa))}var fe=Rn(0);function Qc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zh=[];function ap(){for(var t=0;t<zh.length;t++)zh[t]._workInProgressVersionPrimary=null;zh.length=0}var Rc=$r.ReactCurrentDispatcher,Bh=$r.ReactCurrentBatchConfig,ui=0,he=null,Pe=null,Ce=null,Jc=!1,Wo=!1,aa=0,x3=0;function Ge(){throw Error(O(321))}function lp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!er(t[r],e[r]))return!1;return!0}function cp(t,e,r,n,i,s){if(ui=s,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rc.current=t===null||t.memoizedState===null?T3:M3,t=r(n,i),Wo){s=0;do{if(Wo=!1,aa=0,25<=s)throw Error(O(301));s+=1,Ce=Pe=null,e.updateQueue=null,Rc.current=S3,t=r(n,i)}while(Wo)}if(Rc.current=eu,e=Pe!==null&&Pe.next!==null,ui=0,Ce=Pe=he=null,Jc=!1,e)throw Error(O(300));return t}function up(){var t=aa!==0;return aa=0,t}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?he.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function Bt(){if(Pe===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Ce===null?he.memoizedState:Ce.next;if(e!==null)Ce=e,Pe=t;else{if(t===null)throw Error(O(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ce===null?he.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function la(t,e){return typeof e=="function"?e(t):e}function Uh(t){var e=Bt(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=Pe,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ui&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,he.lanes|=u,fi|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,er(n,e.memoizedState)||(lt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,he.lanes|=s,fi|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Vh(t){var e=Bt(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);er(s,e.memoizedState)||(lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Hv(){}function Yv(t,e){var r=he,n=Bt(),i=e(),s=!er(n.memoizedState,i);if(s&&(n.memoizedState=i,lt=!0),n=n.queue,fp(qv.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ce!==null&&Ce.memoizedState.tag&1){if(r.flags|=2048,ca(9,Xv.bind(null,r,n,i,e),void 0,null),be===null)throw Error(O(349));(ui&30)!==0||$v(r,e,i)}return i}function $v(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Xv(t,e,r,n){e.value=r,e.getSnapshot=n,Zv(e)&&Ft(t,1,-1)}function qv(t,e,r){return r(function(){Zv(e)&&Ft(t,1,-1)})}function Zv(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!er(t,r)}catch(n){return!0}}function v1(t){var e=wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},e.queue=t,t=t.dispatch=w3.bind(null,he,t),[e.memoizedState,t]}function ca(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Kv(){return Bt().memoizedState}function Oc(t,e,r,n){var i=wr();he.flags|=t,i.memoizedState=ca(1|e,r,void 0,n===void 0?null:n)}function pu(t,e,r,n){var i=Bt();n=n===void 0?null:n;var s=void 0;if(Pe!==null){var o=Pe.memoizedState;if(s=o.destroy,n!==null&&lp(n,o.deps)){i.memoizedState=ca(e,r,s,n);return}}he.flags|=t,i.memoizedState=ca(1|e,r,s,n)}function y1(t,e){return Oc(8390656,8,t,e)}function fp(t,e){return pu(2048,8,t,e)}function Qv(t,e){return pu(4,2,t,e)}function Jv(t,e){return pu(4,4,t,e)}function ey(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ty(t,e,r){return r=r!=null?r.concat([t]):null,pu(4,4,ey.bind(null,e,t),r)}function hp(){}function ry(t,e){var r=Bt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&lp(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function ny(t,e){var r=Bt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&lp(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function iy(t,e,r){return(ui&21)===0?(t.baseState&&(t.baseState=!1,lt=!0),t.memoizedState=r):(er(r,e)||(r=uv(),he.lanes|=r,fi|=r,t.baseState=!0),e)}function _3(t,e){var r=Z;Z=r!==0&&4>r?r:4,t(!0);var n=Bh.transition;Bh.transition={};try{t(!1),e()}finally{Z=r,Bh.transition=n}}function sy(){return Bt().memoizedState}function E3(t,e,r){var n=Pn(t);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},oy(t)?ay(e,r):(ly(t,e,r),r=et(),t=Ft(t,n,r),t!==null&&cy(t,e,n))}function w3(t,e,r){var n=Pn(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(oy(t))ay(e,i);else{ly(t,e,i);var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,er(a,o))return}catch(l){}finally{}r=et(),t=Ft(t,n,r),t!==null&&cy(t,e,n)}}function oy(t){var e=t.alternate;return t===he||e!==null&&e===he}function ay(t,e){Wo=Jc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ly(t,e,r){Py(t)?(t=e.interleaved,t===null?(r.next=r,Qt===null?Qt=[e]:Qt.push(e)):(r.next=t.next,t.next=r),e.interleaved=r):(t=e.pending,t===null?r.next=r:(r.next=t.next,t.next=r),e.pending=r)}function cy(t,e,r){if((r&4194240)!==0){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wd(t,r)}}var eu={readContext:zt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},T3={readContext:zt,useCallback:function(t,e){return wr().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:y1,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Oc(4194308,4,ey.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oc(4,2,t,e)},useMemo:function(t,e){var r=wr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=wr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=E3.bind(null,he,t),[n.memoizedState,t]},useRef:function(t){var e=wr();return t={current:t},e.memoizedState=t},useState:v1,useDebugValue:hp,useDeferredValue:function(t){return wr().memoizedState=t},useTransition:function(){var t=v1(!1),e=t[0];return t=_3.bind(null,t[1]),wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=he,i=wr();if(ce){if(r===void 0)throw Error(O(407));r=r()}else{if(r=e(),be===null)throw Error(O(349));(ui&30)!==0||$v(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,y1(qv.bind(null,n,s,t),[t]),n.flags|=2048,ca(9,Xv.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=wr(),e=be.identifierPrefix;if(ce){var r=jr,n=Vr;r=(n&~(1<<32-Jt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=aa++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=x3++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},M3={readContext:zt,useCallback:ry,useContext:zt,useEffect:fp,useImperativeHandle:ty,useInsertionEffect:Qv,useLayoutEffect:Jv,useMemo:ny,useReducer:Uh,useRef:Kv,useState:function(){return Uh(la)},useDebugValue:hp,useDeferredValue:function(t){var e=Bt();return iy(e,Pe.memoizedState,t)},useTransition:function(){var t=Uh(la)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:Yv,useId:sy,unstable_isNewReconciler:!1},S3={readContext:zt,useCallback:ry,useContext:zt,useEffect:fp,useImperativeHandle:ty,useInsertionEffect:Qv,useLayoutEffect:Jv,useMemo:ny,useReducer:Vh,useRef:Kv,useState:function(){return Vh(la)},useDebugValue:hp,useDeferredValue:function(t){var e=Bt();return Pe===null?e.memoizedState=t:iy(e,Pe.memoizedState,t)},useTransition:function(){var t=Vh(la)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:Yv,useId:sy,unstable_isNewReconciler:!1};function dp(t,e){try{var r="",n=e;do r+=tM(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function Td(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var P3=typeof WeakMap=="function"?WeakMap:Map;function uy(t,e,r){r=Gr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ru||(ru=!0,Od=n),Td(t,e)},r}function fy(t,e,r){r=Gr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Td(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Td(t,e),typeof n!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function x1(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new P3;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=B3.bind(null,t,e,r),e.then(t,t))}function _1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function E1(t,e,r,n,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Gr(-1,1),e.tag=2,Mn(r,e))),r.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var hy,Md,dy,py;hy=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Md=function(){};dy=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,si(Sr.current);var s=null;switch(r){case"input":i=Zh(t,i),n=Zh(t,n),s=[];break;case"select":i=de({},i,{value:void 0}),n=de({},n,{value:void 0}),s=[];break;case"textarea":i=Jh(t,i),n=Jh(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Wc)}td(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xo.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};py=function(t,e,r,n){r!==n&&(e.flags|=4)};function Oo(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function A3(t,e,r){var n=e.pendingProps;switch(np(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return ut(e.type)&&Hc(),We(e),null;case 3:return n=e.stateNode,xs(),oe(ct),oe(Ye),ap(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Io(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Kt!==null&&(Nd(Kt),Kt=null))),Md(t,e),We(e),null;case 5:op(e);var i=si(oa.current);if(r=e.type,t!==null&&e.stateNode!=null)dy(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(O(166));return We(e),null}if(t=si(Sr.current),Io(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Tr]=e,n[ia]=s,t=(e.mode&1)!==0,r){case"dialog":se("cancel",n),se("close",n);break;case"iframe":case"object":case"embed":se("load",n);break;case"video":case"audio":for(i=0;i<zo.length;i++)se(zo[i],n);break;case"source":se("error",n);break;case"img":case"image":case"link":se("error",n),se("load",n);break;case"details":se("toggle",n);break;case"input":k0(n,s),se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},se("invalid",n);break;case"textarea":D0(n,s),se("invalid",n)}td(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&_c(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_c(n.textContent,a,t),i=["children",""+a]):Xo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",n)}switch(r){case"input":lc(n),N0(n,s,!0);break;case"textarea":lc(n),F0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Wc)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Tr]=e,t[ia]=n,hy(t,e,!1,!1),e.stateNode=t;e:{switch(o=rd(r,n),r){case"dialog":se("cancel",t),se("close",t),i=n;break;case"iframe":case"object":case"embed":se("load",t),i=n;break;case"video":case"audio":for(i=0;i<zo.length;i++)se(zo[i],t);i=n;break;case"source":se("error",t),i=n;break;case"img":case"image":case"link":se("error",t),se("load",t),i=n;break;case"details":se("toggle",t),i=n;break;case"input":k0(t,n),i=Zh(t,n),se("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=de({},n,{value:void 0}),se("invalid",t);break;case"textarea":D0(t,n),i=Jh(t,n),se("invalid",t);break;default:i=n}td(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Q1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Z1(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&qo(t,l):typeof l=="number"&&qo(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xo.hasOwnProperty(s)?l!=null&&s==="onScroll"&&se("scroll",t):l!=null&&zd(t,s,l,o))}switch(r){case"input":lc(t),N0(t,n,!1);break;case"textarea":lc(t),F0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+An(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?cs(t,!!n.multiple,s,!1):n.defaultValue!=null&&cs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Wc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)py(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(O(166));if(r=si(oa.current),si(Sr.current),Io(e)){if(n=e.stateNode,r=e.memoizedProps,n[Tr]=e,(s=n.nodeValue!==r)&&(t=_t,t!==null))switch(t.tag){case 3:_c(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_c(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Tr]=e,e.stateNode=n}return We(e),null;case 13:if(oe(fe),n=e.memoizedState,ce&&at!==null&&(e.mode&1)!==0&&(e.flags&128)===0){for(n=at;n;)n=Ur(n.nextSibling);return vs(),e.flags|=98560,e}if(n!==null&&n.dehydrated!==null){if(n=Io(e),t===null){if(!n)throw Error(O(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(O(317));n[Tr]=e}else vs(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return We(e),null}return Kt!==null&&(Nd(Kt),Kt=null),(e.flags&128)!==0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?Io(e):r=t.memoizedState!==null,n!==r&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(fe.current&1)!==0?Ae===0&&(Ae=3):xp())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return xs(),Md(t,e),t===null&&ra(e.stateNode.containerInfo),We(e),null;case 10:return ep(e.type._context),We(e),null;case 17:return ut(e.type)&&Hc(),We(e),null;case 19:if(oe(fe),s=e.memoizedState,s===null)return We(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Oo(s,!1);else{if(Ae!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Qc(t),o!==null){for(e.flags|=128,Oo(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return re(fe,fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ve()>_s&&(e.flags|=128,n=!0,Oo(s,!1),e.lanes=4194304)}else{if(!n)if(t=Qc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Oo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ce)return We(e),null}else 2*ve()-s.renderingStartTime>_s&&r!==1073741824&&(e.flags|=128,n=!0,Oo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ve(),e.sibling=null,r=fe.current,re(fe,n?r&1|2:r&1),e):(We(e),null);case 22:case 23:return yp(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(xt&1073741824)!==0&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}var b3=$r.ReactCurrentOwner,lt=!1;function Je(t,e,r,n){e.child=t===null?Gv(e,null,r,n):ys(e,t.child,r,n)}function w1(t,e,r,n,i){r=r.render;var s=e.ref;return ds(e,i),n=cp(t,e,r,n,s,i),r=up(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yr(t,e,i)):(ce&&r&&rp(e),e.flags|=1,Je(t,e,n,i),e.child)}function T1(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!_p(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,my(t,e,s,n,i)):(t=Nc(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:ta,r(o,n)&&t.ref===e.ref)return Yr(t,e,i)}return e.flags|=1,t=Ln(s,n),t.ref=e.ref,t.return=e,e.child=t}function my(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(ta(s,n)&&t.ref===e.ref)if(lt=!1,e.pendingProps=n=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(lt=!0);else return e.lanes=t.lanes,Yr(t,e,i)}return Sd(t,e,r,n,i)}function gy(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(ls,xt),xt|=r;else if((r&1073741824)!==0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,re(ls,xt),xt|=n;else return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(ls,xt),xt|=t,null;else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,re(ls,xt),xt|=n;return Je(t,e,i,r),e.child}function vy(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Sd(t,e,r,n,i){var s=ut(r)?li:Ye.current;return s=gs(e,s),ds(e,i),r=cp(t,e,r,n,s,i),n=up(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yr(t,e,i)):(ce&&n&&rp(e),e.flags|=1,Je(t,e,r,i),e.child)}function M1(t,e,r,n,i){if(ut(r)){var s=!0;Yc(e)}else s=!1;if(ds(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),Bv(e,r,n),_d(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=zt(c):(c=ut(r)?li:Ye.current,c=gs(e,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&d1(e,o,n,c),gn=!1;var f=e.memoizedState;o.state=f,qc(e,n,o,i),l=e.memoizedState,a!==n||f!==l||ct.current||gn?(typeof u=="function"&&(xd(e,r,u,n),l=e.memoizedState),(a=gn||h1(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Fv(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:qt(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=zt(l):(l=ut(r)?li:Ye.current,l=gs(e,l));var y=r.getDerivedStateFromProps;(u=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&d1(e,o,n,l),gn=!1,f=e.memoizedState,o.state=f,qc(e,n,o,i);var x=e.memoizedState;a!==h||f!==x||ct.current||gn?(typeof y=="function"&&(xd(e,r,y,n),x=e.memoizedState),(c=gn||h1(e,r,c,n,f,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Pd(t,e,r,n,s,i)}function Pd(t,e,r,n,i,s){vy(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&c1(e,r,!1),Yr(t,e,s);n=e.stateNode,b3.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=ys(e,t.child,null,s),e.child=ys(e,null,a,s)):Je(t,e,a,s),e.memoizedState=n.state,i&&c1(e,r,!0),e.child}function yy(t){var e=t.stateNode;e.pendingContext?l1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l1(t,e.context,!1),sp(t,e.containerInfo)}function S1(t,e,r,n,i){return vs(),ip(i),e.flags|=256,Je(t,e,r,n),e.child}var wc={dehydrated:null,treeContext:null,retryLane:0};function Tc(t){return{baseLanes:t,cachePool:null,transitions:null}}function P1(t,e){return{baseLanes:t.baseLanes|e,cachePool:null,transitions:t.transitions}}function xy(t,e,r){var n=e.pendingProps,i=fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),re(fe,i&1),t===null)return wd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=i):s=su(i,n,0,null),t=ai(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Tc(r),e.memoizedState=wc,t):Ad(e,i));if(i=t.memoizedState,i!==null){if(a=i.dehydrated,a!==null){if(o)return e.flags&256?(e.flags&=-257,Mc(t,e,r,Error(O(422)))):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=su({mode:"visible",children:n.children},i,0,null),s=ai(s,i,r,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,(e.mode&1)!==0&&ys(e,t.child,null,r),e.child.memoizedState=Tc(r),e.memoizedState=wc,s);if((e.mode&1)===0)e=Mc(t,e,r,null);else if(a.data==="$!")e=Mc(t,e,r,Error(O(419)));else if(n=(r&t.childLanes)!==0,lt||n){if(n=be,n!==null){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}n=(s&(n.suspendedLanes|r))!==0?0:s,n!==0&&n!==i.retryLane&&(i.retryLane=n,Ft(t,n,-1))}xp(),e=Mc(t,e,r,Error(O(421)))}else a.data==="$?"?(e.flags|=128,e.child=t.child,e=U3.bind(null,t),a._reactRetry=e,e=null):(r=i.treeContext,at=Ur(a.nextSibling),_t=e,ce=!0,Kt=null,r!==null&&(Ct[kt++]=Vr,Ct[kt++]=jr,Ct[kt++]=ci,Vr=r.id,jr=r.overflow,ci=e),e=Ad(e,e.pendingProps.children),e.flags|=4096);return e}return s?(n=b1(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?Tc(r):P1(i,r),s.childLanes=t.childLanes&~r,e.memoizedState=wc,n):(r=A1(t,e,n.children,r),e.memoizedState=null,r)}return s?(n=b1(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?Tc(r):P1(i,r),s.childLanes=t.childLanes&~r,e.memoizedState=wc,n):(r=A1(t,e,n.children,r),e.memoizedState=null,r)}function Ad(t,e){return e=su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function A1(t,e,r,n){var i=t.child;return t=i.sibling,r=Ln(i,{mode:"visible",children:r}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r}function b1(t,e,r,n,i){var s=e.mode;t=t.child;var o=t.sibling,a={mode:"hidden",children:r};return(s&1)===0&&e.child!==t?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Ln(t,a),r.subtreeFlags=t.subtreeFlags&14680064),o!==null?n=Ln(o,n):(n=ai(n,s,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function Mc(t,e,r,n){return n!==null&&ip(n),ys(e,t.child,null,r),t=Ad(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L1(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),yd(t.return,e,r)}function jh(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function _y(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Je(t,e,n.children,r),n=fe.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L1(t,r,e);else if(t.tag===19)L1(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(re(fe,n),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Qc(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),jh(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Qc(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}jh(e,!0,r,null,s);break;case"together":jh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),fi|=e.lanes,(r&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,r=Ln(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ln(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function L3(t,e,r){switch(e.tag){case 3:yy(e),vs();break;case 5:Wv(e);break;case 1:ut(e.type)&&Yc(e);break;case 4:sp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;re($c,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(re(fe,fe.current&1),e.flags|=128,null):(r&e.child.childLanes)!==0?xy(t,e,r):(re(fe,fe.current&1),t=Yr(t,e,r),t!==null?t.sibling:null);re(fe,fe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&128)!==0){if(n)return _y(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),re(fe,fe.current),n)break;return null;case 22:case 23:return e.lanes=0,gy(t,e,r)}return Yr(t,e,r)}function I3(t,e){switch(np(e),e.tag){case 1:return ut(e.type)&&Hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xs(),oe(ct),oe(Ye),ap(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return op(e),null;case 13:if(oe(fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(fe),null;case 4:return xs(),null;case 10:return ep(e.type._context),null;case 22:case 23:return yp(),null;case 24:return null;default:return null}}var Sc=!1,He=!1,R3=typeof WeakSet=="function"?WeakSet:Set,z=null;function as(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){pe(t,e,n)}else r.current=null}function bd(t,e,r){try{r()}catch(n){pe(t,e,n)}}var I1=!1;function O3(t,e){if(hd=Vc,t=Pv(),Kd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(S){r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var y;h!==r||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===r&&++c===i&&(a=o),f===s&&++u===n&&(l=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(dd={focusedElem:t,selectionRange:r},Vc=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var x=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var _=x.memoizedProps,T=x.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?_:qt(e.type,_),T);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;if(v.nodeType===1)v.textContent="";else if(v.nodeType===9){var w=v.body;w!=null&&(w.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(S){pe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return x=I1,I1=!1,x}function Ho(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bd(e,r,s)}i=i.next}while(i!==n)}}function mu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ld(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Ey(t){var e=t.alternate;e!==null&&(t.alternate=null,Ey(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tr],delete e[ia],delete e[gd],delete e[m3],delete e[g3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wy(t){return t.tag===5||t.tag===3||t.tag===4}function R1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Id(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Wc));else if(n!==4&&(t=t.child,t!==null))for(Id(t,e,r),t=t.sibling;t!==null;)Id(t,e,r),t=t.sibling}function Rd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Rd(t,e,r),t=t.sibling;t!==null;)Rd(t,e,r),t=t.sibling}var De=null,Zt=!1;function pn(t,e,r){for(r=r.child;r!==null;)Ty(t,e,r),r=r.sibling}function Ty(t,e,r){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(au,r)}catch(a){}switch(r.tag){case 5:He||as(r,e);case 6:var n=De,i=Zt;De=null,pn(t,e,r),De=n,Zt=i,De!==null&&(Zt?(t=De,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):De.removeChild(r.stateNode));break;case 18:De!==null&&(Zt?(t=De,r=r.stateNode,t.nodeType===8?Dh(t.parentNode,r):t.nodeType===1&&Dh(t,r),Jo(t)):Dh(De,r.stateNode));break;case 4:n=De,i=Zt,De=r.stateNode.containerInfo,Zt=!0,pn(t,e,r),De=n,Zt=i;break;case 0:case 11:case 14:case 15:if(!He&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&bd(r,e,o),i=i.next}while(i!==n)}pn(t,e,r);break;case 1:if(!He&&(as(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){pe(r,e,a)}pn(t,e,r);break;case 21:pn(t,e,r);break;case 22:r.mode&1?(He=(n=He)||r.memoizedState!==null,pn(t,e,r),He=n):pn(t,e,r);break;default:pn(t,e,r)}}function O1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new R3),e.forEach(function(n){var i=V3.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Xt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:De=a.stateNode,Zt=!1;break e;case 3:De=a.stateNode.containerInfo,Zt=!0;break e;case 4:De=a.stateNode.containerInfo,Zt=!0;break e}a=a.return}if(De===null)throw Error(O(160));Ty(s,o,i),De=null,Zt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){pe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)My(e,t),e=e.sibling}function My(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),Er(t),n&4){try{Ho(3,t,t.return),mu(3,t)}catch(x){pe(t,t.return,x)}try{Ho(5,t,t.return)}catch(x){pe(t,t.return,x)}}break;case 1:Xt(e,t),Er(t),n&512&&r!==null&&as(r,r.return);break;case 5:if(Xt(e,t),Er(t),n&512&&r!==null&&as(r,r.return),t.flags&32){var i=t.stateNode;try{qo(i,"")}catch(x){pe(t,t.return,x)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&$1(i,s),rd(a,o);var c=rd(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Q1(i,h):u==="dangerouslySetInnerHTML"?Z1(i,h):u==="children"?qo(i,h):zd(i,u,h,c)}switch(a){case"input":Kh(i,s);break;case"textarea":X1(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?cs(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?cs(i,!!s.multiple,s.defaultValue,!0):cs(i,!!s.multiple,s.multiple?[]:"",!1))}i[ia]=s}catch(x){pe(t,t.return,x)}}break;case 6:if(Xt(e,t),Er(t),n&4){if(t.stateNode===null)throw Error(O(162));c=t.stateNode,u=t.memoizedProps;try{c.nodeValue=u}catch(x){pe(t,t.return,x)}}break;case 3:if(Xt(e,t),Er(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Jo(e.containerInfo)}catch(x){pe(t,t.return,x)}break;case 4:Xt(e,t),Er(t);break;case 13:Xt(e,t),Er(t),c=t.child,c.flags&8192&&c.memoizedState!==null&&(c.alternate===null||c.alternate.memoizedState===null)&&(gp=ve()),n&4&&O1(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(He=(u=He)||c,Xt(e,t),He=u):Xt(e,t),Er(t),n&8192){u=t.memoizedState!==null;e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=K1("display",o))}catch(x){pe(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){pe(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}if(u&&!c&&(t.mode&1)!==0)for(z=t,t=t.child;t!==null;){for(c=z=t;z!==null;){switch(u=z,h=u.child,u.tag){case 0:case 11:case 14:case 15:Ho(4,u,u.return);break;case 1:if(as(u,u.return),s=u.stateNode,typeof s.componentWillUnmount=="function"){f=u,y=u.return;try{i=f,s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(x){pe(f,y,x)}}break;case 5:as(u,u.return);break;case 22:if(u.memoizedState!==null){k1(c);continue}}h!==null?(h.return=u,z=h):k1(c)}t=t.sibling}}break;case 19:Xt(e,t),Er(t),n&4&&O1(t);break;case 21:break;default:Xt(e,t),Er(t)}}function Er(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(wy(r)){var n=r;break e}r=r.return}throw Error(O(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(qo(i,""),n.flags&=-33);var s=R1(t);Rd(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=R1(t);Id(t,a,o);break;default:throw Error(O(161))}}catch(l){pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function C3(t,e,r){z=t,Sy(t,e,r)}function Sy(t,e,r){for(var n=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Sc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||He;a=Sc;var c=He;if(Sc=o,(He=l)&&!c)for(z=i;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?N1(i):l!==null?(l.return=o,z=l):N1(i);for(;s!==null;)z=s,Sy(s,e,r),s=s.sibling;z=i,Sc=a,He=c}C1(t,e,r)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,z=s):C1(t,e,r)}}function C1(t){for(;z!==null;){var e=z;if((e.flags&8772)!==0){var r=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:He||mu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!He)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:qt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&f1(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}f1(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Jo(h)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(O(163))}He||e.flags&512&&Ld(e)}catch(f){pe(e,e.return,f)}}if(e===t){z=null;break}if(r=e.sibling,r!==null){r.return=e.return,z=r;break}z=e.return}}function k1(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var r=e.sibling;if(r!==null){r.return=e.return,z=r;break}z=e.return}}function N1(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mu(4,e)}catch(l){pe(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){pe(e,i,l)}}var s=e.return;try{Ld(e)}catch(l){pe(e,s,l)}break;case 5:var o=e.return;try{Ld(e)}catch(l){pe(e,o,l)}}}catch(l){pe(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var k3=Math.ceil,tu=$r.ReactCurrentDispatcher,pp=$r.ReactCurrentOwner,Dt=$r.ReactCurrentBatchConfig,q=0,be=null,Me=null,Fe=0,xt=0,ls=Rn(0),Ae=0,ua=null,fi=0,gu=0,mp=0,Yo=null,ot=null,gp=0,_s=1/0,zr=null,ru=!1,Od=null,Sn=null,Pc=!1,_n=null,nu=0,$o=0,Cd=null,Cc=-1,kc=0;function et(){return(q&6)!==0?ve():Cc!==-1?Cc:Cc=ve()}function Pn(t){return(t.mode&1)===0?1:(q&2)!==0&&Fe!==0?Fe&-Fe:y3.transition!==null?(kc===0&&(kc=uv()),kc):(t=Z,t!==0||(t=window.event,t=t===void 0?16:vv(t.type)),t)}function Ft(t,e,r){if(50<$o)throw $o=0,Cd=null,Error(O(185));var n=vu(t,e);return n===null?null:(fa(n,e,r),((q&2)===0||n!==be)&&(n===be&&((q&2)===0&&(gu|=e),Ae===4&&yn(n,Fe)),ft(n,r),e===1&&q===0&&(t.mode&1)===0&&(_s=ve()+500,hu&&On())),n)}function vu(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function Py(t){return(be!==null||Qt!==null)&&(t.mode&1)!==0&&(q&2)===0}function ft(t,e){var r=t.callbackNode;_M(t,e);var n=Uc(t,t===be?Fe:0);if(n===0)r!==null&&U0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&U0(r),e===1)t.tag===0?v3(D1.bind(null,t)):Dv(D1.bind(null,t)),d3(function(){q===0&&On()}),r=null;else{switch(fv(n)){case 1:r=Gd;break;case 4:r=lv;break;case 16:r=Bc;break;case 536870912:r=cv;break;default:r=Bc}r=ky(r,Ay.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ay(t,e){if(Cc=-1,kc=0,(q&6)!==0)throw Error(O(327));var r=t.callbackNode;if(ps()&&t.callbackNode!==r)return null;var n=Uc(t,t===be?Fe:0);if(n===0)return null;if((n&30)!==0||(n&t.expiredLanes)!==0||e)e=iu(t,n);else{e=n;var i=q;q|=2;var s=Ly();(be!==t||Fe!==e)&&(zr=null,_s=ve()+500,oi(t,e));do try{F3();break}catch(a){by(t,a)}while(1);Jd(),tu.current=s,q=i,Me!==null?e=0:(be=null,Fe=0,e=Ae)}if(e!==0){if(e===2&&(i=ad(t),i!==0&&(n=i,e=kd(t,i))),e===1)throw r=ua,oi(t,0),yn(t,n),ft(t,ve()),r;if(e===6)yn(t,n);else{if(i=t.current.alternate,(n&30)===0&&!N3(i)&&(e=iu(t,n),e===2&&(s=ad(t),s!==0&&(n=s,e=kd(t,s))),e===1))throw r=ua,oi(t,0),yn(t,n),ft(t,ve()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(O(345));case 2:ni(t,ot,zr);break;case 3:if(yn(t,n),(n&130023424)===n&&(e=gp+500-ve(),10<e)){if(Uc(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=md(ni.bind(null,t,ot,zr),e);break}ni(t,ot,zr);break;case 4:if(yn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Jt(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*k3(n/1960))-n,10<n){t.timeoutHandle=md(ni.bind(null,t,ot,zr),n);break}ni(t,ot,zr);break;case 5:ni(t,ot,zr);break;default:throw Error(O(329))}}}return ft(t,ve()),t.callbackNode===r?Ay.bind(null,t):null}function kd(t,e){var r=Yo;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=iu(t,e),t!==2&&(e=ot,ot=r,e!==null&&Nd(e)),t}function Nd(t){ot===null?ot=t:ot.push.apply(ot,t)}function N3(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!er(s(),i))return!1}catch(o){return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yn(t,e){for(e&=~mp,e&=~gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Jt(e),n=1<<r;t[r]=-1,e&=~n}}function D1(t){if((q&6)!==0)throw Error(O(327));ps();var e=Uc(t,0);if((e&1)===0)return ft(t,ve()),null;var r=iu(t,e);if(t.tag!==0&&r===2){var n=ad(t);n!==0&&(e=n,r=kd(t,n))}if(r===1)throw r=ua,oi(t,0),yn(t,e),ft(t,ve()),r;if(r===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ni(t,ot,zr),ft(t,ve()),null}function vp(t,e){var r=q;q|=1;try{return t(e)}finally{q=r,q===0&&(_s=ve()+500,hu&&On())}}function hi(t){_n!==null&&_n.tag===0&&(q&6)===0&&ps();var e=q;q|=1;var r=Dt.transition,n=Z;try{if(Dt.transition=null,Z=1,t)return t()}finally{Z=n,Dt.transition=r,q=e,(q&6)===0&&On()}}function yp(){xt=ls.current,oe(ls)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,h3(r)),Me!==null)for(r=Me.return;r!==null;){var n=r;switch(np(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Hc();break;case 3:xs(),oe(ct),oe(Ye),ap();break;case 5:op(n);break;case 4:xs();break;case 13:oe(fe);break;case 19:oe(fe);break;case 10:ep(n.type._context);break;case 22:case 23:yp()}r=r.return}if(be=t,Me=t=Ln(t.current,null),Fe=xt=e,Ae=0,ua=null,mp=gu=fi=0,ot=Yo=null,Qt!==null){for(e=0;e<Qt.length;e++)if(r=Qt[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Qt=null}return t}function by(t,e){do{var r=Me;try{if(Jd(),Rc.current=eu,Jc){for(var n=he.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jc=!1}if(ui=0,Ce=Pe=he=null,Wo=!1,aa=0,pp.current=null,r===null||r.return===null){Ae=1,ua=e,Me=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Fe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if((u.mode&1)===0&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=_1(o);if(y!==null){y.flags&=-257,E1(y,o,a,s,e),y.mode&1&&x1(s,c,e),e=y,l=c;var x=e.updateQueue;if(x===null){var _=new Set;_.add(l),e.updateQueue=_}else x.add(l);break e}else{if((e&1)===0){x1(s,c,e),xp();break e}l=Error(O(426))}}else if(ce&&a.mode&1){var T=_1(o);if(T!==null){(T.flags&65536)===0&&(T.flags|=256),E1(T,o,a,s,e),ip(l);break e}}s=l,Ae!==4&&(Ae=2),Yo===null?Yo=[s]:Yo.push(s),l=dp(l,a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var p=uy(a,l,e);u1(a,p);break e;case 1:s=l;var m=a.type,v=a.stateNode;if((a.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Sn===null||!Sn.has(v)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=fy(a,s,e);u1(a,w);break e}}a=a.return}while(a!==null)}Ry(r)}catch(S){e=S,Me===r&&r!==null&&(Me=r=r.return);continue}break}while(1)}function Ly(){var t=tu.current;return tu.current=eu,t===null?eu:t}function xp(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),be===null||(fi&268435455)===0&&(gu&268435455)===0||yn(be,Fe)}function iu(t,e){var r=q;q|=2;var n=Ly();(be!==t||Fe!==e)&&(zr=null,oi(t,e));do try{D3();break}catch(i){by(t,i)}while(1);if(Jd(),q=r,tu.current=n,Me!==null)throw Error(O(261));return be=null,Fe=0,Ae}function D3(){for(;Me!==null;)Iy(Me)}function F3(){for(;Me!==null&&!fM();)Iy(Me)}function Iy(t){var e=Cy(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?Ry(t):Me=e,pp.current=null}function Ry(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&32768)===0){if(r=A3(r,e,xt),r!==null){Me=r;return}}else{if(r=I3(r,e),r!==null){r.flags&=32767,Me=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ae=6,Me=null;return}}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Ae===0&&(Ae=5)}function ni(t,e,r){var n=Z,i=Dt.transition;try{Dt.transition=null,Z=1,z3(t,e,r,n)}finally{Dt.transition=i,Z=n}return null}function z3(t,e,r,n){do ps();while(_n!==null);if((q&6)!==0)throw Error(O(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(EM(t,s),t===be&&(Me=be=null,Fe=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Pc||(Pc=!0,ky(Bc,function(){return ps(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=Dt.transition,Dt.transition=null;var o=Z;Z=1;var a=q;q|=4,pp.current=null,O3(t,r),My(r,t),a3(dd),Vc=!!hd,dd=hd=null,t.current=r,C3(r,t,i),hM(),q=a,Z=o,Dt.transition=s}else t.current=r;if(Pc&&(Pc=!1,_n=t,nu=i),s=t.pendingLanes,s===0&&(Sn=null),mM(r.stateNode,n),ft(t,ve()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)n(e[r]);if(ru)throw ru=!1,t=Od,Od=null,t;return(nu&1)!==0&&t.tag!==0&&ps(),s=t.pendingLanes,(s&1)!==0?t===Cd?$o++:($o=0,Cd=t):$o=0,On(),null}function ps(){if(_n!==null){var t=fv(nu),e=Dt.transition,r=Z;try{if(Dt.transition=null,Z=16>t?16:t,_n===null)var n=!1;else{if(t=_n,_n=null,nu=0,(q&6)!==0)throw Error(O(331));var i=q;for(q|=4,z=t.current;z!==null;){var s=z,o=s.child;if((z.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var u=z;switch(u.tag){case 0:case 11:case 15:Ho(8,u,s)}var h=u.child;if(h!==null)h.return=u,z=h;else for(;z!==null;){u=z;var f=u.sibling,y=u.return;if(Ey(u),u===c){z=null;break}if(f!==null){f.return=y,z=f;break}z=y}}}var x=s.alternate;if(x!==null){var _=x.child;if(_!==null){x.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}z=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Ho(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,z=p;break e}z=s.return}}var m=t.current;for(z=m;z!==null;){o=z;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,z=v;else e:for(o=m;z!==null;){if(a=z,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:mu(9,a)}}catch(S){pe(a,a.return,S)}if(a===o){z=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,z=w;break e}z=a.return}}if(q=i,On(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(au,t)}catch(S){}n=!0}return n}finally{Z=r,Dt.transition=e}}return!1}function F1(t,e,r){e=dp(r,e),e=uy(t,e,1),Mn(t,e),e=et(),t=vu(t,1),t!==null&&(fa(t,1,e),ft(t,e))}function pe(t,e,r){if(t.tag===3)F1(t,t,r);else for(;e!==null;){if(e.tag===3){F1(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Sn===null||!Sn.has(n))){t=dp(r,t),t=fy(e,t,1),Mn(e,t),t=et(),e=vu(e,1),e!==null&&(fa(e,1,t),ft(e,t));break}}e=e.return}}function B3(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=et(),t.pingedLanes|=t.suspendedLanes&r,be===t&&(Fe&r)===r&&(Ae===4||Ae===3&&(Fe&130023424)===Fe&&500>ve()-gp?oi(t,0):mp|=r),ft(t,e)}function Oy(t,e){e===0&&((t.mode&1)===0?e=1:(e=fc,fc<<=1,(fc&130023424)===0&&(fc=4194304)));var r=et();t=vu(t,e),t!==null&&(fa(t,e,r),ft(t,r))}function U3(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Oy(t,r)}function V3(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(e),Oy(t,r)}var Cy;Cy=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ct.current)lt=!0;else{if((t.lanes&r)===0&&(e.flags&128)===0)return lt=!1,L3(t,e,r);lt=(t.flags&131072)!==0}else lt=!1,ce&&(e.flags&1048576)!==0&&Uv(e,Kc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=gs(e,Ye.current);ds(e,r),i=cp(null,e,n,t,i,r);var s=up();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ut(n)?(s=!0,Yc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tp(e),i.updater=du,e.stateNode=i,i._reactInternals=e,_d(e,n,t,r),e=Pd(null,e,n,!0,s,r)):(e.tag=0,ce&&s&&rp(e),Je(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=G3(n),t=qt(n,t),i){case 0:e=Sd(null,e,n,t,r);break e;case 1:e=M1(null,e,n,t,r);break e;case 11:e=w1(null,e,n,t,r);break e;case 14:e=T1(null,e,n,qt(n.type,t),r);break e}throw Error(O(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qt(n,i),Sd(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qt(n,i),M1(t,e,n,i,r);case 3:e:{if(yy(e),t===null)throw Error(O(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Fv(t,e),qc(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Error(O(423)),e=S1(t,e,n,r,i);break e}else if(n!==i){i=Error(O(424)),e=S1(t,e,n,r,i);break e}else for(at=Ur(e.stateNode.containerInfo.firstChild),_t=e,ce=!0,Kt=null,r=Gv(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vs(),n===i){e=Yr(t,e,r);break e}Je(t,e,n,r)}e=e.child}return e;case 5:return Wv(e),t===null&&wd(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,pd(n,i)?o=null:s!==null&&pd(n,s)&&(e.flags|=32),vy(t,e),Je(t,e,o,r),e.child;case 6:return t===null&&wd(e),null;case 13:return xy(t,e,r);case 4:return sp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ys(e,null,n,r):Je(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qt(n,i),w1(t,e,n,i,r);case 7:return Je(t,e,e.pendingProps,r),e.child;case 8:return Je(t,e,e.pendingProps.children,r),e.child;case 12:return Je(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,re($c,n._currentValue),n._currentValue=o,s!==null)if(er(s.value,o)){if(s.children===i.children&&!ct.current){e=Yr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Gr(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),yd(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),yd(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Je(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ds(e,r),i=zt(i),n=n(i),e.flags|=1,Je(t,e,n,r),e.child;case 14:return n=e.type,i=qt(n,e.pendingProps),i=qt(n.type,i),T1(t,e,n,i,r);case 15:return my(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:qt(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,ut(n)?(t=!0,Yc(e)):t=!1,ds(e,r),Bv(e,n,i),_d(e,n,i,r),Pd(null,e,n,!0,t,r);case 19:return _y(t,e,r);case 22:return gy(t,e,r)}throw Error(O(156,e.tag))};function ky(t,e){return av(t,e)}function j3(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(t,e,r,n){return new j3(t,e,r,n)}function _p(t){return t=t.prototype,!(!t||!t.isReactComponent)}function G3(t){if(typeof t=="function")return _p(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ud)return 11;if(t===Vd)return 14}return 2}function Ln(t,e){var r=t.alternate;return r===null?(r=Nt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Nc(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")_p(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qi:return ai(r.children,i,s,e);case Bd:o=8,i|=8;break;case Yh:return t=Nt(12,r,e,i|2),t.elementType=Yh,t.lanes=s,t;case $h:return t=Nt(13,r,e,i),t.elementType=$h,t.lanes=s,t;case Xh:return t=Nt(19,r,e,i),t.elementType=Xh,t.lanes=s,t;case W1:return su(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j1:o=10;break e;case G1:o=9;break e;case Ud:o=11;break e;case Vd:o=14;break e;case mn:o=16,n=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Nt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ai(t,e,r,n){return t=Nt(7,t,n,e),t.lanes=r,t}function su(t,e,r,n){return t=Nt(22,t,n,e),t.elementType=W1,t.lanes=r,t.stateNode={},t}function Gh(t,e,r){return t=Nt(6,t,null,e),t.lanes=r,t}function Wh(t,e,r){return e=Nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W3(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bh(0),this.expirationTimes=bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ep(t,e,r,n,i,s,o,a,l){return t=new W3(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tp(s),t}function H3(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ki,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Ny(t){if(!t)return bn;t=t._reactInternals;e:{if(pi(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var r=t.type;if(ut(r))return Nv(t,r,e)}return e}function Dy(t,e,r,n,i,s,o,a,l){return t=Ep(r,n,!0,t,i,s,o,a,l),t.context=Ny(null),r=t.current,n=et(),i=Pn(r),s=Gr(n,i),s.callback=e!=null?e:null,Mn(r,s),t.current.lanes=i,fa(t,i,n),ft(t,n),t}function yu(t,e,r,n){var i=e.current,s=et(),o=Pn(i);return r=Ny(r),e.context===null?e.context=r:e.pendingContext=r,e=Gr(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),Mn(i,e),t=Ft(i,o,s),t!==null&&Ic(t,i,o),o}function ou(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function wp(t,e){z1(t,e),(t=t.alternate)&&z1(t,e)}function Y3(){return null}var Fy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tp(t){this._internalRoot=t}xu.prototype.render=Tp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));yu(t,e,null,null)};xu.prototype.unmount=Tp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hi(function(){yu(null,t,null,null)}),e[Hr]=null}};function xu(t){this._internalRoot=t}xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=pv();t={blockedOn:null,target:t,priority:e};for(var r=0;r<vn.length&&e!==0&&e<vn[r].priority;r++);vn.splice(r,0,t),r===0&&gv(t)}};function Mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B1(){}function $3(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=ou(o);s.call(c)}}var o=Dy(e,n,t,0,null,!1,!1,"",B1);return t._reactRootContainer=o,t[Hr]=o.current,ra(t.nodeType===8?t.parentNode:t),hi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=ou(l);a.call(c)}}var l=Ep(t,0,!1,null,null,!1,!1,"",B1);return t._reactRootContainer=l,t[Hr]=l.current,ra(t.nodeType===8?t.parentNode:t),hi(function(){yu(e,l,r,n)}),l}function Eu(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ou(o);a.call(l)}}yu(e,o,t,i)}else o=$3(r,e,t,i,n);return ou(o)}hv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Fo(e.pendingLanes);r!==0&&(Wd(e,r|1),ft(e,ve()),(q&6)===0&&(_s=ve()+500,On()))}break;case 13:var n=et();hi(function(){return Ft(t,1,n)}),wp(t,1)}};Hd=function(t){if(t.tag===13){var e=et();Ft(t,134217728,e),wp(t,134217728)}};dv=function(t){if(t.tag===13){var e=et(),r=Pn(t);Ft(t,r,e),wp(t,r)}};pv=function(){return Z};mv=function(t,e){var r=Z;try{return Z=t,e()}finally{Z=r}};id=function(t,e,r){switch(e){case"input":if(Kh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=fu(n);if(!i)throw Error(O(90));Y1(n),Kh(n,i)}}}break;case"textarea":X1(t,r);break;case"select":e=r.value,e!=null&&cs(t,!!r.multiple,e,!1)}};tv=vp;rv=hi;var X3={usingClientEntryPoint:!1,Events:[da,rs,fu,J1,ev,vp]},Co={findFiberByHostInstance:ii,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},q3={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sv(t),t===null?null:t.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||Y3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(ko=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ko.isDisabled&&ko.supportsFiber))try{au=ko.inject(q3),Mr=ko}catch(t){}var ko;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X3;Tt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mp(e))throw Error(O(200));return H3(t,e,null,r)};Tt.createRoot=function(t,e){if(!Mp(t))throw Error(O(299));var r=!1,n="",i=Fy;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ep(t,1,!1,null,null,r,!1,n,i),t[Hr]=e.current,ra(t.nodeType===8?t.parentNode:t),new Tp(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=sv(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return hi(t)};Tt.hydrate=function(t,e,r){if(!_u(e))throw Error(O(200));return Eu(null,t,e,!0,r)};Tt.hydrateRoot=function(t,e,r){if(!Mp(t))throw Error(O(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=Fy;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Dy(e,null,t,1,r!=null?r:null,i,!1,s,o),t[Hr]=e.current,ra(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new xu(e)};Tt.render=function(t,e,r){if(!_u(e))throw Error(O(200));return Eu(null,t,e,!1,r)};Tt.unmountComponentAtNode=function(t){if(!_u(t))throw Error(O(40));return t._reactRootContainer?(hi(function(){Eu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hr]=null})}),!0):!1};Tt.unstable_batchedUpdates=vp;Tt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!_u(r))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Eu(t,e,r,!1,n)};Tt.version="18.1.0-next-22edb9f77-20220426"});var Vy=Ne((SC,Uy)=>{"use strict";function By(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(By)}catch(t){console.error(t)}}By(),Uy.exports=zy()});var mi=Ne((PC,ma)=>{function Z3(t){return t&&t.__esModule?t:{default:t}}ma.exports=Z3,ma.exports.__esModule=!0,ma.exports.default=ma.exports});var ga=Ne((AC,Xr)=>{function Sp(t){return Xr.exports=Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr.exports.__esModule=!0,Xr.exports.default=Xr.exports,Sp(t)}Xr.exports=Sp,Xr.exports.__esModule=!0,Xr.exports.default=Xr.exports});var wu=Ne(Ap=>{"use strict";var K3=mi();Object.defineProperty(Ap,"__esModule",{value:!0});Ap.default=Q3;var Pp=K3(ga());function Q3(t){if(typeof window!="undefined"&&(0,Pp.default)(window.process)==="object"&&window.process.type==="renderer"||typeof process!="undefined"&&(0,Pp.default)(process.versions)==="object"&&Boolean(process.versions.electron))return!0;var e=(typeof navigator=="undefined"?"undefined":(0,Pp.default)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=t||e;return!!(r&&r.indexOf("Electron")>=0)}});var Mu=Ne(Tu=>{"use strict";var jy=mi();Object.defineProperty(Tu,"__esModule",{value:!0});Tu.default=Gy;Tu.isBrowserMainThread=tS;var J3=jy(ga()),eS=jy(wu());function Gy(){var t=(typeof process=="undefined"?"undefined":(0,J3.default)(process))==="object"&&String(process)==="[object process]"&&!process.browser;return!t||(0,eS.default)()}function tS(){return Gy()&&typeof document!="undefined"}});var bp=Ne(ht=>{"use strict";var rS=mi();Object.defineProperty(ht,"__esModule",{value:!0});ht.window=ht.self=ht.process=ht.global=ht.document=ht.console=void 0;var nS=rS(ga()),Cn={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document,process:(typeof process=="undefined"?"undefined":(0,nS.default)(process))==="object"&&process},iS=globalThis;ht.global=iS;var sS=Cn.self||Cn.window||Cn.global;ht.self=sS;var oS=Cn.window||Cn.self||Cn.global;ht.window=oS;var aS=Cn.document||{};ht.document=aS;var lS=Cn.process||{};ht.process=lS;var cS=console;ht.console=cS});var Wy=Ne(Ut=>{"use strict";var uS=mi();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.VERSION=void 0;Object.defineProperty(Ut,"console",{enumerable:!0,get:function(){return Ts.console}});Object.defineProperty(Ut,"document",{enumerable:!0,get:function(){return Ts.document}});Object.defineProperty(Ut,"global",{enumerable:!0,get:function(){return Ts.global}});Ut.isBrowser=void 0;Object.defineProperty(Ut,"process",{enumerable:!0,get:function(){return Ts.process}});Object.defineProperty(Ut,"self",{enumerable:!0,get:function(){return Ts.self}});Object.defineProperty(Ut,"window",{enumerable:!0,get:function(){return Ts.window}});var fS=uS(Mu()),Ts=bp(),hS=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source";Ut.VERSION=hS;var dS=(0,fS.default)();Ut.isBrowser=dS});var Yy=Ne(Pu=>{"use strict";var Hy=mi();Object.defineProperty(Pu,"__esModule",{value:!0});Pu.default=vS;Pu.isMobile=gS;var pS=Hy(Mu()),mS=Hy(wu()),Su=globalThis;function gS(){return typeof Su.orientation!="undefined"}function vS(t){if(!t&&!(0,pS.default)())return"Node";if((0,mS.default)(t))return"Electron";var e=typeof navigator!="undefined"?navigator:{},r=t||e.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":Su.chrome?"Chrome":Su.safari?"Safari":Su.mozInnerScreenX?"Firefox":"Unknown"}});var $y=Ne(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.default=yS;function yS(t,e){if(!t)throw new Error(e||"Assertion failed")}});var gi=Ne(rt=>{"use strict";var Xy=mi(),xS=ga();Object.defineProperty(rt,"__esModule",{value:!0});Object.defineProperty(rt,"VERSION",{enumerable:!0,get:function(){return _S.VERSION}});Object.defineProperty(rt,"assert",{enumerable:!0,get:function(){return wS.default}});Object.defineProperty(rt,"console",{enumerable:!0,get:function(){return Ms.console}});Object.defineProperty(rt,"document",{enumerable:!0,get:function(){return Ms.document}});Object.defineProperty(rt,"getBrowser",{enumerable:!0,get:function(){return Zy.default}});Object.defineProperty(rt,"global",{enumerable:!0,get:function(){return Ms.global}});Object.defineProperty(rt,"isBrowser",{enumerable:!0,get:function(){return qy.default}});Object.defineProperty(rt,"isBrowserMainThread",{enumerable:!0,get:function(){return qy.isBrowserMainThread}});Object.defineProperty(rt,"isElectron",{enumerable:!0,get:function(){return ES.default}});Object.defineProperty(rt,"isMobile",{enumerable:!0,get:function(){return Zy.isMobile}});Object.defineProperty(rt,"process",{enumerable:!0,get:function(){return Ms.process}});Object.defineProperty(rt,"self",{enumerable:!0,get:function(){return Ms.self}});Object.defineProperty(rt,"window",{enumerable:!0,get:function(){return Ms.window}});var _S=Wy(),Ms=bp(),qy=Qy(Mu()),Zy=Qy(Yy()),ES=Xy(wu()),wS=Xy($y());function Ky(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Ky=function(i){return i?r:e})(t)}function Qy(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||xS(t)!=="object"&&typeof t!="function")return{default:t};var r=Ky(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=t[s]}return n.default=t,r&&r.set(t,n),n}});var bs=Ne((_k,cx)=>{cx.exports=gi()});var $E=Ne((w7,Rf)=>{(function(t,e,r,n){"use strict";var i=["","webkit","Moz","MS","ms","o"],s=e.createElement("div"),o="function",a=Math.round,l=Math.abs,c=Date.now;function u(d,g,E){return setTimeout(m(d,E),g)}function h(d,g,E){return Array.isArray(d)?(f(d,E[g],E),!0):!1}function f(d,g,E){var P;if(!!d)if(d.forEach)d.forEach(g,E);else if(d.length!==n)for(P=0;P<d.length;)g.call(E,d[P],P,d),P++;else for(P in d)d.hasOwnProperty(P)&&g.call(E,d[P],P,d)}function y(d,g,E){var P="DEPRECATED METHOD: "+g+`
`+E+` AT 
`;return function(){var R=new Error("get-stack-trace"),F=R&&R.stack?R.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",H=t.console&&(t.console.warn||t.console.log);return H&&H.call(t.console,P,F),d.apply(this,arguments)}}var x;typeof Object.assign!="function"?x=function(g){if(g===n||g===null)throw new TypeError("Cannot convert undefined or null to object");for(var E=Object(g),P=1;P<arguments.length;P++){var R=arguments[P];if(R!==n&&R!==null)for(var F in R)R.hasOwnProperty(F)&&(E[F]=R[F])}return E}:x=Object.assign;var _=y(function(g,E,P){for(var R=Object.keys(E),F=0;F<R.length;)(!P||P&&g[R[F]]===n)&&(g[R[F]]=E[R[F]]),F++;return g},"extend","Use `assign`."),T=y(function(g,E){return _(g,E,!0)},"merge","Use `assign`.");function p(d,g,E){var P=g.prototype,R;R=d.prototype=Object.create(P),R.constructor=d,R._super=P,E&&x(R,E)}function m(d,g){return function(){return d.apply(g,arguments)}}function v(d,g){return typeof d==o?d.apply(g&&g[0]||n,g):d}function w(d,g){return d===n?g:d}function S(d,g,E){f(D(g),function(P){d.addEventListener(P,E,!1)})}function M(d,g,E){f(D(g),function(P){d.removeEventListener(P,E,!1)})}function I(d,g){for(;d;){if(d==g)return!0;d=d.parentNode}return!1}function b(d,g){return d.indexOf(g)>-1}function D(d){return d.trim().split(/\s+/g)}function C(d,g,E){if(d.indexOf&&!E)return d.indexOf(g);for(var P=0;P<d.length;){if(E&&d[P][E]==g||!E&&d[P]===g)return P;P++}return-1}function j(d){return Array.prototype.slice.call(d,0)}function W(d,g,E){for(var P=[],R=[],F=0;F<d.length;){var H=g?d[F][g]:d[F];C(R,H)<0&&P.push(d[F]),R[F]=H,F++}return E&&(g?P=P.sort(function(ke,Ke){return ke[g]>Ke[g]}):P=P.sort()),P}function ie(d,g){for(var E,P,R=g[0].toUpperCase()+g.slice(1),F=0;F<i.length;){if(E=i[F],P=E?E+R:g,P in d)return P;F++}return n}var U=1;function Ht(){return U++}function Ug(d){var g=d.ownerDocument||d;return g.defaultView||g.parentWindow||t}var qw=/mobile|tablet|ip(ad|hone|od)|android/i,Vg="ontouchstart"in t,Zw=ie(t,"PointerEvent")!==n,Kw=Vg&&qw.test(navigator.userAgent),po="touch",Qw="pen",Kf="mouse",Jw="kinect",eT=25,Ze=1,Qn=2,Te=4,st=8,Gl=1,mo=2,go=4,vo=8,yo=16,vr=mo|go,Jn=vo|yo,jg=vr|Jn,Gg=["x","y"],Wl=["clientX","clientY"];function It(d,g){var E=this;this.manager=d,this.callback=g,this.element=d.element,this.target=d.options.inputTarget,this.domHandler=function(P){v(d.options.enable,[d])&&E.handler(P)},this.init()}It.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Ug(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(Ug(this.element),this.evWin,this.domHandler)}};function tT(d){var g,E=d.options.inputClass;return E?g=E:Zw?g=Jf:Kw?g=$l:Vg?g=eh:g=Yl,new g(d,rT)}function rT(d,g,E){var P=E.pointers.length,R=E.changedPointers.length,F=g&Ze&&P-R===0,H=g&(Te|st)&&P-R===0;E.isFirst=!!F,E.isFinal=!!H,F&&(d.session={}),E.eventType=g,nT(d,E),d.emit("hammer.input",E),d.recognize(E),d.session.prevInput=E}function nT(d,g){var E=d.session,P=g.pointers,R=P.length;E.firstInput||(E.firstInput=Wg(g)),R>1&&!E.firstMultiple?E.firstMultiple=Wg(g):R===1&&(E.firstMultiple=!1);var F=E.firstInput,H=E.firstMultiple,Oe=H?H.center:F.center,ke=g.center=Hg(P);g.timeStamp=c(),g.deltaTime=g.timeStamp-F.timeStamp,g.angle=Qf(Oe,ke),g.distance=Hl(Oe,ke),iT(E,g),g.offsetDirection=$g(g.deltaX,g.deltaY);var Ke=Yg(g.deltaTime,g.deltaX,g.deltaY);g.overallVelocityX=Ke.x,g.overallVelocityY=Ke.y,g.overallVelocity=l(Ke.x)>l(Ke.y)?Ke.x:Ke.y,g.scale=H?aT(H.pointers,P):1,g.rotation=H?oT(H.pointers,P):0,g.maxPointers=E.prevInput?g.pointers.length>E.prevInput.maxPointers?g.pointers.length:E.prevInput.maxPointers:g.pointers.length,sT(E,g);var xr=d.element;I(g.srcEvent.target,xr)&&(xr=g.srcEvent.target),g.target=xr}function iT(d,g){var E=g.center,P=d.offsetDelta||{},R=d.prevDelta||{},F=d.prevInput||{};(g.eventType===Ze||F.eventType===Te)&&(R=d.prevDelta={x:F.deltaX||0,y:F.deltaY||0},P=d.offsetDelta={x:E.x,y:E.y}),g.deltaX=R.x+(E.x-P.x),g.deltaY=R.y+(E.y-P.y)}function sT(d,g){var E=d.lastInterval||g,P=g.timeStamp-E.timeStamp,R,F,H,Oe;if(g.eventType!=st&&(P>eT||E.velocity===n)){var ke=g.deltaX-E.deltaX,Ke=g.deltaY-E.deltaY,xr=Yg(P,ke,Ke);F=xr.x,H=xr.y,R=l(xr.x)>l(xr.y)?xr.x:xr.y,Oe=$g(ke,Ke),d.lastInterval=g}else R=E.velocity,F=E.velocityX,H=E.velocityY,Oe=E.direction;g.velocity=R,g.velocityX=F,g.velocityY=H,g.direction=Oe}function Wg(d){for(var g=[],E=0;E<d.pointers.length;)g[E]={clientX:a(d.pointers[E].clientX),clientY:a(d.pointers[E].clientY)},E++;return{timeStamp:c(),pointers:g,center:Hg(g),deltaX:d.deltaX,deltaY:d.deltaY}}function Hg(d){var g=d.length;if(g===1)return{x:a(d[0].clientX),y:a(d[0].clientY)};for(var E=0,P=0,R=0;R<g;)E+=d[R].clientX,P+=d[R].clientY,R++;return{x:a(E/g),y:a(P/g)}}function Yg(d,g,E){return{x:g/d||0,y:E/d||0}}function $g(d,g){return d===g?Gl:l(d)>=l(g)?d<0?mo:go:g<0?vo:yo}function Hl(d,g,E){E||(E=Gg);var P=g[E[0]]-d[E[0]],R=g[E[1]]-d[E[1]];return Math.sqrt(P*P+R*R)}function Qf(d,g,E){E||(E=Gg);var P=g[E[0]]-d[E[0]],R=g[E[1]]-d[E[1]];return Math.atan2(R,P)*180/Math.PI}function oT(d,g){return Qf(g[1],g[0],Wl)+Qf(d[1],d[0],Wl)}function aT(d,g){return Hl(g[0],g[1],Wl)/Hl(d[0],d[1],Wl)}var lT={mousedown:Ze,mousemove:Qn,mouseup:Te},cT="mousedown",uT="mousemove mouseup";function Yl(){this.evEl=cT,this.evWin=uT,this.pressed=!1,It.apply(this,arguments)}p(Yl,It,{handler:function(g){var E=lT[g.type];E&Ze&&g.button===0&&(this.pressed=!0),E&Qn&&g.which!==1&&(E=Te),this.pressed&&(E&Te&&(this.pressed=!1),this.callback(this.manager,E,{pointers:[g],changedPointers:[g],pointerType:Kf,srcEvent:g}))}});var fT={pointerdown:Ze,pointermove:Qn,pointerup:Te,pointercancel:st,pointerout:st},hT={2:po,3:Qw,4:Kf,5:Jw},Xg="pointerdown",qg="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Xg="MSPointerDown",qg="MSPointerMove MSPointerUp MSPointerCancel");function Jf(){this.evEl=Xg,this.evWin=qg,It.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}p(Jf,It,{handler:function(g){var E=this.store,P=!1,R=g.type.toLowerCase().replace("ms",""),F=fT[R],H=hT[g.pointerType]||g.pointerType,Oe=H==po,ke=C(E,g.pointerId,"pointerId");F&Ze&&(g.button===0||Oe)?ke<0&&(E.push(g),ke=E.length-1):F&(Te|st)&&(P=!0),!(ke<0)&&(E[ke]=g,this.callback(this.manager,F,{pointers:E,changedPointers:[g],pointerType:H,srcEvent:g}),P&&E.splice(ke,1))}});var dT={touchstart:Ze,touchmove:Qn,touchend:Te,touchcancel:st},pT="touchstart",mT="touchstart touchmove touchend touchcancel";function Zg(){this.evTarget=pT,this.evWin=mT,this.started=!1,It.apply(this,arguments)}p(Zg,It,{handler:function(g){var E=dT[g.type];if(E===Ze&&(this.started=!0),!!this.started){var P=gT.call(this,g,E);E&(Te|st)&&P[0].length-P[1].length===0&&(this.started=!1),this.callback(this.manager,E,{pointers:P[0],changedPointers:P[1],pointerType:po,srcEvent:g})}}});function gT(d,g){var E=j(d.touches),P=j(d.changedTouches);return g&(Te|st)&&(E=W(E.concat(P),"identifier",!0)),[E,P]}var vT={touchstart:Ze,touchmove:Qn,touchend:Te,touchcancel:st},yT="touchstart touchmove touchend touchcancel";function $l(){this.evTarget=yT,this.targetIds={},It.apply(this,arguments)}p($l,It,{handler:function(g){var E=vT[g.type],P=xT.call(this,g,E);!P||this.callback(this.manager,E,{pointers:P[0],changedPointers:P[1],pointerType:po,srcEvent:g})}});function xT(d,g){var E=j(d.touches),P=this.targetIds;if(g&(Ze|Qn)&&E.length===1)return P[E[0].identifier]=!0,[E,E];var R,F,H=j(d.changedTouches),Oe=[],ke=this.target;if(F=E.filter(function(Ke){return I(Ke.target,ke)}),g===Ze)for(R=0;R<F.length;)P[F[R].identifier]=!0,R++;for(R=0;R<H.length;)P[H[R].identifier]&&Oe.push(H[R]),g&(Te|st)&&delete P[H[R].identifier],R++;if(!!Oe.length)return[W(F.concat(Oe),"identifier",!0),Oe]}var _T=2500,Kg=25;function eh(){It.apply(this,arguments);var d=m(this.handler,this);this.touch=new $l(this.manager,d),this.mouse=new Yl(this.manager,d),this.primaryTouch=null,this.lastTouches=[]}p(eh,It,{handler:function(g,E,P){var R=P.pointerType==po,F=P.pointerType==Kf;if(!(F&&P.sourceCapabilities&&P.sourceCapabilities.firesTouchEvents)){if(R)ET.call(this,E,P);else if(F&&wT.call(this,P))return;this.callback(g,E,P)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ET(d,g){d&Ze?(this.primaryTouch=g.changedPointers[0].identifier,Qg.call(this,g)):d&(Te|st)&&Qg.call(this,g)}function Qg(d){var g=d.changedPointers[0];if(g.identifier===this.primaryTouch){var E={x:g.clientX,y:g.clientY};this.lastTouches.push(E);var P=this.lastTouches,R=function(){var F=P.indexOf(E);F>-1&&P.splice(F,1)};setTimeout(R,_T)}}function wT(d){for(var g=d.srcEvent.clientX,E=d.srcEvent.clientY,P=0;P<this.lastTouches.length;P++){var R=this.lastTouches[P],F=Math.abs(g-R.x),H=Math.abs(E-R.y);if(F<=Kg&&H<=Kg)return!0}return!1}var Jg=ie(s.style,"touchAction"),e0=Jg!==n,t0="compute",r0="auto",th="manipulation",ei="none",xo="pan-x",_o="pan-y",Xl=MT();function rh(d,g){this.manager=d,this.set(g)}rh.prototype={set:function(d){d==t0&&(d=this.compute()),e0&&this.manager.element.style&&Xl[d]&&(this.manager.element.style[Jg]=d),this.actions=d.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var d=[];return f(this.manager.recognizers,function(g){v(g.options.enable,[g])&&(d=d.concat(g.getTouchAction()))}),TT(d.join(" "))},preventDefaults:function(d){var g=d.srcEvent,E=d.offsetDirection;if(this.manager.session.prevented){g.preventDefault();return}var P=this.actions,R=b(P,ei)&&!Xl[ei],F=b(P,_o)&&!Xl[_o],H=b(P,xo)&&!Xl[xo];if(R){var Oe=d.pointers.length===1,ke=d.distance<2,Ke=d.deltaTime<250;if(Oe&&ke&&Ke)return}if(!(H&&F)&&(R||F&&E&vr||H&&E&Jn))return this.preventSrc(g)},preventSrc:function(d){this.manager.session.prevented=!0,d.preventDefault()}};function TT(d){if(b(d,ei))return ei;var g=b(d,xo),E=b(d,_o);return g&&E?ei:g||E?g?xo:_o:b(d,th)?th:r0}function MT(){if(!e0)return!1;var d={},g=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(E){d[E]=g?t.CSS.supports("touch-action",E):!0}),d}var ql=1,Rt=2,$i=4,hn=8,Nr=hn,Eo=16,yr=32;function Dr(d){this.options=x({},this.defaults,d||{}),this.id=Ht(),this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=ql,this.simultaneous={},this.requireFail=[]}Dr.prototype={defaults:{},set:function(d){return x(this.options,d),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(d){if(h(d,"recognizeWith",this))return this;var g=this.simultaneous;return d=Zl(d,this),g[d.id]||(g[d.id]=d,d.recognizeWith(this)),this},dropRecognizeWith:function(d){return h(d,"dropRecognizeWith",this)?this:(d=Zl(d,this),delete this.simultaneous[d.id],this)},requireFailure:function(d){if(h(d,"requireFailure",this))return this;var g=this.requireFail;return d=Zl(d,this),C(g,d)===-1&&(g.push(d),d.requireFailure(this)),this},dropRequireFailure:function(d){if(h(d,"dropRequireFailure",this))return this;d=Zl(d,this);var g=C(this.requireFail,d);return g>-1&&this.requireFail.splice(g,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(d){return!!this.simultaneous[d.id]},emit:function(d){var g=this,E=this.state;function P(R){g.manager.emit(R,d)}E<hn&&P(g.options.event+n0(E)),P(g.options.event),d.additionalEvent&&P(d.additionalEvent),E>=hn&&P(g.options.event+n0(E))},tryEmit:function(d){if(this.canEmit())return this.emit(d);this.state=yr},canEmit:function(){for(var d=0;d<this.requireFail.length;){if(!(this.requireFail[d].state&(yr|ql)))return!1;d++}return!0},recognize:function(d){var g=x({},d);if(!v(this.options.enable,[this,g])){this.reset(),this.state=yr;return}this.state&(Nr|Eo|yr)&&(this.state=ql),this.state=this.process(g),this.state&(Rt|$i|hn|Eo)&&this.tryEmit(g)},process:function(d){},getTouchAction:function(){},reset:function(){}};function n0(d){return d&Eo?"cancel":d&hn?"end":d&$i?"move":d&Rt?"start":""}function i0(d){return d==yo?"down":d==vo?"up":d==mo?"left":d==go?"right":""}function Zl(d,g){var E=g.manager;return E?E.get(d):d}function Yt(){Dr.apply(this,arguments)}p(Yt,Dr,{defaults:{pointers:1},attrTest:function(d){var g=this.options.pointers;return g===0||d.pointers.length===g},process:function(d){var g=this.state,E=d.eventType,P=g&(Rt|$i),R=this.attrTest(d);return P&&(E&st||!R)?g|Eo:P||R?E&Te?g|hn:g&Rt?g|$i:Rt:yr}});function Kl(){Yt.apply(this,arguments),this.pX=null,this.pY=null}p(Kl,Yt,{defaults:{event:"pan",threshold:10,pointers:1,direction:jg},getTouchAction:function(){var d=this.options.direction,g=[];return d&vr&&g.push(_o),d&Jn&&g.push(xo),g},directionTest:function(d){var g=this.options,E=!0,P=d.distance,R=d.direction,F=d.deltaX,H=d.deltaY;return R&g.direction||(g.direction&vr?(R=F===0?Gl:F<0?mo:go,E=F!=this.pX,P=Math.abs(d.deltaX)):(R=H===0?Gl:H<0?vo:yo,E=H!=this.pY,P=Math.abs(d.deltaY))),d.direction=R,E&&P>g.threshold&&R&g.direction},attrTest:function(d){return Yt.prototype.attrTest.call(this,d)&&(this.state&Rt||!(this.state&Rt)&&this.directionTest(d))},emit:function(d){this.pX=d.deltaX,this.pY=d.deltaY;var g=i0(d.direction);g&&(d.additionalEvent=this.options.event+g),this._super.emit.call(this,d)}});function nh(){Yt.apply(this,arguments)}p(nh,Yt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(d){return this._super.attrTest.call(this,d)&&(Math.abs(d.scale-1)>this.options.threshold||this.state&Rt)},emit:function(d){if(d.scale!==1){var g=d.scale<1?"in":"out";d.additionalEvent=this.options.event+g}this._super.emit.call(this,d)}});function ih(){Dr.apply(this,arguments),this._timer=null,this._input=null}p(ih,Dr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[r0]},process:function(d){var g=this.options,E=d.pointers.length===g.pointers,P=d.distance<g.threshold,R=d.deltaTime>g.time;if(this._input=d,!P||!E||d.eventType&(Te|st)&&!R)this.reset();else if(d.eventType&Ze)this.reset(),this._timer=u(function(){this.state=Nr,this.tryEmit()},g.time,this);else if(d.eventType&Te)return Nr;return yr},reset:function(){clearTimeout(this._timer)},emit:function(d){this.state===Nr&&(d&&d.eventType&Te?this.manager.emit(this.options.event+"up",d):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function sh(){Yt.apply(this,arguments)}p(sh,Yt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(d){return this._super.attrTest.call(this,d)&&(Math.abs(d.rotation)>this.options.threshold||this.state&Rt)}});function oh(){Yt.apply(this,arguments)}p(oh,Yt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:vr|Jn,pointers:1},getTouchAction:function(){return Kl.prototype.getTouchAction.call(this)},attrTest:function(d){var g=this.options.direction,E;return g&(vr|Jn)?E=d.overallVelocity:g&vr?E=d.overallVelocityX:g&Jn&&(E=d.overallVelocityY),this._super.attrTest.call(this,d)&&g&d.offsetDirection&&d.distance>this.options.threshold&&d.maxPointers==this.options.pointers&&l(E)>this.options.velocity&&d.eventType&Te},emit:function(d){var g=i0(d.offsetDirection);g&&this.manager.emit(this.options.event+g,d),this.manager.emit(this.options.event,d)}});function Ql(){Dr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}p(Ql,Dr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[th]},process:function(d){var g=this.options,E=d.pointers.length===g.pointers,P=d.distance<g.threshold,R=d.deltaTime<g.time;if(this.reset(),d.eventType&Ze&&this.count===0)return this.failTimeout();if(P&&R&&E){if(d.eventType!=Te)return this.failTimeout();var F=this.pTime?d.timeStamp-this.pTime<g.interval:!0,H=!this.pCenter||Hl(this.pCenter,d.center)<g.posThreshold;this.pTime=d.timeStamp,this.pCenter=d.center,!H||!F?this.count=1:this.count+=1,this._input=d;var Oe=this.count%g.taps;if(Oe===0)return this.hasRequireFailures()?(this._timer=u(function(){this.state=Nr,this.tryEmit()},g.interval,this),Rt):Nr}return yr},failTimeout:function(){return this._timer=u(function(){this.state=yr},this.options.interval,this),yr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Nr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Fr(d,g){return g=g||{},g.recognizers=w(g.recognizers,Fr.defaults.preset),new ah(d,g)}Fr.VERSION="2.0.7",Fr.defaults={domEvents:!1,touchAction:t0,enable:!0,inputTarget:null,inputClass:null,preset:[[sh,{enable:!1}],[nh,{enable:!1},["rotate"]],[oh,{direction:vr}],[Kl,{direction:vr},["swipe"]],[Ql],[Ql,{event:"doubletap",taps:2},["tap"]],[ih]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ST=1,s0=2;function ah(d,g){this.options=x({},Fr.defaults,g||{}),this.options.inputTarget=this.options.inputTarget||d,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=d,this.input=tT(this),this.touchAction=new rh(this,this.options.touchAction),o0(this,!0),f(this.options.recognizers,function(E){var P=this.add(new E[0](E[1]));E[2]&&P.recognizeWith(E[2]),E[3]&&P.requireFailure(E[3])},this)}ah.prototype={set:function(d){return x(this.options,d),d.touchAction&&this.touchAction.update(),d.inputTarget&&(this.input.destroy(),this.input.target=d.inputTarget,this.input.init()),this},stop:function(d){this.session.stopped=d?s0:ST},recognize:function(d){var g=this.session;if(!g.stopped){this.touchAction.preventDefaults(d);var E,P=this.recognizers,R=g.curRecognizer;(!R||R&&R.state&Nr)&&(R=g.curRecognizer=null);for(var F=0;F<P.length;)E=P[F],g.stopped!==s0&&(!R||E==R||E.canRecognizeWith(R))?E.recognize(d):E.reset(),!R&&E.state&(Rt|$i|hn)&&(R=g.curRecognizer=E),F++}},get:function(d){if(d instanceof Dr)return d;for(var g=this.recognizers,E=0;E<g.length;E++)if(g[E].options.event==d)return g[E];return null},add:function(d){if(h(d,"add",this))return this;var g=this.get(d.options.event);return g&&this.remove(g),this.recognizers.push(d),d.manager=this,this.touchAction.update(),d},remove:function(d){if(h(d,"remove",this))return this;if(d=this.get(d),d){var g=this.recognizers,E=C(g,d);E!==-1&&(g.splice(E,1),this.touchAction.update())}return this},on:function(d,g){if(d!==n&&g!==n){var E=this.handlers;return f(D(d),function(P){E[P]=E[P]||[],E[P].push(g)}),this}},off:function(d,g){if(d!==n){var E=this.handlers;return f(D(d),function(P){g?E[P]&&E[P].splice(C(E[P],g),1):delete E[P]}),this}},emit:function(d,g){this.options.domEvents&&PT(d,g);var E=this.handlers[d]&&this.handlers[d].slice();if(!(!E||!E.length)){g.type=d,g.preventDefault=function(){g.srcEvent.preventDefault()};for(var P=0;P<E.length;)E[P](g),P++}},destroy:function(){this.element&&o0(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function o0(d,g){var E=d.element;if(!!E.style){var P;f(d.options.cssProps,function(R,F){P=ie(E.style,F),g?(d.oldCssProps[P]=E.style[P],E.style[P]=R):E.style[P]=d.oldCssProps[P]||""}),g||(d.oldCssProps={})}}function PT(d,g){var E=e.createEvent("Event");E.initEvent(d,!0,!0),E.gesture=g,g.target.dispatchEvent(E)}x(Fr,{INPUT_START:Ze,INPUT_MOVE:Qn,INPUT_END:Te,INPUT_CANCEL:st,STATE_POSSIBLE:ql,STATE_BEGAN:Rt,STATE_CHANGED:$i,STATE_ENDED:hn,STATE_RECOGNIZED:Nr,STATE_CANCELLED:Eo,STATE_FAILED:yr,DIRECTION_NONE:Gl,DIRECTION_LEFT:mo,DIRECTION_RIGHT:go,DIRECTION_UP:vo,DIRECTION_DOWN:yo,DIRECTION_HORIZONTAL:vr,DIRECTION_VERTICAL:Jn,DIRECTION_ALL:jg,Manager:ah,Input:It,TouchAction:rh,TouchInput:$l,MouseInput:Yl,PointerEventInput:Jf,TouchMouseInput:eh,SingleTouchInput:Zg,Recognizer:Dr,AttrRecognizer:Yt,Tap:Ql,Pan:Kl,Swipe:oh,Pinch:nh,Rotate:sh,Press:ih,on:S,off:M,each:f,merge:T,extend:_,assign:x,inherit:p,bindFn:m,prefixed:ie});var AT=typeof t!="undefined"?t:typeof self!="undefined"?self:{};AT.Hammer=Fr,typeof define=="function"&&define.amd?define(function(){return Fr}):typeof Rf!="undefined"&&Rf.exports?Rf.exports=Fr:t[r]=Fr})(window,document,"Hammer")});var k=yt(ph()),Xw=yt(Vy());var Lu=yt(gi());function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var As=yt(gi());function TS(t){try{let e=window[t],r="__storage_test__";return e.setItem(r,r),e.removeItem(r),e}catch(e){return null}}var va=class{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";A(this,"storage",void 0),A(this,"id",void 0),A(this,"config",{}),this.storage=TS(n),this.id=e,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){let r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let e={};if(this.storage){let r=this.storage.getItem(this.id);e=r?JSON.parse(r):{}}return Object.assign(this.config,e),this}};function Jy(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function ex(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(" ".repeat(r)).concat(t)}function Au(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(r=Math.min(r,n/t.width));let s=t.width*r,o=t.height*r,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}var rx=yt(gi()),bu;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(bu||(bu={}));function tx(t){return typeof t=="string"?bu[t.toUpperCase()]||bu.WHITE:t}function nx(t,e,r){return!rx.isBrowser&&typeof t=="string"&&(e&&(e=tx(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),r&&(e=tx(r),t="\x1B[".concat(r+10,"m").concat(t,"\x1B[49m"))),t}function ix(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r);for(let i of n)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function Ss(t,e){if(!t)throw new Error(e||"Assertion failed")}var Mt=yt(gi());function vi(){let t;if(Mt.isBrowser&&"performance"in Mt.window){var e,r;t=Mt.window===null||Mt.window===void 0||(e=Mt.window.performance)===null||e===void 0||(r=e.now)===null||r===void 0?void 0:r.call(e)}else if("hrtime"in Mt.process){var n;let i=Mt.process===null||Mt.process===void 0||(n=Mt.process.hrtime)===null||n===void 0?void 0:n.call(Mt.process);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}var Ps={debug:As.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},MS={enabled:!0,level:0};function Vt(){}var sx={},ox={once:!0},$e=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};A(this,"id",void 0),A(this,"VERSION",As.VERSION),A(this,"_startTs",vi()),A(this,"_deltaTs",vi()),A(this,"_storage",void 0),A(this,"userData",{}),A(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new va("__probe-".concat(this.id,"__"),MS),this.userData={},this.timeStamp("".concat(this.id," started")),ix(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((vi()-this._startTs).toPrecision(10))}getDelta(){return Number((vi()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,r){this._storage.updateConfiguration({[e]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,r){Ss(e,r)}warn(e){return this._getLogFunction(0,e,Ps.warn,arguments,ox)}error(e){return this._getLogFunction(0,e,Ps.error,arguments)}deprecated(e,r){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(e,r){return this.error("`".concat(e,"` has been removed. Use `").concat(r,"` instead"))}probe(e,r){return this._getLogFunction(e,r,Ps.log,arguments,{time:!0,once:!0})}log(e,r){return this._getLogFunction(e,r,Ps.debug,arguments)}info(e,r){return this._getLogFunction(e,r,console.info,arguments)}once(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return this._getLogFunction(e,r,Ps.debug||Ps.info,arguments,ox)}table(e,r,n){return r?this._getLogFunction(e,r,console.table||Vt,n&&[n],{tag:bS(r)}):Vt}image(e){let{logLevel:r,priority:n,image:i,message:s="",scale:o=1}=e;return this._shouldLog(r||n)?As.isBrowser?AS({image:i,message:s,scale:o}):PS({image:i,message:s,scale:o}):Vt}time(e,r){return this._getLogFunction(e,r,console.time?console.time:console.info)}timeEnd(e,r){return this._getLogFunction(e,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,r){return this._getLogFunction(e,r,console.timeStamp||Vt)}group(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=ax({logLevel:e,message:r,opts:n}),{collapsed:s}=n;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,r,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Vt)}withGroup(e,r,n){this.group(e,r)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=lx(e)}_getLogFunction(e,r,n,i,s){if(this._shouldLog(e)){s=ax({logLevel:e,message:r,args:i,opts:s}),n=n||s.method,Ss(n),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=vi();let o=s.tag||s.message;if(s.once)if(!sx[o])sx[o]=vi();else return Vt;return r=SS(this.id,s.message,s),n.bind(console,r,...s.args)}return Vt}};A($e,"VERSION",As.VERSION);function lx(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ss(Number.isFinite(e)&&e>=0),e}function ax(t){let{logLevel:e,message:r}=t;t.logLevel=lx(e);let n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==r;);switch(typeof e){case"string":case"function":r!==void 0&&n.unshift(r),t.message=e;break;case"object":Object.assign(t,e);break;default:}typeof t.message=="function"&&(t.message=t.message());let i=typeof t.message;return Ss(i==="string"||i==="object"),Object.assign(t,{args:n},t.opts)}function SS(t,e,r){if(typeof e=="string"){let n=r.time?ex(Jy(r.total)):"";e=r.time?"".concat(t,": ").concat(n,"  ").concat(e):"".concat(t,": ").concat(e),e=nx(e,r.color,r.background)}return e}function PS(t){let{image:e,message:r="",scale:n=1}=t,i=null;try{i=module.require("asciify-image")}catch(s){}return i?()=>i(e,{fit:"box",width:"".concat(Math.round(80*n),"%")}).then(s=>console.log(s)):Vt}function AS(t){let{image:e,message:r="",scale:n=1}=t;if(typeof e=="string"){let s=new Image;return s.onload=()=>{let o=Au(s,r,n);console.log(...o)},s.src=e,Vt}let i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Au(e,r,n)),Vt;if(i.toLowerCase()==="canvas"){let s=new Image;return s.onload=()=>console.log(...Au(s,r,n)),s.src=e.toDataURL(),Vt}return Vt}function bS(t){for(let e in t)for(let r in t[e])return r||"untitled";return"empty"}var QC=new $e({id:"@probe.gl/log"});function ya(){let t;if(typeof window!="undefined"&&window.performance)t=window.performance.now();else if(typeof process!="undefined"&&process.hrtime){let e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var kn=class{constructor(e,r){A(this,"name",void 0),A(this,"type",void 0),A(this,"sampleSize",1),A(this,"time",void 0),A(this,"count",void 0),A(this,"samples",void 0),A(this,"lastTiming",void 0),A(this,"lastSampleTime",void 0),A(this,"lastSampleCount",void 0),A(this,"_count",0),A(this,"_time",0),A(this,"_samples",0),A(this,"_startTime",0),A(this,"_timerPending",!1),this.name=e,this.type=r,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=ya(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(ya()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}};var tr=class{constructor(e){A(this,"id",void 0),A(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(let e in this.stats)this.stats[e].reset();return this}forEach(e){for(let r in this.stats)e(this.stats[r])}getTable(){let e={};return this.forEach(r=>{e[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(e){if(!e||!e.name)return null;let{name:r,type:n}=e;return this.stats[r]||(e instanceof kn?this.stats[r]=e:this.stats[r]=new kn(r,n)),this.stats[r]}};var N=new $e({id:"luma.gl"});function ye(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}var LS="Invalid WebGLRenderingContext";var IS="Requires WebGL2";function qr(t){return typeof WebGLRenderingContext!="undefined"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function B(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function Ip(t){return B(t)?t:null}function Zr(t){return ye(qr(t),LS),t}function ue(t){return ye(B(t),IS),t}var yi=yt(bs()),xa={};function RS(t){yi.global.console&&yi.global.console.error&&yi.global.console.error(t)}function OS(t){yi.global.console&&yi.global.console.log&&yi.global.console.log(t)}function CS(t,e){xa[t]=!0,e!==void 0&&RS(e)}function kS(t){let e=t.getError;t.getError=function(){let n;do n=e.apply(t),n!==0&&(xa[n]=!0);while(n!==0);for(n in xa)if(xa[n])return delete xa[n],parseInt(n,10);return 0}}var _a=function t(e){let r=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){let i=new t.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};_a.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};_a.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var xi=function(e){let r=this;this.gl=e,kS(e);let n=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){let o=r.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);let a=o.attribs[s];return a.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){let o=r.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);let a=o.attribs[s];return a.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:r.currentArrayBuffer=o;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=o;break;default:}return n.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){let l=r.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){let h=r.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);let f=h.attribs[s];return f.buffer=r.currentArrayBuffer,f.size=o,f.type=a,f.normalized=l,f.stride=c,f.offset=u,f.recache(),n.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{OS("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};xi.prototype.VERTEX_ARRAY_BINDING_OES=34229;xi.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;let r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new _a(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};xi.prototype.createVertexArrayOES=function(){let e=new _a(this);return this.vertexArrayObjects.push(e),e};xi.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};xi.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof _a&&e.hasBeenBound&&e.ext===this)};xi.prototype.bindVertexArrayOES=function(e){let r=this.gl;if(e&&!e.isAlive){CS(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}let n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;let s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer,a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){let c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),c.enabled){let h=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(n.bindBuffer.call(r,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&n.vertexAttribPointer.call(r,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function ux(t){if(typeof t.createVertexArray=="function")return;let e=t.getSupportedExtensions;t.getSupportedExtensions=function(){let i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};let r=t.getExtension;t.getExtension=function(i){let s=r.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new xi(this)),this.__OESVertexArrayObject))}}var fx="OES_element_index",hx="WEBGL_draw_buffers",NS="EXT_disjoint_timer_query",DS="EXT_disjoint_timer_query_webgl2",FS="EXT_texture_filter_anisotropic",dx="WEBGL_debug_renderer_info",zS=35723,BS=4352,US=36795,VS=34047,jS=37445,GS=37446,ne=t=>B(t)?void 0:0,WS={[3074]:t=>B(t)?void 0:36064,[zS]:t=>B(t)?void 0:BS,[35977]:ne,[32937]:ne,[US]:(t,e)=>{let r=B(t)?t.getExtension(DS):t.getExtension(NS);return r&&r.GPU_DISJOINT_EXT?e(r.GPU_DISJOINT_EXT):0},[jS]:(t,e)=>{let r=t.getExtension(dx);return e(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[GS]:(t,e)=>{let r=t.getExtension(dx);return e(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[VS]:(t,e)=>{let r=t.luma.extensions[FS];return r?e(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:ne,[35071]:ne,[37447]:ne,[36063]:(t,e)=>{if(!B(t)){let r=t.getExtension(hx);return r?e(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:ne,[35374]:ne,[35377]:ne,[34852]:t=>{if(!B(t)){let e=t.getExtension(hx);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(fx)?2147483647:65535,[33001]:t=>t.getExtension(fx)?16777216:65535,[33e3]:t=>16777216,[37157]:ne,[35373]:ne,[35657]:ne,[36183]:ne,[37137]:ne,[34045]:ne,[35978]:ne,[35979]:ne,[35968]:ne,[35376]:ne,[35375]:ne,[35659]:ne,[37154]:ne,[35371]:ne,[35658]:ne,[35076]:ne,[35077]:ne,[35380]:ne};function px(t,e,r){let n=WS[r],i=typeof n=="function"?n(t,e,r):n;return i!==void 0?i:e(r)}var HS="OES_vertex_array_object",mx="ANGLE_instanced_arrays",YS="WEBGL_draw_buffers",$S="EXT_disjoint_timer_query",XS="EXT_texture_filter_anisotropic",qS="VertexArray requires WebGL2 or OES_vertex_array_object extension";function ZS(t,e){return{webgl2:B(t),ext:t.getExtension(e)}}var Rp={[HS]:{meta:{suffix:"OES"},createVertexArray:()=>{ye(!1,qS)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[mx]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){ye(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[YS]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{ye(!1)}},[$S]:{meta:{suffix:"EXT"},createQuery:()=>{ye(!1)},deleteQuery:()=>{ye(!1)},beginQuery:()=>{ye(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Iu={readBuffer:(t,e,r)=>{B(t)&&e(r)},getVertexAttrib:(t,e,r,n)=>{let{webgl2:i,ext:s}=ZS(t,mx),o;switch(n){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break;default:}return o!==void 0?o:e(r,n)},getProgramParameter:(t,e,r,n)=>{if(!B(t))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return e(r,n)},getInternalformatParameter:(t,e,r,n,i)=>{if(!B(t))switch(i){case 32937:return new Int32Array([0]);default:}return t.getInternalformatParameter(r,n,i)},getTexParameter(t,e,r,n){switch(n){case 34046:let{extensions:i}=t.luma,s=i[XS];n=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return e(r,n)},getParameter:px,hint(t,e,r,n){return e(r,n)}};function gx(t){t.luma=t.luma||{};let{luma:e}=t;return e.polyfilled||(ux(t),QS(t),eP(t,Rp),JS(t,{target:e,target2:t}),e.polyfilled=!0),t}var KS=typeof global!="undefined"?global:window;KS.polyfillContext=gx;function QS(t){t.luma.extensions={};let e=t.getSupportedExtensions()||[];for(let r of e)t.luma[r]=t.getExtension(r)}function JS(t,{target:e,target2:r}){Object.keys(Iu).forEach(n=>{if(typeof Iu[n]=="function"){let i=t[n]?t[n].bind(t):()=>{},s=Iu[n].bind(null,t,i);e[n]=s,r[n]=s}})}function eP(t,e){for(let r of Object.getOwnPropertyNames(e))r!=="overrides"&&tP(t,{extension:r,target:t.luma,target2:t})}function tP(t,{extension:e,target:r,target2:n}){let i=Rp[e];ye(i);let{meta:s={}}=i,{suffix:o=""}=s,a=t.getExtension(e);for(let l of Object.keys(i)){let c=`${l}${o}`,u=null;l==="meta"||typeof t[l]=="function"||(a&&typeof a[c]=="function"?u=(...h)=>a[c](...h):typeof i[l]=="function"&&(u=i[l].bind(r))),u&&(r[l]=u,n[l]=u)}}var wa={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Nn=(t,e,r)=>e?t.enable(r):t.disable(r),vx=(t,e,r)=>t.hint(r,e),St=(t,e,r)=>t.pixelStorei(r,e),rP=(t,e)=>{let r=B(t)?36009:36160;return t.bindFramebuffer(r,e)},nP=(t,e)=>t.bindFramebuffer(36008,e);function Ea(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var yx={[3042]:Nn,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:Nn,[2885]:(t,e)=>t.cullFace(e),[2929]:Nn,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:Nn,[35723]:vx,[36006]:rP,[2886]:(t,e)=>t.frontFace(e),[33170]:vx,[2849]:(t,e)=>t.lineWidth(e),[32823]:Nn,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Nn,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Nn,[3088]:(t,e)=>t.scissor(...e),[2960]:Nn,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:St,[3317]:St,[37440]:St,[37441]:St,[37443]:St,[3330]:St,[3332]:St,[3331]:St,[36010]:nP,[3314]:St,[32878]:St,[3316]:St,[3315]:St,[32877]:St,framebuffer:(t,e)=>{let r=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,r)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Ea(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Ea(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Ea(e)?e:[e,e];let[r,n]=e;t.stencilMaskSeparate(1028,r),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=Ea(e)&&e.length===3?[...e,...e]:e;let[r,n,i,s,o,a]=e;t.stencilFuncSeparate(1028,r,n,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=Ea(e)&&e.length===3?[...e,...e]:e;let[r,n,i,s,o,a]=e;t.stencilOpSeparate(1028,r,n,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function me(t,e,r){return e[t]!==void 0?e[t]:r[t]}var xx={blendEquation:(t,e,r)=>t.blendEquationSeparate(me(32777,e,r),me(34877,e,r)),blendFunc:(t,e,r)=>t.blendFuncSeparate(me(32969,e,r),me(32968,e,r),me(32971,e,r),me(32970,e,r)),polygonOffset:(t,e,r)=>t.polygonOffset(me(32824,e,r),me(10752,e,r)),sampleCoverage:(t,e,r)=>t.sampleCoverage(me(32938,e,r),me(32939,e,r)),stencilFuncFront:(t,e,r)=>t.stencilFuncSeparate(1028,me(2962,e,r),me(2967,e,r),me(2963,e,r)),stencilFuncBack:(t,e,r)=>t.stencilFuncSeparate(1029,me(34816,e,r),me(36003,e,r),me(36004,e,r)),stencilOpFront:(t,e,r)=>t.stencilOpSeparate(1028,me(2964,e,r),me(2965,e,r),me(2966,e,r)),stencilOpBack:(t,e,r)=>t.stencilOpSeparate(1029,me(34817,e,r),me(34818,e,r),me(34819,e,r))},Op={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,r)=>t({[e]:r}),hint:(t,e,r)=>t({[e]:r}),bindFramebuffer:(t,e,r)=>{switch(e){case 36160:return t({[36006]:r,[36010]:r});case 36009:return t({[36006]:r});case 36008:return t({[36010]:r});default:return null}},blendColor:(t,e,r,n,i)=>t({[32773]:new Float32Array([e,r,n,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,r)=>t({[32777]:e,[34877]:r}),blendFunc:(t,e,r)=>t({[32969]:e,[32968]:r,[32971]:e,[32970]:r}),blendFuncSeparate:(t,e,r,n,i)=>t({[32969]:e,[32968]:r,[32971]:n,[32970]:i}),clearColor:(t,e,r,n,i)=>t({[3106]:new Float32Array([e,r,n,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,r,n,i)=>t({[3107]:[e,r,n,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,r)=>t({[2928]:new Float32Array([e,r])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,r)=>t({[32824]:e,[10752]:r}),sampleCoverage:(t,e,r)=>t({[32938]:e,[32939]:r}),scissor:(t,e,r,n,i)=>t({[3088]:new Int32Array([e,r,n,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,r)=>t({[e===1028?2968:36005]:r}),stencilFunc:(t,e,r,n)=>t({[2962]:e,[2967]:r,[2963]:n,[34816]:e,[36003]:r,[36004]:n}),stencilFuncSeparate:(t,e,r,n,i)=>t({[e===1028?2962:34816]:r,[e===1028?2967:36003]:n,[e===1028?2963:36004]:i}),stencilOp:(t,e,r,n)=>t({[2964]:e,[2965]:r,[2966]:n,[34817]:e,[34818]:r,[34819]:n}),stencilOpSeparate:(t,e,r,n,i)=>t({[e===1028?2964:34817]:r,[e===1028?2965:34818]:n,[e===1028?2966:34819]:i}),viewport:(t,e,r,n,i)=>t({[2978]:[e,r,n,i]})},Pr=(t,e)=>t.isEnabled(e),Cp={[3042]:Pr,[2884]:Pr,[2929]:Pr,[3024]:Pr,[32823]:Pr,[32926]:Pr,[32928]:Pr,[3089]:Pr,[2960]:Pr,[35977]:Pr};function kp(t){for(let e in t)return!1;return!0}function _x(t,e){if(t===e)return!0;let r=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(r&&n&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function Ex(t,e){let r=t[e].bind(t);t[e]=function(...i){let s=i[0];return s in t.state.cache?t.state.enable?t.state.cache[s]:r(...i):r(...i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function iP(t,e,r){let n=t[e].bind(t);t[e]=function(...s){let{valueChanged:o,oldValue:a}=r(t.state._updateCache,...s);return o&&n(...s),a},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function sP(t){let e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}var Np=class{constructor(e,{copyState:r=!1,log:n=()=>{}}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?Ls(e):Object.assign({},wa),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){ye(this.stateStack.length>0);let e=this.stateStack[this.stateStack.length-1];Be(this.gl,e),this.stateStack.pop()}_updateCache(e){let r=!1,n,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(let s in e){ye(s!==void 0);let o=e[s],a=this.cache[s];_x(o,a)||(r=!0,n=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:r,oldValue:n}}};function Ru(t,e={}){let{enable:r=!0,copyState:n}=e;if(ye(n!==void 0),!t.state){let i=typeof global!="undefined"?global:window,{polyfillContext:s}=i;s&&s(t),t.state=new Np(t,{copyState:n}),sP(t);for(let o in Op){let a=Op[o];iP(t,o,a)}Ex(t,"getParameter"),Ex(t,"isEnabled")}return t.state.enable=r,t}function Dp(t){t.state||Ru(t,{copyState:!1}),t.state.push()}function Ou(t){ye(t.state),t.state.pop()}function Be(t,e){if(ye(qr(t),"setParameters requires a WebGL context"),kp(e))return;let r={};for(let i in e){let s=Number(i),o=yx[i];o&&(typeof o=="string"?r[o]=!0:o(t,e[i],s))}let n=t.state&&t.state.cache;if(n)for(let i in r)xx[i](t,e,n)}function Ls(t,e){if(e=e||wa,typeof e=="number"){let i=e,s=Cp[i];return s?s(t,i):t.getParameter(i)}let r=Array.isArray(e)?e:Object.keys(e),n={};for(let i of r){let s=Cp[i];n[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return n}function Cu(t){Be(t,wa)}function ee(t,e,r){if(kp(e))return r(t);let{nocatch:n=!0}=e;Dp(t),Be(t,e);let i;if(n)i=r(t),Ou(t);else try{i=r(t)}finally{Ou(t)}return i}var Ta=yt(bs());function rr(t){let{luma:e}=t;if(t.canvas&&e){let{clientWidth:r}=e.canvasSizeInfo;return r?t.drawingBufferWidth/r:1}return 1}function Is(t,e,r=!0){let n=rr(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return oP(e,n,i,s,r)}function Mx(t){let e=typeof window=="undefined"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function oP(t,e,r,n,i){let s=wx(t[0],e,r),o=Tx(t[1],e,n,i),a=wx(t[0]+1,e,r),l=a===r-1?a:a-1;a=Tx(t[1]+1,e,n,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===n-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function wx(t,e,r){return Math.min(Math.round(t*e),r-1)}function Tx(t,e,r,n){return n?Math.max(0,r-1-Math.round(t*e)):Math.min(Math.round(t*e),r-1)}var Fp=(0,Ta.isBrowser)(),aP=Fp&&typeof document!="undefined",Sx={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Rs(t={}){ye(Fp,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},Sx,t);let{width:e,height:r}=t;function n(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=n;let i,{canvas:s}=t,o=cP({canvas:s,width:e,height:r,onError:n});return i=lP(o,t),i?(i=_i(i,t),uP(i),i):null}function _i(t,e={}){if(!t||t._instrumented)return t;t._version=t._version||fP(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},Sx,e);let{manageState:r,debug:n}=e;return r&&Ru(t,{copyState:!1,log:(...i)=>N.log(1,...i)()}),Fp&&n&&(Ta.global.makeDebugContext?(t=Ta.global.makeDebugContext(t,e),N.level=Math.max(N.level,1)):N.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Px(t){let e=t.getParameter(7936),r=t.getParameter(7937),n=t.getExtension("WEBGL_debug_renderer_info"),i=n&&t.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),s=n&&t.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||r,vendorMasked:e,rendererMasked:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function zp(t,e={}){if(t.canvas){let n=Mx(e.useDevicePixels);hP(t,n,e);return}let r=t.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in e&&"height"in e&&r.resize(e.width,e.height)}function lP(t,e){let{onError:r}=e,n=null,i=l=>n=l.statusMessage||n;t.addEventListener("webglcontextcreationerror",i,!1);let{webgl1:s=!0,webgl2:o=!0}=e,a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):r(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${n||"Unknown error"}`)}function cP({canvas:t,width:e=800,height:r=600,onError:n}){let i;return typeof t=="string"?(aP&&document.readyState==="complete"||n(`createGLContext called on canvas '${t}' before page was loaded`),i=document.getElementById(t)):t?i=t:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(r)?`${r}px`:"100%",document.body.insertBefore(i,document.body.firstChild)),i}function uP(t){let e=B(t)?"WebGL2":"WebGL1",r=Px(t),n=r?`(${r.vendor},${r.renderer})`:"",i=t.debug?" debug":"";N.info(1,`${e}${i} context ${n}`)()}function fP(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?2:1}function hP(t,e,r){let n="width"in r?r.width:t.canvas.clientWidth,i="height"in r?r.height:t.canvas.clientHeight;(!n||!i)&&(N.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};let s=t.luma.canvasSizeInfo;if(s.clientWidth!==n||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e,a=Math.floor(n*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(N.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/n,t.drawingBufferHeight/i),t.canvas.width=Math.floor(n*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:e})}}var Ar=yt(bs()),Ma="8.5.10",dP="set luma.log.level=1 (or higher) to trace rendering",Bp=class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new tr({id:e})),this.stats.get(e)}},jt=new Bp;if(Ar.global.luma&&Ar.global.luma.VERSION!==Ma)throw new Error(`luma.gl - multiple VERSIONs detected: ${Ar.global.luma.VERSION} vs ${Ma}`);Ar.global.luma||((0,Ar.isBrowser)()&&N.log(1,`luma.gl ${Ma} - ${dP}`)(),Ar.global.luma=Ar.global.luma||{VERSION:Ma,version:Ma,log:N,stats:jt,globals:{modules:{},nodeIO:{}}});var cN=Ar.global.luma;function Up(t){return typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function Vp(t){return typeof window!="undefined"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var kx=yt(bs());function L(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function ku(t,e){if(typeof e!="string")return e;let r=Number(e);if(!isNaN(r))return r;e=e.replace(/^.*\./,"");let n=t[e];return L(n!==void 0,`Accessing undefined constant GL.${e}`),n}function Gt(t,e){e=Number(e);for(let r in t)if(t[r]===e)return`GL.${r}`;return String(e)}var jp={};function nt(t="id"){jp[t]=jp[t]||1;let e=jp[t]++;return`${t}-${e}`}function Gp(t){return L(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function br(t){let e=!0;for(let r in t){e=!1;break}return e}function Nu(t,e,r,n){let i=`See luma.gl ${r} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(t);n.forEach(o=>{s.methodName||(s[o]=()=>{throw N.removed(`Calling removed method ${e}.${o}: `,i)(),new Error(o)})})}var Os="Resource subclass must define virtual methods",xe=class{constructor(e,r={}){Zr(e);let{id:n,userData:i={}}=r;this.gl=e,this.gl2=e,this.id=n||nt(this.constructor.name),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){let r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&e&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(e=this.handle){if(typeof e!="function")return this._bindHandle(e),this;let r;return this._bound?r=e():(this._bindHandle(this.handle),this._bound=!0,r=e(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(e,r={}){e=ku(this.gl,e),L(e);let i=(this.constructor.PARAMETERS||{})[e];if(i){let s=B(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){let a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,r)}getParameters(e={}){let{parameters:r,keys:n}=e,i=this.constructor.PARAMETERS||{},s=B(this.gl),o={},a=r||Object.keys(i);for(let l of a){let c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){let h=n?Gt(this.gl,l):l;o[h]=this.getParameter(l,e),n&&c.type==="GLenum"&&(o[h]=Gt(this.gl,o[h]))}}return o}setParameter(e,r){e=ku(this.gl,e),L(e);let i=(this.constructor.PARAMETERS||{})[e];if(i){let s=B(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=ku(r))}return this._setParameter(e,r),this}setParameters(e){for(let r in e)this.setParameter(r,e[r]);return this}stubRemovedMethods(e,r,n){return Nu(this,e,r,n)}initialize(e){}_createHandle(){throw new Error(Os)}_deleteHandle(){throw new Error(Os)}_bindHandle(e){throw new Error(Os)}_getOptsFromHandle(){throw new Error(Os)}_getParameter(e,r){throw new Error(Os)}_setParameter(e,r){throw new Error(Os)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){let e=this.constructor.name,r=jt.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get(`${e}s Created`).incrementCount(),r.get(`${e}s Active`).incrementCount()}_removeStats(){let e=this.constructor.name;jt.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,r=this.constructor.name){let n=jt.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get(`${r} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){let r=jt.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}};var pP="Failed to deduce GL constant from typed array";function Sa(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(pP)}}function Dn(t,{clamped:e=!0}={}){switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ax({data:t,width:e,height:r,bytesPerPixel:n=4,temp:i}){let s=e*n;i=i||new Uint8Array(s);for(let o=0;o<r/2;++o){let a=o*s,l=(r-o-1)*s;i.set(t.subarray(a,a+s)),t.copyWithin(a,l,l+s),t.set(i,l)}}function bx({data:t,width:e,height:r}){let n=Math.round(e/2),i=Math.round(r/2),s=new Uint8Array(n*i*4);for(let o=0;o<i;o++)for(let a=0;a<n;a++)for(let l=0;l<4;l++)s[(o*n+a)*4+l]=t[(o*2*e+a*2)*4+l];return{data:s,width:n,height:i}}function Pa(t,e,r){let{removedProps:n={},deprecatedProps:i={},replacedProps:s={}}=r;for(let a in n)if(a in e){let c=n[a]?`${t}.${n[a]}`:"N/A";N.removed(`${t}.${a}`,c)()}for(let a in i)if(a in e){let l=i[a];N.deprecated(`${t}.${a}`,`${t}.${l}`)()}let o=null;for(let a in s)if(a in e){let l=s[a];N.deprecated(`${t}.${a}`,`${t}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}var mP={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},gP={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Le=class{static getBytesPerElement(e){return Dn(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return L(e.size),Dn(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new Le(...[mP,...e])}constructor(...e){e.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Le.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Le.getBytesPerVertex(this)}_assign(e={}){return e=Pa("Accessor",e,gP),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}};var Lx=10,Ix={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},vP={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Ix},yP={removedProps:Ix},G=class extends xe{constructor(e,r={}){super(e,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/Le.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/Le.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Pa("Buffer",e,vP),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=Pa("Buffer",e,yP),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Le(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});let{data:r,offset:n=0,srcOffset:i=0}=e,s=e.byteLength||e.length;L(r);let o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(ue(this.gl),this.gl.bufferSubData(this.target,n,r,i,s)):this.gl.bufferSubData(o,n,r),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(r),this}copyData({sourceBuffer:e,readOffset:r=0,writeOffset:n=0,size:i}){let{gl:s}=this;return ue(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,n,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}={}){ue(this.gl);let s=Dn(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(r),a=n,l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);let u=Math.min(o,l);return i=i||u,L(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,e,n,i),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}={}){return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,r,this.handle,n,i):(L(n===0),this.gl.bindBufferBase(e,r,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:r=this.accessor&&this.accessor.index}={}){return e===35345||e===35982?this.gl.bindBufferBase(e,r,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Lx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,r=0,n=e.byteLength+r){L(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();let i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,Lx),this.bytesUsed=n,this._trackAllocatedMemory(n);let s=Sa(e);return L(s),this.setAccessor(new Le(this.accessor,{type:s})),this}_setByteLength(e,r=this.usage){L(e>=0),this._trackDeallocatedMemory();let n=e;e===0&&(n=new Float32Array(0));let i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){let r=Dn(this.accessor.type||5126,{clamped:!1}),n=e/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(e){this.accessor.type||this.setAccessor(new Le(this.accessor,{type:Sa(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);let r=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),r}get type(){return N.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return N.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return N.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return N.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Le(this.accessor,e),this}};var Du={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},Fu={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},zu={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function Rx(t,e){let r=Du[e];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;let n=B(t)&&r.gl2||r.gl1;return typeof n=="string"?t.getExtension(n):n}function Ox(t,e){let r=Du[e];switch(r&&r.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var xP=[9729,9728],Cx=kx.global.WebGLBuffer||function(){},dt=class extends xe{static isSupported(e,r={}){let{format:n,linearFiltering:i}=r,s=!0;return n&&(s=s&&Rx(e,n),s=s&&(!i||Ox(e,n))),s}constructor(e,r){let{id:n=nt("texture"),handle:i,target:s}=r;super(e,{id:n,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let r=e.data;if(r instanceof Promise)return r.then(m=>this.initialize(Object.assign({},e,{pixels:m,data:m}))),this;let n=typeof HTMLVideoElement!="undefined"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(e)),this;let{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;r||(r=i);let{width:h,height:f,dataFormat:y,type:x,compressed:_=!1,mipmaps:T=!0}=e,{depth:p=0}=e;return{width:h,height:f,compressed:_,dataFormat:y,type:x}=this._deduceParameters({format:s,type:x,dataFormat:y,compressed:_,data:r,width:h,height:f}),this.width=h,this.height=f,this.depth=p,this.format=s,this.type=x,this.dataFormat=y,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),T&&this._isNPOT()&&(N.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),T=!1,this._updateForNPOT(l)),this.mipmaps=T,this.setImageData({data:r,width:h,height:f,depth:p,format:s,type:x,dataFormat:y,border:o,mipmaps:T,parameters:c,compressed:_}),T&&this.generateMipmap(),this.setParameters(l),a&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){let{video:e,parameters:r,lastTime:n}=this._video;if(n===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:r,mipmaps:n=!1}){return r!==this.width||e!==this.height?this.initialize({width:r,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:n}):this}generateMipmap(e={}){return this._isNPOT()?(N.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ee(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");let{target:r=this.target,pixels:n=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e,{data:c=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:y=this.dataFormat,compressed:x=!1}=e;c||(c=n),{type:u,dataFormat:y,compressed:x,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:y,compressed:x,data:c,width:h,height:f});let{gl:_}=this;_.bindTexture(this.target,this.handle);let T=null;({data:c,dataType:T}=this._getDataType({data:c,compressed:x}));let p;if(ee(this.gl,l,()=>{switch(T){case"null":_.texImage2D(r,i,s,h,f,o,y,u,c);break;case"typed-array":_.texImage2D(r,i,s,h,f,o,y,u,c,a);break;case"buffer":p=ue(_),p.bindBuffer(35052,c.handle||c),p.texImage2D(r,i,s,h,f,o,y,u,a),p.bindBuffer(35052,null);break;case"browser-object":B(_)?_.texImage2D(r,i,s,h,f,o,y,u,c):_.texImage2D(r,i,s,y,u,c);break;case"compressed":for(let[m,v]of c.entries())_.compressedTexImage2D(r,m,v.format,v.width,v.height,o,v.data);break;default:L(!1,"Unknown image data type")}}),c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{let m=Fu[this.dataFormat]||4,v=zu[this.type]||1;this._trackAllocatedMemory(this.width*this.height*m*v,"Texture")}return this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:r=null,data:n=null,x:i=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:f=!1,offset:y=0,border:x=this.border,parameters:_={}}){if({type:u,dataFormat:h,compressed:f,width:o,height:a}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:f,data:n,width:o,height:a}),L(this.depth===0,"texSubImage not supported for 3D textures"),n||(n=r),n&&n.data){let T=n;n=T.data,o=T.shape[0],a=T.shape[1]}n instanceof G&&(n=n.handle),this.gl.bindTexture(this.target,this.handle),ee(this.gl,_,()=>{if(f)this.gl.compressedTexSubImage2D(e,l,i,s,o,a,c,n);else if(n===null)this.gl.texSubImage2D(e,l,i,s,o,a,h,u,null);else if(ArrayBuffer.isView(n))this.gl.texSubImage2D(e,l,i,s,o,a,h,u,n,y);else if(n instanceof Cx){let T=ue(this.gl);T.bindBuffer(35052,n),T.texSubImage2D(e,l,i,s,o,a,h,u,y),T.bindBuffer(35052,null)}else B(this.gl)?ue(this.gl).texSubImage2D(e,l,i,s,o,a,h,u,n):this.gl.texSubImage2D(e,l,i,s,h,u,n)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return N.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){let{gl:r}=this;return e!==void 0&&(this.textureUnit=e,r.activeTexture(33984+e)),r.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){let{gl:r}=this;return e!==void 0&&(this.textureUnit=e,r.activeTexture(33984+e)),r.bindTexture(this.target,null),e}_getDataType({data:e,compressed:r=!1}){return r?{data:e,dataType:"compressed"}:e===null?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof G?{data:e.handle,dataType:"buffer"}:e instanceof Cx?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){let{format:r,data:n}=e,{width:i,height:s,dataFormat:o,type:a,compressed:l}=e,c=Du[r];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(n,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:r,data:n}}_deduceImageSize(e,r,n){let i;return typeof ImageData!="undefined"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement!="undefined"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},L(i,"Could not deduced texture size"),L(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),L(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);let r=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),r}}_setParameter(e,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(e,r),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,r);break;case 4096:case 4097:L(!1);break;default:this.gl.texParameteri(this.target,e,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return B(this.gl)||!this.width||!this.height?!1:!Gp(this.width)||!Gp(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,r){if(this._isNPOT())switch(e){case 10241:xP.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break;default:break}return r}};var _P="";function Nx(t,e){return L(typeof t=="string"),t=_P+t,new Promise((r,n)=>{try{let i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error(`Could not load image ${t}.`)),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){n(i)}})}var K=class extends dt{static isSupported(e,r){return dt.isSupported(e,r)}constructor(e,r={}){Zr(e),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:Nx(r.data)})),super(e,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}};var Wp=[34069,34070,34071,34072,34073,34074],Ei=class extends dt{constructor(e,r={}){Zr(e),super(e,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(e={}){let{mipmaps:r=!0,parameters:n={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,r&&this.generateMipmap(e),this.setParameters(n)}),this}subImage({face:e,data:r,x:n=0,y:i=0,mipmapLevel:s=0}){return this._subImage({target:e,data:r,x:n,y:i,mipmapLevel:s})}async setCubeMapImageData({width:e,height:r,pixels:n,data:i,border:s=0,format:o=6408,type:a=5121}){let{gl:l}=this,c=n||i,u=await Promise.all(Wp.map(h=>{let f=c[h];return Promise.all(Array.isArray(f)?f:[f])}));this.bind(),Wp.forEach((h,f)=>{u[f].length>1&&this.opts.mipmaps!==!1&&N.warn(`${this.id} has mipmap and multiple LODs.`)(),u[f].forEach((y,x)=>{e&&r?l.texImage2D(h,x,o,e,r,s,o,a,y):l.texImage2D(h,x,o,o,a,y)})}),this.unbind()}setImageDataForFace(e){let{face:r,width:n,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,h=s||o;return this.bind(),h instanceof Promise?h.then(f=>this.setImageDataForFace(Object.assign({},e,{face:r,data:f,pixels:f}))):this.width||this.height?u.texImage2D(r,0,l,n,i,a,l,c,h):u.texImage2D(r,0,l,l,c,h),this}};Ei.FACES=Wp;var Cs=class extends dt{static isSupported(e){return B(e)}constructor(e,r={}){ue(e),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(e,r),this.initialize(r),Object.seal(this)}setImageData({level:e=0,dataFormat:r=6408,width:n,height:i,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:u,parameters:h={}}){if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ee(this.gl,h,()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,r,n,i,s,o,a,l,u),u instanceof G&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,r,n,i,s,o,a,l,c))}),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{let f=Fu[this.dataFormat]||4,y=zu[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*f*y,"Texture")}return this.loaded=!0,this}};var wi="EXT_color_buffer_float",Hp={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:wi,bpp:2},[33327]:{gl2:wi,bpp:4},[34842]:{gl2:wi,bpp:8},[33326]:{gl2:wi,bpp:4},[33328]:{gl2:wi,bpp:8},[34836]:{gl2:wi,bpp:16},[35898]:{gl2:wi,bpp:4}};function EP(t,e,r){let n=r[e];if(!n)return!1;let i=B(t)&&n.gl2||n.gl1;return typeof i=="string"?t.getExtension(i):i}var pt=class extends xe{static isSupported(e,{format:r}={format:null}){return!r||EP(e,r,Hp)}static getSamplesForFormat(e,{format:r}){return e.getInternalformatParameter(36161,r,32937)}constructor(e,r={}){super(e,r),this.initialize(r),Object.seal(this)}initialize({format:e,width:r=1,height:n=1,samples:i=0}){return L(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),i!==0&&B(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,r,n):this.gl.renderbufferStorage(36161,e,r,n),this.format=e,this.width=r,this.height=n,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Hp[this.format].bpp),this}resize({width:e,height:r}){return e!==this.width||r!==this.height?this.initialize({width:e,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}};var wP=256,TP=1024,MP=16384,Dx=6144,Fx=6145,zx=6146,Bx=34041,Ux="clear: bad arguments";function Fn(t,{framebuffer:e=null,color:r=null,depth:n=null,stencil:i=null}={}){let s={};e&&(s.framebuffer=e);let o=0;r&&(o|=MP,r!==!0&&(s.clearColor=r)),n&&(o|=wP,n!==!0&&(s.clearDepth=n)),i&&(o|=TP,n!==!0&&(s.clearStencil=n)),L(o!==0,Ux),ee(t,s,()=>{t.clear(o)})}function Yp(t,{framebuffer:e=null,buffer:r=Dx,drawBuffer:n=0,value:i=[0,0,0,0]}={}){ue(t),ee(t,{framebuffer:e},()=>{switch(r){case Dx:switch(i.constructor){case Int32Array:t.clearBufferiv(r,n,i);break;case Uint32Array:t.clearBufferuiv(r,n,i);break;case Float32Array:default:t.clearBufferfv(r,n,i)}break;case Fx:t.clearBufferfv(Fx,0,[i]);break;case zx:t.clearBufferiv(zx,0,[i]);break;case Bx:let[s,o]=i;t.clearBufferfi(Bx,0,s,o);break;default:L(!1,Ux)}})}function Vx(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return L(!1),0}}function Kr(t,e={}){let{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=e,{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e,{framebuffer:u,deleteFramebuffer:h}=SP(t);L(u);let{gl:f,handle:y,attachments:x}=u;a=a||u.width,l=l||u.height,s===36064&&y===null&&(s=1028),L(x[s]),c=c||x[s].type,o=PP(o,c,i,a,l),c=c||Sa(o);let _=f.bindFramebuffer(36160,y);return f.readPixels(r,n,a,l,i,c,o),f.bindFramebuffer(36160,_||null),h&&u.delete(),o}function Bu(t,{sourceAttachment:e=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}={}){let n=Kr(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>r;)({data:n,width:i,height:s}=bx({data:n,width:i,height:s}));Ax({data:n,width:i,height:s});let o=document.createElement("canvas");o.width=i,o.height=s;let a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(n),a.putImageData(l,0,0),o.toDataURL()}function SP(t){return t instanceof Y?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:jx(t),deleteFramebuffer:!0}}function PP(t,e,r,n,i){if(t)return t;e=e||5121;let s=Dn(e,{clamped:!1}),o=Vx(r);return new s(n*i*o)}var Q={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function AP(t){let e=new K(t,{format:6408,type:5126,dataFormat:6408}),r=new Y(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),n=r.getStatus();return e.delete(),r.delete(),n===36053}var $p={[Q.WEBGL2]:[!1,!0],[Q.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Q.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Q.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Q.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Q.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Q.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Q.FLOAT_BLEND]:["EXT_float_blend"],[Q.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Q.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Q.TEXTURE_FLOAT]:["OES_texture_float",!0],[Q.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Q.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Q.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Q.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Q.COLOR_ATTACHMENT_RGBA32F]:[AP,"EXT_color_buffer_float"],[Q.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Q.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Q.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Q.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Q.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Q.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]};var bP=2;function Aa(t,e){return ks(t,e)}function ks(t,e){return e=Array.isArray(e)?e:[e],e.every(r=>Gx(t,r))}function Uu(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(let e in $p)t.luma.caps[e]===void 0&&(t.luma.caps[e]=Gx(t,e));return t.luma.caps}function Gx(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=LP(t,e)),t.luma.caps[e]||N.log(bP,`Feature: ${e} not supported`)(),t.luma.caps[e]}function LP(t,e){let r=$p[e];L(r,e);let n,i=B(t)&&r[1]||r[0];if(typeof i=="function")n=i(t);else if(Array.isArray(i)){n=!0;for(let s of i)n=n&&Boolean(t.getExtension(s))}else typeof i=="string"?n=Boolean(t.getExtension(i)):typeof i=="boolean"?n=i:L(!1);return n}var Wx="Multiple render targets not supported",Y=class extends xe{static isSupported(e,r={}){let{colorBufferFloat:n,colorBufferHalfFloat:i}=r,s=!0;return n&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Y(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){let e=ue(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){let e=ue(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,r={}){super(e,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:r=1,attachments:n=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l=void 0,drawBuffers:c=void 0}){if(L(e>=0&&r>=0,"Width and height need to be integers"),this.width=e,this.height=r,n)for(let u in n){let h=n[u];(Array.isArray(h)?h[0]:h).resize({width:e,height:r})}else n=this._createDefaultAttachments(i,s,o,e,r);this.update({clearAttachments:!0,attachments:n,readBuffer:l,drawBuffers:c}),n&&a&&this.checkStatus()}delete(){for(let e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:r,drawBuffers:n,clearAttachments:i=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:i,resizeAttachments:s});let{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),n&&this._setDrawBuffers(n),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:r,height:n}=e;if(this.handle===null)return L(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&N.log(2,`Resizing framebuffer ${this.id} to ${r}x${n}`)();for(let i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(e,{clearAttachments:r=!1,resizeAttachments:n=!0}={}){let i={};r&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);let s=this.gl.bindFramebuffer(36160,this.handle);for(let o in i){L(o!==void 0,"Misspelled framebuffer binding point?");let a=Number(o),l=i[a],c=l;if(!c)this._unattach(a);else if(c instanceof pt)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){let[u,h=0,f=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});n&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){let{gl:e}=this,r=this.getStatus();if(r!==36053)throw new Error(RP(r));return this}getStatus(){let{gl:e}=this,r=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,r||null),n}clear(e={}){let{color:r,depth:n,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&Fn(this.gl,{color:r,depth:n,stencil:i}),s.forEach((a,l)=>{Yp(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return N.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return N.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return N.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return N.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return N.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return N.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:r=0,y:n=0,width:i,height:s}){let o=ue(this.gl),a=o.bindFramebuffer(36008,this.handle);return r===0&&n===0&&i===void 0&&s===void 0?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,r,n,i,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Gt(this.gl,i)),i}getAttachmentParameters(e=36064,r,n=this.constructor.ATTACHMENT_PARAMETERS||[]){let i={};for(let s of n){let o=r?Gt(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,r)}return i}getParameters(e=!0){let r=Object.keys(this.attachments),n={};for(let i of r){let s=Number(i),o=e?Gt(this.gl,s):s;n[o]=this.getAttachmentParameters(s,e)}return n}show(){return typeof window!="undefined"&&window.open(Bu(this),"luma-debug-texture"),this}log(e=0,r=""){if(e>N.level||typeof window=="undefined")return this;r=r||`Framebuffer ${this.id}`;let n=Bu(this,{targetMaxHeight:100});return N.image({logLevel:e,message:r,image:n},r)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,r,n,i,s){let o=null;return e&&(o=o||{},o[36064]=new K(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),r&&n?(o=o||{},o[33306]=new pt(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:i,height:111}),this.ownResources.push(o[33306])):r?(o=o||{},o[36096]=new pt(this.gl,{id:`${this.id}-depth`,format:33189,width:i,height:s}),this.ownResources.push(o[36096])):n&&L(!1),o}_unattach(e){let r=this.attachments[e];!r||(r instanceof pt?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:r}){let{gl:n}=this;n.framebufferRenderbuffer(36160,e,36161,r.handle),this.attachments[e]=r}_attachTexture({attachment:e=36064,texture:r,layer:n,level:i}){let{gl:s}=this;switch(s.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:ue(s).framebufferTextureLayer(36160,e,r.target,i,n);break;case 34067:let a=IP(n);s.framebufferTexture2D(36160,e,a,r.handle,i);break;case 3553:s.framebufferTexture2D(36160,e,3553,r.handle,i);break;default:L(!1,"Illegal texture type")}s.bindTexture(r.target,null),this.attachments[e]=r}_setReadBuffer(e){let r=Ip(this.gl);r?r.readBuffer(e):L(e===36064||e===1029,Wx),this.readBuffer=e}_setDrawBuffers(e){let{gl:r}=this,n=ue(r);if(n)n.drawBuffers(e);else{let i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):L(e.length===1&&(e[0]===36064||e[0]===1029),Wx)}this.drawBuffers=e}_getAttachmentParameterFallback(e){let r=Uu(this.gl);switch(e){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}};function IP(t){return t<34069?t+34069:t}function RP(t){return(Y.STATUS||{})[t]||`Framebuffer error ${t}`}var OP=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Y.ATTACHMENT_PARAMETERS=OP;function Vu(t,e){L(t instanceof K||t instanceof Ei||t instanceof Cs);let r=t.constructor,{gl:n,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,h=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new r(n,h)}function jx(t,e){let{gl:r,width:n,height:i,id:s}=t;return new Y(r,Object.assign({},e,{id:`framebuffer-for-${s}`,width:n,height:i,attachments:{[36064]:t}}))}function zn(t,e="unnamed"){let r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=t.match(r);return n?n[1]:e}function Xp(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}function qp(t,e,r,n){let i=t.split(/\r?\n/),s={},o={},a=n||zn(e)||"(unnamed)",l=`${Xp(r)} shader ${a}`;for(let u=0;u<i.length;u++){let h=i[u];if(h.length<=1)continue;let f=h.split(":"),y=f[0],x=parseInt(f[2],10);if(isNaN(x))throw new Error(`GLSL compilation error in ${l}: ${t}`);y!=="WARNING"?s[x]=h:o[x]=h}let c=CP(e);return{shaderName:l,errors:Hx(s,c),warnings:Hx(o,c)}}function Hx(t,e){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(!(!t[n+3]&&!t[n+2]&&!t[n+1])&&(r+=`${i}
`,t[n+1])){let s=t[n+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();r+=Yx(`^^^ ${a}: ${c}

`,l)}}return r}function CP(t,e=1,r=": "){let n=t.split(/\r?\n/),i=String(n.length+e-1).length;return n.map((s,o)=>{let a=String(o+e),l=a.length;return Yx(a,i-l)+r+s})}function Yx(t,e){let r="";for(let n=0;n<e;++n)r+=" ";return`${r}${t}`}function Ns(t){let e=100,r=t.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){let n=parseInt(r[1],10);Number.isFinite(n)&&(e=n)}return e}var kP="Shader: GLSL source code must be a JavaScript string",Ti=class extends xe{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return L(!1),"unknown"}}constructor(e,r){Zr(e),L(typeof r.source=="string",kP);let n=zn(r.source,null)||r.id||nt(`unnamed ${Ti.getTypeName(r.shaderType)}`);super(e,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize({source:e}){let r=zn(e,null);r&&(this.id=nt(r)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${Ti.getTypeName(this.shaderType)}:${this.id}`}getName(){return zn(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){let e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100
${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){let n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=qp(n,this.source,this.shaderType,this.id);throw N.error(`GLSL compilation errors in ${i}
${s}`)(),N.warn(`GLSL compilation warnings in ${i}
${o}`)(),new Error(`GLSL compilation errors in ${i}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}},Ds=class extends Ti{constructor(e,r){typeof r=="string"&&(r={source:r}),super(e,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},Fs=class extends Ti{constructor(e,r){typeof r=="string"&&(r={source:r}),super(e,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}};var NP={[5126]:ae.bind(null,"uniform1fv",Pt,1,Xe),[35664]:ae.bind(null,"uniform2fv",Pt,2,Xe),[35665]:ae.bind(null,"uniform3fv",Pt,3,Xe),[35666]:ae.bind(null,"uniform4fv",Pt,4,Xe),[5124]:ae.bind(null,"uniform1iv",Bn,1,Xe),[35667]:ae.bind(null,"uniform2iv",Bn,2,Xe),[35668]:ae.bind(null,"uniform3iv",Bn,3,Xe),[35669]:ae.bind(null,"uniform4iv",Bn,4,Xe),[35670]:ae.bind(null,"uniform1iv",Bn,1,Xe),[35671]:ae.bind(null,"uniform2iv",Bn,2,Xe),[35672]:ae.bind(null,"uniform3iv",Bn,3,Xe),[35673]:ae.bind(null,"uniform4iv",Bn,4,Xe),[35674]:ae.bind(null,"uniformMatrix2fv",Pt,4,Qr),[35675]:ae.bind(null,"uniformMatrix3fv",Pt,9,Qr),[35676]:ae.bind(null,"uniformMatrix4fv",Pt,16,Qr),[35678]:Ue,[35680]:Ue,[5125]:ae.bind(null,"uniform1uiv",ju,1,Xe),[36294]:ae.bind(null,"uniform2uiv",ju,2,Xe),[36295]:ae.bind(null,"uniform3uiv",ju,3,Xe),[36296]:ae.bind(null,"uniform4uiv",ju,4,Xe),[35685]:ae.bind(null,"uniformMatrix2x3fv",Pt,6,Qr),[35686]:ae.bind(null,"uniformMatrix2x4fv",Pt,8,Qr),[35687]:ae.bind(null,"uniformMatrix3x2fv",Pt,6,Qr),[35688]:ae.bind(null,"uniformMatrix3x4fv",Pt,12,Qr),[35689]:ae.bind(null,"uniformMatrix4x2fv",Pt,8,Qr),[35690]:ae.bind(null,"uniformMatrix4x3fv",Pt,12,Qr),[35678]:Ue,[35680]:Ue,[35679]:Ue,[35682]:Ue,[36289]:Ue,[36292]:Ue,[36293]:Ue,[36298]:Ue,[36299]:Ue,[36300]:Ue,[36303]:Ue,[36306]:Ue,[36307]:Ue,[36308]:Ue,[36311]:Ue},DP={},FP={},zP={},$x=[0];function Zp(t,e,r,n){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&($x[0]=t,t=$x);let i=t.length;if(i%e&&N.warn(`Uniform size should be multiples of ${e}`,t)(),t instanceof r)return t;let s=n[i];s||(s=new r(i),n[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function Pt(t,e){return Zp(t,e,Float32Array,DP)}function Bn(t,e){return Zp(t,e,Int32Array,FP)}function ju(t,e){return Zp(t,e,Uint32Array,zP)}function Kp(t,e,r){let n=NP[r.type];if(!n)throw new Error(`Unknown GLSL uniform type ${r.type}`);return n().bind(null,t,e)}function Xx(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};let e=/([^[]*)(\[[0-9]+\])?/,r=t.match(e);if(!r||r.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function qx(t,e,r){for(let n in t){let i=t[n];if((!r||Boolean(r[n]))&&!BP(i))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${n}`,i),new Error(`${e} Bad uniform ${n}`)}return!0}function BP(t){return Array.isArray(t)||ArrayBuffer.isView(t)?UP(t):isFinite(t)||t===!0||t===!1||t instanceof dt||t instanceof pt?!0:t instanceof Y?Boolean(t.texture):!1}function Zx(t,e,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(t[e]){let n=t[e];for(let i=0,s=r.length;i<s;++i)n[i]=r[i]}else t[e]=r.slice();else t[e]=r}function UP(t){if(t.length===0)return!1;let e=Math.min(t.length,16);for(let r=0;r<e;++r)if(!Number.isFinite(t[r]))return!1;return!0}function Ue(){let t=null;return(e,r,n)=>{let i=t!==n;return i&&(e.uniform1i(r,n),t=n),i}}function ae(t,e,r,n){let i=null,s=null;return(o,a,l)=>{let c=e(l,r),u=c.length,h=!1;if(i===null)i=new Float32Array(u),s=u,h=!0;else{L(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(c[f]!==i[f]){h=!0;break}}return h&&(n(o,t,a,c),i.set(c)),h}}function Xe(t,e,r,n){t[e](r,n)}function Qr(t,e,r,n){t[e](r,!1,n)}var VP=5120,jP=5121,GP=5122,WP=5123,Kx=0,Gu=1,HP=2,YP=3,Wu=4,$P=5,XP=6,Ie=5126,qP=35664,ZP=35665,KP=35666,ba=5124,QP=35667,JP=35668,eA=35669,La=5125,tA=36294,rA=36295,nA=36296,iA=35670,sA=35671,oA=35672,aA=35673,lA=35674,cA=35675,uA=35676,fA=35685,hA=35686,dA=35687,pA=35688,mA=35689,gA=35690,Qp={[Ie]:[Ie,1,"float"],[qP]:[Ie,2,"vec2"],[ZP]:[Ie,3,"vec3"],[KP]:[Ie,4,"vec4"],[ba]:[ba,1,"int"],[QP]:[ba,2,"ivec2"],[JP]:[ba,3,"ivec3"],[eA]:[ba,4,"ivec4"],[La]:[La,1,"uint"],[tA]:[La,2,"uvec2"],[rA]:[La,3,"uvec3"],[nA]:[La,4,"uvec4"],[iA]:[Ie,1,"bool"],[sA]:[Ie,2,"bvec2"],[oA]:[Ie,3,"bvec3"],[aA]:[Ie,4,"bvec4"],[lA]:[Ie,8,"mat2"],[fA]:[Ie,8,"mat2x3"],[hA]:[Ie,8,"mat2x4"],[cA]:[Ie,12,"mat3"],[dA]:[Ie,12,"mat3x2"],[pA]:[Ie,12,"mat3x4"],[uA]:[Ie,16,"mat4"],[mA]:[Ie,16,"mat4x2"],[gA]:[Ie,16,"mat4x3"]};function Qx(t){switch(t){case Kx:return Kx;case Gu:return Gu;case YP:return Gu;case HP:return Gu;case Wu:return Wu;case $P:return Wu;case XP:return Wu;default:return L(!1),0}}function Jp(t){let e=Qp[t];if(!e)return null;let[r,n]=e;return{type:r,components:n}}function Hu(t,e){switch(t){case VP:case jP:case GP:case WP:t=Ie;break;default:}for(let r in Qp){let[n,i,s]=Qp[r];if(n===t&&i===e)return{glType:r,name:s}}return null}var Ia=class{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){let r=Number(e);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[e]||null}getAttributeLocation(e){let r=this.getAttributeInfo(e);return r?r.location:-1}getAttributeAccessor(e){let r=this.getAttributeInfo(e);return r?r.accessor:null}getVaryingInfo(e){let r=Number(e);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[e]||null}getVaryingIndex(e){let r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(e){let r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(e){let{gl:r}=e,n=r.getProgramParameter(e.handle,35721);for(let i=0;i<n;i++){let{name:s,type:o,size:a}=r.getActiveAttrib(e.handle,i),l=r.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){let{gl:r}=e;if(!B(r))return;let n=r.getProgramParameter(e.handle,35971);for(let i=0;i<n;i++){let{name:s,type:o,size:a}=r.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,r,n,i){let{type:s,components:o}=Jp(n),a={type:s,size:i*o};this._inferProperties(e,r,a);let l={location:e,name:r,accessor:new Le(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(e,r,n,i){let{type:s,components:o}=Jp(n),a=new Le({type:s,size:i*o}),l={location:e,name:r,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}};var Jx=4,vA=35981,yA=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Jr=class extends xe{constructor(e,r={}){super(e,r),this.stubRemovedMethods("Program","v6.0",yA),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(e={}){let{hash:r,vs:n,fs:i,varyings:s,bufferMode:o=vA}=e;return this.hash=r||"",this.vs=typeof n=="string"?new Ds(this.gl,{id:`${e.id}-vs`,source:n}):n,this.fs=typeof i=="string"?new Fs(this.gl,{id:`${e.id}-fs`,source:i}):i,L(this.vs instanceof Ds),L(this.fs instanceof Fs),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(ue(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Ia(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:r=4,vertexCount:n,offset:i=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:f,framebuffer:y,parameters:x={},uniforms:_,samplers:T}){if((_||T)&&(N.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(_||{})),N.priority>=e){let p=y?y.id:"default",m=`mode=${Gt(this.gl,r)} verts=${n} instances=${c} indexType=${Gt(this.gl,l)} isInstanced=${u} isIndexed=${a} Framebuffer=${p}`;N.log(e,m)()}return L(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||n===0||u&&c===0?!1:(h.bindForDraw(n,c,()=>{if(y!==void 0&&(x=Object.assign({},x,{framebuffer:y})),f){let p=Qx(r);f.begin(p)}this._bindTextures(),ee(this.gl,x,()=>{a&&u?this.gl2.drawElementsInstanced(r,n,l,i,c):a&&B(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(r,s,o,n,l,i):a?this.gl.drawElements(r,n,l,i):u?this.gl2.drawArraysInstanced(r,i,n,c):this.gl.drawArrays(r,i,n)}),f&&f.end()}),!0)}setUniforms(e={}){N.priority>=2&&qx(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(let r in e){let n=e[r],i=this._uniformSetters[r];if(i){let s=n,o=!1;if(s instanceof Y&&(s=s.texture),s instanceof dt)if(o=this.uniforms[r]!==n,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);let a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[r]=a}else s=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(s)||o)&&Zx(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let e=!0;for(let r in this._textureUniforms){let n=this._textureUniforms[r];n.update(),e=e&&n.loaded}return e}_bindTextures(){for(let e in this._textureUniforms){let r=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){let r=this.gl.getAttachedShaders(e),n={};for(let i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Ds({handle:i});break;case 35632:n.fs=new Fs({handle:i});break;default:}return n}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){let r=this._getName();this.id=nt(r)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){let{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),N.time(Jx,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),N.timeEnd(Jx,`linkProgram for ${this._getName()}`)(),e.debug||N.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){let{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){let n=this.gl.getActiveUniform(this.handle,r),{name:i}=Xx(n.name),s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Kp(e,s,n),n.size>1)for(let o=0;o<n.size;o++)s=e.getUniformLocation(this.handle,`${i}[${o}]`),this._uniformSetters[`${i}[${o}]`]=Kp(e,s,n)}this._textureIndexCounter=0}getActiveUniforms(e,r){return this.gl2.getActiveUniforms(this.handle,e,r)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,r){return this.gl2.getActiveUniformBlockParameter(this.handle,e,r)}uniformBlockBinding(e,r){this.gl2.uniformBlockBinding(this.handle,e,r)}};var xA=34918,_A=34919,EA=35007,wA=36795,TA=35976,MA=35887,SA=36202,en=class extends xe{static isSupported(e,r=[]){let n=B(e),i=ks(e,Q.TIMER_QUERY),s=n||i;for(let o of r)switch(o){case"queries":s=s&&n;break;case"timers":s=s&&i;break;default:L(!1)}return s}constructor(e,r={}){super(e,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(EA)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?SA:MA)}beginTransformFeedbackQuery(){return this.begin(TA)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;let e=this.gl2.getQueryParameter(this.handle,_A);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(wA)}getResult(){return this.gl2.getQueryParameter(this.handle,xA)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{let s=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return en.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}};var tn=class extends xe{static isSupported(e){return B(e)}constructor(e,r={}){ue(e),super(e,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,br(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(let r in e)this.setBuffer(r,e[r])}),this}setBuffer(e,r){let n=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(r);return n<0?(this.unused[e]=i,N.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let r,n,i;return e instanceof G?i=e:(i=e.buffer,n=e.byteSize,r=e.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;let r=Number(e);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(let e in this.buffers){let{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(let e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,r,n=0,i){let s=r&&r.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}};var Yu=null;function PA(t){return(!Yu||Yu.byteLength<t)&&(Yu=new ArrayBuffer(t)),Yu}function e_(t,e){let r=PA(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function t_({target:t,source:e,start:r=0,count:n=1}){let i=e.length,s=n*i,o=0;for(let a=r;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(r+o,r,r+o),o*=2):(t.copyWithin(r+o,r,r+s-o),o=s);return t}var AA="elements must be GL.ELEMENT_ARRAY_BUFFER",Ve=class extends xe{static isSupported(e,r={}){return r.constantAttributeZero?B(e)||(0,Lu.getBrowser)()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ve(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ve.MAX_ATTRIBUTES=Ve.MAX_ATTRIBUTES||e.getParameter(34921),Ve.MAX_ATTRIBUTES}static setConstant(e,r,n){switch(n.constructor){case Float32Array:Ve._setConstantFloatArray(e,r,n);break;case Int32Array:Ve._setConstantIntArray(e,r,n);break;case Uint32Array:Ve._setConstantUintArray(e,r,n);break;default:L(!1)}}constructor(e,r={}){let n=r.id||r.program&&r.program.id;super(e,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=e,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ve.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,r={}){return L(!e||e.target===34963,AA),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,r,n){if(r.target===34963)return this.setElementBuffer(r,n);let{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=n,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,r.handle),c?(L(B(h)),f.vertexAttribIPointer(e,i,s,o,a)):h.vertexAttribPointer(e,i,s,l,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e,r=!0){return!r&&e===0&&!Ve.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>r?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,r){let n=this._normalizeConstantArrayValue(r),i=n.byteLength*e,s=n.length*e,o=!this.buffer;if(this.buffer=this.buffer||new G(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){let a=e_(r.constructor,s);t_({target:a,source:n,start:0,count:s}),this.buffer.subData(a),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,r){if(!e||!r||e.length!==r.length||e.constructor!==r.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==r[n])return!1;return!0}static _setConstantFloatArray(e,r,n){switch(n.length){case 1:e.vertexAttrib1fv(r,n);break;case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:L(!1)}}static _setConstantIntArray(e,r,n){switch(L(B(e)),n.length){case 1:e.vertexAttribI1iv(r,n);break;case 2:e.vertexAttribI2iv(r,n);break;case 3:e.vertexAttribI3iv(r,n);break;case 4:e.vertexAttribI4iv(r,n);break;default:L(!1)}}static _setConstantUintArray(e,r,n){switch(L(B(e)),n.length){case 1:e.vertexAttribI1uiv(r,n);break;case 2:e.vertexAttribI2uiv(r,n);break;case 3:e.vertexAttribI3uiv(r,n);break;case 4:e.vertexAttribI4uiv(r,n);break;default:L(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:r}){return L(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}};var bA="VertexArray: attributes must be Buffers or constants (i.e. typed array)",LA=/^(.+)__LOCATION_([0-9]+)$/,IA=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],zs=class{constructor(e,r={}){let n=r.id||r.program&&r.program.id;this.id=n,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ve(e),Nu(this,"VertexArray","v6.0",IA),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;let{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(let r in e){let n=e[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,r={}){return this.elements=e,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,r),this}setBuffer(e,r,n={}){if(r.target===34963)return this.setElementBuffer(r,n);let{location:i,accessor:s}=this._resolveLocationAndAccessor(e,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,s)),this}setConstant(e,r,n={}){let{location:i,accessor:s}=this._resolveLocationAndAccessor(e,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new G(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof G&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){let r=this.values[e];r instanceof G&&this.setBuffer(e,r)}}),this}bindForDraw(e,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,r),i=n()}),i}_resolveLocationAndAccessor(e,r,n,i){let s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=r,N.once(3,()=>`unused value ${e} in ${this.id}`)(),s;let l=this._getAttributeInfo(a||o);if(!l)return s;let c=this.accessors[o]||{},u=Le.resolve(l.accessor,c,n,i),{size:h,type:f}=u;return L(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){let r=Number(e);if(Number.isFinite(r))return{location:r};let n=LA.exec(e),i=n?n[1]:e,s=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,r){if(r instanceof G)this.setBuffer(e,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof G){let n=r[0],i=r[1];this.setBuffer(e,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){let n=r;this.setConstant(e,n)}else if(r.buffer instanceof G){let n=r;this.setBuffer(e,n.buffer,n)}else throw new Error(bA)}_setConstantAttributes(e,r){let n=Math.max(e|0,r|0),i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,r){if(Ve.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}let n=this.vertexArrayObject.getConstantBuffer(r,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(e,r){Ve.setConstant(this.gl,e,r)}_updateDrawParams(){let e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(e,r);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,r){let n=this.values[r],i=this.accessors[r];if(!n)return;let{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,n instanceof G){let a=n;if(o){let l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{let l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,r={}){return N.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,r)}};function RA(t,e){let{maxElts:r=16,size:n=1}=e,i="[";for(let o=0;o<t.length&&o<r;++o)o>0&&(i+=`,${o%n===0?" ":""}`),i+=Mi(t[o],e);let s=t.length>r?"...":"]";return`${i}${s}`}function Mi(t,e={}){let{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return RA(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);let i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function $u({header:t="Uniforms",program:e,uniforms:r,undefinedOnly:n=!1}){L(e);let i=".*_.*",s=".*Matrix",o=e._uniformSetters,a={},l=Object.keys(o).sort(),c=0;for(let f of l)!f.match(i)&&!f.match(s)&&em({table:a,header:t,uniforms:r,uniformName:f,undefinedOnly:n})&&c++;for(let f of l)f.match(s)&&em({table:a,header:t,uniforms:r,uniformName:f,undefinedOnly:n})&&c++;for(let f of l)a[f]||em({table:a,header:t,uniforms:r,uniformName:f,undefinedOnly:n})&&c++;let u=0,h={};if(!n)for(let f in r){let y=r[f];a[f]||(u++,h[f]={Type:`NOT USED: ${y}`,[t]:Mi(y)})}return{table:a,count:c,unusedTable:h,unusedCount:u}}function em({table:t,header:e,uniforms:r,uniformName:n,undefinedOnly:i}){let s=r[n],o=OA(s);return!i||!o?(t[n]={[e]:o?Mi(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},!0):!1}function OA(t){return t!=null}function tm({vertexArray:t,header:e="Attributes"}){if(!t.configuration)return{};let r={};t.elements&&(r.ELEMENT_ARRAY_BUFFER=r_(t,t.elements,null,e));let n=t.values;for(let i in n){let s=t._getAttributeInfo(i);if(s){let o=`${i}: ${s.name}`,a=t.accessors[s.location];a&&(o=`${i}: ${CA(s.name,a)}`),r[o]=r_(t,n[i],a,e)}}return r}function r_(t,e,r,n){let{gl:i}=t;if(!e)return{[n]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,h;if(r&&(s=r.type,o=r.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof G){let f=e,{data:y,changed:x}=f.getDebugData();u=x?"*":"",h=y,l=f.byteLength,a=l/y.BYTES_PER_ELEMENT/o;let _;return r?_=`${r.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${Gt(i,s)})`:(c=!0,_=`${l} bytes`),{[n]:`${u}${Mi(h,{size:o,isInteger:c})}`,"Format ":_}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[n]:`${Mi(h,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function CA(t,e){let{type:r,size:n}=e,i=Hu(r,n);return i?`${t} (${i.name})`:t}function rm(t){let e={},r=`Accessors for ${t.id}`;for(let n of t.attributeInfos)if(n){let i=n_(n);e[`in ${i}`]={[r]:JSON.stringify(n.accessor)}}for(let n of t.varyingInfos)if(n){let i=n_(n);e[`out ${i}`]={[r]:JSON.stringify(n.accessor)}}return e}function n_(t){let{type:e,size:r}=t.accessor,n=Hu(e,r);return n?`${n.name} ${t.name}`:t.name}var s_=yt(bs()),i_=(0,s_.isBrowser)()&&typeof document!="undefined",DA=0,Si=class{constructor(e={}){let{onCreateContext:r=T=>Rs(T),onAddHTML:n=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:y=!0,stats:x=jt.get(`animation-loop-${DA++}`)}=e,{useDevicePixels:_=!0}=e;"useDevicePixelRatio"in e&&(N.deprecated("useDevicePixelRatio","useDevicePixels")(),_=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=x,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:y,useDevicePixels:_}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return L(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;let r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=en.isSupported(this.gl,["timers"])?new en(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,r=1){let n=document.getElementById(e);return n?Number(n.value):r}setViewParameters(){return N.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){let e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=i_?new Promise((e,r)=>{if(i_&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):Vp(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):Up(e)}_renderFrame(...e){if(this.display){this.display._renderFrame(...e);return}this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){let{width:e,height:r,aspect:n}=this._getSizeAndAspect();(e!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas!="undefined"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?_i(this.props.gl,e):this.onCreateContext(e),!qr(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Cu(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){let e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";let r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(r);let n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){let e=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight,n=1,{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:e>0&&r>0&&(n=e/r),{width:e,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&zp(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Y(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){let{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}};var Pi="vs",Ra="fs";function _e(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var nm={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function a_(t){let e={};for(let r in t){let n=t[r],i=FA(n);e[r]=i}return e}function FA(t){let e=o_(t);return e==="object"?t?"type"in t?Object.assign({},t,nm[t.type]):"value"in t?(e=o_(t.value),Object.assign({type:e},t,nm[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},nm[e])}function o_(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}var zA="vs",BA="fs",Bs=class{constructor({name:e,vs:r,fs:n,dependencies:i=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}){_e(typeof e=="string"),this.name=e,this.vs=r||u,this.fs=n||h,this.getModuleUniforms=o,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=UA(c),s&&(this.uniforms=a_(s))}getModuleSource(e){let r;switch(e){case zA:r=this.vs||"";break;case BA:r=this.fs||"";break;default:_e(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}
${r}// END MODULE_${this.name}

`}getUniforms(e,r){return this.getModuleUniforms?this.getModuleUniforms(e,r):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,r){this.deprecations.forEach(n=>{n.regex.test(e)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(e){return e.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp(`\\b${r.old}\\(`);break;default:r.regex=new RegExp(`${r.type} ${r.old};`)}}),e}_defaultGetUniforms(e={}){let r={},n=this.uniforms;for(let i in n){let s=n[i];i in e&&!s.private?(s.validate&&_e(s.validate(e[i],s),`${this.name}: invalid ${i}`),r[i]=e[i]):r[i]=s.value}return r}};function UA(t){let e={vs:{},fs:{}};for(let r in t){let n=t[r],i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),e[i][r]=n}return e}function l_(t){return VA(u_(t))}function VA(t){let e={},r={};return c_({modules:t,level:0,moduleMap:e,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>e[n])}function c_({modules:t,level:e,moduleMap:r,moduleDepth:n}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(let i of t)r[i.name]=i,(n[i.name]===void 0||n[i.name]<e)&&(n[i.name]=e);for(let i of t)i.dependencies&&c_({modules:i.dependencies,level:e+1,moduleMap:r,moduleDepth:n})}function u_(t,e){return t.map(r=>(r instanceof Bs||(_e(typeof r!="string",`Shader module use by name is deprecated. Import shader module '${r}' and use it directly.`),_e(r.name,"shader module has no name"),r=new Bs(r),r.dependencies=u_(r.dependencies)),r))}function im(t={}){let e=typeof window!="undefined"?window.navigator||{}:{},r=t.userAgent||e.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}var jA=7936,GA=7937,WA=7938,HA=35724,om={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Un={};Object.keys(om).forEach(t=>{Un[t]=t});function YA(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function f_(t){let e=t.getExtension("WEBGL_debug_renderer_info"),r=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||jA),n=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||GA);return{gpuVendor:$A(r,n),vendor:r,renderer:n,version:t.getParameter(WA),shadingLanguageVersion:t.getParameter(HA)}}function $A(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}var sm={};function am(t,e,r={}){let n=om[e];if(_e(n,e),!im(r))return!0;if(e in sm)return sm[e];let i=n[0],s=r.behavior||"enable",o=`#extension GL_${i} : ${s}
void main(void) {}`,a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);let l=t.getShaderParameter(a,35713);return t.deleteShader(a),sm[e]=l,l}function XA(t,e){let r=om[e];_e(r,e);let n=YA(t)&&r[1]||r[0],i=typeof n=="string"?Boolean(t.getExtension(n)):n;return _e(i===!1||i===!0),i}function Oa(t,e){return e=Array.isArray(e)?e:[e],e.every(r=>XA(t,r))}function h_(t){switch(f_(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function d_(t,e,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Oa(t,Un.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Oa(t,Un.GLSL_DERIVATIVES)&&am(t,Un.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Oa(t,Un.GLSL_FRAG_DATA)&&am(t,Un.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Oa(t,Un.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}var p_=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,m_=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`;var qA={[Pi]:p_,[Ra]:m_},Ca="__LUMA_INJECT_DECLARATIONS__",g_=/void\s+main\s*\([^)]*\)\s*\{\n?/,v_=/}\n?[^{}]*$/,lm=[];function Xu(t,e,r,n=!1){let i=e===Pi;for(let s in r){let o=r[s];o.sort((l,c)=>l.order-c.order),lm.length=o.length;for(let l=0,c=o.length;l<c;++l)lm[l]=o[l].injection;let a=`${lm.join(`
`)}
`;switch(s){case"vs:#decl":i&&(t=t.replace(Ca,a));break;case"vs:#main-start":i&&(t=t.replace(g_,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(v_,l=>a+l));break;case"fs:#decl":i||(t=t.replace(Ca,a));break;case"fs:#main-start":i||(t=t.replace(g_,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(v_,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(Ca,""),n&&(t=t.replace(/\}\s*$/,s=>s+qA[e])),t}function Us(t){let e={};return _e(Array.isArray(t)&&t.length>1),t.forEach(r=>{for(let n in r)e[n]=e[n]?`${e[n]}
${r[n]}`:r[n]}),e}function Vs(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}var y_=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],ZA=[...y_,[Vs("attribute"),"in $1"],[Vs("varying"),"out $1"]],KA=[...y_,[Vs("varying"),"in $1"]],x_=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],QA=[...x_,[Vs("in"),"attribute $1"],[Vs("out"),"varying $1"]],JA=[...x_,[Vs("in"),"varying $1"]],cm="gl_FragColor",um=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,eb=/void\s+main\s*\([^)]*\)\s*\{\n?/;function fm(t,e,r){switch(e){case 300:return r?qu(t,ZA):tb(t);case 100:return r?qu(t,QA):rb(t);default:throw new Error(`unknown GLSL version ${e}`)}}function qu(t,e){for(let[r,n]of e)t=t.replace(r,n);return t}function tb(t){t=qu(t,KA);let e=t.match(um);if(e){let r=e[1];t=t.replace(new RegExp(`\\b${cm}\\b`,"g"),r)}else{let r="fragmentColor";t=t.replace(eb,n=>`out vec4 ${r};
${n}`).replace(new RegExp(`\\b${cm}\\b`,"g"),r)}return t}function rb(t){t=qu(t,JA);let e=t.match(um);if(e){let r=e[1];t=t.replace(um,"").replace(new RegExp(`\\b${r}\\b`,"g"),cm)}return t}var nb=`

${Ca}

`,E_={[Pi]:"vertex",[Ra]:"fragment"},ib=`precision highp float;

`;function hm(t,e){let{vs:r,fs:n}=e,i=l_(e.modules||[]);return{gl:t,vs:__(t,Object.assign({},e,{source:r,type:Pi,modules:i})),fs:__(t,Object.assign({},e,{source:n,type:Ra,modules:i})),getUniforms:sb(i)}}function __(t,{id:e,source:r,type:n,modules:i,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:u}){_e(typeof r=="string","shader source must be a string");let h=n===Pi,f=r.split(`
`),y=100,x="",_=r;f[0].indexOf("#version ")===0?(y=300,x=f[0],_=f.slice(1).join(`
`)):x=`#version ${y}`;let T={};i.forEach(M=>{Object.assign(T,M.getDefines())}),Object.assign(T,s);let p=c?`${x}
${ab({id:e,source:r,type:n})}
${ob({type:n})}
${h_(t)}
${d_(t,y,!h)}
${lb(T)}
${h?"":ib}
`:`${x}
`,m=ub(o),v={},w={},S={};for(let M in a){let I=typeof a[M]=="string"?{injection:a[M],order:0}:a[M],b=M.match(/^(v|f)s:(#)?([\w-]+)$/);if(b){let D=b[2],C=b[3];D?C==="decl"?w[M]=[I]:S[M]=[I]:v[M]=[I]}else S[M]=[I]}for(let M of i){u&&M.checkDeprecations(_,u),p+=M.getModuleSource(n,y);let b=M.injections[n];for(let D in b){let C=D.match(/^(v|f)s:#([\w-]+)$/);if(C){let W=C[2]==="decl"?w:S;W[D]=W[D]||[],W[D].push(b[D])}else v[D]=v[D]||[],v[D].push(b[D])}}return p+=nb,p=Xu(p,n,w),p+=cb(m[n],v),p+=_,p=Xu(p,n,S),p=fm(p,l?100:y,h),p}function sb(t){return function(r){let n={};for(let i of t){let s=i.getUniforms(r,n);Object.assign(n,s)}return n}}function ob({type:t}){return`
#define SHADER_TYPE_${E_[t].toUpperCase()}
`}function ab({id:t,source:e,type:r}){return t&&typeof t=="string"&&e.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${t}_${E_[r]}

`:""}function lb(t={}){let e=0,r="";for(let n in t){e===0&&(r+=`
// APPLICATION DEFINES
`),e++;let i=t[n];(i||Number.isFinite(i))&&(r+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e===0&&(r+=`
`),r}function cb(t,e){let r="";for(let n in t){let i=t[n];if(r+=`void ${i.signature} {
`,i.header&&(r+=`  ${i.header}`),e[n]){let s=e[n];s.sort((o,a)=>o.order-a.order);for(let o of s)r+=`  ${o.injection}
`}i.footer&&(r+=`  ${i.footer}`),r+=`}
`}return r}function ub(t){let e={vs:{},fs:{}};return t.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();let[i,s]=r.split(":"),o=r.replace(/\(.+/,"");e[i][o]=Object.assign(n,{signature:s})}),e}var fb="void main() {gl_FragColor = vec4(0);}",w_=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,hb=`#version 300 es
${w_}`;function Zu(t,e){e=Array.isArray(e)?e:[e];let r=t.replace(/^\s+/,"").split(/\s+/),[n,i,s]=r;if(!e.includes(n)||!i||!s)return null;let o=s.split(";")[0];return{qualifier:n,type:i,name:o}}function ka(t={}){let{version:e=100,input:r,inputType:n,output:i}=t;if(!r)return e===300?hb:e>300?`#version ${e}
${w_}`:fb;let s=T_(r,n);return e>=300?`#version ${e} ${e===300?"es":""}
in ${n} ${r};
out vec4 ${i};
void main() {
  ${i} = ${s};
}`:`varying ${n} ${r};
void main() {
  gl_FragColor = ${s};
}`}function dm(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return _e(!1),null}}function pm(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return _e(!1),null}}function T_(t,e){switch(e){case"float":return`vec4(${t}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${t}, 0.0, 1.0)`;case"vec3":return`vec4(${t}, 1.0)`;case"vec4":return t;default:return _e(!1),null}}var db=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,Ku={name:"fp32",vs:db,fs:null};function nr(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}var O5=1/Math.PI*180,C5=1/180*Math.PI,J={};J.EPSILON=1e-12;J.debug=!1;J.precision=4;J.printTypes=!1;J.printDegrees=!1;J.printRowMajor=!0;function pb(t){return Math.round(t/J.EPSILON)*J.EPSILON}function mm(t,{precision:e=J.precision||4}={}){return t=pb(t),"".concat(parseFloat(t.toPrecision(e)))}function ir(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mb(t){return t.clone?t.clone():new Array(t.length)}function gb(t,e,r){if(ir(t)){r=r||mb(t);for(let n=0;n<r.length&&n<t.length;++n)r[n]=e(t[n],n,r);return r}return e(t)}function Re(t,e,r){return gb(t,n=>Math.max(e,Math.min(r,n)))}function Ai(t,e,r){return ir(t)?t.map((n,i)=>Ai(n,e[i],r)):r*e+(1-r)*t}function sr(t,e,r){let n=J.EPSILON;r&&(J.EPSILON=r);try{if(t===e)return!0;if(ir(t)&&ir(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!sr(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):Number.isFinite(t)&&Number.isFinite(e)?Math.abs(t-e)<=J.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{J.EPSILON=n}}function vb(t){function e(){var r=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}var bi=class extends vb(Array){get ELEMENTS(){return nr(!1),0}clone(){return new this.constructor().copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+r];return this.check()}to(e){return e===this?this:ir(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],r=0){for(let n=0;n<this.ELEMENTS;++n)e[r+n]=this[n];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(J)}formatString(e){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+mm(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!sr(this[r],e[r]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==e[r])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,r,n){n===void 0&&(n=r,r=e,e=this);for(let i=0;i<this.ELEMENTS;++i){let s=e[i];this[i]=s+n*(r[i]-s)}return this.check()}min(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(e[r],this[r]);return this.check()}max(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(e[r],this[r]);return this.check()}clamp(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),r[n]);return this.check()}add(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=e;return this.check()}addScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),r);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(J.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)e=e&&Number.isFinite(this[r]);return e}};function yb(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function Ee(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Qu(t,e,r=""){if(J.debug&&!yb(t,e))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return t}var M_={};function Ju(t,e){M_[t]||(M_[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}var Li=class extends bi{get ELEMENTS(){return nr(!1),0}copy(e){return nr(!1),this}get x(){return this[0]}set x(e){this[0]=Ee(e)}get y(){return this[1]}set y(e){this[1]=Ee(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*this[r];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let r=0;for(let n=0;n<this.ELEMENTS;++n){let i=this[n]-e[n];r+=i*i}return Ee(r)}dot(e){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*e[n];return Ee(r)}normalize(){let e=this.magnitude();if(e!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=e;return this.check()}multiply(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return nr(e>=0&&e<this.ELEMENTS,"index is out of range"),Ee(this[e])}setComponent(e,r){return nr(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=r,this.check()}addVectors(e,r){return this.copy(e).add(r)}subVectors(e,r){return this.copy(e).subtract(r)}multiplyVectors(e,r){return this.copy(e).multiply(r)}addScaledVector(e,r){return this.add(new this.constructor(e).multiplyScalar(r))}};var Vn=1e-6,Lr=typeof Float32Array!="undefined"?Float32Array:Array;var W5=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function xb(){var t=new Lr(2);return Lr!=Float32Array&&(t[0]=0,t[1]=0),t}function P_(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function A_(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function b_(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function tf(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}var H5=function(){var t=xb();return function(e,r,n,i,s,o){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();function rf(t,e,r){let n=e[0],i=e[1],s=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/s,t[1]=(r[1]*n+r[5]*i)/s,t}function nf(t,e,r){let n=e[0],i=e[1],s=e[2],o=r[3]*n+r[7]*i+r[11]*s||1;return t[0]=(r[0]*n+r[4]*i+r[8]*s)/o,t[1]=(r[1]*n+r[5]*i+r[9]*s)/o,t[2]=(r[2]*n+r[6]*i+r[10]*s)/o,t}function I_(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t}var jn=class extends Li{constructor(e=0,r=0){super(2),ir(e)&&arguments.length===1?this.copy(e):(J.debug&&(Ee(e),Ee(r)),this[0]=e,this[1]=r)}set(e,r){return this[0]=e,this[1]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this.check()}fromObject(e){return J.debug&&(Ee(e.x),Ee(e.y)),this[0]=e.x,this[1]=e.y,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return tf(this,this,e),this.check()}transformAsVector(e){return rf(this,this,e),this.check()}transformByMatrix3(e){return b_(this,this,e),this.check()}transformByMatrix2x3(e){return A_(this,this,e),this.check()}transformByMatrix2(e){return P_(this,this,e),this.check()}};function _b(){var t=new Lr(3);return Lr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Eb(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function R_(t,e,r){var n=e[0],i=e[1],s=e[2],o=r[0],a=r[1],l=r[2];return t[0]=i*l-s*a,t[1]=s*o-n*l,t[2]=n*a-i*o,t}function sf(t,e,r){var n=e[0],i=e[1],s=e[2],o=r[3]*n+r[7]*i+r[11]*s+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/o,t}function O_(t,e,r){var n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t}function C_(t,e,r){var n=r[0],i=r[1],s=r[2],o=r[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-n*c,f=n*l-i*a,y=i*f-s*h,x=s*u-n*f,_=n*h-i*u,T=o*2;return u*=T,h*=T,f*=T,y*=2,x*=2,_*=2,t[0]=a+u+y,t[1]=l+h+x,t[2]=c+f+_,t}function k_(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function N_(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function D_(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function F_(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(r*r+n*n+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,h=u&&Eb(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}var Q5=function(){var t=_b();return function(e,r,n,i,s,o){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();var gm=[0,0,0],B_={},ge=class extends Li{static get ZERO(){return B_.ZERO=B_.ZERO||Object.freeze(new ge(0,0,0,0))}constructor(e=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&ir(e)?this.copy(e):(J.debug&&(Ee(e),Ee(r),Ee(n)),this[0]=e,this[1]=r,this[2]=n)}set(e,r,n){return this[0]=e,this[1]=r,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return J.debug&&(Ee(e.x),Ee(e.y),Ee(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Ee(e)}angle(e){return F_(this,e)}cross(e){return R_(this,this,e),this.check()}rotateX({radians:e,origin:r=gm}){return k_(this,this,r,e),this.check()}rotateY({radians:e,origin:r=gm}){return N_(this,this,r,e),this.check()}rotateZ({radians:e,origin:r=gm}){return D_(this,this,r,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return sf(this,this,e),this.check()}transformAsVector(e){return nf(this,this,e),this.check()}transformByMatrix3(e){return O_(this,this,e),this.check()}transformByMatrix2(e){return I_(this,this,e),this.check()}transformByQuaternion(e){return C_(this,this,e),this.check()}};var Na=class extends bi{get ELEMENTS(){return nr(!1),0}get RANK(){return nr(!1),0}toString(){let e="[";if(J.printRowMajor){e+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+r])}else{e+="column-major:";for(let r=0;r<this.ELEMENTS;++r)e+=" ".concat(this[r])}return e+="]",e}getElementIndex(e,r){return r*this.RANK+e}getElement(e,r){return this[r*this.RANK+e]}setElement(e,r,n){return this[r*this.RANK+e]=Ee(n),this}getColumn(e,r=new Array(this.RANK).fill(-0)){let n=e*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(e,r){let n=e*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}};function wb(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U_(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function V_(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],y=e[11],x=e[12],_=e[13],T=e[14],p=e[15],m=r*a-n*o,v=r*l-i*o,w=r*c-s*o,S=n*l-i*a,M=n*c-s*a,I=i*c-s*l,b=u*_-h*x,D=u*T-f*x,C=u*p-y*x,j=h*T-f*_,W=h*p-y*_,ie=f*p-y*T,U=m*ie-v*W+w*j+S*C-M*D+I*b;return U?(U=1/U,t[0]=(a*ie-l*W+c*j)*U,t[1]=(i*W-n*ie-s*j)*U,t[2]=(_*I-T*M+p*S)*U,t[3]=(f*M-h*I-y*S)*U,t[4]=(l*C-o*ie-c*D)*U,t[5]=(r*ie-i*C+s*D)*U,t[6]=(T*w-x*I-p*v)*U,t[7]=(u*I-f*w+y*v)*U,t[8]=(o*W-a*C+c*b)*U,t[9]=(n*C-r*W-s*b)*U,t[10]=(x*M-_*w+p*m)*U,t[11]=(h*w-u*M-y*m)*U,t[12]=(a*D-o*j-l*b)*U,t[13]=(r*j-n*D+i*b)*U,t[14]=(_*v-x*S-T*m)*U,t[15]=(u*S-h*v+f*m)*U,t):null}function j_(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],y=t[12],x=t[13],_=t[14],T=t[15],p=e*o-r*s,m=e*a-n*s,v=e*l-i*s,w=r*a-n*o,S=r*l-i*o,M=n*l-i*a,I=c*x-u*y,b=c*_-h*y,D=c*T-f*y,C=u*_-h*x,j=u*T-f*x,W=h*T-f*_;return p*W-m*j+v*C+w*D-S*b+M*I}function vm(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],y=e[10],x=e[11],_=e[12],T=e[13],p=e[14],m=e[15],v=r[0],w=r[1],S=r[2],M=r[3];return t[0]=v*n+w*a+S*h+M*_,t[1]=v*i+w*l+S*f+M*T,t[2]=v*s+w*c+S*y+M*p,t[3]=v*o+w*u+S*x+M*m,v=r[4],w=r[5],S=r[6],M=r[7],t[4]=v*n+w*a+S*h+M*_,t[5]=v*i+w*l+S*f+M*T,t[6]=v*s+w*c+S*y+M*p,t[7]=v*o+w*u+S*x+M*m,v=r[8],w=r[9],S=r[10],M=r[11],t[8]=v*n+w*a+S*h+M*_,t[9]=v*i+w*l+S*f+M*T,t[10]=v*s+w*c+S*y+M*p,t[11]=v*o+w*u+S*x+M*m,v=r[12],w=r[13],S=r[14],M=r[15],t[12]=v*n+w*a+S*h+M*_,t[13]=v*i+w*l+S*f+M*T,t[14]=v*s+w*c+S*y+M*p,t[15]=v*o+w*u+S*x+M*m,t}function G_(t,e,r){var n=r[0],i=r[1],s=r[2],o,a,l,c,u,h,f,y,x,_,T,p;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],y=e[7],x=e[8],_=e[9],T=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=y,t[8]=x,t[9]=_,t[10]=T,t[11]=p,t[12]=o*n+u*i+x*s+e[12],t[13]=a*n+h*i+_*s+e[13],t[14]=l*n+f*i+T*s+e[14],t[15]=c*n+y*i+p*s+e[15]),t}function ym(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function W_(t,e,r,n){var i=n[0],s=n[1],o=n[2],a=Math.hypot(i,s,o),l,c,u,h,f,y,x,_,T,p,m,v,w,S,M,I,b,D,C,j,W,ie,U,Ht;return a<Vn?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(r),c=Math.cos(r),u=1-c,h=e[0],f=e[1],y=e[2],x=e[3],_=e[4],T=e[5],p=e[6],m=e[7],v=e[8],w=e[9],S=e[10],M=e[11],I=i*i*u+c,b=s*i*u+o*l,D=o*i*u-s*l,C=i*s*u-o*l,j=s*s*u+c,W=o*s*u+i*l,ie=i*o*u+s*l,U=s*o*u-i*l,Ht=o*o*u+c,t[0]=h*I+_*b+v*D,t[1]=f*I+T*b+w*D,t[2]=y*I+p*b+S*D,t[3]=x*I+m*b+M*D,t[4]=h*C+_*j+v*W,t[5]=f*C+T*j+w*W,t[6]=y*C+p*j+S*W,t[7]=x*C+m*j+M*W,t[8]=h*ie+_*U+v*Ht,t[9]=f*ie+T*U+w*Ht,t[10]=y*ie+p*U+S*Ht,t[11]=x*ie+m*U+M*Ht,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function H_(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*n,t[5]=o*i+u*n,t[6]=a*i+h*n,t[7]=l*i+f*n,t[8]=c*i-s*n,t[9]=u*i-o*n,t[10]=h*i-a*n,t[11]=f*i-l*n,t}function Y_(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*n,t[1]=o*i-u*n,t[2]=a*i-h*n,t[3]=l*i-f*n,t[8]=s*n+c*i,t[9]=o*n+u*i,t[10]=a*n+h*i,t[11]=l*n+f*i,t}function $_(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*n,t[1]=o*i+u*n,t[2]=a*i+h*n,t[3]=l*i+f*n,t[4]=c*i-s*n,t[5]=u*i-o*n,t[6]=h*i-a*n,t[7]=f*i-l*n,t}function X_(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=r+r,a=n+n,l=i+i,c=r*o,u=n*o,h=n*a,f=i*o,y=i*a,x=i*l,_=s*o,T=s*a,p=s*l;return t[0]=1-h-x,t[1]=u+p,t[2]=f-T,t[3]=0,t[4]=u-p,t[5]=1-c-x,t[6]=y+_,t[7]=0,t[8]=f+T,t[9]=y-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function q_(t,e,r,n,i,s,o){var a=1/(r-e),l=1/(i-n),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function Z_(t,e,r,n,i){var s=1/Math.tan(e/2),o;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function K_(t,e,r,n,i,s,o){var a=1/(e-r),l=1/(n-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*l,t[14]=(o+s)*c,t[15]=1,t}function Q_(t,e,r,n){var i,s,o,a,l,c,u,h,f,y,x=e[0],_=e[1],T=e[2],p=n[0],m=n[1],v=n[2],w=r[0],S=r[1],M=r[2];return Math.abs(x-w)<Vn&&Math.abs(_-S)<Vn&&Math.abs(T-M)<Vn?wb(t):(u=x-w,h=_-S,f=T-M,y=1/Math.hypot(u,h,f),u*=y,h*=y,f*=y,i=m*f-v*h,s=v*u-p*f,o=p*h-m*u,y=Math.hypot(i,s,o),y?(y=1/y,i*=y,s*=y,o*=y):(i=0,s=0,o=0),a=h*o-f*s,l=f*i-u*o,c=u*s-h*i,y=Math.hypot(a,l,c),y?(y=1/y,a*=y,l*=y,c*=y):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*x+s*_+o*T),t[13]=-(a*x+l*_+c*T),t[14]=-(u*x+h*_+f*T),t[15]=1,t)}function Mb(){var t=new Lr(4);return Lr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function J_(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}var c6=function(){var t=Mb();return function(e,r,n,i,s,o){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();var e2=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Pb=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ab=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),js={},le=class extends Na{static get IDENTITY(){return js.IDENTITY=js.IDENTITY||Object.freeze(new le(e2)),js.IDENTITY}static get ZERO(){return js.ZERO=js.ZERO||Object.freeze(new le(Pb)),js.ZERO}get INDICES(){return Ab}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,r,n,i,s,o,a,l,c,u,h,f,y,x,_,T){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=f,this[12]=y,this[13]=x,this[14]=_,this[15]=T,this.check()}setRowMajor(e,r,n,i,s,o,a,l,c,u,h,f,y,x,_,T){return this[0]=e,this[1]=s,this[2]=c,this[3]=y,this[4]=r,this[5]=o,this[6]=u,this[7]=x,this[8]=n,this[9]=a,this[10]=h,this[11]=_,this[12]=i,this[13]=l,this[14]=f,this[15]=T,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(e2)}fromQuaternion(e){return X_(this,e),this.check()}frustum({left:e,right:r,bottom:n,top:i,near:s,far:o}){return o===1/0?le._computeInfinitePerspectiveOffCenter(this,e,r,n,i,s):q_(this,e,r,n,i,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,r,n,i,s,o){let a=2*o/(n-r),l=2*o/(s-i),c=(n+r)/(n-r),u=(s+i)/(s-i),h=-1,f=-1,y=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=h,e[11]=f,e[12]=0,e[13]=0,e[14]=y,e[15]=0,e}lookAt(e,r,n){return arguments.length===1&&({eye:e,center:r,up:n}=e),r=r||[0,0,0],n=n||[0,1,0],Q_(this,e,r,n),this.check()}ortho({left:e,right:r,bottom:n,top:i,near:s=.1,far:o=500}){return K_(this,e,r,n,i,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:r=1,focalDistance:n=1,near:i=.1,far:s=500}){if(e>Math.PI*2)throw Error("radians");let o=e/2,a=n*Math.tan(o),l=a*r;return new le().ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:s})}perspective({fovy:e=void 0,fov:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:s=500}={}){if(e=e||r,e>Math.PI*2)throw Error("radians");return Z_(this,e,n,i,s),this.check()}determinant(){return j_(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=null){let n=this.getScale(r||[-0,-0,-0]),i=1/n[0],s=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=null){let n=this.getScale(r||[-0,-0,-0]),i=1/n[0],s=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return U_(this,this),this.check()}invert(){return V_(this,this),this.check()}multiplyLeft(e){return vm(this,e,this),this.check()}multiplyRight(e){return vm(this,this,e),this.check()}rotateX(e){return H_(this,this,e),this.check()}rotateY(e){return Y_(this,this,e),this.check()}rotateZ(e){return $_(this,this,e),this.check()}rotateXYZ([e,r,n]){return this.rotateX(e).rotateY(r).rotateZ(n)}rotateAxis(e,r){return W_(this,this,e,r),this.check()}scale(e){return Array.isArray(e)?ym(this,this,e):ym(this,this,[e,e,e]),this.check()}translate(e){return G_(this,this,e),this.check()}transform(e,r){return e.length===4?(r=J_(r||[-0,-0,-0,-0],e,this),Qu(r,4),r):this.transformAsPoint(e,r)}transformAsPoint(e,r){let{length:n}=e;switch(n){case 2:r=tf(r||[-0,-0],e,this);break;case 3:r=sf(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Qu(r,e.length),r}transformAsVector(e,r){switch(e.length){case 2:r=rf(r||[-0,-0],e,this);break;case 3:r=nf(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Qu(r,e.length),r}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,r,n){return this.identity().translate([e,r,n])}transformPoint(e,r){return Ju("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,r)}transformVector(e,r){return Ju("Matrix4.transformVector","3.0"),this.transformAsPoint(e,r)}transformDirection(e,r){return Ju("Matrix4.transformDirection","3.0"),this.transformAsVector(e,r)}};var xm={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global},bb=xm.global||xm.self||xm.window;bb.mathgl={config:J};var Lb=new Uint8Array([0,255,255,255]),Ib={pickingSelectedColor:null,pickingHighlightColor:Lb,pickingActive:!1,pickingAttribute:!1};function Rb(t=Ib){let e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{let r=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=r}if(t.pickingHighlightColor){let r=Array.from(t.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),e.picking_uHighlightColor=r}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}var Ob=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,Cb=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,of={name:"picking",vs:Ob,fs:Cb,getUniforms:Rb};var kb=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,_m={name:"transform",vs:kb,fs:null};var At=class{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new At(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(r=>r.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){let r=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(e,r){r&&(e=Object.assign(r,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){let{vs:r="",fs:n="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(r),h=this._getHash(n),f=c.map(v=>this._getHash(v.name)).sort(),y=o.map(v=>this._getHash(v)),x=Object.keys(i).sort(),_=Object.keys(s).sort(),T=[],p=[];for(let v of x)T.push(this._getHash(v)),T.push(this._getHash(i[v]));for(let v of _)p.push(this._getHash(v)),p.push(this._getHash(s[v]));let m=`${u}/${h}D${T.join("/")}M${f.join("/")}I${p.join("/")}V${y.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[m]){let v=hm(this.gl,{vs:r,fs:n,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[m]=new Jr(this.gl,{hash:m,vs:v.vs,fs:v.fs,varyings:o,bufferMode:a}),this._getUniforms[m]=v.getUniforms||(w=>{}),this._useCounts[m]=0}return this._useCounts[m]++,this._programCache[m]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){let r=e.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){let r=new Array(this._defaultModules.length+e.length),n={},i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){let a=this._defaultModules[s],l=a.name;r[i++]=a,n[l]=!0}for(let s=0,o=e.length;s<o;++s){let a=e[s],l=a.name;n[l]||(r[i++]=a,n[l]=!0)}return r.length=i,r}};var Nb={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function t2(t,e,r){let n={},i=e.indices;for(let s in e.attributes){let o=e.attributes[s],a=Db(s,r);if(s==="indices")i=o;else if(o.constant)n[a]=o.value;else{let l=o.value,c={...o};delete c.value,n[a]=[new G(t,l),c],Fb(s,c)}}if(i){let s=i.value||i;L(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');let o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new G(t,{data:s,target:34963}),o]}return n}function Db(t,e){let{attributeMap:r=Nb}=e||{};return r&&r[t]||t}function Fb(t,e){let r;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break;default:}switch(r){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;default:}L(Number.isFinite(e.size),`attribute ${t} needs size`)}var Gs=2,zb=1e4,Bb="Model needs drawMode and vertexCount",r2=()=>{},Ub={},rn=class{constructor(e,r={}){let{id:n=nt("model")}=r;L(qr(e)),this.id=n,this.gl=e,this.id=r.id||nt("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(e){this.props={},this.programManager=e.programManager||At.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;let{program:r=null,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:r,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},L(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),Bb)}setProps(e){this._setModelProps(e)}delete(){for(let e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){let{program:r,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:r,vs:n,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return L(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return L(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=t2(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(br(e))return this;let r={};for(let n in e){let i=e[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();let r=this.programManager.getUniforms(this.program);return r?r(e):{}}updateModuleSettings(e){let r=this.getModuleUniforms(e||{});return this.setUniforms(r)}clear(e){return Fn(this.program.gl,e),this}draw(e={}){this._checkProgram();let{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(r),this.setUniforms(i);let c;N.priority>=Gs&&(c=this._logDrawCallStart(Gs));let u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:y=u.indexOffset,vertexArrayInstanced:x=u.isInstanced}=this.props;x&&!this.isInstanced&&N.warn("Found instanced attributes on non-instanced model",this.id)();let{isInstanced:_,instanceCount:T}=this,{onBeforeRender:p=r2,onAfterRender:m=r2}=this.props;p(),this.program.setUniforms(this.uniforms);let v=this.program.draw(Object.assign(Ub,e,{logPriority:c,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:_,instanceCount:T,offset:h?y:0}));return m(),N.priority>=Gs&&this._logDrawCallEnd(c,l,n),v}transform(e={}){let{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=e,{parameters:s}=e;n&&this._setFeedbackBuffers(n),r&&(s=Object.assign({},s,{[35977]:r})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return N.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{let{vs:n,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}L(r instanceof Jr,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new zs(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(let e in this.geometryBuffers){let r=this.geometryBuffers[e][0]||this.geometryBuffers[e];r instanceof G&&r.delete()}}_setAnimationProps(e){this.animated&&L(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(br(e))return this;let{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new tn(r,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){let r=e>3?0:zb;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),N.group(Gs,`>>> DRAWING MODEL ${this.id}`,{collapsed:N.level<=2})(),e}_logDrawCallEnd(e,r,n,i){if(e===void 0)return;let s=tm({vertexArray:r,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=$u({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:c,count:u}=$u({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});u>0&&N.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&N.log("UNUSED UNIFORMS",Object.keys(a))();let h=rm(this.vertexArray.configuration);N.table(e,s)(),N.table(e,o)(),N.table(e+1,h)(),i&&i.log({logLevel:Gs,message:`Rendered to ${i.id}`}),N.groupEnd(Gs,`>>> DRAWING MODEL ${this.id}`)()}};var Da=class{constructor(e,r={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(e){for(let r of this.bindings)this._setupTransformFeedback(r,e)}updateModelProps(e={}){let{varyings:r}=this;return r.length>0&&(e=Object.assign({},e,{varyings:r})),e}getDrawOptions(e={}){let r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupBuffers(e)}getBuffer(e){let{feedbackBuffers:r}=this.bindings[this.currentIndex],n=e?r[e]:null;return n?n instanceof G?n:n.buffer:null}getData(e={}){let{varyingName:r}=e,n=this.getBuffer(r);return n?n.getData():null}delete(){for(let e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&L(B(this.gl))}_getFeedbackBuffers(e){let{sourceBuffers:r={}}=e,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(let i in this.feedbackMap){let s=this.feedbackMap[i];i in r&&(n[s]=i)}Object.assign(n,e.feedbackBuffers);for(let i in n){let s=n[i];if(typeof s=="string"){let o=r[s],{byteLength:a,usage:l,accessor:c}=o;n[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return n}_setupBuffers(e={}){let{sourceBuffers:r=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);let n=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(e,{model:r}){let{program:n}=r;e.transformFeedback=new tn(this.gl,{program:n,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){let{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(e,r){return e?(Object.assign(e.sourceBuffers,r.sourceBuffers),Object.assign(e.feedbackBuffers,r.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;let r=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(let i in this.feedbackMap){let s=this.feedbackMap[i];r[i]=e.feedbackBuffers[s],n[s]=e.sourceBuffers[i],L(n[s]instanceof G)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(e,r){let n=new G(this.gl,r);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}};var Vb="transform_uSampler_",af="transform_uSize_",n2="transform_position";function i2({vs:t,sourceTextureMap:e,targetTextureVarying:r,targetTexture:n}){let s=Object.keys(e).length,o=null,a={},l=t,c={};if(s>0||r){let u=l.split(`
`),h=u.slice();if(u.forEach((f,y,x)=>{if(s>0){let _=Hb(f,e);if(_){let{updatedLine:T,inject:p}=_;h[y]=T,c=Us([c,p]),Object.assign(a,_.samplerTextureMap),s--}}r&&!o&&(o=Wb(f,r))}),r){L(n);let f=`${af}${r}`,y=`uniform vec2 ${f};
`,x=`     vec2 ${n2} = transform_getPos(${f});
     gl_Position = vec4(${n2}, 0, 1.);
`;c=Us([c,{"vs:#decl":y,"vs:#main-start":x}])}l=h.join(`
`)}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}function s2({sourceTextureMap:t,targetTextureVarying:e,targetTexture:r}){let n={},i,s;e&&({width:i,height:s}=r,n[`${af}${e}`]=[i,s]);for(let o in t)({width:i,height:s}=t[o]),n[`${af}${o}`]=[i,s];return n}function jb(t){return Zu(t,["attribute","in"])}function Gb(t){let e=`${Vb}${t}`,r=`${af}${t}`,n=`  uniform sampler2D ${e};
  uniform vec2 ${r};`;return{samplerName:e,sizeName:r,uniformDeclerations:n}}function Wb(t,e){let r=Zu(t,["varying","out"]);return r&&r.name===e?r.type:null}function Hb(t,e){let r={},n=jb(t);if(!n)return null;let{type:i,name:s}=n;if(s&&e[s]){let o=`// ${t} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=Gb(s),u=dm(i),h=`  ${i} ${s} = transform_getInput(${a}, ${l}).${u};
`;return r[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:r}}return null}var Yb={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},$b="transform_output",Fa=class{constructor(e,r={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(e={}){let r=this._processVertexShader(e);return Object.assign({},e,r)}getDrawOptions(e={}){let{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},r,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters),c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(let h in this.samplerTextureMap){let f=this.samplerTextureMap[h];a[h]=n[f]}this._setSourceTextureParameters();let u=s2({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupTextures(e)}getTargetTexture(){let{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){let{framebuffer:r}=this.bindings[this.currentIndex],n=Kr(r);if(!e)return n;let i=n.constructor,s=pm(this.targetTextureType),o=new i(n.length*s/4),a=0;for(let l=0;l<n.length;l+=4)for(let c=0;c<s;c++)o[a++]=n[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){let{_targetTextureVarying:r,_swapTexture:n}=e;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(e)}_createTargetTexture(e){let{sourceTextures:r,textureOrReference:n}=e;if(n instanceof K)return n;let i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(e={}){let{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;let r=new Float32Array(e);r.forEach((n,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new G(this.gl,{data:r,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){let{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(e,r){let{sourceBuffers:n,sourceTextures:i,targetTexture:s}=r;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,n),s){e.targetTexture=s;let{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{[36064]:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new Y(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{[36064]:s}})}return e}_setSourceTextureParameters(){let e=this.currentIndex,{sourceTextures:r}=this.bindings[e];for(let n in r)r[n].setParameters(Yb)}_swapTextures(e){if(!this._swapTexture)return null;let r=Object.assign({},e.sourceTextures);r[this._swapTexture]=e.targetTexture;let n=e.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(e){let r=Vu(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){let{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=i2({vs:e.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),c=Us([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;let u=e._fs||ka({version:Ns(i),input:this.targetTextureVarying,inputType:o,output:$b}),h=this.hasSourceTextures||this.targetTextureVarying?[_m].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:h,uniforms:s,inject:c}}};var or=class{static isSupported(e){return B(e)}constructor(e,r={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){let{model:e,bufferTransform:r,textureTransform:n}=this;e&&e.delete(),r&&r.delete(),n&&n.delete()}run(e={}){let{clearRenderTarget:r=!0}=e,n=this._updateDrawOptions(e);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let e=!1,r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let n of r)e=e||n.swap();L(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){let r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let n of r){let i=n.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);let r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let n of r)n.update(e)}_initialize(e={}){let{gl:r}=this;this._buildResourceTransforms(r,e),e=this._updateModelProps(e),this.model=new rn(r,Object.assign({},e,{fs:e.fs||ka({version:Ns(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let r=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(e,r){Xb(r)&&(this.bufferTransform=new Da(e,r)),qb(r)&&(this.textureTransform=new Fa(e,r)),L(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let r=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of n)r=Object.assign(r,i.getDrawOptions(r));return r}};function Xb(t){return!!(!br(t.feedbackBuffers)||!br(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function qb(t){return!!(!br(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}var o2={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ii=class{static get DRAW_MODE(){return o2}constructor(e={}){let{id:r=nt("geometry"),drawMode:n=o2.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(let n in e){let i=e[n];i=ArrayBuffer.isView(i)?{value:i}:i,L(ArrayBuffer.isView(i.value),`${this._print(n)}: must be typed array or object with value as typed array`),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(L(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,r){if(r)return r.value.length;let n=1/0;for(let i in e){let s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(n=Math.min(n,o.length/a))}return L(Number.isFinite(n)),n}};var Zb=1,Kb=1,Gn=class{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){let{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=Zb++,a={time:0,delay:r,duration:n,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(let[r,n]of this.animations)n.channel===e&&this.detachAnimation(r)}isFinished(e){let r=this.channels.get(e);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(e){if(e===void 0)return this.time;let r=this.channels.get(e);return r===void 0?-1:r.time}setTime(e){this.time=Math.max(0,e);let r=this.channels.values();for(let i of r)this._setChannelTime(i,this.time);let n=this.animations.values();for(let i of n){let{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,r){let n=Kb++;return this.animations.set(n,{animation:e,channel:r}),e.setTime(this.getTime(r)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,r){let n=r-e.delay,i=e.duration*e.repeat;n>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}};function Wn(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var Ir={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document},eL=Ir.self||Ir.window||Ir.global||{},tL=Ir.window||Ir.self||Ir.global||{},rL=Ir.global||Ir.self||Ir.window||{},nL=Ir.document||{};var Ri=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser);var a2=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version),iL=a2&&parseFloat(a2[1])||0;var l2="3.2.0";function qe(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var Rr={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document},Qz=Rr.self||Rr.window||Rr.global||{},Jz=Rr.window||Rr.self||Rr.global||{},eB=Rr.global||Rr.self||Rr.window||{},tB=Rr.document||{};var Ws=typeof process!="object"||String(process)!=="[object process]"||process.browser;var u2=typeof window!="undefined"&&typeof window.orientation!="undefined",c2=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version),rB=c2&&parseFloat(c2[1])||0;var za=class{constructor(e,r){A(this,"name",void 0),A(this,"workerThread",void 0),A(this,"isRunning",!0),A(this,"result",void 0),A(this,"_resolve",()=>{}),A(this,"_reject",()=>{}),this.name=e,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(e,r){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:r})}done(e){qe(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){qe(this.isRunning),this.isRunning=!1,this._reject(e)}};var Hs=class{on(e,r){}postMessage(...e){}terminate(){}};var Em=new Map;function f2(t){qe(t.source&&!t.url||!t.source&&t.url);let e=Em.get(t.source||t.url);return e||(t.url&&(e=sL(t.url),Em.set(t.url,e)),t.source&&(e=h2(t.source),Em.set(t.source,e))),qe(e),e}function sL(t){if(!t.startsWith("http"))return t;let e=oL(t);return h2(e)}function h2(t){let e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function oL(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function wm(t,e=!0,r){let n=r||new Set;if(t){if(d2(t))n.add(t);else if(d2(t.buffer))n.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(let i in t)wm(t[i],e,n)}}return r===void 0?Array.from(n):[]}function d2(t){return t?t instanceof ArrayBuffer||typeof MessagePort!="undefined"&&t instanceof MessagePort||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas:!1}var Tm=()=>{},Hn=class{static isSupported(){return typeof Worker!="undefined"&&Ws||typeof Hs!==void 0}constructor(e){A(this,"name",void 0),A(this,"source",void 0),A(this,"url",void 0),A(this,"terminated",!1),A(this,"worker",void 0),A(this,"onMessage",void 0),A(this,"onError",void 0),A(this,"_loadableURL","");let{name:r,source:n,url:i}=e;qe(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=Tm,this.onError=s=>console.log(s),this.worker=Ws?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Tm,this.onError=Tm,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,r){r=r||wm(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(r+="".concat(e.message," in ")),e.lineno&&(r+=":".concat(e.lineno,":").concat(e.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=f2({source:this.source,url:this.url});let e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},e.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},e.onmessageerror=r=>console.error(r),e}_createNodeWorker(){let e;if(this.url){let n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Hs(n,{eval:!1})}else if(this.source)e=new Hs(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",r=>{this.onMessage(r)}),e.on("error",r=>{this.onError(r)}),e.on("exit",r=>{}),e}};var Ba=class{static isSupported(){return Hn.isSupported()}constructor(e){A(this,"name","unnamed"),A(this,"source",void 0),A(this,"url",void 0),A(this,"maxConcurrency",1),A(this,"maxMobileConcurrency",1),A(this,"onDebug",()=>{}),A(this,"reuseWorkers",!0),A(this,"props",{}),A(this,"jobQueue",[]),A(this,"idleQueue",[]),A(this,"count",0),A(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,r=(i,s,o)=>i.done(o),n=(i,s)=>i.error(s)){let i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:r,onError:n,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;let e=this._getAvailableWorker();if(!e)return;let r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:e,backlog:this.jobQueue.length});let n=new za(r.name,e);e.onMessage=i=>r.onMessage(n,i.type,i.payload),e.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Hn({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return u2?this.maxMobileConcurrency:this.maxConcurrency}};var aL={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},mt=class{static isSupported(){return Hn.isSupported()}static getWorkerFarm(e={}){return mt._workerFarm=mt._workerFarm||new mt({}),mt._workerFarm.setProps(e),mt._workerFarm}constructor(e){A(this,"props",void 0),A(this,"workerPools",new Map),this.props={...aL},this.setProps(e),this.workerPools=new Map}destroy(){for(let e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(let r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(e){let{name:r,source:n,url:i}=e,s=this.workerPools.get(r);return s||(s=new Ba({name:r,source:n,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};A(mt,"_workerFarm",void 0);var lL="beta";function Mm(t,e={}){let r=e[t.id]||{},n="".concat(t.id,"-worker.js"),i=r.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(n)),!i){let s=t.version;s==="latest"&&(s=lL);let o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(n)}return qe(i),i}function Sm(t,e=l2){qe(t,"no worker provided");let r=t.version;return!(!e||!r)}function Pm(t,e){return!mt.isSupported()||!Ws&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function Am(t,e,r,n,i){let s=t.id,o=Mm(t,r),l=mt.getWorkerFarm(r).getWorkerPool({name:s,url:o});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));let c=await l.startJob("process-on-worker",cL.bind(null,i));return c.postMessage("process",{input:e,options:r,context:n}),await(await c.result).result}async function cL(t,e,r,n){switch(r){case"done":e.done(n);break;case"error":e.error(new Error(n.error));break;case"process":let{id:i,input:s,options:o}=n;try{let a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){let l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function bm(t){return t&&typeof t=="object"&&t.isBuffer}function p2(t){return bm(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function lf(t){if(bm(t))return p2(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){let e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Lm(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;let n=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}function Im(...t){let e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),r=e.reduce((s,o)=>s+o.byteLength,0),n=new Uint8Array(r),i=0;for(let s of e)n.set(s,i),i+=s.byteLength;return n.buffer}async function Rm(t){let e=[];for await(let r of t)e.push(r);return Im(...e)}var uL="",m2={};function Om(t){for(let e in m2)if(t.startsWith(e)){let r=m2[e];t=t.replace(e,r)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(uL).concat(t)),t}var cf={};CT(cf,{dirname:()=>hL,filename:()=>fL,join:()=>dL});function fL(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}function hL(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function dL(...t){let e="/";return t=t.map((r,n)=>(n&&(r=r.replace(new RegExp("^".concat(e)),"")),n!==t.length-1&&(r=r.replace(new RegExp("".concat(e,"$")),"")),r)),t.join(e)}var pL=t=>typeof t=="boolean",Ua=t=>typeof t=="function",Ys=t=>t!==null&&typeof t=="object",Cm=t=>Ys(t)&&t.constructor==={}.constructor;var g2=t=>t&&typeof t[Symbol.iterator]=="function",v2=t=>t&&typeof t[Symbol.asyncIterator]=="function";var ar=t=>typeof Response!="undefined"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json;var lr=t=>typeof Blob!="undefined"&&t instanceof Blob,y2=t=>t&&typeof t=="object"&&t.isBuffer;var mL=t=>typeof ReadableStream!="undefined"&&t instanceof ReadableStream||Ys(t)&&Ua(t.tee)&&Ua(t.cancel)&&Ua(t.getReader);var gL=t=>Ys(t)&&Ua(t.read)&&Ua(t.pipe)&&pL(t.readable),uf=t=>mL(t)||gL(t);var vL=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,yL=/^([-\w.]+\/[-\w.+]+)/;function x2(t){let e=yL.exec(t);return e?e[1]:t}function km(t){let e=vL.exec(t);return e?e[1]:""}var xL=/\?.*/;function Oi(t){if(ar(t)){let e=Nm(t.url||""),r=t.headers.get("content-type")||"";return{url:e,type:x2(r)||km(e)}}return lr(t)?{url:Nm(t.name||""),type:t.type||""}:typeof t=="string"?{url:Nm(t),type:km(t)}:{url:"",type:""}}function _2(t){return ar(t)?t.headers["content-length"]||-1:lr(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function Nm(t){return t.replace(xL,"")}async function ff(t){if(ar(t))return t;let e={},r=_2(t);r>=0&&(e["content-length"]=String(r));let{url:n,type:i}=Oi(t);i&&(e["content-type"]=i);let s=await EL(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));let o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:n}),o}async function E2(t){if(!t.ok){let e=await _L(t);throw new Error(e)}}async function _L(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{let r=t.headers.get("Content-Type"),n=t.statusText;r.includes("application/json")&&(n+=" ".concat(await t.text())),e+=n,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(r){}return e}async function EL(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){let r=t.slice(0,5);return await new Promise(n=>{let i=new FileReader;i.onload=s=>{var o;return n(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(r)})}if(t instanceof ArrayBuffer){let r=t.slice(0,5),n=wL(r);return"data:base64,".concat(n)}return null}function wL(t){let e="",r=new Uint8Array(t);for(let n=0;n<r.byteLength;n++)e+=String.fromCharCode(r[n]);return btoa(e)}async function Dm(t,e){if(typeof t=="string"){t=Om(t);let r=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(r=e.fetch),await fetch(t,r)}return await ff(t)}var Fm=new $e({id:"loaders.gl"}),hf=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},df=class{constructor(){A(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}};var zm={fetch:null,mimeType:void 0,nothrow:!1,log:new df,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Ri,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},w2={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Bm(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state=t._state||{},t._state}var S2=()=>{let t=Bm();return t.globalOptions=t.globalOptions||{...zm},t.globalOptions};function P2(t,e,r,n){return r=r||[],r=Array.isArray(r)?r:[r],TL(t,r),SL(e,t,n)}function pf(t,e){let r=S2(),n=t||r;return typeof n.fetch=="function"?n.fetch:Ys(n.fetch)?i=>Dm(i,n):e!=null&&e.fetch?e==null?void 0:e.fetch:Dm}function TL(t,e){T2(t,null,zm,w2,e);for(let r of e){let n=t&&t[r.id]||{},i=r.options&&r.options[r.id]||{},s=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};T2(n,r.id,i,s,e)}}function T2(t,e,r,n,i){let s=e||"Top level",o=e?"".concat(e,"."):"";for(let a in t){let l=!e&&Ys(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in r)&&!c&&!u){if(a in n)Fm.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(n[a],"'"))();else if(!l){let h=ML(a,i);Fm.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}}function ML(t,e){let r=t.toLowerCase(),n="";for(let i of e)for(let s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");let o=s.toLowerCase();(r.startsWith(o)||o.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return n}function SL(t,e,r){let i={...t.options||{}};return PL(i,r),i.log===null&&(i.log=new hf),M2(i,S2()),M2(i,e),i}function M2(t,e){for(let r in e)if(r in e){let n=e[r];Cm(n)&&Cm(t[r])?t[r]={...t[r],...e[r]}:t[r]=e[r]}}function PL(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Va(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function ja(t){var e,r;Wn(t,"null loader"),Wn(Va(t),"invalid loader");let n;return Array.isArray(t)&&(n=t[1],t=t[0],t={...t,options:{...t.options,...n}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(r=t)!==null&&r!==void 0&&r.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var A2=()=>{let t=Bm();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Um(t){let e=A2();t=Array.isArray(t)?t:[t];for(let r of t){let n=ja(r);e.find(i=>n===i)||e.unshift(n)}}function b2(){return A2()}var L2=new $e({id:"loaders.gl"});var AL=/\.([^.]+)$/;async function O2(t,e=[],r,n){if(!C2(t))return null;let i=I2(t,e,{...r,nothrow:!0},n);if(i)return i;if(lr(t)&&(t=await t.slice(0,10).arrayBuffer(),i=I2(t,e,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(k2(t));return i}function I2(t,e=[],r,n){if(!C2(t))return null;if(e&&!Array.isArray(e))return ja(e);let i=[];e&&(i=i.concat(e)),r!=null&&r.ignoreRegisteredLoaders||i.push(...b2()),LL(i);let s=bL(t,i,r,n);if(!s&&!(r!=null&&r.nothrow))throw new Error(k2(t));return s}function bL(t,e,r,n){let{url:i,type:s}=Oi(t),o=i||(n==null?void 0:n.url),a=null,l="";if(r!=null&&r.mimeType&&(a=Vm(e,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),a=a||IL(e,o),l=l||(a?"matched url ".concat(o):""),a=a||Vm(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||OL(e,t),l=l||(a?"matched initial data ".concat(N2(t)):""),a=a||Vm(e,r==null?void 0:r.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;L2.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function C2(t){return!(t instanceof Response&&t.status===204)}function k2(t){let{url:e,type:r}=Oi(t),n="No valid loader found (";n+=e?"".concat(cf.filename(e),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");let i=t?N2(t):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function LL(t){for(let e of t)ja(e)}function IL(t,e){let r=e&&AL.exec(e),n=r&&r[1];return n?RL(t,n):null}function RL(t,e){e=e.toLowerCase();for(let r of t)for(let n of r.extensions)if(n.toLowerCase()===e)return r;return null}function Vm(t,e){for(let r of t)if(r.mimeTypes&&r.mimeTypes.includes(e)||e==="application/x.".concat(r.id))return r;return null}function OL(t,e){if(!e)return null;for(let r of t)if(typeof e=="string"){if(CL(e,r))return r}else if(ArrayBuffer.isView(e)){if(R2(e.buffer,e.byteOffset,r))return r}else if(e instanceof ArrayBuffer&&R2(e,0,r))return r;return null}function CL(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(n=>t.startsWith(n))}function R2(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>kL(t,e,r,i))}function kL(t,e,r,n){if(n instanceof ArrayBuffer)return Lm(n,t,n.byteLength);switch(typeof n){case"function":return n(t,r);case"string":let i=jm(t,e,n.length);return n===i;default:return!1}}function N2(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?jm(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?jm(t,0,e):""}function jm(t,e,r){if(t.byteLength<e+r)return"";let n=new DataView(t),i="";for(let s=0;s<r;s++)i+=String.fromCharCode(n.getUint8(e+s));return i}function*D2(t,e){let r=(e==null?void 0:e.chunkSize)||262144,n=0,i=new TextEncoder;for(;n<t.length;){let s=Math.min(t.length-n,r),o=t.slice(n,n+s);n+=s,yield i.encode(o)}}function*F2(t,e={}){let{chunkSize:r=262144}=e,n=0;for(;n<t.byteLength;){let i=Math.min(t.byteLength-n,r),s=new ArrayBuffer(i),o=new Uint8Array(t,n,i);new Uint8Array(s).set(o),n+=i,yield s}}async function*z2(t,e){let r=(e==null?void 0:e.chunkSize)||1048576,n=0;for(;n<t.size;){let i=n+r,s=await t.slice(n,i).arrayBuffer();n=i,yield s}}function Gm(t,e){return Ri?NL(t,e):DL(t,e)}async function*NL(t,e){let r=t.getReader(),n;try{for(;;){let i=n||r.read();e!=null&&e._streamReadAhead&&(n=r.read());let{done:s,value:o}=await i;if(s)return;yield lf(o)}}catch(i){r.releaseLock()}}async function*DL(t,e){for await(let r of t)yield lf(r)}function B2(t,e){if(typeof t=="string")return D2(t,e);if(t instanceof ArrayBuffer)return F2(t,e);if(lr(t))return z2(t,e);if(uf(t))return Gm(t,e);if(ar(t))return Gm(t.body,e);throw new Error("makeIterator")}var U2="Cannot convert supplied data type";function FL(t,e,r){if(e.text&&typeof t=="string")return t;if(y2(t)&&(t=t.buffer),t instanceof ArrayBuffer){let n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer,i=t.byteLength||t.length;return(t.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(t.byteOffset,t.byteOffset+i)),n}throw new Error(U2)}async function V2(t,e,r){let n=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||n)return FL(t,e,r);if(lr(t)&&(t=await ff(t)),ar(t)){let i=t;return await E2(i),e.binary?await i.arrayBuffer():await i.text()}if(uf(t)&&(t=B2(t,r)),g2(t)||v2(t))return Rm(t);throw new Error(U2)}function j2(t,e,r=null){if(r)return r;let n={fetch:pf(e,t),...t};return Array.isArray(n.loaders)||(n.loaders=null),n}function G2(t,e){if(!e&&t&&!Array.isArray(t))return t;let r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){let n=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function mf(t,e,r,n){qe(!n||typeof n=="object"),e&&!Array.isArray(e)&&!Va(e)&&(n=void 0,r=e,e=void 0),t=await t,r=r||{};let{url:i}=Oi(t),o=G2(e,n),a=await O2(t,o,r);return a?(r=P2(r,a,o,i),n=j2({url:i,parse:mf,loaders:o},r,n),await zL(a,t,r,n)):null}async function zL(t,e,r,n){if(Sm(t),ar(e)){let i=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=i,h=Object.fromEntries(i.headers.entries());n.response={headers:h,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=await V2(e,t,r),t.parseTextSync&&typeof e=="string")return r.dataType="text",t.parseTextSync(e,r,n,t);if(Pm(t,r))return await Am(t,e,r,n,mf);if(t.parseText&&typeof e=="string")return await t.parseText(e,r,n,t);if(t.parse)return await t.parse(e,r,n,t);throw qe(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function $s(t,e,r,n){!Array.isArray(e)&&!Va(e)&&(n=void 0,r=e,e=void 0);let i=pf(r),s=t;return typeof t=="string"&&(s=await i(t)),lr(t)&&(s=await i(t)),await mf(s,e,r)}var W2="3.2.0";var{_parseImageNode:BL}=globalThis,Wm=typeof Image!="undefined",Hm=typeof ImageBitmap!="undefined",UL=Boolean(BL),Ym=Ri?!0:UL;function H2(t){switch(t){case"auto":return Hm||Wm||Ym;case"imagebitmap":return Hm;case"image":return Wm;case"data":return Ym;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function Y2(){if(Hm)return"imagebitmap";if(Wm)return"image";if(Ym)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function VL(t){let e=jL(t);if(!e)throw new Error("Not an image");return e}function $2(t){switch(VL(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("getImageData");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function jL(t){return typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?"imagebitmap":typeof Image!="undefined"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var GL=/^data:image\/svg\+xml/,WL=/\.svg((\?|#).*)?$/;function gf(t){return t&&(GL.test(t)||WL.test(t))}function X2(t,e){if(gf(e)){let n=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return $m(t,e)}function $m(t,e){if(gf(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Ga(t,e,r){let n=X2(t,r),i=self.URL||self.webkitURL,s=typeof n!="string"&&i.createObjectURL(n);try{return await HL(s||n,e)}finally{s&&i.revokeObjectURL(s)}}async function HL(t,e){let r=new Image;return r.src=t,e.image&&e.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}var YL={},q2=!0;async function Xm(t,e,r){let n;gf(r)?n=await Ga(t,e,r):n=$m(t,r);let i=e&&e.imagebitmap;return await $L(n,i)}async function $L(t,e=null){if((XL(e)||!q2)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(r){console.warn(r),q2=!1}return await createImageBitmap(t)}function XL(t){for(let e in t||YL)return!1;return!0}function vf(t){let e=Wa(t);return qL(e)||QL(e)||ZL(e)||KL(e)}function qL(t){let e=Wa(t);return e.byteLength>=24&&e.getUint32(0,!1)===2303741511?{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}:null}function ZL(t){let e=Wa(t);return e.byteLength>=10&&e.getUint32(0,!1)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}:null}function KL(t){let e=Wa(t);return e.byteLength>=14&&e.getUint16(0,!1)===16973&&e.getUint32(2,!0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}:null}function QL(t){let e=Wa(t);if(!(e.byteLength>=3&&e.getUint16(0,!1)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:n,sofMarkers:i}=JL(),s=2;for(;s+9<e.byteLength;){let o=e.getUint16(s,!1);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,!1),width:e.getUint16(s+7,!1)};if(!n.has(o))return null;s+=2,s+=e.getUint16(s,!1)}return null}function JL(){let t=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)t.add(r);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Wa(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function qm(t,e){let{mimeType:r}=vf(t)||{},n=globalThis._parseImageNode;return Wn(n),await n(t,r)}async function Zm(t,e,r){e=e||{};let i=(e.image||{}).type||"auto",{url:s}=r||{},o=eI(i),a;switch(o){case"imagebitmap":a=await Xm(t,e,s);break;case"image":a=await Ga(t,e,s);break;case"data":a=await qm(t,e);break;default:Wn(!1)}return i==="data"&&(a=$2(a)),a}function eI(t){switch(t){case"auto":case"data":return Y2();default:return H2(t),t}}var tI=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],rI=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],nI={image:{type:"auto",decode:!0}},Km={id:"image",module:"images",name:"Images",version:W2,mimeTypes:rI,extensions:tI,parse:Zm,tests:[t=>Boolean(vf(new DataView(t)))],options:nI};var V=new $e({id:"deck"});var Qm={};function Z2(t){Qm=t}function Se(t){V.level>0&&Qm[t]&&Qm[t].call(...arguments)}function iI(t){let e=t[0],r=t[t.length-1];return e==="{"&&r==="}"||e==="["&&r==="]"}var K2={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:iI,parseTextSync:JSON.parse};var Ha="8.7.9",yf=globalThis.deck&&globalThis.deck.VERSION;if(yf&&yf!==Ha)throw new Error("deck.gl - multiple versions detected: ".concat(yf," vs ").concat(Ha));yf||(V.log(1,"deck.gl ".concat(Ha))(),globalThis.deck={...globalThis.deck,VERSION:Ha,version:Ha,log:V,_registerLoggers:Z2},Um([K2,[Km,{imagebitmap:{premultiplyAlpha:"none"}}]]));var Q2=globalThis.deck;var J2="#define SMOOTH_EDGE_RADIUS 0.5",sI=`
`.concat(J2,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),oI=`
`.concat(J2,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),eE={name:"geometry",vs:sI,fs:oI};var X={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(X,"IDENTITY",{get:()=>V.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});var gt={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Xs={common:0,meters:1,pixels:2},Jm={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},cr={DRAW:"draw",MASK:"mask"};var aI=Object.keys(X).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(X[t],";")).join(""),lI=Object.keys(gt).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(gt[t],";")).join(""),cI=Object.keys(Xs).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Xs[t],";")).join(""),tE="".concat(aI,`
`).concat(lI,`
`).concat(cI,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);var nn=typeof Float32Array!="undefined"?Float32Array:Array;var mj=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function tg(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],y=e[11],x=e[12],_=e[13],T=e[14],p=e[15],m=r*a-n*o,v=r*l-i*o,w=r*c-s*o,S=n*l-i*a,M=n*c-s*a,I=i*c-s*l,b=u*_-h*x,D=u*T-f*x,C=u*p-y*x,j=h*T-f*_,W=h*p-y*_,ie=f*p-y*T,U=m*ie-v*W+w*j+S*C-M*D+I*b;return U?(U=1/U,t[0]=(a*ie-l*W+c*j)*U,t[1]=(i*W-n*ie-s*j)*U,t[2]=(_*I-T*M+p*S)*U,t[3]=(f*M-h*I-y*S)*U,t[4]=(l*C-o*ie-c*D)*U,t[5]=(r*ie-i*C+s*D)*U,t[6]=(T*w-x*I-p*v)*U,t[7]=(u*I-f*w+y*v)*U,t[8]=(o*W-a*C+c*b)*U,t[9]=(n*C-r*W-s*b)*U,t[10]=(x*M-_*w+p*m)*U,t[11]=(h*w-u*M-y*m)*U,t[12]=(a*D-o*j-l*b)*U,t[13]=(r*j-n*D+i*b)*U,t[14]=(_*v-x*S-T*m)*U,t[15]=(u*S-h*v+f*m)*U,t):null}function Ci(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],y=e[10],x=e[11],_=e[12],T=e[13],p=e[14],m=e[15],v=r[0],w=r[1],S=r[2],M=r[3];return t[0]=v*n+w*a+S*h+M*_,t[1]=v*i+w*l+S*f+M*T,t[2]=v*s+w*c+S*y+M*p,t[3]=v*o+w*u+S*x+M*m,v=r[4],w=r[5],S=r[6],M=r[7],t[4]=v*n+w*a+S*h+M*_,t[5]=v*i+w*l+S*f+M*T,t[6]=v*s+w*c+S*y+M*p,t[7]=v*o+w*u+S*x+M*m,v=r[8],w=r[9],S=r[10],M=r[11],t[8]=v*n+w*a+S*h+M*_,t[9]=v*i+w*l+S*f+M*T,t[10]=v*s+w*c+S*y+M*p,t[11]=v*o+w*u+S*x+M*m,v=r[12],w=r[13],S=r[14],M=r[15],t[12]=v*n+w*a+S*h+M*_,t[13]=v*i+w*l+S*f+M*T,t[14]=v*s+w*c+S*y+M*p,t[15]=v*o+w*u+S*x+M*m,t}function rE(t,e,r){var n=r[0],i=r[1],s=r[2],o,a,l,c,u,h,f,y,x,_,T,p;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],y=e[7],x=e[8],_=e[9],T=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=y,t[8]=x,t[9]=_,t[10]=T,t[11]=p,t[12]=o*n+u*i+x*s+e[12],t[13]=a*n+h*i+_*s+e[13],t[14]=l*n+f*i+T*s+e[14],t[15]=c*n+y*i+p*s+e[15]),t}function nE(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function uI(){var t=new nn(4);return nn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ya(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}var gj=function(){var t=uI();return function(e,r,n,i,s,o){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function fI(t,e){if(t===e)return!0;if(Array.isArray(t)){let r=t.length;if(!e||e.length!==r)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}return!1}function Yn(t){let e={},r;return n=>{for(let i in n)if(!fI(n[i],e[i])){r=t(n),e=n;break}return r}}var lE=[0,0,0,0],hI=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],dI=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],pI=[0,0,0],mI=[0,0,0],gI=Yn(yI);function rg(t,e,r=mI){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,s=!0;switch(e===X.LNGLAT_OFFSETS||e===X.METER_OFFSETS?i=r:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case gt.WEB_MERCATOR:(e===X.LNGLAT||e===X.CARTESIAN)&&(i=[0,0,0],s=!1);break;case gt.WEB_MERCATOR_AUTO_OFFSET:e===X.LNGLAT?n=i:e===X.CARTESIAN&&(n=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case gt.IDENTITY:n=t.position.map(Math.fround),n[2]=n[2]||0;break;case gt.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:s}}function vI(t,e,r){let{viewMatrixUncentered:n,projectionMatrix:i}=t,{viewMatrix:s,viewProjectionMatrix:o}=t,a=lE,l=lE,c=t.cameraPosition,{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=rg(t,e,r);return f&&(l=t.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Ya([],l,o),s=n||s,o=Ci([],i,s),o=Ci([],o,hI)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}function cE({viewport:t,devicePixelRatio:e=1,modelMatrix:r=null,coordinateSystem:n=X.DEFAULT,coordinateOrigin:i,autoWrapLongitude:s=!1}={}){n===X.DEFAULT&&(n=t.isGeospatial?X.LNGLAT:X.CARTESIAN);let o=gI({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=r||dI,o}function yI({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:n}){let{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=vI(t,r,n),u=t.getDistanceScales(),h=[t.width*e,t.height*e],f=Ya([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,y={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:pI,project_uScale:t.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(c){let x=t.getDistanceScales(c);switch(r){case X.METER_OFFSETS:y.project_uCommonUnitsPerWorldUnit=x.unitsPerMeter,y.project_uCommonUnitsPerWorldUnit2=x.unitsPerMeter2;break;case X.LNGLAT:case X.LNGLAT_OFFSETS:t._pseudoMeters||(y.project_uCommonUnitsPerMeter=x.unitsPerMeter),y.project_uCommonUnitsPerWorldUnit=x.unitsPerDegree,y.project_uCommonUnitsPerWorldUnit2=x.unitsPerDegree2;break;case X.CARTESIAN:y.project_uCommonUnitsPerWorldUnit=[1,1,x.unitsPerMeter[2]],y.project_uCommonUnitsPerWorldUnit2=[0,0,x.unitsPerMeter2[2]];break;default:break}}return y}var xI={};function _I(t=xI){return t.viewport?cE(t):{}}var ki={name:"project",dependencies:[Ku,eE],vs:tE,getUniforms:_I};var EI=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,xf={name:"project32",dependencies:[ki],vs:EI};var sn=typeof Float32Array!="undefined"?Float32Array:Array;var bj=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function wI(){var t=new sn(4);return sn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function hE(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function dE(t,e,r){var n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}var Lj=function(){var t=wI();return function(e,r,n,i,s,o){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function ig(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $n(t,e){let r=dE([],e,t);return hE(r,r,1/r[3]),r}function sg(t,e){let r=t%e;return r<0?e+r:r}function og(t,e,r){return t<e?e:t>r?r:t}function MI(t){return Math.log(t)*Math.LOG2E}var qs=Math.log2||MI;function ag(t,e,r){var n=r[0],i=r[1],s=r[2],o,a,l,c,u,h,f,y,x,_,T,p;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],y=e[7],x=e[8],_=e[9],T=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=y,t[8]=x,t[9]=_,t[10]=T,t[11]=p,t[12]=o*n+u*i+x*s+e[12],t[13]=a*n+h*i+_*s+e[13],t[14]=l*n+f*i+T*s+e[14],t[15]=c*n+y*i+p*s+e[15]),t}function pE(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function mE(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*n,t[5]=o*i+u*n,t[6]=a*i+h*n,t[7]=l*i+f*n,t[8]=c*i-s*n,t[9]=u*i-o*n,t[10]=h*i-a*n,t[11]=f*i-l*n,t}function gE(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*n,t[1]=o*i+u*n,t[2]=a*i+h*n,t[3]=l*i+f*n,t[4]=c*i-s*n,t[5]=u*i-o*n,t[6]=h*i-a*n,t[7]=f*i-l*n,t}function PI(){var t=new sn(2);return sn!=Float32Array&&(t[0]=0,t[1]=0),t}function _f(t,e,r,n){var i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t}var Rj=function(){var t=PI();return function(e,r,n,i,s,o){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();function AI(){var t=new sn(3);return sn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function yE(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}var Oj=function(){var t=AI();return function(e,r,n,i,s,o){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();function Wt(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var ur=Math.PI,xE=ur/4,fr=ur/180,lg=180/ur,$a=512,cg=4003e4,Zs=85.051129,_E=1.5;function ug(t){return qs(t)}function on([t,e]){Wt(Number.isFinite(t)),Wt(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude");let r=t*fr,n=e*fr,i=$a*(r+ur)/(2*ur),s=$a*(ur+Math.log(Math.tan(xE+n*.5)))/(2*ur);return[i,s]}function bt([t,e]){let r=t/$a*(2*ur)-ur,n=2*(Math.atan(Math.exp(e/$a*(2*ur)-ur))-xE);return[r*lg,n*lg]}function fg({latitude:t}){Wt(Number.isFinite(t));let e=Math.cos(t*fr);return ug(cg*e)-9}function Ks({latitude:t,longitude:e,highPrecision:r=!1}){Wt(Number.isFinite(t)&&Number.isFinite(e));let n={},i=$a,s=Math.cos(t*fr),o=i/360,a=o/s,l=i/cg/s;if(n.unitsPerMeter=[l,l,l],n.metersPerUnit=[1/l,1/l,1/l],n.unitsPerDegree=[o,a,l],n.degreesPerUnit=[1/o,1/a,1/l],r){let c=fr*Math.tan(t*fr)/s,u=o*c/2,h=i/cg*c,f=h/a*l;n.unitsPerDegree2=[0,u,h],n.unitsPerMeter2=[f,0,f]}return n}function Xa(t,e){let[r,n,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=Ks({longitude:r,latitude:n,highPrecision:!0}),u=on(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);let h=bt(u),f=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],f]:h}function Ef({height:t,pitch:e,bearing:r,altitude:n,scale:i,center:s=null}){let o=ig();return ag(o,o,[0,0,-n]),mE(o,o,-e*fr),gE(o,o,r*fr),i/=t,pE(o,o,[i,i,i]),s&&ag(o,o,yE([],s)),o}function hg({width:t,height:e,fovy:r=Ni(_E),altitude:n,pitch:i=0,nearZMultiplier:s=1,farZMultiplier:o=1}){n!==void 0&&(r=Ni(n));let a=.5*r*fr,l=qa(r),c=i*fr,u=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01)),h=Math.sin(c)*u+l;return{fov:2*a,aspect:t/e,focalDistance:l,near:s,far:h*o}}function Ni(t){return 2*Math.atan(.5/t)*lg}function qa(t){return .5/Math.tan(.5*t*fr)}function Qs(t,e){let[r,n,i=0]=t;return Wt(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),$n(e,[r,n,i,1])}function Or(t,e,r=0){let[n,i,s]=t;if(Wt(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return $n(e,[n,i,s,1]);let o=$n(e,[n,i,0,1]),a=$n(e,[n,i,1,1]),l=o[2],c=a[2],u=l===c?0:((r||0)-l)/(c-l);return _f([],o,a,u)}function Di({width:t,height:e,bounds:r,minExtent:n=0,maxZoom:i=24,padding:s=0,offset:o=[0,0]}){let[[a,l],[c,u]]=r;if(Number.isFinite(s)){let M=s;s={top:M,bottom:M,left:M,right:M}}else Wt(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));let h=on([a,og(u,-Zs,Zs)]),f=on([c,og(l,-Zs,Zs)]),y=[Math.max(Math.abs(f[0]-h[0]),n),Math.max(Math.abs(f[1]-h[1]),n)],x=[t-s.left-s.right-Math.abs(o[0])*2,e-s.top-s.bottom-Math.abs(o[1])*2];Wt(x[0]>0&&x[1]>0);let _=x[0]/y[0],T=x[1]/y[1],p=(s.right-s.left)/2/_,m=(s.bottom-s.top)/2/T,v=[(f[0]+h[0])/2+p,(f[1]+h[1])/2+m],w=bt(v),S=Math.min(i,qs(Math.abs(Math.min(_,T))));return Wt(Number.isFinite(S)),{longitude:w[0],latitude:w[1],zoom:S}}var EE=Math.PI/180;function Za(t,e=0){let{width:r,height:n,unproject:i}=t,s={targetZ:e},o=i([0,n],s),a=i([r,n],s),l,c,u=t.fovy?.5*t.fovy*EE:Math.atan(.5/t.altitude),h=(90-t.pitch)*EE;return u>h-.01?(l=wE(t,0,e),c=wE(t,r,e)):(l=i([0,0],s),c=i([r,0],s)),[o,a,c,l]}function wE(t,e,r){let{pixelUnprojectionMatrix:n}=t,i=$n(n,[e,0,1,1]),s=$n(n,[e,t.height,1,1]),a=(r*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=_f([],i,s,a),c=bt(l);return c[2]=r,c}var ME=512;function wf({width:t,height:e,longitude:r,latitude:n,zoom:i,pitch:s=0,bearing:o=0}){(r<-180||r>180)&&(r=sg(r+180,360)-180),(o<-180||o>180)&&(o=sg(o+180,360)-180);let a=qs(e/ME);if(i<=a)i=a,n=0;else{let l=e/2/Math.pow(2,i),c=bt([0,l])[1];if(n<c)n=c;else{let u=bt([0,ME-l])[1];n>u&&(n=u)}}return{width:t,height:e,longitude:r,latitude:n,zoom:i,pitch:s,bearing:o}}var RI=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,OI=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,CI=Yn(zI),kI=Yn(BI),NI=[0,0,0,1],DI=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function FI(t,e){let[r,n,i]=t,s=Or([r,n,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function zI({viewport:t,center:e}){return new le(t.viewProjectionMatrix).invert().transform(e)}function BI({viewport:t,shadowMatrices:e}){let r=[],n=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>FI(o,n));for(let o of e){let a=o.clone().translate(new ge(t.center).negate()),l=s.map(u=>a.transform(u)),c=new le().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});r.push(c.multiplyRight(o))}return r}function UI(t={},e={}){let r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||NI,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},n=CI({viewport:t.viewport,center:e.project_uCenter}),i=[],s=kI({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let o=0;o<t.shadowMatrices.length;o++){let a=s[o],l=a.clone().translate(new ge(t.viewport.center).negate());e.project_uCoordinateSystem===X.LNGLAT&&e.project_uProjectionMode===gt.WEB_MERCATOR?(s[o]=l,i[o]=n):(s[o]=a.clone().multiplyRight(DI),i[o]=l.transform(n))}for(let o=0;o<s.length;o++)r["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],r["shadow_uProjectCenters[".concat(o,"]")]=i[o],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(o)]=t.shadowMaps[o]:r["shadow_uShadowMap".concat(o)]=t.dummyShadowMap;return r}var Ka={name:"shadow",dependencies:[ki],vs:RI,fs:OI,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>{if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){let{shadowEnabled:r=!0}=t;return r&&t.shadowMatrices&&t.shadowMatrices.length>0?UI(t,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}};var Tf={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...of};var VI=[ki],jI=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function SE(t){let e=At.getDefaultProgramManager(t);for(let r of VI)e.addDefaultModule(r);for(let r of jI)e.addShaderHook(r);return e}var GI=[255,255,255],WI=1,HI=0,Mf=class{constructor(e={}){let{color:r=GI}=e,{intensity:n=WI}=e;this.id=e.id||"ambient-".concat(HI++),this.color=r,this.intensity=n,this.type="ambient"}};var YI=[255,255,255],$I=1,XI=[0,0,-1],qI=0,Qa=class{constructor(e={}){let{color:r=YI}=e,{intensity:n=$I}=e,{direction:i=XI}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(qI++),this.color=r,this.intensity=n,this.type="directional",this.direction=new ge(i).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}};var an=class{constructor(e={}){A(this,"id",void 0),A(this,"props",void 0),A(this,"useInPicking",void 0);let{id:r="effect"}=e;this.id=r,this.props={...e},this.useInPicking=!1}preRender(){}getModuleParameters(e){}cleanup(){}};var Ja=class{constructor(e,r={id:"pass"}){A(this,"id",void 0),A(this,"gl",void 0),A(this,"props",void 0);let{id:n}=r;this.id=n,this.gl=e,this.props={...r}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}};var hr=class extends Ja{render(e){let r=this.gl;return Be(r,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){let{target:r,moduleParameters:n,viewports:i,views:s,onViewportActive:o,clearCanvas:a=!0}=e;e.pass=e.pass||"unknown";let l=this.gl;a&&KI(l);let c=[];for(let u of i){let h=s&&s[u.id];o(u);let f=this._getDrawLayerParams(u,e),y=u.subViewports||[u];for(let x of y){let _=this._drawLayersInViewport(l,{target:r,moduleParameters:n,viewport:x,view:h,pass:e.pass,layers:e.layers},f);c.push(_)}}return c}_getDrawLayerParams(e,{layers:r,pass:n,layerFilter:i,effects:s,moduleParameters:o}){let a=[],l=PE(),c={layer:r[0],viewport:e,isPicking:n.startsWith("picking"),renderPass:n},u={};for(let h=0;h<r.length;h++){let f=r[h],y=this._shouldDrawLayer(f,c,i,u),x=l(f,y),_={shouldDrawLayer:y,layerRenderIndex:x};y&&(_.moduleParameters=this._getModuleParameters(f,s,n,o),_.layerParameters=this.getLayerParameters(f,h,e)),a[h]=_}return a}_drawLayersInViewport(e,{layers:r,moduleParameters:n,pass:i,target:s,viewport:o,view:a},l){let c=ZI(e,{moduleParameters:n,target:s,viewport:o});if(a&&a.props.clear){let h=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;ee(e,{scissorTest:!0,scissor:c},()=>Fn(e,h))}let u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Be(e,{viewport:c});for(let h=0;h<r.length;h++){let f=r[h],{shouldDrawLayer:y,layerRenderIndex:x,moduleParameters:_,layerParameters:T}=l[h];if(y&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(y){u.visibleCount++,_.viewport=o;try{f.drawLayer({moduleParameters:_,uniforms:{layerIndex:x},parameters:T})}catch(p){f.raiseError(p,"drawing ".concat(f," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,r){return null}getLayerParameters(e,r,n){return e.props.parameters}_shouldDrawLayer(e,r,n,i){if(!(this.shouldDrawLayer(e)&&e.props.visible))return!1;r.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(r))return!1;r.layer=o,o=o.parent}if(n){let a=r.layer.id;if(a in i||(i[a]=n(r)),!i[a])return!1}return e.activateViewport(r.viewport),!0}_getModuleParameters(e,r,n,i){var s;let o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:rr(this.gl)});if(r)for(let a of r)Object.assign(o,a.getModuleParameters(e));return Object.assign(o,this.getModuleParameters(e,r),i)}};function PE(t=0,e={}){let r={},n=(i,s)=>{let o=i.props._offset,a=i.id,l=i.parent&&i.parent.id,c;if(l&&!(l in e)&&n(i.parent,!1),l in r){let u=r[l]=r[l]||PE(e[l],e);c=u(i,s),r[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),r[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return n}function ZI(t,{moduleParameters:e,target:r,viewport:n}){let i=r&&r.id!=="default-framebuffer",s=e&&e.devicePixelRatio||rr(t),o=i?r.height:t.drawingBufferHeight,a=n;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function KI(t){let e=t.drawingBufferWidth,r=t.drawingBufferHeight;Be(t,{viewport:[0,0,e,r]}),t.clear(16640)}var el=class extends hr{constructor(e,r){super(e,r),A(this,"shadowMap",void 0),A(this,"depthBuffer",void 0),A(this,"fbo",void 0),this.shadowMap=new K(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new pt(e,{format:33189,width:1,height:1}),this.fbo=new Y(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){let r=this.fbo;ee(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{let n=e.viewports[0],i=rr(this.gl),s=n.width*i,o=n.height*i;(s!==r.width||o!==r.height)&&r.resize({width:s,height:o}),super.render({...e,target:r,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}};var QI={color:[255,255,255],intensity:1},AE=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],JI=[0,0,0,200/255],Js=class extends an{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=JI,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(let r in e){let n=e[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break;default:}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(e,{layers:r,layerFilter:n,viewports:i,onViewportActive:s,views:o}){if(!!this.shadow){this.shadowMatrices=this._createLightMatrix(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=At.getDefaultProgramManager(e),Ka&&this.programManager.addDefaultModule(Ka)),this.dummyShadowMap||(this.dummyShadowMap=new K(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:r,layerFilter:n,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){let r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:e})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:e}))},r}cleanup(){for(let e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Ka),this.programManager=null)}_createLightMatrix(){let e=[];for(let r of this.directionalLights){let n=new le().lookAt({eye:new ge(r.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let r=0;r<this.directionalLights.length;r++){let n=new el(e);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){let{ambientLight:e,pointLights:r,directionalLights:n}=this;!e&&r.length===0&&n.length===0&&(this.ambientLight=new Mf(QI),this.directionalLights.push(new Qa(AE[0]),new Qa(AE[1])))}};var dg=class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,r,{size:n=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){let c=i||e&&e.constructor||Float32Array,u=r*n+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let h;l&&(h=l*n+s);let f=this._allocate(c,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,r,n,i){let s=Math.max(Math.ceil(r*this.props.overAlloc),1);s>i&&(s=i);let o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){let c=new e(o.splice(l,1)[0],0,s);return n&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;let r=this._pool,{buffer:n}=e,{byteLength:i}=n,s=r.findIndex(o=>o.byteLength>=i);s<0?r.push(n):(s>0||r.length<this.props.poolSize)&&r.splice(s,0,n),r.length>this.props.poolSize&&r.shift()}},dr=new dg;function to(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function LE(t,e){let r=t%e;return r<0?e+r:r}function IE(t){return[t[12],t[13],t[14]]}function RE(t){return{left:eo(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:eo(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:eo(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:eo(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:eo(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:eo(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}var bE=new ge;function eo(t,e,r,n){bE.set(t,e,r);let i=bE.len();return{distance:n/i,normal:new ge(-t/i,-e/i,-r/i)}}function eR(t){return t-Math.fround(t)}var tl;function Sf(t,e){let{size:r=1,startIndex:n=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-n)/r;tl=dr.allocate(tl,s,{type:Float32Array,size:r*2});let o=n,a=0;for(;o<i;){for(let l=0;l<r;l++){let c=t[o++];tl[a+l]=c,tl[a+l+r]=eR(c)}a+=r*2}return tl.subarray(0,s*r*2)}var tR=Math.PI/180,rR=to(),pg=[0,0,0],nR=0,iR={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},it=class{constructor(e={}){let{id:r=null,x:n=0,y:i=0,width:s=1,height:o=1}=e;this.id=r||this.constructor.displayName||"viewport",this.x=n,this.y=i,this.width=s||1,this.height=o||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?gt.WEB_MERCATOR:gt.WEB_MERCATOR_AUTO_OFFSET:gt.IDENTITY}equals(e){return e instanceof it?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&sr(e.projectionMatrix,this.projectionMatrix)&&sr(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:r=!0}={}){let n=this.projectPosition(e),i=Qs(n,this.pixelProjectionMatrix),[s,o]=i,a=r?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:r=!0,targetZ:n}={}){let[i,s,o]=e,a=r?s:this.height-s,l=n&&n*this.distanceScales.unitsPerMeter[2],c=Or([i,a,o],this.pixelUnprojectionMatrix,l),[u,h,f]=this.unprojectPosition(c);return Number.isFinite(o)?[u,h,f]:Number.isFinite(n)?[u,h,n]:[u,h]}projectPosition(e){let[r,n]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(e){let[r,n]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(e){if(this.isGeospatial){let r=on(e);return r[1]=Re(r[1],-318,830),r}return e}unprojectFlat(e){return this.isGeospatial?bt(e):e}getBounds(e={}){let r={targetZ:e.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),s=this.unproject([0,this.height],r),o=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],s[0],o[0]),Math.min(n[1],i[1],s[1],o[1]),Math.max(n[0],i[0],s[0],o[0]),Math.max(n[1],i[1],s[1],o[1])]}getDistanceScales(e=null){return e?Ks({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:r,width:n=1,height:i=1}){return e<this.x+this.width&&this.x<e+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,RE(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,r){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:e,fovyRadians:r,aspect:n,focalDistance:i,near:s,far:o}){return e?new le().orthographic({fovy:r,aspect:n,focalDistance:i,near:s,far:o}):new le().perspective({fovy:r,aspect:n,near:s,far:o})}_initViewMatrix(e){let{viewMatrix:r=rR,longitude:n=null,latitude:i=null,zoom:s=null,position:o=null,modelMatrix:a=null,focalDistance:l=1,distanceScales:c=null}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this.zoom=s,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?fg({latitude:i})+Math.log2(l):nR);let u=Math.pow(2,this.zoom);this.scale=u,this.distanceScales=this.isGeospatial?Ks({latitude:i,longitude:n}):c||iR,this.focalDistance=l,this.distanceScales.metersPerUnit=new ge(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new ge(this.distanceScales.unitsPerMeter),this.position=pg,this.meterOffset=pg,o&&(this.position=o,this.modelMatrix=a,this.meterOffset=a?a.transformVector(o):o),this.isGeospatial?(this.longitude=n,this.latitude=i,this.center=this._getCenterInWorld({longitude:n,latitude:i})):this.center=o?this.projectPosition(o):[0,0,0],this.viewMatrixUncentered=r,this.viewMatrix=new le().multiplyRight(this.viewMatrixUncentered).translate(new ge(this.center||pg).negate())}_getCenterInWorld({longitude:e,latitude:r}){let{meterOffset:n,distanceScales:i}=this,s=new ge(this.projectPosition([e,r,0]));if(n){let o=new ge(n).scale(i.unitsPerMeter);s.add(o)}return s}_initProjectionMatrix(e){let{projectionMatrix:r=null,orthographic:n=!1,fovyRadians:i,fovy:s=75,near:o=.1,far:a=1e3,focalDistance:l=1}=e;this.projectionMatrix=r||this._createProjectionMatrix({orthographic:n,fovyRadians:i||s*tR,aspect:this.width/this.height,focalDistance:l,near:o,far:a})}_initPixelMatrices(){let e=to();Ci(e,e,this.projectionMatrix),Ci(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=tg([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=IE(this.viewMatrixInverse);let r=to(),n=to();nE(r,r,[this.width/2,-this.height/2,1]),rE(r,r,[1,-1,0]),Ci(n,r,this.viewProjectionMatrix),this.pixelProjectionMatrix=n,this.viewportMatrix=r,this.pixelUnprojectionMatrix=tg(to(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||V.warn("Pixel project matrix not invertible")()}};it.displayName="Viewport";function sR(){var t=new nn(2);return nn!=Float32Array&&(t[0]=0,t[1]=0),t}function ro(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Pf(t,e){return t[0]=-e[0],t[1]=-e[1],t}var oG=function(){var t=sR();return function(e,r,n,i,s,o){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();var oR=512,aR=4003e4,lR=Math.PI/180;function CE(t){let e=Math.cos(t*lR);return oR/aR/e}var vt=class extends it{constructor(e={}){let{latitude:r=0,longitude:n=0,zoom:i=11,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:c=!1,projectionMatrix:u,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:y=!1}=e,{width:x,height:_,altitude:T=1.5}=e,p=Math.pow(2,i);x=x||1,_=_||1;let m,v=null;u?(T=u[5]/2,m=Ni(T)):(e.fovy?(m=e.fovy,T=qa(m)):m=Ni(T),v=hg({width:x,height:_,pitch:s,fovy:m,nearZMultiplier:a,farZMultiplier:l}));let w=Ef({height:_,pitch:s,bearing:o,scale:p,altitude:T});f&&(w=new le().translate([512*f,0,0]).multiplyLeft(w)),super({...e,width:x,height:_,viewMatrix:w,longitude:n,latitude:r,zoom:i,...v,fovy:m,focalDistance:T}),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=T,this.fovy=m,this.orthographic=c,this._subViewports=h?[]:null,this._pseudoMeters=y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){let e=this.getBounds(),r=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let i=r;i<=n;i++){let s=i?new vt({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);let[r,n]=this.projectFlat(e),i=(e[2]||0)*CE(e[1]);return[r,n,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);let[r,n]=this.unprojectFlat(e),i=(e[2]||0)/CE(n);return[r,n,i]}addMetersToLngLat(e,r){return Xa(e,r)}panByPosition(e,r){let n=Or(r,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=ro([],i,Pf([],n)),o=ro([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){let r=Za(this,e.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(e,r={}){let{width:n,height:i}=this,{longitude:s,latitude:o,zoom:a}=Di({width:n,height:i,bounds:e,...r});return new vt({width:n,height:i,longitude:s,latitude:o,zoom:a})}};vt.displayName="WebMercatorViewport";function cR(){var t=new nn(3);return nn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function uR(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}var kE=uR;var fG=function(){var t=cR();return function(e,r,n,i,s,o){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,a=n;a<l;a+=r)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();function mg(t,e,r=!1){let n=e.projectPosition(t);if(r&&e instanceof vt){let[i,s,o=0]=t,a=e.getDistanceScales([i,s]);n[2]=o*a.unitsPerMeter[2]}return n}function hR(t){let e={...t},{coordinateSystem:r}=t,{viewport:n,coordinateOrigin:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return r===X.DEFAULT&&(r=n.isGeospatial?X.LNGLAT:X.CARTESIAN),s===void 0&&(e.fromCoordinateSystem=r),o===void 0&&(e.fromCoordinateOrigin=i),e.coordinateSystem=r,e}function gg(t,{viewport:e,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(r&&([o,a,l]=Ya([],[o,a,l,1],r)),n){case X.LNGLAT:return mg([o,a,l],e,s);case X.LNGLAT_OFFSETS:return mg([o+i[0],a+i[1],l+(i[2]||0)],e,s);case X.METER_OFFSETS:return mg(Xa(i,[o,a,l]),e,s);case X.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function NE(t,e){let{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=hR(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:u}=rg(r,n,i),h=gg(t,{viewport:r,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});if(u){let f=r.projectPosition(l||c);kE(h,h,f)}return h}var Xn={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},no=Symbol.for("component"),ln=Symbol.for("asyncPropDefaults"),Cr=Symbol.for("asyncPropOriginal"),pr=Symbol.for("asyncPropResolved");function Af(t,e=()=>!0){return Array.isArray(t)?DE(t,e,[]):e(t)?[t]:[]}function DE(t,e,r){let n=-1;for(;++n<t.length;){let i=t[n];Array.isArray(i)?DE(i,e,r):e(i)&&r.push(i)}return r}function FE({target:t,source:e,start:r=0,count:n=1}){let i=e.length,s=n*i,o=0;for(let a=r;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(r+o,r,r+o),o*=2):(t.copyWithin(r+o,r,r+s-o),o=s);return t}var rl=class{constructor(e,r,n){this.id=e,this.context=n,this._loadCount=0,this._subscribers=new Set,this.setData(r)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,r){if(e===this._data&&!r)return;this._data=e;let n=++this._loadCount,i=e;typeof e=="string"&&(i=$s(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(let s of this._subscribers)s.onChange(this.getData())}};var nl=class{constructor({gl:e,protocol:r}){this.protocol=r||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:r,forceUpdate:n=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(r,n):(s=new rl(e,r,this._context),this._resources[e]=s),s.persistent=i}remove(e){let r=this._resources[e];r&&(r.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){let r=this._consumers[e];if(r){for(let n in r){let i=r[n];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:r,consumerId:n,requestId:i="default"}){let{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));let a=s[e];if(this._track(n,i,a,r),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let e in this._resources)this._resources[e].delete()}_track(e,r,n,i){let s=this._consumers,o=s[e]=s[e]||{},a=o[r]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),n&&(o[r]=a,a.onChange=i,a.resource=n,n.subscribe(a))}_prune(){this._pruneRequest=null;for(let e of Object.keys(this._resources)){let r=this._resources[e];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[e])}}};var dR="layerManager.setLayers",pR="layerManager.activateViewport",mR=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),il=class{constructor(e,{deck:r,stats:n,viewport:i,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new nl({gl:e,protocol:"deck://"}),this.context={...mR,layerManager:this,gl:e,deck:r,programManager:e&&SE(e),stats:n||new tr({id:"deck.gl"}),viewport:i||new it({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new Gn,resourceManager:this.resourceManager},this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(let e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(let n of this.layers){let i=n.getNeedsRedraw(e);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(r=>e.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,r){Se(dR,this,r,e),this.lastRenderedLayers=e,e=Af(e,Boolean);for(let n of e)n.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){let e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return Se(pR,this,e),e&&(this.context.viewport=e),this}_handleError(e,r,n){n.raiseError(r,"".concat(e," of ").concat(n))}_updateLayers(e,r){let n={};for(let o of e)n[o.id]?V.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;let i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let s=!1;for(let o of i)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,r,n){for(let i of e){i.context=this.context;let s=r[i.id];s===null&&V.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite&&i.getSubLayers()}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,r,n)}}_finalizeOldLayers(e){for(let r in e){let n=e[r];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Xn.INITIALIZED}catch(r){this._handleError("initialization",r,e)}}_transferLayerState(e,r){r._transferState(e),r.lifecycle=Xn.MATCHED,r!==e&&(e.lifecycle=Xn.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(r){this._handleError("update",r,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Xn.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Xn.FINALIZED}catch(r){this._handleError("finalization",r,e)}}};function mr(t,e){if(t===e)return!0;if(!t||!e)return!1;for(let r in t){let n=t[r],i=e[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&mr(n,i)))return!1}return!0}var sl=class{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(let e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(let e in this.controllers){let r=this.controllers[e];r&&r.updateTransition()}}getViewports(e){return e?this._viewports.filter(r=>r.containsPixel(e)):this._viewports}getViews(){let e={};return this.views.forEach(r=>{e[r.id]=r}),e}getView(e){return typeof e=="string"?this.views.find(r=>r.id===e):e}getViewState(e){let r=this.getView(e),n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,r){let n=this.getViewports(),i={x:e[0],y:e[1]};for(let s=n.length-1;s>=0;--s){let o=n[s];if(o.containsPixel(i)){let a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,r)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,r){(e!==this.width||r!==this.height)&&(this.width=e,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Af(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!mr(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):V.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,r){r.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(r)}_createController(e,r){let n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height}),...r})}_updateController(e,r,n,i){let s=e.controller;return s?(s={...r,...e.props,...s,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height},i?i.setProps(s):i=this._createController(e,s),i):null}_rebuildViewports(){let{width:e,height:r,views:n}=this,i=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=n.length;o--;){let a=n[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:r,viewState:l}),u=i[a.id];a.controller&&!u&&(s=!0),(s||!a.controller)&&u&&(u.finalize(),u=null),this.controllers[a.id]=this._updateController(a,l,c,u),this._viewports.unshift(c)}for(let o in i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,r){return e.length!==r.length?!0:e.some((n,i)=>!e[i].equals(r[i]))}};var gR=/([0-9]+\.?[0-9]*)(%|px)/;function ol(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":let e=gR.exec(t);if(e&&e.length>=3){let r=e[2]==="%",n=parseFloat(e[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(t))}}function al(t,e){return t.relative?Math.round(t.position*e):t.position}function we(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}var Fi=class{constructor(e={}){let{id:r=null,x:n=0,y:i=0,width:s="100%",height:o="100%",viewportInstance:a,type:l=it}=e;we(!a||a instanceof it),this.viewportInstance=a,this.id=r||this.constructor.displayName||"view",this.type=l,this.props={...e,id:this.id},this._parseDimensions({x:n,y:i,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):mr(this.props,e.props)}makeViewport({width:e,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);let i=this.getDimensions({width:e,height:r});return this._getViewport(n,i)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;let r={...e};for(let n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return e}getDimensions({width:e,height:r}){return{x:al(this._x,e),y:al(this._y,r),width:al(this._width,e),height:al(this._height,r)}}_getControllerProps(e){let r=this.props.controller;return r?r===!0?e:(typeof r=="function"&&(r={type:r}),{...e,...r}):null}_getViewport(e,r){let{type:n}=this;return new n({...e,...this.props,...r})}_parseDimensions({x:e,y:r,width:n,height:i}){this._x=ol(e),this._y=ol(r),this._width=ol(n),this._height=ol(i)}};function bf(){}var vR={onStart:bf,onUpdate:bf,onInterrupt:bf,onEnd:bf},Lt=class{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings={...vR,...e},this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(this._handle===null){let{timeline:e,settings:r}=this;this._handle=e.addChannel({delay:e.getTime(),duration:r.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};var ll=()=>{},cl={BREAK:1,SNAP_TO_END:2,IGNORE:3},zE={transitionEasing:t=>t,transitionInterruption:cl.BREAK,onTransitionStart:ll,onTransitionInterrupt:ll,onTransitionEnd:ll},ul=class{constructor(e,r={}){this.ControllerState=e,this.props={...zE,...r},this.propsInTransition=null,this.transition=new Lt(r.timeline),this.onViewStateChange=r.onViewStateChange||ll,this.onStateChange=r.onStateChange||ll,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let r=!1,n=this.props;if(e={...zE,...e},this.props=e,this._shouldIgnoreViewportChange(n,e))return r;if(this._isTransitionEnabled(e)){let{interruption:i,endProps:s}=this.transition.settings,o={...n,...i===cl.SNAP_TO_END?s:this.propsInTransition||n};this._triggerTransition(o,e),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(e){let{transitionDuration:r,transitionInterpolator:n}=e;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,r){return this.transition.inProgress?this.transition.settings.interruption===cl.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(e,r):!0}_triggerTransition(e,r){let n=new this.ControllerState(e),i=new this.ControllerState(r).shortestPathFrom(n),{transitionInterpolator:s}=r,o=s.getDuration?s.getDuration(e,r):r.transitionDuration;if(o===0)return;let a=r.transitionInterpolator.initializeProps(e,i);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:r.transitionEasing,interpolator:r.transitionInterpolator,interruption:r.transitionInterruption,startProps:a.start,endProps:a.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(r)}}_onTransitionUpdate(e){let{time:r,settings:{interpolator:n,startProps:i,endProps:s,duration:o,easing:a}}=e,l=a(r/o),c=n.interpolateProps(i,s,l);this.propsInTransition=new this.ControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}};var fl=class{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});let{compare:r,extract:n,required:i}=e;this._propsToCompare=r,this._propsToExtract=n,this._requiredProps=i}arePropsEqual(e,r){for(let n of this._propsToCompare||Object.keys(r))if(!(n in e)||!(n in r)||!sr(e[n],r[n]))return!1;return!0}initializeProps(e,r){let n;if(this._propsToExtract){let i={},s={};for(let o of this._propsToExtract)i[o]=e[o],s[o]=r[o];n={start:i,end:s}}else n={start:e,end:r};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}interpolateProps(e,r,n){return r}getDuration(e,r){return r.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(r=>{let n=e[r];we(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}};var BE=["longitude","latitude","zoom","bearing","pitch"],yR=["longitude","latitude","zoom"],io=class extends fl{constructor(e={}){let r=Array.isArray(e)?e:e.transitionProps;super(r||{compare:BE,extract:BE,required:yR}),this.opts=e}initializeProps(e,r){let n=super.initializeProps(e,r),{makeViewport:i,around:s}=this.opts;if(i&&s){let o=i(e),a=i(r),l=o.unproject(s);n.start.around=s,Object.assign(n.end,{around:a.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(e,r,n){let i={};for(let s of this._propsToExtract)i[s]=Ai(e[s]||0,r[s]||0,n);if(r.aroundPosition){let s=this.opts.makeViewport({...r,...i});Object.assign(i,s.panByPosition(r.aroundPosition,Ai(e.around,r.around,n)))}return i}};var qn={transitionDuration:0},xR={transitionDuration:300,transitionEasing:t=>t,transitionInterruption:cl.BREAK},_R=300,Lf=t=>1-(1-t)*(1-t),so={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},zi=class{constructor(e,r={}){A(this,"ControllerState",void 0),A(this,"controllerState",null),A(this,"controllerStateProps",null),A(this,"transitionManager",void 0),A(this,"_transition",void 0),A(this,"_events",null),A(this,"eventManager",null),A(this,"_interactionState",{isDragging:!1}),A(this,"_customEvents",[]),A(this,"onViewStateChange",null),A(this,"onStateChange",null),A(this,"makeViewport",void 0),A(this,"_eventStartBlocked",void 0),A(this,"_state",void 0),A(this,"_panMove",void 0),A(this,"invertPan",void 0),A(this,"dragMode","rotate"),A(this,"inertia",0),A(this,"scrollZoom",!0),A(this,"dragPan",!0),A(this,"dragRotate",!0),A(this,"doubleClickZoom",!0),A(this,"touchZoom",!0),A(this,"touchRotate",!1),A(this,"keyboard",!0),this.ControllerState=e,this.transitionManager=new ul(e,{...r,onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)});let n=this.linearTransitionProps;this._transition=n&&{...xR,transitionInterpolator:new io({transitionProps:n})},this.handleEvent=this.handleEvent.bind(this),this.setProps(r)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(let e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){let{ControllerState:r}=this;this.controllerState=new r({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state});let n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){let{x:r,y:n}=this.controllerStateProps,{offsetCenter:i}=e;return[i.x-r,i.y-n]}isPointInBounds(e,r){let{width:n,height:i}=this.controllerStateProps;if(r&&r.handled)return!1;let s=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return s&&r&&r.stopPropagation(),s}isFunctionKeyPressed(e){let{srcEvent:r}=e;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){let r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=r}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:r}=e;r===!0&&(r=_R),this.inertia=r;let{scrollZoom:n=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=Boolean(this.onViewStateChange);this.toggleEvents(so.WHEEL,u&&n),this.toggleEvents(so.PAN,u&&(i||s)),this.toggleEvents(so.PINCH,u&&(a||l)),this.toggleEvents(so.TRIPLE_PAN,u&&l),this.toggleEvents(so.DOUBLE_TAP,u&&o),this.toggleEvents(so.KEYBOARD,u&&c),this.scrollZoom=n,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,r){this.eventManager&&e.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(e,r={},n={}){let i={...e.getViewportProps(),...r},s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(n),s){let o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||this.dragMode==="pan")&&(n=!n);let i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,qn,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;let r=this.getCenter(e),n=this.controllerState.pan({pos:r});return this.updateViewport(n,qn,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){let{inertia:r}=this;if(this.dragPan&&r&&e.velocity){let n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Lf},{isDragging:!1,isPanning:!0})}else{let n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;let r=this.getCenter(e),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,qn,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){let{inertia:r}=this;if(this.dragRotate&&r&&e.velocity){let n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Lf},{isDragging:!1,isRotating:!0})}else{let n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let{speed:n=.01,smooth:i=!1}=this.scrollZoom,{delta:s}=e,o=2/(1+Math.exp(-Math.abs(s*n)));s<0&&o!==0&&(o=1/o);let a=this.controllerState.zoom({pos:r,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,qn,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;let r=this.getCenter(e);r[0]-=e.deltaX;let n=this.controllerState.rotate({pos:r});return this.updateViewport(n,qn,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;let{inertia:r}=this;if(this.touchRotate&&r&&e.velocityY){let n=this.getCenter(e),i=[n[0],n[1]+=e.velocityY*r/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Lf},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{let n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(n,qn,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){let{scale:n}=e,i=this.getCenter(e);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){let{rotation:n}=e;r=r.rotate({deltaAngleX:this._startPinchRotation-n})}return this.updateViewport(r,qn,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;let{inertia:r,_lastPinchEvent:n}=this;if(this.touchZoom&&r&&n&&e.scale!==n.scale){let i=this.getCenter(e),s=this.controllerState.rotateEnd(),o=Math.log2(e.scale),a=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),l=Math.pow(2,o+a*r/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Lf},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{let i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;let r=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this,l,c={};switch(e.srcEvent.code){case"Minus":l=r?a.zoomOut(n).zoomOut(n):a.zoomOut(n),c.isZooming=!0;break;case"Equal":l=r?a.zoomIn(n).zoomIn(n):a.zoomIn(n),c.isZooming=!0;break;case"ArrowLeft":r?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":r?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":r?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":r?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){let{_transition:r}=this;return r?e?{...r,transitionInterpolator:new io({...e,transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport})}:r:qn}};var Bi=class{constructor(e){A(this,"_viewportProps",void 0),A(this,"_state",void 0),this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}};var UE=5,ER=1.2,wR={pitch:0,bearing:0,altitude:1.5,minZoom:0,maxZoom:20,minPitch:0,maxPitch:60,position:[0,0,0]},vg=class extends Bi{constructor(e){e={...wR,...e};let{makeViewport:r,width:n,height:i,latitude:s,longitude:o,zoom:a,bearing:l,pitch:c,altitude:u,position:h,maxZoom:f,minZoom:y,maxPitch:x,minPitch:_,startPanLngLat:T,startZoomLngLat:p,startRotatePos:m,startBearing:v,startPitch:w,startZoom:S,normalize:M}=e||{};we(Number.isFinite(o)),we(Number.isFinite(s)),we(Number.isFinite(a)),super({width:n,height:i,latitude:s,longitude:o,zoom:a,bearing:l,pitch:c,altitude:u,maxZoom:f,minZoom:y,maxPitch:x,minPitch:_,normalize:M,position:h}),this._state={startPanLngLat:T,startZoomLngLat:p,startRotatePos:m,startBearing:v,startPitch:w,startZoom:S},this.makeViewport=r}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:r}){let n=this._state.startPanLngLat||this._unproject(r);if(!n)return this;let s=this.makeViewport(this._viewportProps).panByPosition(n,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:r=0,deltaAngleY:n=0}){let{startRotatePos:i,startBearing:s,startPitch:o}=this._state;if(!i||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return e?a=this._calculateNewPitchAndBearing({...this._getRotationParams(e,i),startBearing:s,startPitch:o}):a={bearing:s+r,pitch:o+n},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:s}=this._state;Number.isFinite(i)||(i=this._viewportProps.zoom,s=this._unproject(r)||this._unproject(e));let o=this._calculateNewZoom({scale:n,startZoom:i}),a=this.makeViewport({...this._viewportProps,zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){let r=e.getViewportProps(),n={...this._viewportProps},{bearing:i,longitude:s}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(s-r.longitude)>180&&(n.longitude=s<0?s+360:s-360),n}_zoomFromCenter(e){let{width:r,height:n}=this._viewportProps;return this.zoom({pos:[r/2,n/2],scale:e})}_panFromCenter(e){let{width:r,height:n}=this._viewportProps;return this.pan({startPos:[r/2,n/2],pos:[r/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this._viewportProps,...this._state,...e})}_applyConstraints(e){let{maxZoom:r,minZoom:n,zoom:i}=e;e.zoom=Re(i,n,r);let{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Re(a,o,s);let{normalize:l=!0}=e;return l&&Object.assign(e,wf(e)),e}_unproject(e){let r=this.makeViewport(this._viewportProps);return e&&r.unproject(e)}_calculateNewZoom({scale:e,startZoom:r}){let{maxZoom:n,minZoom:i}=this._viewportProps,s=r+Math.log2(e);return Re(s,i,n)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:r,startBearing:n,startPitch:i}){r=Re(r,-1,1);let{minPitch:s,maxPitch:o}=this._viewportProps,a=n+180*e,l=i;return r>0?l=i+r*(o-i):r<0&&(l=i-r*(s-i)),{pitch:l,bearing:a}}_getRotationParams(e,r){let n=e[0]-r[0],i=e[1]-r[1],s=e[1],o=r[1],{width:a,height:l}=this._viewportProps,c=n/a,u=0;return i>0?Math.abs(l-o)>UE&&(u=i/(o-l)*ER):i<0&&o>UE&&(u=1-s/o),u=Math.min(1,Math.max(-1,u)),{deltaScaleX:c,deltaScaleY:u}}},hl=class extends zi{constructor(e){e.dragMode=e.dragMode||"pan",super(vg,e)}setProps(e){e.position=e.position||[0,0,0];let r=this.controllerStateProps;super.setProps(e),(!r||r.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state}))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch","position"]}};var oo=class extends Fi{constructor(e){super({...e,type:vt})}get controller(){return this._getControllerProps({type:hl})}};oo.displayName="MapView";var dl=class extends hr{constructor(e,r){super(e,r),A(this,"maskMap",void 0),A(this,"fbo",void 0);let{mapSize:n=2048}=r;this.maskMap=new K(e,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new Y(e,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(e){let r=this.gl,n=[!1,!1,!1,!1];return n[e.channel]=!0,ee(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return e.props.operation===cr.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}};var Zn={rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},If=class extends Bi{constructor({makeViewport:e,width:r,height:n,rotationX:i=Zn.rotationX,rotationOrbit:s=Zn.rotationOrbit,target:o=Zn.target,zoom:a=Zn.zoom,minRotationX:l=Zn.minRotationX,maxRotationX:c=Zn.maxRotationX,minZoom:u=Zn.minZoom,maxZoom:h=Zn.maxZoom,startPanPosition:f,startRotatePos:y,startRotationX:x,startRotationOrbit:_,startZoomPosition:T,startZoom:p}){super({width:r,height:n,rotationX:i,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:u,maxZoom:h}),this._state={startPanPosition:f,startRotatePos:y,startRotationX:x,startRotationOrbit:_,startZoomPosition:T,startZoom:p},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:r}){let n=this._state.startPanPosition||r;if(!n)return this;let s=this.makeViewport(this._viewportProps).panByPosition(n,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:e,deltaAngleX:r=0,deltaAngleY:n=0}){let{startRotatePos:i,startRotationX:s,startRotationOrbit:o}=this._state,{width:a,height:l}=this._viewportProps;if(!i||!Number.isFinite(s)||!Number.isFinite(o))return this;let c;if(e){let u=(e[0]-i[0])/a,h=(e[1]-i[1])/l;(s<-90||s>90)&&(u*=-1),c={rotationX:s+h*180,rotationOrbit:o+u*180}}else c={rotationX:s+n,rotationOrbit:o+r};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){let r=e.getViewportProps(),n={...this._viewportProps},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:r,scale:n}){let{zoom:i}=this._viewportProps,{startZoom:s,startZoomPosition:o}=this._state;Number.isFinite(s)||(s=i,o=this._unproject(r)||this._unproject(e));let a=this._calculateNewZoom({scale:n,startZoom:s}),l=this.makeViewport({...this._viewportProps,zoom:a});return this._getUpdatedState({zoom:a,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){let r=this.makeViewport(this._viewportProps);return e&&r.unproject(e)}_calculateNewZoom({scale:e,startZoom:r}){let{maxZoom:n,minZoom:i}=this._viewportProps;Number.isFinite(r)||(r=this._viewportProps.zoom);let s=r+Math.log2(e);return Re(s,i,n)}_panFromCenter(e){let{width:r,height:n,target:i}=this._viewportProps;return this.pan({startPosition:i,pos:[r/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({...this._viewportProps,...this._state,...e})}_applyConstraints(e){let{maxZoom:r,minZoom:n,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Re(i,n,r),e.rotationX=Re(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=LE(a+180,360)-180),e}};var yg=class extends If{constructor(e){super(e),A(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_applyConstraints(e){let{maxZoom:r,minZoom:n,zoom:i}=e;return e.zoom=Array.isArray(i)?[Re(i[0],n,r),Re(i[1],n,r)]:Re(i,n,r),e}_calculateNewZoom({scale:e,startZoom:r}){let{maxZoom:n,minZoom:i}=this._viewportProps;!r&&r!==0&&(r=this._viewportProps.zoom);let s=Math.log2(e);if(Array.isArray(r)){let[o,a]=r;switch(this.zoomAxis){case"X":o=Re(o+s,i,n);break;case"Y":a=Re(a+s,i,n);break;default:let l=Math.min(o+s,a+s);l<i&&(s+=i-l),l=Math.max(o+s,a+s),l>n&&(s+=n-l),o+=s,a+=s}return[o,a]}return Re(r+s,i,n)}},pl=class extends zi{constructor(e){e.dragMode=e.dragMode||"pan",super(yg,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}};var TR=new le().lookAt({eye:[0,0,1]});function MR({width:t,height:e,near:r,far:n}){return t=t||1,e=e||1,new le().ortho({left:-t/2,right:t/2,bottom:-e/2,top:e/2,near:r,far:n})}var xg=class extends it{constructor(e){let{width:r,height:n,near:i=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:l=!0}=e,c=Array.isArray(o)?o[0]:o,u=Array.isArray(o)?o[1]:o,h=Math.min(c,u),f=Math.pow(2,h),y;if(c!==u){let x=Math.pow(2,c),_=Math.pow(2,u);y={unitsPerMeter:[x/f,_/f,1],metersPerUnit:[f/x,f/_,1]}}super({...e,longitude:null,position:a,viewMatrix:TR.clone().scale([f,f*(l?-1:1),f]),projectionMatrix:MR({width:r,height:n,near:i,far:s}),zoom:h,distanceScales:y})}projectFlat([e,r]){let{unitsPerMeter:n}=this.distanceScales;return[e*n[0],r*n[1]]}unprojectFlat([e,r]){let{metersPerUnit:n}=this.distanceScales;return[e*n[0],r*n[1]]}panByPosition(e,r){let n=Or(r,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=ro([],i,Pf([],n)),o=ro([],this.center,s);return{target:this.unprojectFlat(o)}}},ao=class extends Fi{constructor(e){super({...e,type:xg})}get controller(){return this._getControllerProps({type:pl})}};ao.displayName="OrthographicView";function VE({layers:t,viewport:e}){let r=null;for(let s of t){let o=s.getBounds();o&&(r?(r[0]=Math.min(r[0],o[0][0]),r[1]=Math.min(r[1],o[0][1]),r[2]=Math.max(r[2],o[1][0]),r[3]=Math.max(r[3],o[1][1])):r=[o[0][0],o[0][1],o[1][0],o[1][1]])}let n=e.getBounds();if(!r)return n;let i=SR(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function jE({bounds:t,viewport:e,width:r,height:n}){if(t[2]<=t[0]||t[3]<=t[1])return null;let i=1;if(r-=i*2,n-=i*2,e instanceof vt){let{longitude:a,latitude:l,zoom:c}=Di({width:r,height:n,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new vt({longitude:a,latitude:l,zoom:c,x:i,y:i,width:r,height:n})}let s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,r/(t[2]-t[0]),n/(t[3]-t[1]));return new ao({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:s,zoom:Math.log2(o)}})}function SR(t){let e={x:t[2]-t[0],y:t[3]-t[1]},r={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[r.x-e.x,r.y-e.y,r.x+e.x,r.y+e.y]}var ml=class extends an{constructor(e){super(e),this.dummyMaskMap=null,this.useInPicking=!0,this.channels=[],this.masks=null}preRender(e,{layers:r,layerFilter:n,viewports:i,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new K(e,{width:1,height:1}));let a=r.filter(h=>h.props.operation===cr.MASK&&h.props.visible);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new dl(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);let l=this._sortMaskChannels(a),c=i[0],u=!this.lastViewport||!this.lastViewport.equals(c);for(let h in l)this._renderChannel(l[h],{layerFilter:n,onViewportActive:s,views:o,viewport:c,viewportChanged:u})}_renderChannel(e,{layerFilter:r,onViewportActive:n,views:i,viewport:s,viewportChanged:o}){let a=this.channels[e.index],l=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((c,u)=>c!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(l||o)&&(this.lastViewport=s,e.bounds=VE({layers:e.layers,viewport:s}),l||!sr(e.bounds,a.bounds))){let{maskPass:c,maskMap:u}=this,h=jE({bounds:e.bounds,viewport:s,width:u.width,height:u.height});e.maskBounds=h?h.getBounds():[0,0,1,1],c.render({channel:e.index,layers:e.layers,layerFilter:r,viewports:h?[h]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){let r={},n=0;for(let i of e){let{id:s}=i.root,o=r[s];if(!o){if(++n>4){V.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===s),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[s]=o}o.layers.push(i),o.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){let s=this.channels[i];(!s||!(s.id in r))&&(this.channels[i]=null)}for(let i in r){let s=r[i];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=null),this.maskPass&&(this.maskPass.delete(),this.maskPass=null,this.maskMap=null),this.lastViewport=null,this.masks=null,this.channels.length=0}};var PR=new Js,gl=class{constructor(){A(this,"effects",void 0),A(this,"_internalEffects",void 0),A(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!mr(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new ml),e.some(r=>r instanceof Js)||this._internalEffects.push(PR)}cleanup(){for(let e of this.effects)e.cleanup();for(let e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}};var vl=class extends hr{shouldDrawLayer(e){return e.props.operation===cr.DRAW}};var GE={blendFunc:[1,0,32771,0],blendEquation:32774},Ui=class extends hr{constructor(...e){super(...e),A(this,"pickZ",void 0),A(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},effects:h,pass:f="picking",pickZ:y}){let x=this.gl;this.pickZ=y;let _=y?null:{byLayer:new Map,byAlpha:[]};this._colors=_;let T=ee(x,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...GE,blend:!y},()=>super.render({target:o,layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:s,effects:h==null?void 0:h.filter(m=>m.useInPicking),pass:f}));return this._colors=null,{decodePickingColor:_&&bR.bind(null,_),stats:T}}shouldDrawLayer(e){return e.props.pickable&&e.props.operation===cr.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,r,n){let i={...e.props.parameters};return this._colors?(Object.assign(i,GE),i.blend=!0,i.blendColor=AR(this._colors,e,n)):i.blend=!1,i}};function AR(t,e,r){let{byLayer:n,byAlpha:i}=t,s,o=n.get(e);return o?(o.viewports.push(r),s=o.a):(s=n.size+1,s<=255?(o={a:s,layer:e,viewports:[r]},n.set(e,o),i[s]=o):(V.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function bR(t,e){let r=t.byAlpha[e[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(e)}}var LR="deckRenderer.renderLayers",yl=class{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new vl(e),this.pickLayersPass=new Ui(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){let r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||Y.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);let n=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=r.render({...e,target:n});this._postRender(e.effects,e),this.renderCount++,Se(LR,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){let{renderBuffers:e}=this;for(let r of e)r.delete();e.length=0}_preRender(e,r){let n=null;for(let i of e)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){let{renderBuffers:e}=this;e.length===0&&e.push(new Y(this.gl),new Y(this.gl));for(let r of e)r.resize()}_postRender(e,r){let{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(let s of e)if(s.postRender){if(s===this.lastPostProcessEffect){i.target=r.target,s.postRender(this.gl,i);break}let o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===n[0]?n[1]:n[0]}}};var IR={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function WE({pickedColors:t,decodePickingColor:e,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:s}){if(t){let{x:o,y:a,width:l,height:c}=s,u=i*i,h=-1,f=0;for(let y=0;y<c;y++){let x=y+a-n,_=x*x;if(_>u)f+=4*l;else for(let T=0;T<l;T++){if(t[f+3]-1>=0){let m=T+o-r,v=m*m+_;v<=u&&(u=v,h=f)}f+=4}}if(h>=0){let y=t.slice(h,h+4),x=e(y);if(x){let _=Math.floor(h/4/l),T=h/4-_*l;return{...x,pickedColor:y,pickedX:o+T,pickedY:a+_}}V.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return IR}function HE({pickedColors:t,decodePickingColor:e}){let r=new Map;if(t){for(let n=0;n<t.length;n+=4)if(t[n+3]-1>=0){let s=t.slice(n,n+4),o=s.join(",");if(!r.has(o)){let a=e(s);a?r.set(o,{...a,pickedColor:s}):V.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function _g({pickInfo:t,viewports:e,pixelRatio:r,x:n,y:i,z:s}){let o=e[0];e.length>1&&(o=RR((t==null?void 0:t.pickedViewports)||e,{x:n,y:i}));let a=o&&o.unproject([n-o.x,i-o.y,s]);return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:null,pixelRatio:r}}function YE(t){let{pickInfo:e,lastPickedInfo:r,mode:n,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(n==="hover"){let h=r.index,f=r.layerId,y=o&&o.props.id;if(y!==f||a!==h){if(y!==f){let x=i.find(_=>_.props.id===f);x&&l.unshift(x)}r.layerId=y,r.index=a,r.info=null}}let c=_g(t),u=new Map;return u.set(null,c),l.forEach(h=>{let f={...c};h===o&&(f.color=s,f.index=a,f.picked=!0),f=Eg({layer:h,info:f,mode:n}),h===o&&n==="hover"&&(r.info=f),u.set(f.layer.id,f),n==="hover"&&f.layer.updateAutoHighlight(f)}),u}function Eg({layer:t,info:e,mode:r}){for(;t&&e;){let n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:r,sourceLayer:n}),t=t.parent}return e}function RR(t,e){for(let r=t.length-1;r>=0;r--){let n=t[r];if(n.containsPixel(e))return n}return t[0]}var xl=class{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new Ui(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:r,layers:n,viewports:i},s=this.lastPickedInfo.info){let o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?n.find(f=>f.id===o):null,c=a&&i.find(f=>f.id===a)||i[0],u=c&&c.unproject([e-c.x,r-c.y]);return{...s,...{x:e,y:r,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){let{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new Y(e),Y.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new Y(e),this.depthFBO.attach({[36064]:new K(e,{format:B(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(this._pickable===!1)return null;let r=e.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:e,views:r,viewports:n,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:h}){if(e=this._getPickable(e),!e)return{result:[],emptyInfo:_g({viewports:n,x:i,y:s})};this._resizeBuffer();let f=rr(this.gl),y=Is(this.gl,[i,s],!0),x=[y.x+Math.floor(y.width/2),y.y+Math.floor(y.height/2)],_=Math.round(o*f),{width:T,height:p}=this.pickingFBO,m=this._getPickingRect({deviceX:x[0],deviceY:x[1],deviceRadius:_,deviceWidth:T,deviceHeight:p}),v,w=[],S=new Set;for(let M=0;M<a;M++){let I=m&&this._drawAndSample({layers:e,views:r,viewports:n,onViewportActive:u,deviceRect:m,effects:h,pass:"picking:".concat(l),redrawReason:l}),b=WE({...I,deviceX:x[0],deviceY:x[1],deviceRadius:_,deviceRect:m}),D;b.pickedLayer&&c&&this.depthFBO&&(D=this._drawAndSample({layers:[b.pickedLayer],views:r,viewports:n,onViewportActive:u,deviceRect:{x:b.pickedX,y:b.pickedY,width:1,height:1},effects:h,pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0}).pickedColors[0]),b.pickedLayer&&M+1<a&&(S.add(b.pickedLayer),b.pickedLayer.disablePickingIndex(b.pickedObjectIndex)),v=YE({pickInfo:b,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,viewports:n,x:i,y:s,z:D,pixelRatio:f});for(let C of v.values())C.layer&&w.push(C);if(!b.pickedColor)break}for(let M of S)M.restorePickingColors();return{result:w,emptyInfo:v&&v.get(null)}}_pickVisibleObjects({layers:e,views:r,viewports:n,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:h}){if(e=this._getPickable(e),!e)return[];this._resizeBuffer();let f=rr(this.gl),y=Is(this.gl,[i,s],!0),x=y.x,_=y.y+y.height,T=Is(this.gl,[i+o,s+a],!0),p=T.x+T.width,m=T.y,v={x,y:m,width:p-x,height:_-m},w=this._drawAndSample({layers:e,views:r,viewports:n,onViewportActive:u,deviceRect:v,effects:h,pass:"picking:".concat(l),redrawReason:l}),S=HE(w),M=new Map,I=Number.isFinite(c);for(let b=0;b<S.length&&!(I&&M.size>=c);b++){let D=S[b],C={color:D.pickedColor,layer:null,index:D.pickedObjectIndex,picked:!0,x:i,y:s,width:o,height:a,pixelRatio:f};C=Eg({layer:D.pickedLayer,info:C,mode:l}),M.has(C.object)||M.set(C.object,C)}return Array.from(M.values())}_drawAndSample({layers:e,views:r,viewports:n,onViewportActive:i,deviceRect:s,effects:o,pass:a,redrawReason:l,pickZ:c}){let u=c?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:u,deviceRect:s,effects:o,pass:a,redrawReason:l,pickZ:c}),{x:f,y,width:x,height:_}=s,T=new(c?Float32Array:Uint8Array)(x*_*4);return Kr(u,{sourceX:f,sourceY:y,sourceWidth:x,sourceHeight:_,target:T}),{pickedColors:T,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:s}){let o=Math.max(0,e-n),a=Math.max(0,r-n),l=Math.min(i,e+n+1)-o,c=Math.min(s,r+n+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}};var OR={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},_l=class{constructor(e){let r=e.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,OR),r.appendChild(this.el)),this.isVisible=!1}setTooltip(e,r,n){let i=this.el;if(typeof e=="string")i.innerText=e;else if(e)"text"in e&&(i.innerText=e.text),"html"in e&&(i.innerHTML=e.html),"className"in e&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}remove(){this.el&&this.el.remove()}};var pw=yt(gi());var El=yt($E());var CR={mousedown:1,mousemove:2,mouseup:4};function kR(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}function XE(t){let e=t.prototype.handler;t.prototype.handler=function(n){let i=this.store;n.button>0&&n.type==="pointerdown"&&(kR(i,s=>s.pointerId===n.pointerId)||i.push(n)),e.call(this,n)}}function qE(t){t.prototype.handler=function(r){let n=CR[r.type];n&1&&r.button>=0&&(this.pressed=!0),n&2&&r.which===0&&(n=4),this.pressed&&(n&4&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}XE(El.default.PointerEventInput);qE(El.default.MouseInput);var ZE=El.default.Manager,gr=El.default;var KE=gr?[[gr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[gr.Rotate,{enable:!1}],[gr.Pinch,{enable:!1}],[gr.Swipe,{enable:!1}],[gr.Pan,{threshold:0,enable:!1}],[gr.Press,{enable:!1}],[gr.Tap,{event:"doubletap",taps:2,enable:!1}],[gr.Tap,{event:"anytap",enable:!1}],[gr.Tap,{enable:!1}]]:null,wg={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},QE={doubletap:["tap"]},JE={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},lo={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},ew={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Tg={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};var tw=typeof navigator!="undefined"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Vi=typeof window!="undefined"?window:global;var Mg=!1;try{let t={get passive(){return Mg=!0,!0}};Vi.addEventListener("test",t,t),Vi.removeEventListener("test",t,t)}catch(t){}var NR=tw.indexOf("firefox")!==-1,{WHEEL_EVENTS:DR}=lo,rw="wheel",nw=4.000244140625,FR=40,zR=.25,wl=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.options=Object.assign({enable:!0},n),this.events=DR.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,Mg?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===rw&&(this.options.enable=r)}handleEvent(e){if(!this.options.enable)return;let r=e.deltaY;Vi.WheelEvent&&(NR&&e.deltaMode===Vi.WheelEvent.DOM_DELTA_PIXEL&&(r/=Vi.devicePixelRatio),e.deltaMode===Vi.WheelEvent.DOM_DELTA_LINE&&(r*=FR));let n={x:e.clientX,y:e.clientY};r!==0&&r%nw===0&&(r=Math.floor(r/nw)),e.shiftKey&&r&&(r=r*zR),this._onWheel(e,-r,n)}_onWheel(e,r,n){this.callback({type:rw,center:n,delta:r,srcEvent:e,pointerType:"mouse",target:e.target})}};var{MOUSE_EVENTS:BR}=lo,iw="pointermove",sw="pointerover",ow="pointerout",aw="pointerleave",Tl=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.pressed=!1,this.options=Object.assign({enable:!0},n),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=BR.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===iw&&(this.enableMoveEvent=r),e===sw&&(this.enableOverEvent=r),e===ow&&(this.enableOutEvent=r),e===aw&&(this.enableLeaveEvent=r)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this.callback({type:sw,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this.callback({type:ow,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this.callback({type:aw,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this.callback({type:iw,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1;break;default:}}};var{KEY_EVENTS:UR}=lo,lw="keydown",cw="keyup",Ml=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.options=Object.assign({enable:!0},n),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=UR.concat(n.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=n.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===lw&&(this.enableDownEvent=r),e===cw&&(this.enableUpEvent=r)}handleEvent(e){let r=e.target||e.srcElement;r.tagName==="INPUT"&&r.type==="text"||r.tagName==="TEXTAREA"||(this.enableDownEvent&&e.type==="keydown"&&this.callback({type:lw,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&e.type==="keyup"&&this.callback({type:cw,srcEvent:e,key:e.key,target:e.target}))}};var uw="contextmenu",Sl=class{constructor(e,r,n={}){this.element=e,this.callback=r,this.options=Object.assign({enable:!0},n),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,r){e===uw&&(this.options.enable=r)}handleEvent(e){!this.options.enable||this.callback({type:uw,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}};var VR={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},jR=1,GR=2,WR=3,HR=0,YR=1,$R=2,XR=1,qR=2,ZR=4;function fw(t){let e=VR[t.srcEvent.type];if(!e)return null;let{buttons:r,button:n,which:i}=t.srcEvent,s=!1,o=!1,a=!1;return e===4||e===2&&!Number.isFinite(r)?(s=i===jR,o=i===GR,a=i===WR):e===2?(s=Boolean(r&XR),o=Boolean(r&ZR),a=Boolean(r&qR)):e===1&&(s=n===HR,o=n===YR,a=n===$R),{leftButton:s,middleButton:o,rightButton:a}}function hw(t,e){let{srcEvent:r}=t;if(!t.center&&!Number.isFinite(r.clientX))return null;let n=t.center||{x:r.clientX,y:r.clientY},i=e.getBoundingClientRect(),s=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1,a={x:(n.x-i.left-e.clientLeft)/s,y:(n.y-i.top-e.clientTop)/o};return{center:n,offsetCenter:a}}var dw={srcElement:"root",priority:0},Pl=class{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,r,n,i=!1,s=!1){let{handlers:o,handlersByElement:a}=this;n&&(typeof n!="object"||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},dw,n):dw;let l=a.get(n.srcElement);l||(l=[],a.set(n.srcElement,l));let c={type:e,handler:r,srcElement:n.srcElement,priority:n.priority};i&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(e,r){let{handlers:n,handlersByElement:i}=this;for(let s=n.length-1;s>=0;s--){let o=n[s];if(o.type===e&&o.handler===r){n.splice(s,1);let a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=n.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;let r=this._normalizeEvent(e),n=e.srcEvent.target;for(;n&&n!==r.rootElement;){if(this._emit(r,n),r.handled)return;n=n.parentNode}this._emit(r,"root")}_emit(e,r){let n=this.handlersByElement.get(r);if(n){let i=!1,s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<n.length;l++){let{type:c,handler:u,once:h}=n[l];if(u(Object.assign({},e,{type:c,stopPropagation:s,stopImmediatePropagation:o})),h&&a.push(n[l]),i)break}for(let l=0;l<a.length;l++){let{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){let r=this.eventManager.element;return Object.assign({},e,fw(e),hw(e,r),{handled:!1,rootElement:r})}};var KR={events:null,recognizers:null,recognizerOptions:{},Manager:ZE,touchAction:"none",tabIndex:0},co=class{constructor(e=null,r={}){this.options=Object.assign({},KR,r),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);let{events:n}=r;n&&this.on(n)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;let{options:r}=this,n=r.Manager;this.manager=new n(e,{touchAction:r.touchAction,recognizers:r.recognizers||KE}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(wg).forEach(i=>{let s=this.manager.get(i);s&&wg[i].forEach(o=>{s.recognizeWith(o)})});for(let i in r.recognizerOptions){let s=this.manager.get(i);if(s){let o=r.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new wl(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Tl(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Ml(e,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new Sl(e,this._onOtherEvent,{enable:!1});for(let[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,r,n){this._addEventHandler(e,r,n,!1)}once(e,r,n){this._addEventHandler(e,r,n,!0)}watch(e,r,n){this._addEventHandler(e,r,n,!1,!0)}off(e,r){this._removeEventHandler(e,r)}_toggleRecognizer(e,r){let{manager:n}=this;if(!n)return;let i=n.get(e);if(i&&i.options.enable!==r){i.set({enable:r});let s=QE[e];s&&!this.options.recognizers&&s.forEach(o=>{let a=n.get(o);r?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,r),this.moveInput.enableEventType(e,r),this.keyInput.enableEventType(e,r),this.contextmenuInput.enableEventType(e,r)}_addEventHandler(e,r,n,i,s){if(typeof e!="string"){n=r;for(let u in e)this._addEventHandler(u,e[u],n,i,s);return}let{manager:o,events:a}=this,l=Tg[e]||e,c=a.get(l);c||(c=new Pl(this),a.set(l,c),c.recognizerName=ew[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,r,n,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,r){if(typeof e!="string"){for(let o in e)this._removeEventHandler(o,e[o]);return}let{events:n}=this,i=Tg[e]||e,s=n.get(i);if(!!s&&(s.remove(e,r),s.isEmpty())){let{recognizerName:o}=s,a=!1;for(let l of n.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){let{srcEvent:r}=e,n=JE[r.type];n&&this.manager.emit(n,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}};function ji(){}var QR=({isDragging:t})=>t?"grabbing":"grab";function JR(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(an)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,eventRecognizerOptions:t.object,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onInteractionStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool,_pickable:t.bool,_typedArrayManagerProps:t.object}}var mw={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:ji,onResize:ji,onViewStateChange:ji,onInteractionStateChange:ji,onBeforeRender:ji,onAfterRender:ji,onLoad:ji,onError:(t,e)=>V.error(t)(),_onMetrics:null,getCursor:QR,debug:!1,drawPickingColors:!1},cn=class{constructor(e){e={...mw,...e},this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&V.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),(0,pw.getBrowser)()==="IE"&&V.warn("IE 11 support will be deprecated in v8.0")(),e.gl||typeof document!="undefined"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new tr({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&dr.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&V.removed("onLayerHover","onHover")(),"onLayerClick"in e&&V.removed("onLayerClick","onClick")(),e.initialViewState&&!mr(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);let r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);let n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return r=r||n||i||s||o,r}redraw(e){if(!this.layerManager)return;let r=e||this.needsRedraw({clearRedrawFlags:!0});!r||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){let r=this._pick("pickObject","pickObject Time",e).result;return r.length?r[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,r=!1){for(let n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:r})}_removeResources(e){for(let r of e)this.layerManager.resourceManager.remove(r)}_pick(e,r,n){let{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();let s=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),s}_createCanvas(e){let r=e.canvas;return typeof r=="string"&&(r=document.getElementById(r),we(r)),r||(r=document.createElement("canvas"),r.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(r)),Object.assign(r.style,e.style),r}_setCanvasSize(e){if(!this.canvas)return;let{width:r,height:n}=e;(r||r===0)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.width=r),(n||n===0)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){let{width:e,height:r}=this;this.viewManager.setProps({width:e,height:r}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){let{canvas:e}=this;if(!e)return!1;let r=e.clientWidth||e.width,n=e.clientHeight||e.height;return r!==this.width||n!==this.height?(this.width=r,this.height=n,!0):!1}_createAnimationLoop(e){let{width:r,height:n,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u,autoResizeDrawingBuffer:h}=e;return new Si({width:r,height:n,useDevicePixels:u,autoResizeDrawingBuffer:h,autoResizeViewport:!1,gl:i,onCreateContext:f=>Rs({...s,...f,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new oo({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){let{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){let{_pickRequest:r}=this;if(e.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(e.leftButton||e.rightButton)return;{let n=e.offsetCenter;if(!n)return;r.x=n.x,r.y=n.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=e,r.mode="hover"}_pickAndCallback(){let{_pickRequest:e}=this;if(e.event){let{result:r,emptyInfo:n}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=r.length>0;let i=n,s=!1;for(let o of r)i=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip){let o=this.props.getTooltip(i);this.tooltip.setTooltip(o,i.x,i.y)}e.event=null}}_updateCursor(){let e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,_i(e,{enable:!0,copyState:!0})),this.tooltip=new _l(this.canvas),Be(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);let r=new Gn;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new co(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(let i in Jm)this.eventManager.on(i,this._onEvent);this.viewManager=new sl({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let n=this.viewManager.getViewports()[0];this.layerManager=new il(e,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new gl,this.deckRenderer=new yl(e),this.deckPicker=new xl(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,r){let{gl:n}=this.layerManager.context;Be(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),V.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){let r=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){let r=Jm[e.type],n=e.offsetCenter;if(!r||!n)return;let i=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:i,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[r.handler]||o.props[r.handler]),l=this.props[r.handler],c=!1;a&&(c=a.call(o,s,e)),!c&&l&&l(s,e)}_onPointerDown(e){let r=e.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo}_getFrameStats(){let{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();let r=this.animationLoop.stats;e.get("GPU Time").addTime(r.get("GPU Time").lastTiming),e.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){let{metrics:e,stats:r}=this;e.fps=r.get("frameRate").getHz(),e.setPropsTime=r.get("setProps Time").time,e.updateAttributesTime=r.get("Update Attributes").time,e.framesRedrawn=r.get("Redraw Count").count,e.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,e.pickCount=r.get("Pick Count").count,e.gpuTime=r.get("GPU Time").time,e.cpuTime=r.get("CPU Time").time,e.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=r.get("CPU Time").getAverageTime();let n=jt.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}};cn.getPropTypes=JR;cn.defaultProps=mw;cn.VERSION=Q2.VERSION;var Gi=class{constructor(e,r){this.opts=r,this.source=e}get value(){return this.source.value}getValue(){let e=this.source.getBuffer(),r=this.getAccessor();if(e)return[e,r];let{value:n}=this.source,{size:i}=r,s=n;if(n&&n.length!==i){s=new Float32Array(i);let o=r.elementOffset||0;for(let a=0;a<i;++a)s[a]=n[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}};function gw(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function Of(t){return t.stride||t.size*t.bytesPerElement}function vw(t,e){e.offset&&V.removed("shaderAttribute.offset","vertexOffset, elementOffset")();let r=Of(t),n="vertexOffset"in e?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=n*r+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:r}}function eO(t,e){let r=vw(t,e);return{high:r,low:{...r,offset:r.offset+t.size*4}}}var Al=class{constructor(e,r){this.gl=e,this.id=r.id,this.size=r.size;let n=r.logicalType||r.type,i=n===5130,{defaultValue:s}=r;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),r.defaultValue=s;let o=n;i?o=5126:!o&&r.isIndexed?o=e&&Aa(e,Q.ELEMENT_INDEX_UINT32)?5125:5123:o||(o=5126),r.logicalType=n,r.type=o;let a=gw(n||o||5126);this.shaderAttributes={},this.doublePrecision=i,i&&r.fp64===!1&&(a=Float32Array),r.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=r,this.state={externalBuffer:null,bufferAccessor:r,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null,this.setData(r)}get buffer(){if(!this._buffer){let{isIndexed:e,type:r}=this.settings;this._buffer=new G(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){let e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Of(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),dr.release(this.state.allocatedValue)}getShaderAttributes(e,r){if(this.doublePrecision){let n={},i=this.value instanceof Float64Array,s=eO(this.getAccessor(),r||{});return n[e]=new Gi(this,s.high),n["".concat(e,"64Low")]=i?new Gi(this,s.low):new Float32Array(this.size),n}if(r){let n=vw(this.getAccessor(),r);return{[e]:new Gi(this,n)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant){let r=this.value.slice();e=[r,r]}else{let{value:r,numInstances:n,size:i}=this,s=n*i;if(r&&s&&r.length>=s){let o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){let u=r[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){let{state:r}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof G&&(e={buffer:e});let n={...this.settings,...e};if(r.bufferAccessor=n,r.bounds=null,e.constant){let i=e.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this._normalizeConstant(i)),!(!r.constant||!this._areValuesEqual(i,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=i}else if(e.buffer){let i=e.buffer;r.externalBuffer=i,r.constant=!1,this.value=e.value;let s=e.value instanceof Float64Array;n.type=e.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(s?2:1),n.stride=Of(n)}else if(e.value){this._checkExternalBuffer(e);let i=e.value;r.externalBuffer=null,r.constant=!1,this.value=i,n.bytesPerElement=i.BYTES_PER_ELEMENT,n.stride=Of(n);let{buffer:s,byteOffset:o}=this;this.doublePrecision&&i instanceof Float64Array&&(i=Sf(i,n));let a=i.byteLength+o+n.stride*2;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:i,offset:o}),n.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;let{value:r}=this,{startOffset:n=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?Sf(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:r=!1}){let{state:n}=this,i=n.allocatedValue,s=dr.allocate(i,e+1,{size:this.size,type:this.defaultType,copy:r});this.value=s;let{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),r&&i&&o.subData({data:i instanceof Float64Array?Sf(i,this):i,offset:a})),n.allocatedValue=s,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){let{value:r}=e;if(!e.constant&&r){let n=this.defaultType,i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in e)&&V.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(e).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(e).map(r=>r/255);case 5123:return new Float32Array(e).map(r=>r/65535);default:return e}}_normalizeValue(e,r,n){let{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return r[n]=e,r;if(!e)return r[n]=i[0],r;switch(s){case 4:r[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:r[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:r[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:r[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)r[n+o]=Number.isFinite(e[o])?e[o]:i[o]}return r}_areValuesEqual(e,r){if(!e||!r)return!1;let{size:n}=this;for(let i=0;i<n;i++)if(e[i]!==r[i])return!1;return!0}};var yw=[],xw=[];function Cf(t,e=0,r=1/0){let n=yw,i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?n=t:t.length>0&&(xw.length=t.length,n=xw):n=yw,(e>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(e,r),i.index=e-1),{iterable:n,objectInfo:i}}function kf(t){return t&&t[Symbol.asyncIterator]}function Nf(t,e){let{size:r,stride:n,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=n?n/a:r,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(h,{index:f,target:y})=>{if(!s){let p=f*l+c;for(let m=0;m<r;m++)y[m]=t[p+m];return y}let x=s[f],_=s[f+1]||u,T;if(o){T=new Array(_-x);for(let p=x;p<_;p++){let m=p*l+c;y=new Array(r);for(let v=0;v<r;v++)y[v]=t[m+v];T[p-x]=y}}else if(l===r)T=t.subarray(x*r+c,_*r+c);else{T=new t.constructor((_-x)*r);let p=0;for(let m=x;m<_;m++){let v=m*l+c;for(let w=0;w<r;w++)T[p++]=t[v+w]}}return T}}var _w=[],bl=[[0,1/0]];function Ew(t,e){if(t===bl||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;let r=[],n=t.length,i=0;for(let s=0;s<n;s++){let o=t[s];o[1]<e[0]?(r.push(o),i=s+1):o[0]>e[1]?r.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return r.splice(i,0,e),r}function Sg(t){let{source:e,target:r,start:n=0,size:i,getData:s}=t,o=t.end||r.length,a=e.length,l=o-n;if(a>l){r.set(e.subarray(0,l),n);return}if(r.set(e,n),!s)return;let c=a;for(;c<l;){let u=s(c,e);for(let h=0;h<i;h++)r[n+c]=u[h]||0,c++}}function ww({source:t,target:e,size:r,getData:n,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return Sg({source:t,target:e,size:r,getData:n}),e;let o=0,a=0,l=n&&((u,h)=>n(u+a,h)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){let h=i[u]*r,f=s[u]*r;Sg({source:t.subarray(o,h),target:e,start:a,end:f,size:r,getData:l}),o=h,a=f}return a<e.length&&Sg({source:[],target:e,start:a,size:r,getData:l}),e}var rO={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function Df(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",{...rO[t.type],...e,...t}):null}function Ff(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function zf(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function Bf(t){t.push(t.shift())}function Ll(t,e){let{doublePrecision:r,settings:n,value:i,size:s}=t,o=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:e*s)*o}function Uf({buffer:t,numInstances:e,attribute:r,fromLength:n,fromStartIndices:i,getData:s=o=>o}){let o=r.doublePrecision&&r.value instanceof Float64Array?2:1,a=r.size*o,l=r.byteOffset,c=r.startIndices,u=i&&c,h=Ll(r,e),f=r.state.constant;if(!u&&n>=h)return;let y=f?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!f){let p=s;s=(m,v)=>r._normalizeConstant(p(m,v))}let x=f?(p,m)=>s(y,m):(p,m)=>s(y.subarray(p,p+a),m),_=t.getData({length:n}),T=new Float32Array(h);ww({source:_,target:T,sourceStartIndices:i,targetStartIndices:c,size:a,getData:x}),t.byteLength<T.byteLength+l&&t.reallocate(T.byteLength+l),t.subData({data:T,offset:l})}var un=class extends Al{constructor(e,r={}){super(e,r);let{transition:n=!1,noAlloc:i=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=r;Object.assign(this.settings,{transition:n,noAlloc:i,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:bl,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){let r=this.state.needsRedraw;return this.state.needsRedraw=r&&!e,r}getUpdateTriggers(){let{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;let{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?e[r.find(s=>e[s])]:e[r];return Df(i,n)}setNeedsUpdate(e=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),r){let{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=Ew(this.state.updateRanges,[n,i])}else this.state.updateRanges=bl}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=_w}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){let{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate({numInstances:e,copy:r.updateRanges!==bl}),!0):!1}updateBuffer({numInstances:e,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;let{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this,l=!0;if(o){for(let[c,u]of s)o.call(i,this,{data:r,startRow:c,endRow:u,props:n,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(let[c,u]of s){let h=Number.isFinite(c)?this.getVertexOffset(c):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){let{state:r}=this;return e?(this.clearNeedsUpdate(),r.lastExternalBuffer===e||(r.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(e,r=null){let{state:n,settings:i}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;if(n.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),i.transform||r!==this.startIndices){we(ArrayBuffer.isView(e.value),"invalid ".concat(i.accessor));let o=e.size&&e.size!==this.size;return n.binaryAccessor=Nf(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:r,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){let{startIndices:r}=this;return(r?r[e]:e)*this.size}getShaderAttributes(){let e=this.settings.shaderAttributes||{[this.id]:null},r={};for(let n in e)Object.assign(r,super.getShaderAttributes(n,e[n]));return r}_autoUpdater(e,{data:r,startRow:n,endRow:i,props:s,numInstances:o}){if(e.constant)return;let{settings:a,state:l,value:c,size:u,startIndices:h}=e,{accessor:f,transform:y}=a,x=l.binaryAccessor||(typeof f=="function"?f:s[f]);we(typeof x=="function",'accessor "'.concat(f,'" is not a function'));let _=e.getVertexOffset(n),{iterable:T,objectInfo:p}=Cf(r,n,i);for(let m of T){p.index++;let v=x(m,p);if(y&&(v=y.call(this,v)),h){let w=(p.index<h.length-1?h[p.index+1]:o)-h[p.index];if(v&&Array.isArray(v[0])){let S=_;for(let M of v)e._normalizeValue(M,c,S),S+=u}else v&&v.length>u?c.set(v,_):(e._normalizeValue(v,p.target,0),FE({target:c,source:p.target,start:_,count:w}));_+=w*u}else e._normalizeValue(v,c,_),_+=u}}_validateAttributeUpdaters(){let{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){let{value:e}=this,r=Math.min(4,this.size);if(e&&e.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}};var Il=class{constructor({gl:e,attribute:r,timeline:n}){this.gl=e,this.type="interpolation",this.transition=new Lt(n),this.attribute=r,this.attributeInTransition=new un(e,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=iO(e,r);let i={byteLength:0,usage:35050};this.buffers=[new G(e,i),new G(e,i)]}get inProgress(){return this.transition.inProgress}start(e,r){if(e.duration<=0){this.transition.cancel();return}let{gl:n,buffers:i,attribute:s}=this;Bf(i);let o={numInstances:r,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let a of i)Uf({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=Ll(s,r),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:Ff(n,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){let e=this.transition.update();if(e){let{time:r,settings:{duration:n,easing:i}}=this.transition,s=i(r/n);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},nO=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function iO(t,e){let r=zf(e.size);return new or(t,{vs:nO,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}var Rl=class{constructor({gl:e,attribute:r,timeline:n}){this.gl=e,this.type="spring",this.transition=new Lt(n),this.attribute=r,this.attributeInTransition=new un(e,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=oO(e),this.framebuffer=aO(e,this.texture),this.transform=sO(e,r,this.framebuffer);let i={byteLength:0,usage:35050};this.buffers=[new G(e,i),new G(e,i),new G(e,i)]}get inProgress(){return this.transition.inProgress}start(e,r){let{gl:n,buffers:i,attribute:s}=this,o={numInstances:r,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let a of i)Uf({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=Ll(s,r),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:Ff(n,s)}})}update(){let{buffers:e,transform:r,framebuffer:n,transition:i}=this;return i.update()?(r.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.settings.stiffness,damping:i.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Bf(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),Kr(n)[0]>0||i.end(),!0):!1}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}};function sO(t,e,r){let n=zf(e.size);return new or(t,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function oO(t){return new K(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function aO(t,e){return new Y(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}var lO={interpolation:Il,spring:Rl},Ol=class{constructor(e,{id:r,timeline:n}){this.id=r,this.gl=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=or.isSupported(e)}finalize(){for(let e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:r,numInstances:n}){this.numInstances=n||1;for(let i in e){let s=e[i],o=s.getTransitionSetting(r);!o||this._updateAttribute(i,s,o)}for(let i in this.transitions){let s=e[i];(!s||!s.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(e){let r=this.transitions[e];return r&&r.inProgress}getAttributes(){let e={};for(let r in this.transitions){let n=this.transitions[r];n.inProgress&&(e[r]=n.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(let r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);let e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,r,n){let i=this.transitions[e],s=!i||i.type!==n.type;if(s){if(!this.isSupported){V.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);let o=lO[n.type];o?this.transitions[e]=new o({attribute:r,timeline:this.timeline,gl:this.gl}):(V.error("unsupported transition type '".concat(n.type,"'"))(),s=!1)}(s||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}};var Tw="attributeManager.invalidate",cO="attributeManager.updateStart",uO="attributeManager.updateEnd",fO="attribute.updateStart",hO="attribute.allocate",dO="attribute.updateEnd",Cl=class{constructor(e,{id:r="attribute-manager",stats:n,timeline:i}={}){this.id=r,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Ol(e,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(let e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){let r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,r&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,r){this._add(e,r)}addInstanced(e,r){this._add(e,r,{instanced:1})}remove(e){for(let r=0;r<e.length;r++){let n=e[r];this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}}invalidate(e,r){let n=this._invalidateTrigger(e,r);Se(Tw,this,e,n)}invalidateAll(e){for(let r in this.attributes)this.attributes[r].setNeedsUpdate(r,e);Se(Tw,this,"all")}update({data:e,numInstances:r,startIndices:n=null,transitions:i,props:s={},buffers:o={},context:a={}}={}){let l=!1;Se(cO,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(let c in this.attributes){let u=this.attributes[c],h=u.settings.accessor;u.startIndices=n,u.numInstances=r,s[c]&&V.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(o[h],e.startIndices)||!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:r,data:e,props:s,context:a})),this.needsRedraw|=u.needsRedraw()}l&&Se(uO,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){let{attributeTransitionManager:e}=this,r=e.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){let{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(let s in r){let o=r[s];o.needsRedraw(e)&&!n.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,r={}){e||(e=this.getAttributes());let n={};for(let i in e)r[i]||Object.assign(n,e[i].getShaderAttributes());return n}getAccessors(){return this.updateTriggers}_add(e,r,n={}){r&&V.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(let i in e){let s=e[i];this.attributes[i]=this._createAttribute(i,s,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,r,n){let i={...r,id:e,isIndexed:r.isIndexed||r.elements||!1,constant:r.constant||!1,size:r.elements&&1||r.size||1,value:r.value||null,divisor:r.instanced||n.instanced?1:r.divisor||0};return new un(this.gl,i)}_mapUpdateTriggersToAttributes(){let e={};for(let r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(r)});this.updateTriggers=e}_invalidateTrigger(e,r){let{attributes:n,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{let a=n[o];a&&a.setNeedsUpdate(a.id,r)}),s}_updateAttribute(e){let{attribute:r,numInstances:n}=e;if(Se(fO,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Se(hO,r,n),r.updateBuffer(e)&&(this.needsRedraw=!0,Se(dO,r,n))}};var kl=class extends Lt{get value(){return this._value}_onUpdate(){let{time:e,settings:{fromValue:r,toValue:n,duration:i,easing:s}}=this,o=s(e/i);this._value=Ai(r,n,o)}};var Mw=1e-5;function Sw(t,e,r,n,i){let s=e-t,a=(r-e)*i,l=-s*n;return a+l+s+e}function pO(t,e,r,n,i){if(Array.isArray(r)){let s=[];for(let o=0;o<r.length;o++)s[o]=Sw(t[o],e[o],r[o],n,i);return s}return Sw(t,e,r,n,i)}function Pw(t,e){if(Array.isArray(t)){let r=0;for(let n=0;n<t.length;n++){let i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}return Math.abs(t-e)}var Nl=class extends Lt{get value(){return this._currValue}_onUpdate(){let{fromValue:e,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this,a=pO(s,o,r,n,i),l=Pw(a,r),c=Pw(a,o);l<Mw&&c<Mw&&(a=r,this.end()),this._prevValue=o,this._currValue=a}};var mO={interpolation:kl,spring:Nl},Dl=class{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,r,n,i){let{transitions:s}=this;if(s.has(e)){let l=s.get(e),{value:c=l.settings.fromValue}=l;r=c,this.remove(e)}if(i=Df(i),!i)return;let o=mO[i.type];if(!o){V.error("unsupported transition type '".concat(i.type,"'"))();return}let a=new o(this.timeline);a.start({...i,fromValue:r,toValue:n}),s.set(e,a)}remove(e){let{transitions:r}=this;r.has(e)&&(r.get(e).cancel(),r.delete(e))}update(){let e={};for(let[r,n]of this.transitions)n.update(),e[r]=n.value,n.inProgress||this.remove(r);return e}clear(){for(let e of this.transitions.keys())this.remove(e)}};function bw(t){let e=Ag(t);for(let r in e){let n=e[r],{validate:i}=n;if(i&&!i(t[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(t[r]))}}function Lw(t,e){let r=Iw({newProps:t,oldProps:e,propTypes:Ag(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=vO(t,e),i=!1;return n||(i=yO(t,e)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:xO(t,e),transitionsChanged:gO(t,e)}}function gO(t,e){if(!t.transitions)return null;let r={},n=Ag(t);for(let i in t.transitions){let s=n[i],o=s&&s.type;(o==="number"||o==="color"||o==="array")&&Pg(t[i],e[i],s)&&(r[i]=!0)}return r}function Iw({newProps:t,oldProps:e,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(e===t)return null;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(let s of Object.keys(t))if(!(s in r)){if(!(s in e))return"".concat(i,".").concat(s," added");let o=Pg(t[s],e[s],n[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(let s of Object.keys(e))if(!(s in r)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){let o=Pg(t[s],e[s],n[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return null}function Pg(t,e,r){let n=r&&r.equal;return n&&!n(t,e,r)||!n&&(n=t&&e&&t.equals,n&&!n.call(t,e))?"changed deeply":!n&&e!==t?"changed shallowly":null}function vO(t,e){if(e===null)return"oldProps is null, initial diff";let r=null,{dataComparator:n,_dataDiff:i}=t;return n?n(t.data,e.data)||(r="Data comparator detected a change"):t.data!==e.data&&(r="A new data container was supplied"),r&&i&&(r=i(t.data,e.data)||r),r}function yO(t,e){if(e===null)return"oldProps is null, initial diff";if("all"in t.updateTriggers&&Aw(t,e,"all"))return{all:!0};let r={},n=!1;for(let i in t.updateTriggers)i!=="all"&&Aw(t,e,i)&&(r[i]=!0,n=r);return n}function xO(t,e){if(e===null)return!0;let r=e.extensions,{extensions:n}=t;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function Aw(t,e,r){let n=t.updateTriggers[r];n=n==null?{}:n;let i=e.updateTriggers[r];return i=i==null?{}:i,Iw({oldProps:i,newProps:n,triggerName:r})}function Ag(t){let e=t[no],r=e&&e.constructor;return r?r._propTypes:{}}var _O="count(): argument not an object",EO="count(): argument not a container";function Rw(t){if(!TO(t))throw new Error(_O);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(wO(t))return Object.keys(t).length;throw new Error(EO)}function wO(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function TO(t){return t!==null&&typeof t=="object"}function Ow(t,e){if(!e)return t;let r={...t,...e};if("defines"in e&&(r.defines={...t.defines,...e.defines}),"modules"in e&&(r.modules=(t.modules||[]).concat(e.modules),e.modules.some(n=>n.name==="project64"))){let n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in e)if(!t.inject)r.inject=e.inject;else{let n={...t.inject};for(let i in e.inject)n[i]=(n[i]||"")+e.inject[i];r.inject=n}return r}var MO={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},bg={};function Cw(t,e){let r=t.context&&t.context.gl;if(!r||!e)return null;if(e instanceof K)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let n=null;e.compressed&&(n={[10241]:e.data.length>1?9985:9729});let i=new K(r,{...e,parameters:{...MO,...n,...t.props.textureParameters}});return bg[i.id]=!0,i}function kw(t){!t||!(t instanceof K)||bg[t.id]&&(t.delete(),delete bg[t.id])}var SO={boolean:{validate(t,e){return!0},equal(t,e,r){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||zl(t)&&(t.length===3||t.length===4)},equal(t,e,r){return Lg(t,e)}},accessor:{validate(t,e){let r=Vf(t);return r==="function"||r===Vf(e.value)},equal(t,e,r){return typeof e=="function"?!0:Lg(t,e)}},array:{validate(t,e){return e.optional&&!t||zl(t)},equal(t,e,r){return r.compare?Lg(t,e):t===e}},object:{equal(t,e,r){return r.compare?mr(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,r){return!r.compare||t===e}},data:{transform:(t,e,r)=>{let{dataTransform:n}=r.props;return n&&t?n(t):t}},image:{transform:(t,e,r)=>Cw(r,t),release:t=>{kw(t)}}};function Lg(t,e){if(t===e)return!0;if(!zl(t)||!zl(e))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Nw(t){let e={},r={},n={};for(let[i,s]of Object.entries(t)){let o=s==null?void 0:s.deprecatedFor;if(o)n[i]=Array.isArray(o)?o:[o];else{let a=PO(i,s);e[i]=a,r[i]=a.value}}return{propTypes:e,defaultProps:r,deprecatedProps:n}}function PO(t,e){switch(Vf(e)){case"object":return Fl(t,e);case"array":return Fl(t,{type:"array",value:e,compare:!1});case"boolean":return Fl(t,{type:"boolean",value:e});case"number":return Fl(t,{type:"number",value:e});case"function":return Fl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Fl(t,e){return"type"in e?{name:t,...SO[e.type],...e}:"value"in e?{name:t,type:Vf(e.value),...e}:{name:t,type:"object",value:e}}function zl(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Vf(t){return zl(t)?"array":t===null?"null":typeof t}function Dw(t,e){let r=Fw(t.constructor),n=Object.create(r);n[no]=t,n[Cr]={},n[pr]={};for(let i=0;i<e.length;++i){let s=e[i];for(let o in s)n[o]=s[o]}return Object.freeze(n),n}function Fw(t){let e=jf(t,"_mergedDefaultProps");return e||(AO(t),t._mergedDefaultProps)}function AO(t){if(!t.prototype)return;let r=Object.getPrototypeOf(t),n=Fw(r),i=jf(t,"defaultProps")||{},s=Nw(i),o=bO(s.defaultProps,n,t),a={...r._propTypes,...s.propTypes};IO(o,a);let l={...r._deprecatedProps,...s.deprecatedProps};LO(o,l),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=l}function bO(t,e,r){let n=Object.create(null);Object.assign(n,e,t);let i=OO(r);return delete t.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function LO(t,e){for(let r in e)Object.defineProperty(t,r,{enumerable:!1,set(n){let i="".concat(this.id,": ").concat(r);for(let s of e[r])zw(this,s)||(this[s]=n);V.deprecated(i,e[r].join("/"))()}})}function IO(t,e){let r={},n={};for(let i in e){let s=e[i],{name:o,value:a}=s;s.async&&(r[o]=a,n[o]=RO(o))}t[ln]=r,t[Cr]={},Object.defineProperties(t,n)}function RO(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||kf(e)?this[Cr][t]=e:this[pr][t]=e},get(){if(this[pr]){if(t in this[pr])return this[pr][t]||this[ln][t];if(t in this[Cr]){let e=this[no]&&this[no].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ln][t]}}return this[ln][t]}}}function zw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function jf(t,e){return zw(t,e)&&t[e]}function OO(t){let e=jf(t,"layerName")||jf(t,"componentName");return e||V.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}var CO=Object.freeze({}),Wi=class{constructor(e){A(this,"component",void 0),A(this,"onAsyncPropUpdated",void 0),A(this,"asyncProps",void 0),A(this,"oldProps",void 0),A(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(let e in this.asyncProps){let r=this.asyncProps[e];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||CO}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){let r=this.asyncProps[e];return r&&r.resolvedValue}isAsyncPropLoading(e){if(e){let r=this.asyncProps[e];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(let r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(e,r){this._watchPromise(e,Promise.resolve(r))}setAsyncProps(e){let r=e[pr]||{},n=e[Cr]||e,i=e[ln]||{};for(let s in r){let o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),r[s]=this.getAsyncProp(s)}for(let s in n){let o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,r){return r}_onResolve(e,r){}_onError(e,r){}_updateAsyncProp(e,r){if(!!this._didAsyncInputValueChange(e,r)){if(typeof r=="string"&&(r=this._fetch(e,r)),r instanceof Promise){this._watchPromise(e,r);return}if(kf(r)){this._resolveAsyncIterable(e,r);return}this._setPropValue(e,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(let e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,r){let n=this.asyncProps[e];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(e,r){this._freezeAsyncOldProps();let n=this.asyncProps[e];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,r,n){let i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,r))}_watchPromise(e,r){let n=this.asyncProps[e];if(n){n.pendingLoadCount++;let i=n.pendingLoadCount;r.then(s=>{s=this._postProcessValue(n,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,r){if(e!=="data"){this._setPropValue(e,r);return}let n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;let i=n.pendingLoadCount,s=[],o=0;for await(let a of r){let{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,r){let n=e.type;return n&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(e,r){if(!this.asyncProps[e]){let i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}};var kO=0,Hi=class{constructor(...e){A(this,"id",void 0),A(this,"props",void 0),A(this,"count",void 0),A(this,"lifecycle",void 0),A(this,"parent",void 0),A(this,"context",void 0),A(this,"state",void 0),A(this,"internalState",void 0),this.props=Dw(this,e),this.id=this.props.id,this.count=kO++,this.lifecycle=Xn.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}clone(e){let{props:r}=this,n={};for(let i in r[ln])i in r[pr]?n[i]=r[pr][i]:i in r[Cr]&&(n[i]=r[Cr][i]);return new this.constructor({...r,...n,...e})}_initState(){this.internalState=new Wi(this)}};A(Hi,"componentName","Component");A(Hi,"defaultProps",{});var Bl=class extends Wi{constructor({attributeManager:e,layer:r}){super(r),A(this,"attributeManager",void 0),A(this,"needsRedraw",void 0),A(this,"subLayers",void 0),A(this,"usesPickingColorCache",void 0),this.attributeManager=e,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,r){let n=this.component.props.fetch;return n?n(r,{propName:e,layer:this.layer}):super._fetch(e,r)}_onResolve(e,r){let n=this.component.props.onDataLoad;e==="data"&&n&&n(r,{propName:e,layer:this.layer})}_onError(e,r){this.layer.raiseError(r,"loading ".concat(e," of ").concat(this.layer))}};var NO="layer.changeFlag",DO="layer.initialize",FO="layer.update",zO="layer.finalize",BO="layer.matched",Bw=2**24-1,UO=Object.freeze([]),VO=Yn(({oldViewport:t,viewport:e})=>t.equals(e)),kr=new Uint8ClampedArray(0),jO={data:{type:"data",value:UO,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:r,loaders:n,loadOptions:i,signal:s})=>{let{resourceManager:o}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:$s(t,n),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>r.internalState.reloadAsyncProp(e,c),consumerId:r.id,requestId:e}):$s(t,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:cr.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:X.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Kn=class extends Hi{toString(){let e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}raiseError(e,r){var n,i;if(r&&(e.message="".concat(r,": ").concat(e.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(e=!0){this.internalState&&(this.internalState.needsRedraw=e)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(e){let{viewport:r}=this.context,n=gg(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=Qs(n,r.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){let{viewport:r}=this.context;return r.unproject(e)}projectPosition(e,r){return NE(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}use64bitPositions(){let{coordinateSystem:e}=this.props;return e===X.DEFAULT||e===X.LNGLAT||e===X.CARTESIAN}onHover(e,r){return this.props.onHover?this.props.onHover(e,r):!1}onClick(e,r){return this.props.onClick?this.props.onClick(e,r):!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,r=[]){return r[0]=e+1&255,r[1]=e+1>>8&255,r[2]=e+1>>8>>8&255,r}decodePickingColor(e){we(e instanceof Uint8Array);let[r,n,i]=e;return r+n*256+i*65536-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(e){for(let r of this.props.extensions)e=Ow(e,r.getShaders.call(this,r));return e}getBounds(){var e;let r=this.getAttributeManager();if(!r)return null;let{positions:n,instancePositions:i}=r.attributes;return(e=n||i)===null||e===void 0?void 0:e.getBounds()}shouldUpdateState({oldProps:e,props:r,context:n,changeFlags:i}){return i.propsOrDataChanged}updateState({oldProps:e,props:r,context:n,changeFlags:i}){let s=this.getAttributeManager();if(i.dataChanged&&s){let{dataChanged:l}=i;if(Array.isArray(l))for(let c of l)s.invalidateAll(c);else s.invalidateAll()}let o=Number.isInteger(e.highlightedObjectIndex)||e.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&s){let{pickingColors:l,instancePickingColors:c}=s.attributes,u=l||c;u&&(a&&u.constant&&(u.constant=!1,s.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(){for(let r of this.getModels())r.delete();let e=this.getAttributeManager();e&&e.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(e){for(let r of this.getModels())r.draw(e)}getPickingInfo({info:e,mode:r}){let{index:n}=e;return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}activateViewport(e){let r=this.internalState.viewport;this.internalState.viewport=e,(!r||!VO({oldViewport:r,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all",r=""){let n=this.getAttributeManager();!n||(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(let r of this.getModels())this._setModelAttributes(r,e)}_updateAttributes(e){let r=this.getAttributeManager();if(!r)return;let n=this.getNumInstances(e),i=this.getStartIndices(e);r.update({data:e.data,numInstances:n,startIndices:i,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});let s=r.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){let e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){let{uniformTransitions:e}=this.internalState;if(e.active){let r=e.update(),n=Object.create(this.props);for(let i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:r}){if(e.constant)return;let n=Math.floor(kr.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>Bw&&V.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),kr=dr.allocate(kr,r,{size:3,copy:!0,maxCount:Math.max(r,Bw)});let i=Math.floor(kr.length/3),s=[];for(let o=n;o<i;o++)this.encodePickingColor(o,s),kr[o*3+0]=s[0],kr[o*3+1]=s[1],kr[o*3+2]=s[2]}e.value=kr.subarray(0,r*3)}_setModelAttributes(e,r){let n=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=n.getShaderAttributes(r,i);e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){let{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n,s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){let{pickingColors:e,instancePickingColors:r}=this.getAttributeManager().attributes,n=e||r;this.internalState.usesPickingColorCache&&n.value.buffer!==kr.buffer&&(n.value=kr.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0})}getNumInstances(e){return e=e||this.props,e.numInstances!==void 0?e.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:Rw(e.data)}getStartIndices(e){return e=e||this.props,e.startIndices!==void 0?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){Se(DO,this),this._initState(),this.initializeState(this.context);for(let e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){let e=this.needsUpdate();Se(FO,this,e),e&&this._updateState()}_updateState(){let e=this.props,r=this.context.viewport,n=this._updateUniformTransition();this.internalState.propsInTransition=n,this.context.viewport=this.internalState.viewport||r,this.props=n;try{let i=this._getUpdateParams(),s=this.getModels();if(this.context.gl)this.updateState(i);else try{this.updateState(i)}catch(a){}for(let a of this.props.extensions)a.updateState.call(this,i,a);let o=this.getModels()[0]!==s[0];this._updateModules(i,o),this.isComposite?this._renderLayers(i):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=r,this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){Se(zO,this),this.finalizeState(this.context);for(let e of this.props.extensions)e.finalizeState.call(this,e)}drawLayer({moduleParameters:e=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();let i=this.props;this.props=this.internalState.propsInTransition||i;let{opacity:s}=this.props;r.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);let{getPolygonOffset:o}=this.props,a=o&&o(r)||[0,0];Be(this.context.gl,{polygonOffset:a}),ee(this.context.gl,n,()=>{let l={moduleParameters:e,uniforms:r,parameters:n,context:this.context};for(let c of this.props.extensions)c.draw.call(this,l,c);this.draw(l)})}finally{this.props=i}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(e){let{changeFlags:r}=this.internalState;for(let i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":Array.isArray(r[i])&&(r[i]=Array.isArray(e[i])?r[i].concat(e[i]):e[i],s=!0);default:r[i]||(r[i]=e[i],s=!0)}s&&Se(NO,this,i,e)}let n=r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged;r.propsOrDataChanged=n,r.somethingChanged=n||e.viewportChanged||e.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(e,r){let n=Lw(e,r);if(n.updateTriggersChanged)for(let i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(let i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,r[i],e[i],e.transitions[i]);return this.setChangeFlags(n)}validateProps(){bw(this.props)}setModuleParameters(e){for(let r of this.getModels())r.updateModuleSettings(e)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){let r={pickingSelectedColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(e)),this.setModuleParameters(r),this.setNeedsRedraw()}_updateModules({props:e,oldProps:r},n){let{autoHighlight:i,highlightedObjectIndex:s,highlightColor:o}=e;if(n||r.autoHighlight!==i||r.highlightedObjectIndex!==s||r.highlightColor!==o){let a={};i||(a.pickingSelectedColor=null),Array.isArray(o)&&(a.pickingHighlightColor=o),Number.isInteger(s)&&(a.pickingSelectedColor=s>=0?this.encodePickingColor(s):null),this.setModuleParameters(a)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;let n=this.getAttributeManager(),i=n&&n.getNeedsRedraw(e);return r=r||i,r}_getAttributeManager(){return new Cl(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){we(!this.internalState&&!this.state),we(isFinite(this.props.coordinateSystem));let e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Bl({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(V.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Dl(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(e){Se(BO,this,this===e);let{state:r,internalState:n}=e;this!==e&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}};Kn.layerName="Layer";Kn.defaultProps=jO;var uo=class{constructor(e={}){let{attributes:r={}}=e;this.typedArrayManager=dr,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.opts=e,this.updateGeometry(e),Object.seal(this)}updateGeometry(e){Object.assign(this.opts,e);let{data:r,buffers:n={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=n,this.normalize=l,s&&(we(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(n.positions=s)),this.geometryBuffer=n.positions,Array.isArray(a))for(let c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:r}){this._rebuildGeometry({startRow:e,endRow:r})}normalizeGeometry(e){return e}updateGeometryAttributes(e,r,n){throw new Error("Not implemented")}getGeometrySize(e){throw new Error("Not implemented")}getGeometryFromBuffer(e){let r=e.value||e;return we(ArrayBuffer.isView(r)),Nf(r,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}_allocate(e,r){let{attributes:n,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(let a in s)if(a in i)o.release(n[a]),n[a]=null;else{let l=s[a];l.copy=r,n[a]=o.allocate(n[a],e,l)}}_forEachGeometry(e,r,n){let{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=Cf(i,r,n);for(let l of o){a.index++;let c=s(l,a);e(c,a.index)}}_rebuildGeometry(e){if(!this.data||!this.getGeometry)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this,{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(r=[0],n=[0]),this.normalize||!o)this._forEachGeometry((h,f)=>{h=this.normalizeGeometry(h),c[f]=h,n[f+1]=n[f]+this.getGeometrySize(h)},a,l),i=n[n.length-1];else if(o.buffer instanceof G){let h=o.stride||this.positionSize*4;n=s.startIndices,i=n[s.length]||o.buffer.byteLength/h}else{let h=o.value||o,f=o.stride/h.BYTES_PER_ELEMENT||this.positionSize;n=s.startIndices,i=n[s.length]||h.length/f}this._allocate(i,Boolean(e)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;let u={};this._forEachGeometry((h,f)=>{h=c[f]||h,u.vertexStart=n[f],u.indexStart=r[f];let y=f<n.length-1?n[f+1]:i;u.geometrySize=y-n[f],u.geometryIndex=f,this.updateGeometryAttributes(h,u)},a,l),this.vertexCount=r[r.length-1]}};var Ig=85.05113;function Og(t,e,r,n){if(r){if(r.props.userData._googleMap===t)return r;Gf(r)}let i={click:null,dblclick:null,mousemove:null,mouseout:null};r=new cn({...n,style:n.interleaved?null:{pointerEvents:"none"},parent:GO(e,n.style),initialViewState:{longitude:0,latitude:0,zoom:1},controller:!1,userData:{_googleMap:t,_eventListeners:i}});for(let s in i)i[s]=t.addListener(s,o=>HO(r,s,o));return r}function GO(t,e){let r=document.createElement("div");return r.style.position="absolute",Object.assign(r.style,e),t.getPanes?t.getPanes().overlayLayer.appendChild(r):t.getMap().getDiv().appendChild(r),r}function Gf(t){let{_eventListeners:e}=t.props.userData;for(let r in e)e[r].remove();t.finalize()}function Uw(t,e){let{width:r,height:n}=Vw(t),i=e.getProjection(),s=t.getBounds(),o=s.getNorthEast(),a=s.getSouthWest(),l=i.fromLatLngToDivPixel(o),c=i.fromLatLngToDivPixel(a),u=new google.maps.Point(0,0),h=i.fromContainerPixelToLatLng(u),f=i.fromLatLngToDivPixel(h),y=f.x,x=f.y,_=i.getWorldWidth(),T=Math.ceil(r/_);y-=Math.floor(T/2)*_;let p=Rg(i,r/2,0),m=Rg(i,r/2,n/2),v=Rg(i,r/2,n),w=m[1],S=m[0];if(Math.abs(w)>Ig){w=w>0?Ig:-Ig;let j=new google.maps.LatLng(w,S);x+=i.fromLatLngToContainerPixel(j).y-n/2}let M=new jn(p).sub(v),I=180*M.verticalAngle()/Math.PI;I<0&&(I+=360);let b=t.getHeading()||0,D=t.getZoom()-1,C;if(I===0)C=n?(c.y-l.y)/n:1;else if(I===b){let j=new jn([l.x,l.y]).sub([c.x,c.y]).len(),W=new jn([r,-n]).len();C=W?j/W:1}return D+=Math.log2(C||1),{width:r,height:n,left:y,top:x,zoom:D,bearing:I,pitch:t.getTilt(),latitude:w,longitude:S}}function Cg(t,e){let{width:r,height:n}=Vw(t),{center:i,heading:s,tilt:o,zoom:a}=e.getCameraParams(),l=25,c=n?r/n:1,u=.75,h=3e14,f=new le().perspective({fovy:l*Math.PI/180,aspect:c,near:u,far:h}),y=.5*f[5];return{width:r,height:n,viewState:{altitude:y,bearing:s,latitude:i.lat(),longitude:i.lng(),pitch:o,projectionMatrix:f,repeat:!0,zoom:a-1}}}function Vw(t){let e=t.getDiv().firstChild;return{width:e.offsetWidth,height:e.offsetHeight}}function Rg(t,e,r){let n=new google.maps.Point(e,r),i=t.fromContainerPixelToLatLng(n);return[i.lng(),i.lat()]}function WO(t,e){if(t.pixel)return t.pixel;let r=e.getViewports()[0].project([t.latLng.lng(),t.latLng.lat()]);return{x:r[0],y:r[1]}}function HO(t,e,r){let n={type:e,offsetCenter:WO(r,t),srcEvent:r};switch(e){case"click":t._lastPointerDownInfo=t.pickObject({...n.offsetCenter,radius:t.props.pickingRadius}),n.tapCount=1,t._onEvent(n);break;case"dblclick":n.type="click",n.tapCount=2,t._onEvent(n);break;case"mousemove":n.type="pointermove",t._onPointerMove(n);break;case"mouseout":n.type="pointerleave",t._onPointerMove(n);break;default:return}}var YO=()=>!1,$O={depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],blendEquation:32774};function jw(){}var XO={interleaved:!0},fo=class{constructor(e){this.props={},this._map=null,this.setProps({...XO,...e})}setMap(e){if(e!==this._map&&(this._map&&(this._overlay.setMap(null),this._map=null),e)){this._map=e;let{UNINITIALIZED:r}=google.maps.RenderingType;e.getRenderingType()!==r?this._createOverlay(e):e.addListener("renderingtype_changed",()=>{this._createOverlay(e)})}}setProps(e){Object.assign(this.props,e),this._deck&&(e.style&&(Object.assign(this._deck.canvas.parentElement.style,e.style),e.style=null),this._deck.setProps(e))}pickObject(e){return this._deck&&this._deck.pickObject(e)}pickMultipleObjects(e){return this._deck&&this._deck.pickMultipleObjects(e)}pickObjects(e){return this._deck&&this._deck.pickObjects(e)}finalize(){this.setMap(null),this._deck&&(Gf(this._deck),this._deck=null)}_createOverlay(e){let{interleaved:r}=this.props,{VECTOR:n,UNINITIALIZED:i}=google.maps.RenderingType,s=e.getRenderingType();if(s===i)return;let o=s===n&&google.maps.WebGLOverlayView,a=o?google.maps.WebGLOverlayView:google.maps.OverlayView,l=new a;o?(r?(l.onAdd=jw,l.onContextRestored=this._onContextRestored.bind(this),l.onDraw=this._onDrawVectorInterleaved.bind(this)):(l.onAdd=this._onAdd.bind(this),l.onContextRestored=jw,l.onDraw=this._onDrawVectorOverlay.bind(this)),l.onContextLost=this._onContextLost.bind(this)):(l.onAdd=this._onAdd.bind(this),l.draw=this._onDrawRaster.bind(this)),l.onRemove=this._onRemove.bind(this),this._overlay=l,this._overlay.setMap(e)}_onAdd(){this._deck=Og(this._map,this._overlay,this._deck,this.props)}_onContextRestored({gl:e}){let r=()=>{this._overlay.requestRedraw()},n=Og(this._map,this._overlay,this._deck,{gl:e,_customRender:r,...this.props});this._deck=n,n.animationLoop._renderFrame=()=>{let i=e.getParameter(34964);ee(e,{},()=>{n.animationLoop.onRender()}),e.bindBuffer(34962,i)}}_onContextLost(){this._deck&&(Gf(this._deck),this._deck=null)}_onRemove(){this._deck.setProps({layerFilter:YO})}_onDrawRaster(){let e=this._deck,{width:r,height:n,left:i,top:s,...o}=Uw(this._map,this._overlay),a=e.canvas.parentElement.style;a.left="".concat(i,"px"),a.top="".concat(s,"px");let l=1e4;e.setProps({width:r,height:n,viewState:{altitude:l,repeat:!0,...o}}),e.redraw()}_onDrawVectorInterleaved({gl:e,transformer:r}){if(!this._deck||!this._map)return;let n=this._deck;if(n.setProps({...Cg(this._map,r),width:!1,height:!1}),n.layerManager){let i=Ls(e,36006);n.setProps({_framebuffer:i}),n.needsRedraw({clearRedrawFlags:!0}),Be(e,{viewport:[0,0,e.canvas.width,e.canvas.height],scissor:[0,0,e.canvas.width,e.canvas.height],stencilFunc:[519,0,255,519,0,255]}),ee(e,$O,()=>{n._drawLayers("google-vector",{clearCanvas:!1})})}}_onDrawVectorOverlay({gl:e,transformer:r}){if(!this._deck||!this._map)return;let n=this._deck;n.setProps({...Cg(this._map,r)}),n.redraw()}};function Yi(t,e){let r=e.length,n=t.length;if(n>0){let i=!0;for(let s=0;s<r;s++)if(t[n-r+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)t[n+i]=e[i];return!0}function Wf(t,e){let r=e.length;for(let n=0;n<r;n++)t[n]=e[n]}function Ul(t,e,r,n,i=[]){let s=n+e*r;for(let o=0;o<r;o++)i[o]=t[s+o];return i}function kg(t,e,r,n,i=[]){let s,o;if(r&8)s=(n[3]-t[1])/(e[1]-t[1]),o=3;else if(r&4)s=(n[1]-t[1])/(e[1]-t[1]),o=1;else if(r&2)s=(n[2]-t[0])/(e[0]-t[0]),o=2;else if(r&1)s=(n[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?n[o]:s*(e[a]-t[a])+t[a];return i}function Hf(t,e){let r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function Vl(t,e={}){let{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e,l=(a-o)/r,c=[],u=[c],h=Ul(t,0,r,o),f,y,x=KO(h,i,s,[]),_=[];Yi(c,h);for(let T=1;T<l;T++){for(f=Ul(t,T,r,o,f),y=Hf(f,x);y;){kg(h,f,y,x,_);let p=Hf(_,x);p&&(kg(h,_,p,x,_),y=p),Yi(c,_),Wf(h,_),QO(x,i,y),n&&c.length>r&&(c=[],u.push(c),Yi(c,h)),y=Hf(f,x)}Yi(c,f),Wf(h,f)}return n?u:u[0]}function KO(t,e,r,n){let i=Math.floor((t[0]-r[0])/e)*e+r[0],s=Math.floor((t[1]-r[1])/e)*e+r[1];return n[0]=i,n[1]=s,n[2]=i+e,n[3]=s+e,n}function QO(t,e,r){r&8?(t[1]+=e,t[3]+=e):r&4?(t[1]-=e,t[3]-=e):r&2?(t[0]+=e,t[2]+=e):r&1&&(t[0]-=e,t[2]-=e)}function Ng(t,e={}){let{size:r=2,startIndex:n=0,endIndex:i=t.length,normalize:s=!0}=e,o=t.slice(n,i);eC(o,r,0,i-n);let a=Vl(o,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(let l of a)tC(l,r);return a}function eC(t,e,r,n){let i=t[0],s;for(let o=r;o<n;o+=e){s=t[o];let a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function tC(t,e){let r,n=t.length/e;for(let s=0;s<n&&(r=t[s*e],(r+180)%360===0);s++);let i=-Math.round(r/360)*360;if(i!==0)for(let s=0;s<n;s++)t[s*e]+=i}function Ww(t,e,r,n){let i=t;if(Array.isArray(t[0])){let s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}return r?Vl(i,{size:e,gridResolution:r}):n?Ng(i,{size:e}):i}var nC=1,iC=2,Dg=4,jl=class extends uo{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):()=>null}normalizeGeometry(e){return this.normalize?Ww(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}get(e){return this.attributes[e]}getGeometrySize(e){if(Array.isArray(e[0])){let n=0;for(let i of e)n+=this.getGeometrySize(i);return n}let r=this.getPathLength(e);return r<2?0:this.isClosed(e)?r<3?0:r+2:r}updateGeometryAttributes(e,r){if(r.geometrySize!==0)if(e&&Array.isArray(e[0]))for(let n of e){let i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(e,r),this._updatePositions(e,r)}_updateSegmentTypes(e,r){let{segmentTypes:n}=this.attributes,i=this.isClosed(e),{vertexStart:s,geometrySize:o}=r;n.fill(0,s,s+o),i?(n[s]=Dg,n[s+o-2]=Dg):(n[s]+=nC,n[s+o-2]+=iC),n[s+o-1]=Dg}_updatePositions(e,r){let{positions:n}=this.attributes;if(!n)return;let{vertexStart:i,geometrySize:s}=r,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),n[a*3]=o[0],n[a*3+1]=o[1],n[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,r,n=[]){let{positionSize:i}=this;r*i>=e.length&&(r+=1-e.length/i);let s=r*i;return n[0]=e[s],n[1]=e[s+1],n[2]=i===3&&e[s+2]||0,n}isClosed(e){if(!this.normalize)return this.opts.loop;let{positionSize:r}=this,n=e.length-r;return e[0]===e[n]&&e[1]===e[n+1]&&(r===2||e[2]===e[n+2])}};var Hw=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var Yw=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var $w=[0,0,0,255],sC={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:$w},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Fg={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},fn=class extends Kn{getShaders(){return super.getShaders({vs:Hw,fs:Yw,modules:[xf,Tf]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Fg,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Fg,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Fg,defaultValue:$w},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:s})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,s)}}),this.setState({pathTesselator:new jl({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&V.removed("getDashArray","PathStyleExtension")()}updateState({oldProps:e,props:r,changeFlags:n}){super.updateState({props:r,oldProps:e,changeFlags:n});let i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){let{pathTesselator:a}=this.state,l=r.data.attributes||{};a.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var o;let{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){let r=super.getPickingInfo(e),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(s=>s.__source.index===n)),r}disablePickingIndex(e){let{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else this._disablePickingIndex(e)}draw({uniforms:e}){let{jointRounded:r,capRounded:n,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Xs[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){let r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new rn(e,{...this.getShaders(),id:this.props.id,geometry:new Ii({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(e){let{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("positions")}calculateSegmentTypes(e){let{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("segmentTypes")}};fn.layerName="PathLayer";fn.defaultProps=sC;var oC=new google.maps.DirectionsService,Yf=new google.maps.DirectionsRenderer({suppressBicyclingLayer:!0,hideRouteList:!0,polylineOptions:{strokeColor:"#259b24"},markerOptions:{animation:google.maps.Animation.DROP}}),aC=new google.maps.ElevationService,lC={walking:"pedestrian",bicycling:"bicycle",driving:"car-side"},$f={width:400,barWidth:2},cC={metric:"km",imperial:"miles"},zg={metric:"m",imperial:"ft"},Xf=new google.maps.Marker({visible:!1,clickable:!1,zIndex:1e3}),uC=t=>{Xf.setPosition(t),Xf.setVisible(!0)},fC=()=>{Xf.setVisible(!1)},qf=new google.maps.Marker({visible:!1,label:"A",clickable:!1,zIndex:500}),Zf=new google.maps.Marker({visible:!1,label:"B",clickable:!1,zIndex:500}),ho=({type:t,...e})=>k.default.createElement("svg",{className:"icon",...e},k.default.createElement("use",{xlinkHref:`assets/icons.svg#icon-${t}`})),Bg=t=>t*3.28084,hC=t=>t*.001,dC=t=>t*621371e-9,pC=({onInit:t=()=>{}})=>{let e=(0,k.useRef)();return(0,k.useEffect)(()=>{let r=new google.maps.Map(e.current,{center:new google.maps.LatLng(37.7577,-122.4376),zoom:12,mapId:"f7422a246595028",disableDefaultUI:!0,zoomControl:!0});t(r)},[]),k.default.createElement("div",{ref:e,id:"map-canvas"})},mC=(t,e)=>{let r=!1,n=document.createElement("button");n.className="control-3d",n.innerHTML="3D",t.appendChild(n),e.addListener("bounds_changed",()=>{let i=e.getTilt(),s=e.getHeading();i<=10&&s<=10?(r=!1,n.innerHTML="3D"):(r=!0,n.innerHTML="2D")}),n.addEventListener("click",()=>{r=!r;let i=e.getZoom();e.setTilt(r?45:0),e.setHeading(r?-45:0),e.setZoom(r?i+1:i-1)})},gC=({width:t,height:e,data:r,domain:n,onBarMouseEnter:i=()=>{},onBarMouseLeave:s=()=>{},onBarClick:o=()=>{}})=>k.default.createElement("div",{className:"chart",style:{width:t,height:r?e:0}},(r||[]).map((a,l)=>k.default.createElement("div",{key:`${l}-${a.value}`,style:{borderBottomWidth:e*a.value/n[1]},onMouseEnter:()=>{i(l)},onMouseLeave:()=>{s()},onClick:()=>{o(l)}},k.default.createElement("span",null,a.title)))),vC=({route:t,selected:e,renderingType:r,travelMode:n,longestDistance:i,unitSystem:s,overlayRef:o,onClick:a=()=>{}})=>{var I;let[l,c]=(0,k.useState)([]);(0,k.useEffect)(()=>{let b=t.overview_path,D=t.legs[0].distance.value,C=Math.round(D/i*($f.width/$f.barWidth));aC.getElevationAlongPath({path:b,samples:C},(j,W)=>{W===google.maps.ElevationStatus.OK?(console.log({elevations:j}),c(j)):c([])})},[t]),(0,k.useEffect)(()=>{r===google.maps.RenderingType.VECTOR&&(!e||(qf.setPosition(t.overview_path[0]),qf.setVisible(!0),Zf.setPosition(t.overview_path[t.overview_path.length-1]),Zf.setVisible(!0)))},[t,e,r]),(0,k.useEffect)(()=>{if(r!==google.maps.RenderingType.VECTOR||!l.length||!e)return;let b=t.overview_path.map(j=>[j.lng(),j.lat()]);o.current._map.fitBounds(t.bounds,{top:60,right:70,bottom:30,left:50});let D=[],C=[];l.forEach(j=>{let{location:W,elevation:ie}=j,U=W.lng(),Ht=W.lat();D.push([U,Ht,ie]),C.push({path:[[U,Ht,0],[U,Ht,ie]]})}),console.log({overlay:o.current,routePath:b,elevatedRoute:D,elevationPolls:C}),o.current.setProps({layers:[new fn({id:"route",data:[{path:b}],widthUnits:"pixels",widthScale:3,capRounded:!0,jointRounded:!0,getColor:[37,155,36]}),new fn({id:`elevated-route-${t.summary}`,data:[{path:D},...C],widthUnits:"pixels",widthScale:1,capRounded:!0,jointRounded:!0,getColor:[37,155,36,150],billboard:!0,updateTriggers:{data:l}})]})},[t,e,l,r]);let u=t.legs[0],h=u.distance.value,f=Math.ceil(h/i*$f.width)/$f.width*100,y=0,x=1/0,_=(I=l[0])==null?void 0:I.elevation,T=0,p=0;l.forEach(({elevation:b})=>{b>_&&(T+=b-_),b<_&&(p+=_-b),_=b,b>y&&(y=b),b<x&&(x=b)});let m=[0,y],v=Math.round((y-x)*.25),w=!!T&&k.default.createElement("span",null,k.default.createElement(ho,{type:"arrow-graph-up-right",width:"14",height:"14",title:"Rise"})," ",Math.round(s==="metric"?T:Bg(T))+" "+zg[s]),S=!!p&&k.default.createElement("span",null,k.default.createElement(ho,{type:"arrow-graph-down-right",width:"14",height:"14",title:"Drop"})," ",Math.round(s==="metric"?p:Bg(p))+" "+zg[s]),M=b=>{if(b){let{location:D}=l[b];uC(D)}else fC()};return k.default.createElement("div",{className:e?"selected":"",onClick:e?()=>{}:a},k.default.createElement("div",{className:"heading"},k.default.createElement(ho,{type:lC[n],width:"24",height:"24",title:n})," ","via ",t.summary),k.default.createElement(gC,{data:l.map(({elevation:b})=>({value:b,title:`${Math.round(s==="metric"?b:Bg(b))} ${zg[s]}`})),domain:m,width:`${f}%`,height:v,onBarMouseEnter:M,onBarMouseLeave:M,onBarClick:b=>{let{location:D}=l[b],C=o.current._map;C.panTo(D),C.getZoom()<17&&C.setZoom(17)}}),k.default.createElement("div",{className:"stats"},w,"\xA0\xA0\xA0",S),k.default.createElement("div",{className:"metadata"},u.duration.text,"\xA0\xA0\xA0",(s==="metric"?hC(h):dC(h)).toFixed(2)," ",cC[s]))},yC=()=>{let[t,e]=(0,k.useState)("walking"),[r,n]=(0,k.useState)(localStorage["steepless:unitSystem"]||"metric"),[i,s]=(0,k.useState)([]),[o,a]=(0,k.useState)(0),[l,c]=(0,k.useState)(null),[u,h]=(0,k.useState)(null),f=(0,k.useRef)(),y=(0,k.useRef)(),x=(0,k.useRef)();(0,k.useEffect)(()=>{let p=()=>{let m=location.hash.slice(1);if(!m)return;let[v,w,S]=m.split("/").map(decodeURIComponent);v&&e(v),w&&(f.current.value=w),S&&(y.current.value=S),c(null),w&&S&&oC.route({origin:w,destination:S,travelMode:google.maps.TravelMode[v.toUpperCase()],provideRouteAlternatives:!0,unitSystem:google.maps.UnitSystem.METRIC},(M,I)=>{if(I===google.maps.DirectionsStatus.OK){let{routes:b}=M;console.log({response:M}),s(b),a(0),Yf.setDirections(M)}else s([]),c({status:I})})};p(),window.addEventListener("hashchange",p)},[]);let _=(0,k.useCallback)(p=>{p==null||p.preventDefault();let m=f.current.value,v=y.current.value,w=`${t}/${encodeURIComponent(m)}/${encodeURIComponent(v)}`;location.hash=w},[t]),T=(0,k.useMemo)(()=>!i||!i.length?0:Math.max(...i.map(p=>p.legs[0].distance.value)),[i]);return k.default.createElement("div",null,k.default.createElement(pC,{onInit:p=>{Xf.setMap(p);let m=new google.maps.places.Autocomplete(f.current);m.bindTo("bounds",p),m.addListener("place_changed",_);let v=new google.maps.places.Autocomplete(y.current);v.bindTo("bounds",p),v.addListener("place_changed",_),p.addListener("renderingtype_changed",w=>{let S=p.getRenderingType();if(h(S),S===google.maps.RenderingType.VECTOR){Yf.setMap(null),qf.setMap(p),Zf.setMap(p);let M=document.createElement("div");mC(M,p),p.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(M),(x.current=new fo({_pickable:!1,_typedArrayManagerProps:{overAlloc:1,poolSize:0}})).setMap(p)}else Yf.setMap(p),qf.setMap(null),Zf.setMap(null)})}}),k.default.createElement("div",{id:"sidebar"},k.default.createElement("header",null,k.default.createElement("h1",null,k.default.createElement(ho,{type:"mountains",width:"24",height:"24"})," Steepless")),k.default.createElement("form",{id:"directions-form",onSubmit:_},k.default.createElement("div",{class:"form-fields"},k.default.createElement("div",{className:"field-section"},k.default.createElement("label",null,k.default.createElement("select",{value:t,onChange:p=>{let{value:m}=p.target,v=f.current.value,w=y.current.value;v&&w?location.hash=`${m}/${v}/${w}`:e(m)}},k.default.createElement("option",{value:"walking"},"Walking"),k.default.createElement("option",{value:"bicycling"},"Cycling"),k.default.createElement("option",{value:"driving"},"Driving"))," ","from"),k.default.createElement("input",{ref:f,id:"directions-start",placeholder:"Start",required:!0})),k.default.createElement("a",{href:f.current&&y.current?`#${t}/${encodeURIComponent(y.current.value.trim())}/${encodeURIComponent(f.current.value.trim())}`:"#",id:"flip-direction",title:"Flip origin and destination",tabIndex:"-1"},k.default.createElement(ho,{type:"arrow-right",width:"14",height:"14"})),k.default.createElement("div",{className:"field-section"},k.default.createElement("label",{htmlFor:"directions-end"},"To"),k.default.createElement("input",{ref:y,id:"directions-end",placeholder:"Destination",required:!0}))),k.default.createElement("div",{className:"form-footer"},k.default.createElement("div",{className:"options"},k.default.createElement(ho,{type:"widget",width:"20",height:"20",title:"Settings"}),k.default.createElement("span",null,k.default.createElement("label",null,"Units\xA0",k.default.createElement("select",{value:r,onChange:p=>{let{value:m}=p.target;localStorage["steepless:unitSystem"]=m,n(m)}},k.default.createElement("option",{value:"metric"},"Metric (km, m)"),k.default.createElement("option",{value:"imperial"},"Imperial (miles, ft)"))))),k.default.createElement("button",null,"Go"))),k.default.createElement("div",{id:"routes-container"},(i==null?void 0:i.length)>0&&k.default.createElement("ul",{id:"routes-list"},i.map((p,m)=>k.default.createElement("li",{key:`${m}${p.summary}`},k.default.createElement(vC,{route:p,renderingType:u,travelMode:t,unitSystem:r,longestDistance:T,selected:m===o,onClick:()=>{a(m),Yf.setRouteIndex(m)},overlayRef:x})))),!!(l!=null&&l.status)&&k.default.createElement("p",null,l.status==="ZERO_RESULTS"?"Oops, there are no routes found.":"Oooops, something is wrong. Please try again later or change the locations."),!l&&!(i!=null&&i.length)&&k.default.createElement(k.default.Fragment,null,k.default.createElement("p",null,"Begin by entering the Start and Destination locations above."),k.default.createElement("p",null,"Try an example:"," ",k.default.createElement("a",{href:"#walking/Chinatown, SF/Twin Peaks, SF"},"Walking from Chinatown to Twin Peaks"))))))};Xw.default.render(k.default.createElement(yC,null),document.getElementById("app"));})();
//# sourceMappingURL=steepless.js.map
